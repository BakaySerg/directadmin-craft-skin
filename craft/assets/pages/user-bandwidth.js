(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[4852],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/line-chart.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var a=s("./src/js/components/local/history/base-charts.js"),o={extends:a.Line,mixins:[a.reactiveProp],props:["chart","options"],mounted:function(){this.renderChart(this.chartData,this.options)}};t.Z=o},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/bandwidth.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.symbol.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),s("./node_modules/core-js/modules/es.object.define-properties.js"),s("./node_modules/core-js/modules/es.object.define-property.js");var a=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var o=a(s("./node_modules/@babel/runtime/helpers/defineProperty.js"));s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.parse-int.js");var r=a(s("./src/js/api/commands/bandwidth.js")),n=a(s("./src/js/components/local/line-chart.vue"));function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){(0,o.default)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={preload:r.default,api:[{command:r.default,bind:"breakdown"}],components:{LineChart:n.default},props:{year:{type:String,required:!0},month:{type:String,required:!0}},data:function(){return{showAs:"table"}},computed:{entries:function(){return this.$api.breakdown.rows},total:function(){return this.$api.breakdown.total},columns:function(){var e=[{id:"day",label:this.$gettext("Day"),editable:!1}];return e.push({id:"http",label:this.$gettext("Apache")}),e.push({id:"email",label:this.$gettext("E-mails (Incoming / Outgoing)")}),e.push({id:"ftp",label:this.$gettext("FTP")}),e.push({id:"pop",label:this.$gettext("POP")}),e.push({id:"imap",label:this.$gettext("IMAP")}),e.push({id:"da",label:this.$gettext("Direct Admin")}),e.push({id:"other",label:this.$gettext("Other")}),e.push({id:"total",label:this.$gettext("Total")}),e},chartData:function(){return{labels:this.entries.map((function(e){return e.day})),datasets:[i(i({label:this.$gettext("Total")},this.datasetOptions("rgba(255, 99, 132, 1)")),this.datasetData("total")),i(i({label:this.$gettext("Apache")},this.datasetOptions("rgba(1, 147, 202, 1)")),this.datasetData("http")),i(i({label:this.$gettext("E-mails")},this.datasetOptions("rgba(228, 91, 0, 1)")),this.datasetData("email")),i(i({label:this.$gettext("FTP")},this.datasetOptions("rgba(93, 195, 127, 1)")),this.datasetData("ftp")),i(i({label:this.$gettext("POP")},this.datasetOptions("rgba(52, 56, 60, 1)")),this.datasetData("pop")),i(i({label:this.$gettext("IMAP")},this.datasetOptions("rgba(0, 131, 180, 1)")),this.datasetData("imap")),i(i({label:this.$gettext("Direct Admin")},this.datasetOptions("rgba(198, 208, 218, 1)")),this.datasetData("da")),i(i({label:this.$gettext("Other")},this.datasetOptions("rgba(95, 111, 129, 1)")),this.datasetData("Other"))]}},chartOptions:function(){var e=this;return{scales:{y:{ticks:{callback:function(t){return e.getHumanReadableVolume(t)}}}},plugins:{legend:{onClick:function(){}},tooltip:{enabled:!0,mode:"nearest",intersect:!1,padding:10,titleFont:{family:"Open Sans"},bodyFont:{family:"Open Sans"},footerFont:{family:"Open Sans",size:10},displayColors:!1,callbacks:{title:function(t){return"".concat(t[0].label," ").concat(e.getMonthName(e.month)," ").concat(e.year)},label:function(t){var s=t.datasetIndex,a=t.raw,o=[e.$gettext("Total"),e.$gettext("Apache"),e.$gettext("E-mails"),e.$gettext("FTP"),e.$gettext("POP"),e.$gettext("IMAP"),e.$gettext("Direct Admin"),e.$gettext("Other")][s];return 0!==a?"".concat(o,": ").concat(e.getHumanReadableVolume(a)):""}}}}}}},methods:{datasetOptions:function(e){return{backgroundColor:e.replace("1)","0.2)"),borderColor:e,pointBackgroundColor:e,borderWidth:2,pointRadius:2,pointHitRadius:20,fill:!1,tension:.4}},datasetData:function(e){return{data:this.entries.map((function(t){return t[e]}))}},getMonthName:function(e){return[this.$gettext("January"),this.$gettext("February"),this.$gettext("March"),this.$gettext("April"),this.$gettext("May"),this.$gettext("June"),this.$gettext("July"),this.$gettext("August"),this.$gettext("September"),this.$gettext("October"),this.$gettext("November"),this.$gettext("December")][parseInt(e,10)-1]},getHumanReadableVolume:function(e){return this.$options.filters.humanReadableSize(e)}}};t.Z=u},"./src/js/api/commands/bandwidth.js":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var a=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.regexp.to-string.js"),s("./node_modules/core-js/modules/es.promise.js");var o=a(s("./src/js/api/command/index.js")),r=o.default.get({id:"BANDWIDTH_BREAKDOWN",url:"/CMD_BANDWIDTH_BREAKDOWN",response:[],schema:{month:o.default.OPTIONAL_STRING,year:o.default.OPTIONAL_STRING,user:o.default.OPTIONAL_STRING},before:function(e){var t=new Date,s=(t.getMonth()+1).toString(),a=t.getFullYear().toString();return void 0===e.month||e.month===s&&e.year===a?{user:e.user,month:null,year:null}:e},after:function(e){return e.flow(e.wrap("rows"),e.moveProp("rows.total","total"),e.mapProp("rows",e.flow(e.deleteProps(["simpletotal","month","year"]),e.toArray,e.mapArray(e.mapValues(e.convert.toAppNumber)))),e.mapProp("total",e.mapValues(e.convert.toAppNumber)))}});t.default=r},"./src/js/components/local/history/base-charts.js":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.array.from.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.symbol.js"),s("./node_modules/core-js/modules/es.symbol.description.js"),s("./node_modules/core-js/modules/es.symbol.iterator.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),s("./node_modules/core-js/modules/es.object.define-properties.js"),s("./node_modules/core-js/modules/es.object.define-property.js");var a=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.Line=void 0,t.generateChart=c,t.reactiveProp=t.reactiveData=void 0;var o=a(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),r=a(s("./node_modules/@babel/runtime/helpers/toConsumableArray.js"));s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.index-of.js");var n=s("./node_modules/chart.js/dist/chart.esm.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){(0,o.default)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t){var s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!s){if(Array.isArray(e)||(s=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);"Object"===s&&e.constructor&&(s=e.constructor.name);if("Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){s&&(e=s);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,l=!1;return{s:function(){s=s.call(e)},n:function(){var e=s.next();return n=e.done,e},e:function(e){l=!0,r=e},f:function(){try{n||null==s.return||s.return()}finally{if(l)throw r}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,a=new Array(t);s<t;s++)a[s]=e[s];return a}function c(e,t){return{render:function(e){return e("div",{style:this.styles,class:this.cssClasses},[e("canvas",{attrs:{id:this.chartId,width:this.width,height:this.height},ref:"canvas"})])},props:{chartId:{default:e,type:String},width:{default:400,type:Number},height:{default:400,type:Number},cssClasses:{type:String,default:""},styles:{type:Object},plugins:{type:Array,default:function(){return[]}}},data:function(){return{_chart:null}},created:function(){n.Chart.register.apply(n.Chart,(0,r.default)(n.registerables))},methods:{renderChart:function(e,s){this.$data._chart&&this.$data._chart.destroy();var a=s;if(this.plugins.length>0){var o,r=u(this.plugins);try{for(r.s();!(o=r.n()).done;){var l=o.value;a.plugins=i(i({},a.plugins),l)}}catch(e){r.e(e)}finally{r.f()}}this.$data._chart=new n.Chart(this.$refs.canvas.getContext("2d"),{type:t,data:e,options:a})}},beforeDestroy:function(){this.$data._chart&&this.$data._chart.destroy()}}}function p(e,t){if(t){var s=this.$data._chart,a=e.datasets.map((function(e){return e.label})),o=t.datasets.map((function(e){return e.label})),r=JSON.stringify(o);JSON.stringify(a)===r&&t.datasets.length===e.datasets.length?(e.datasets.forEach((function(e,a){var o=Object.keys(t.datasets[a]),r=Object.keys(e),n=o.filter((function(e){return"_meta"!==e&&-1===r.indexOf(e)}));for(var l in n.forEach((function(e){delete s.data.datasets[a][e]})),e)e.hasOwnProperty(l)&&(s.data.datasets[a][l]=e[l])})),e.hasOwnProperty("labels")&&(s.data.labels=e.labels,this.$emit("labels:update")),s.update(),this.$emit("chart:update")):(s&&(s.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render"))}else this.$data._chart&&(this.$data._chart.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render")}var m={data:function(){return{chartData:null}},watch:{chartData:p}};t.reactiveData=m;var h={props:{chartData:{type:Object,required:!0,default:function(){}}},watch:{chartData:p}};t.reactiveProp=h;var f=c("line-chart","line");t.Line=f},"./src/js/components/local/line-chart.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return a.X},default:function(){return r}});var a=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/line-chart.vue?vue&type=script&lang=js&"),o=a.Z,r=(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(o,undefined,undefined,!1,null,null,null).exports},"./src/js/pages/user/bandwidth.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return a.X},default:function(){return u}});var a=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/bandwidth.vue?vue&type=script&lang=js&"),o=a.Z,r=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),n=s("./src/js/pages/user/bandwidth.vue?vue&type=custom&index=0&blockType=route"),l=s.n(n),i=(0,r.Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page",[s("translate",{attrs:{slot:"page:title","translate-params":{month:e.getMonthName(e.month),year:e.year}},slot:"page:title"},[e._v("\n        Bandwidth Breakdown for %{month} %{year}\n    ")]),e._v(" "),s("app-page-section",{directives:[{name:"flex",rawName:"v-flex",value:{main:"between"},expression:"{ main: 'between' }"}],staticClass:"filters"},[s("div",{directives:[{name:"gutter",rawName:"v-gutter",value:[1,null],expression:"[1, null]"}]},[s("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"},{name:"gutter",rawName:"v-gutter",value:[null,1],expression:"[null, 1]"}]},[s("translate",{attrs:{tag:"strong"}},[e._v("\n                    Show As:\n                ")]),e._v(" "),s("input-radio",{attrs:{value:"table"},model:{value:e.showAs,callback:function(t){e.showAs=t},expression:"showAs"}},[s("translate",[e._v("Table")])],1),e._v(" "),s("input-radio",{attrs:{value:"chart"},model:{value:e.showAs,callback:function(t){e.showAs=t},expression:"showAs"}},[s("translate",[e._v("Chart")])],1)],1)])]),e._v(" "),s("transition",{attrs:{name:"fadeBounce"}},["table"===e.showAs?s("app-page-section",[s("ui-r-table",e._b({scopedSlots:e._u([{key:"col:http",fn:function(t){var s=t.http;return[e._v("\n                    "+e._s(e._f("humanReadableSize")(s))+"\n                ")]}},{key:"col:email",fn:function(t){var s=t.email,a=t.email_count_incoming,o=t.email_count_outgoing;return[e._v("\n                    "+e._s(e._f("humanReadableSize")(s))+"\n                    ("+e._s(a)+" / "+e._s(o)+")\n                ")]}},{key:"col:ftp",fn:function(t){var s=t.ftp;return[e._v("\n                    "+e._s(e._f("humanReadableSize")(s))+"\n                ")]}},{key:"col:pop",fn:function(t){var s=t.pop;return[e._v("\n                    "+e._s(e._f("humanReadableSize")(s))+"\n                ")]}},{key:"col:imap",fn:function(t){var s=t.imap;return[e._v("\n                    "+e._s(e._f("humanReadableSize")(s))+"\n                ")]}},{key:"col:da",fn:function(t){var s=t.da;return[e._v("\n                    "+e._s(e._f("humanReadableSize")(s))+"\n                ")]}},{key:"col:other",fn:function(t){var s=t.other;return[e._v("\n                    "+e._s(e._f("humanReadableSize")(s))+"\n                ")]}},{key:"col:total",fn:function(t){var s=t.total;return[e._v("\n                    "+e._s(e._f("humanReadableSize")(s))+"\n                ")]}}],null,!1,1514703394)},"ui-r-table",{rows:e.entries,columns:e.columns,isCheckable:!1,isSortable:!0,disablePagination:!0,equalWidthLayout:!0,verticalLayout:e.$_Client.isPhone},!1),[e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),s("translate",{staticClass:"txt:bold",attrs:{slot:"col:after:day"},slot:"col:after:day"},[e._v("\n                    Total\n                ")]),e._v(" "),s("span",{staticClass:"txt:bold",attrs:{slot:"col:after:http"},slot:"col:after:http"},[e._v("\n                    "+e._s(e._f("humanReadableSize")(e.total.http))+"\n                ")]),e._v(" "),s("span",{staticClass:"txt:bold",attrs:{slot:"col:after:email"},slot:"col:after:email"},[e._v("\n                    "+e._s(e._f("humanReadableSize")(e.total.email))+"\n                    ("+e._s(e.total.email_count_incoming)+" / "+e._s(e.total.email_count_outgoing)+")\n                ")]),e._v(" "),s("span",{staticClass:"txt:bold",attrs:{slot:"col:after:ftp"},slot:"col:after:ftp"},[e._v("\n                    "+e._s(e._f("humanReadableSize")(e.total.ftp))+"\n                ")]),e._v(" "),s("span",{staticClass:"txt:bold",attrs:{slot:"col:after:pop"},slot:"col:after:pop"},[e._v("\n                    "+e._s(e._f("humanReadableSize")(e.total.pop))+"\n                ")]),e._v(" "),s("span",{staticClass:"txt:bold",attrs:{slot:"col:after:imap"},slot:"col:after:imap"},[e._v("\n                    "+e._s(e._f("humanReadableSize")(e.total.imap))+"\n                ")]),e._v(" "),s("span",{staticClass:"txt:bold",attrs:{slot:"col:after:da"},slot:"col:after:da"},[e._v("\n                    "+e._s(e._f("humanReadableSize")(e.total.da))+"\n                ")]),e._v(" "),s("span",{staticClass:"txt:bold",attrs:{slot:"col:after:other"},slot:"col:after:other"},[e._v("\n                    "+e._s(e._f("humanReadableSize")(e.total.other))+"\n                ")]),e._v(" "),s("span",{staticClass:"txt:bold",attrs:{slot:"col:after:total"},slot:"col:after:total"},[e._v("\n                    "+e._s(e._f("humanReadableSize")(e.total.total))+"\n                ")])],1)],1):s("app-page-section",[s("line-chart",e._b({},"line-chart",{chartData:e.chartData,options:e.chartOptions},!1))],1)],1)],1)}),[],!1,null,null,null);"function"==typeof l()&&l()(i);var u=i.exports},"./src/js/pages/user/bandwidth.vue?vue&type=custom&index=0&blockType=route":function(){}}]);