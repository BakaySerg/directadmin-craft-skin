(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{1739:function(t,e,a){"use strict";a.r(e);var n=a(3940),o=a(2186);for(var s in o)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(s);a(3299);var r=a(0),l=a(3301),i=a.n(l),u=Object(r.a)(o.default,n.a,n.b,!1,null,null,null);"function"==typeof i.a&&i()(u),e.default=u.exports},2186:function(t,e,a){"use strict";a.r(e);var n=a(2187),o=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e.default=o.a},2187:function(t,e,a){"use strict";a(16),a(14),a(23),a(25),a(18),a(6);var n=a(1),o=a(19);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a(85);var s=n(a(36)),r=n(a(37)),l=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!=typeof t)return{default:t};var a=i(e);if(a&&a.has(t))return a.get(t);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if("default"!==r&&Object.prototype.hasOwnProperty.call(t,r)){var l=s?Object.getOwnPropertyDescriptor(t,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=t[r]}n.default=t,a&&a.set(t,n);return n}(a(3298));function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,a=new WeakMap;return(i=function(t){return t?a:e})(t)}var u,d,c={preload:[l.getProcesses,l.getDefaults],api:[{command:l.getProcesses,bind:{"response.info":"info",isLoading:"loading"}},{command:l.getDefaults,bind:"defaults"}],commands:l,data:function(){return{reloadInfo:{enabled:!1,delay:"15",left:0,timer:null},rootpass:""}},methods:{reload:function(){return this.$refs.table.reloadTable()},loadInfoManually:(d=(0,r.default)(s.default.mark((function t(){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.clearTimer(),t.next=3,this.reload();case 3:this.reloadInfo.enabled&&this.startReload();case 4:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)}),toggleReload:function(){this.reloadInfo.enabled=!this.reloadInfo.enabled,this.clearTimer(),this.reloadInfo.enabled&&this.startReload()},clearTimer:function(){this.reloadInfo.left=0,this.reloadInfo.timer&&clearTimeout(this.reloadInfo.timer)},startReload:(u=(0,r.default)(s.default.mark((function t(){return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.reloadInfo.left=this.reloadInfo.left?this.reloadInfo.left-1:parseInt(this.reloadInfo.delay,10),this.reloadInfo.left){t.next=5;break}return t.next=4,this.reload();case 4:this.reloadInfo.left=parseInt(this.reloadInfo.delay,10);case 5:this.reloadInfo.timer=setTimeout(this.startReload,1e3);case 6:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)}),authRootUser:function(){l.authenticate({rootpass:this.rootpass}).then(l.getDefaults)},removeAuth:function(){l.removeAuth().then(l.getDefaults)},sendSignal:function(t,e){l.sendSignal({select:[t],value:e}).then(this.reload)}}};e.default=c},3048:function(t,e,a){var n=a(3300);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(4).default)("7f3a9055",n,!0,{})},3298:function(t,e,a){"use strict";var n=a(1);Object.defineProperty(e,"__esModule",{value:!0}),e.sendSignal=e.removeAuth=e.authenticate=e.getDefaults=e.getProcesses=void 0;var o=n(a(2)),s=n(a(44));a(5),a(68),a(84),a(34),a(24),a(21),a(61),a(86),a(57);var r=n(a(78)),l="/CMD_PROCESS_MONITOR",i=r.default.get({id:"PROCESS_MONITOR",url:l,params:{sor1:9,sort1dir:-1},pagination:!0,after:function(t){return t.flow(t.project({rows:"processes",info:"info"}),t.processTableInfo("rows"),t.mapProp("rows",t.toArray),t.mapProp("info",t.flow(t.convert.toLines,t.filter(t.notEmpty),(function(t){return t[0].startsWith("top")?{type:"linux",top:t[0].slice(6),tasks:t[1].slice(7),cpus:t[2].slice(9),mem:t[3].slice(11),swap:t[4].slice(11)}:{type:"bsd",pid:(t=[].concat((0,s.default)(t[0].split(";")),(0,s.default)(t.slice(1))).map((function(t){return t.trim()})).filter(Boolean))[0].slice(10),load:t[1].slice(16),processes:t[2].split(":").pop().trim(),mem:t[3].slice(5),swap:t[4].slice(6)}}))))}});e.getProcesses=i;var u=r.default.get({id:"PROCESS_MONITOR_DEFAULTS",url:l,after:function(t){return t.flow(t.project({requireAuth:"require_root_auth",signals:"value",defaultSignal:"value",columns:"processes.info.columns"}),t.mapProps({requireAuth:t.isEqual("yes"),signals:t.transformObject((function(t){var e=t.value,a=t.text;return(0,o.default)({},e,a)})),defaultSignal:t.flow(t.find(t.getProp("selected")),t.getProp("value"))}))}});e.getDefaults=u;var d=r.default.post({url:l,params:{authenticate:!0},schema:{rootpass:r.default.REQUIRED_STRING}});e.authenticate=d;var c=r.default.post({url:l,params:{authenticate:!1}});e.removeAuth=c;var f=r.default.post({url:l,params:{signal:!0},schema:{select:r.default.ROWS,value:r.default.REQUIRED_STRING}});e.sendSignal=f},3299:function(t,e,a){"use strict";a(3048)},3300:function(t,e,a){},3301:function(t,e){},3940:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return o}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-page",{attrs:{id:"process-monitor",actions:[{handler:t.removeAuth,label:t.$gettext("Remove Authentication"),icon:"#settings",visible:!1===t.$api.defaults.requireAuth},{handler:t.$dialog("AUTHENTICATE_DIALOG").open,label:t.$gettext("Authenticate to send signals"),icon:"#settings",visible:!0===t.$api.defaults.requireAuth}]}},[t.$api.defaults.requireAuth?a("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:function(e){t.$dialog("AUTHENTICATE_DIALOG").open()}},slot:"header:buttons"},[a("translate",[t._v("Authenticate to send signals")])],1):a("ui-button",{attrs:{slot:"header:buttons",theme:"danger"},on:{click:t.removeAuth},slot:"header:buttons"},[a("translate",[t._v("Remove Authentication")])],1),t._v(" "),a("app-page-section",[a("div",{staticClass:"top-controls"},[a("ui-input-group",{attrs:{grow:t.$_Client.isPhone}},[a("ui-button",{attrs:{slot:"additions:left"},on:{click:t.toggleReload},slot:"additions:left"},[a("input-checkbox",{model:{value:t.reloadInfo.enabled,callback:function(e){t.$set(t.reloadInfo,"enabled",e)},expression:"reloadInfo.enabled"}},[a("translate",[t._v("Reload every")])],1)],1),t._v(" "),a("input-select",{attrs:{slot:"input",options:["1","2","3","4","5","10","15","30","60"]},on:{change:function(e){t.reloadInfo.left=parseInt(e)}},slot:"input",model:{value:t.reloadInfo.delay,callback:function(e){t.$set(t.reloadInfo,"delay",e)},expression:"reloadInfo.delay"}}),t._v(" "),a("ui-button",{attrs:{slot:"additions:right",disabled:""},slot:"additions:right"},[a("translate",[t._v("seconds")])],1)],1),t._v(" "),a("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:t.$_Client.isPhone?"column":"row",cross:t.$_Client.isPhone?"stretch":"center"},expression:"{\n                    dir: $_Client.isPhone\n                        ? 'column'\n                        : 'row',\n                    cross: $_Client.isPhone\n                        ? 'stretch'\n                        : 'center'\n                }"}]},[t.reloadInfo.enabled?a("span",{staticClass:"reload-counter"},[t.reloadInfo.left?a("translate",{key:"reloadDelayMessage",attrs:{"translate-params":{delay:t.reloadInfo.left}}},[t._v("\n                        reload in %{delay} seconds\n                    ")]):a("translate",{key:"reloadMessage"},[t._v("\n                        reloading...\n                    ")])],1):t._e(),t._v(" "),a("ui-button",{staticClass:"reloadButton",attrs:{size:t.$_Client.isPhone?"normal":"small",theme:"light",disabled:t.$api.loading},on:{click:t.loadInfoManually}},[a("translate",[t._v("Now")])],1)],1)],1),t._v(" "),"linux"===t.$api.info.type?a("div",{staticClass:"topInfo"},[a("ul",{staticClass:"label"},[a("translate",{attrs:{tag:"li"}},[t._v("\n                    Top:\n                ")]),t._v(" "),a("translate",{attrs:{tag:"li"}},[t._v("\n                    Tasks:\n                ")]),t._v(" "),a("translate",{attrs:{tag:"li"}},[t._v("\n                    CPU(s):\n                ")]),t._v(" "),a("translate",{attrs:{tag:"li"}},[t._v("\n                    KiB Mem:\n                ")]),t._v(" "),a("translate",{attrs:{tag:"li"}},[t._v("\n                    KiB Swap:\n                ")])],1),t._v(" "),a("ul",{staticClass:"value"},[a("li",{domProps:{textContent:t._s(t.$api.info.top)}}),t._v(" "),a("li",{domProps:{textContent:t._s(t.$api.info.tasks)}}),t._v(" "),a("li",{domProps:{textContent:t._s(t.$api.info.cpus)}}),t._v(" "),a("li",{domProps:{textContent:t._s(t.$api.info.mem)}}),t._v(" "),a("li",{domProps:{textContent:t._s(t.$api.info.swap)}})])]):a("div",{staticClass:"topInfo"},[a("ul",{staticClass:"label"},[a("translate",{attrs:{tag:"li"}},[t._v("\n                    Last PID:\n                ")]),t._v(" "),a("translate",{attrs:{tag:"li"}},[t._v("\n                    Load Average:\n                ")]),t._v(" "),a("translate",{attrs:{tag:"li"}},[t._v("\n                    Processes:\n                ")]),t._v(" "),a("translate",{attrs:{tag:"li"}},[t._v("\n                    Mem:\n                ")]),t._v(" "),a("translate",{attrs:{tag:"li"}},[t._v("\n                    Swap:\n                ")])],1),t._v(" "),a("ul",{staticClass:"value"},[a("li",{domProps:{textContent:t._s(t.$api.info.pid)}}),t._v(" "),a("li",{domProps:{textContent:t._s(t.$api.info.load)}}),t._v(" "),a("li",{domProps:{textContent:t._s(t.$api.info.processes)}}),t._v(" "),a("li",{domProps:{textContent:t._s(t.$api.info.mem)}}),t._v(" "),a("li",{domProps:{textContent:t._s(t.$api.info.swap)}})])]),t._v(" "),a("ui-api-table",{directives:[{name:"margin",rawName:"v-margin",value:[3,,,],expression:"[3,,,]"}],key:"process-table-"+(t.$api.defaults.requireAuth?"authenticated":"non-authenticated"),ref:"table",attrs:{command:t.$commands.getProcesses,columns:{signal:{hide:t.$api.defaults.requireAuth,label:" "},PID:{label:"PID",editable:!1},USER:"USER",PR:"PR",NI:"NI",VIRT:"VIRT",RES:"RES",SHR:"SHR",S:"S","%CPU":"%CPU","%MEM":"%MEM","TIME+":"TIME+",COMMAND:{label:"COMMAND",grow:!0}},"initial-sort":{key:"%CPU",order:"ASC"},"vertical-layout":t.$_Client.isPhone,"disable-select":""},scopedSlots:t._u([{key:"col:signal",fn:function(e){var n=e.PID;return a("ui-actions",{attrs:{position:"right"}},t._l(t.$api.defaults.signals,(function(e,o){return a("ui-link",{key:e,on:{click:function(e){return t.sendSignal(n,o)}}},[t._v("\n                    "+t._s(e)+"\n                ")])})),1)}}])})],1),t._v(" "),t.$api.defaults.requireAuth?a("ui-dialog",{attrs:{id:"AUTHENTICATE_DIALOG"}},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n            Authenticate to send signals\n        ")]),t._v(" "),a("ui-form-element",{attrs:{slot:"content",vertical:"",group:"authenticateRoot",validators:{required:!0}},slot:"content"},[a("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Root Password\n            ")]),t._v(" "),a("input-password",{attrs:{slot:"content"},slot:"content",model:{value:t.rootpass,callback:function(e){t.rootpass=e},expression:"rootpass"}})],1),t._v(" "),a("ui-button",{attrs:{slot:"buttons","validate-group":"authenticateRoot",theme:"safe"},on:{click:t.authRootUser},slot:"buttons"},[a("translate",[t._v("Authenticate")])],1)],1):t._e()],1)},o=[]}}]);