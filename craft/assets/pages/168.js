(window.webpackJsonp=window.webpackJsonp||[]).push([[168],{1836:function(e,t,n){"use strict";n.r(t);var a=n(4034),s=n(2660);for(var r in s)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return s[e]}))}(r);var l=n(0),o=n(3684),i=n.n(o),d=Object(l.a)(s.default,a.a,a.b,!1,null,null,null);"function"==typeof i.a&&i()(d),t.default=d.exports},2660:function(e,t,n){"use strict";n.r(t);var a=n(2661),s=n.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);t.default=s.a},2661:function(e,t,n){"use strict";n(16),n(14),n(23),n(25),n(18),n(6);var a=n(1),s=n(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(38)),l=a(n(44));n(5),n(27),n(34),n(12),n(15),n(21),n(61),n(24),n(86),n(26);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=r?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(a,l,o):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n(2662));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}var d={preload:[o.getHandlers,o.getSystemHandlers],api:[{command:o.getHandlers,bind:"handlers"},{command:o.getSystemHandlers,bind:"systemHandlers"}],commands:o,data:function(){return{select:[],add:{name:"",extension:""},del:{extension:""}}},computed:{checkedExtensions:function(){var e=this;return this.$api.handlers.rows.filter((function(t){return e.select.includes(t.handler)})).map((function(e){return e.extensions.split(" ")})).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return!!e}))},handlersList:function(){return[].concat((0,l.default)(this.$api.handlers.rows.map((function(e){return e.handler}))),(0,l.default)(this.$api.systemHandlers.rows.map((function(e){return e.handler}))))},extensionsList:function(){return[].concat((0,l.default)(this.$api.handlers.rows.map((function(e){return e.extensions}))),(0,l.default)(this.$api.systemHandlers.rows.map((function(e){return e.extensions}))))}},methods:{reloadTable:function(){this.$reloadApiTable(),this.$reset()},createHandler:function(){o.createHandler({name:this.add.name.trim(),extension:this.add.extension.trim()}).then(this.reloadTable).then(this.$reset)},deleteHandlers:function(){o.deleteHandlers(this.$get("select")).then(this.reloadTable).then(this.$reset)},deleteExtensions:function(){o.deleteHandlerExtension({select:this.select,extension:this.del.extension}).then(this.reloadTable).then(this.$reset)},validateExtension:function(e){return!e||!this.extensionsList.includes(e)},initDel:function(){var e=(0,r.default)(this.checkedExtensions,1);this.del.extension=e[0]}}};t.default=d},2662:function(e,t,n){"use strict";var a=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.deleteHandlerExtension=t.deleteHandlers=t.createHandler=t.getSystemHandlers=t.getHandlers=void 0;var s=a(n(78)),r=s.default.get({id:"HANDLERS",url:"/CMD_HANDLERS",domain:!0,pagination:!0,after:function(e){return e.flow((function(e){return{rows:e}}),e.processTableInfo("rows"),e.mapProps({rows:e.toArray}))}});t.getHandlers=r;var l=r.extend({id:"SYSTEM_HANDLERS",params:{action:"system"}});t.getSystemHandlers=l;var o=s.default.post({url:"/CMD_HANDLERS",params:{action:"add"},domain:!0,schema:{name:s.default.REQUIRED_STRING,extension:s.default.REQUIRED_STRING}});t.createHandler=o;var i=s.default.select({url:"/CMD_HANDLERS",params:{action:"multiple",button:"type"},domain:!0});t.deleteHandlers=i;var d=i.extend({params:{button:"extension"},schema:{extension:s.default.REQUIRED_STRING}});t.deleteHandlerExtension=d},3684:function(e,t){},4034:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",{attrs:{actions:[{label:e.$gettext("Create Handler"),handler:e.$dialog("CREATE_HANDLER_DIALOG").open,icon:"#plus-fill"},{label:e.$gettext("System Apache Handlers"),name:"user/handlers/system",icon:"#settings"}]}},[n("template",{slot:"header:buttons"},[n("ui-button",{attrs:{theme:"primary"},on:{click:function(t){e.$dialog("CREATE_HANDLER_DIALOG").open()}}},[n("translate",[e._v("Create Handler")])],1)],1),e._v(" "),n("app-page-section",[n("ui-api-table",e._b({on:{"action:deleteHandler":function(t){e.$dialog("DELETE_HANDLERS_DIALOG").open()},"action:deleteExtension":function(t){e.$dialog("DELETE_EXTENSION_DIALOG").open()}},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getHandlers,rowID:"handler",columns:{handler:e.$gettext("Handler"),extensions:e.$gettext("Extensions")},actions:{deleteHandler:e.$gettext("Delete Handler"),deleteExtension:e.$gettext("Delete Extension")},equalWidthLayout:!0,verticalLayout:e.$_Client.isPhone},!1))],1),e._v(" "),"standard2021"!==e.$_layout?n("ui-link",{attrs:{slot:"bottom:links",bullet:"",name:"user/handlers/system"},slot:"bottom:links"},[n("translate",[e._v("System Apache Handlers")])],1):e._e(),e._v(" "),n("ui-dialog",{attrs:{id:"CREATE_HANDLER_DIALOG",theme:"safe"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            Add New Apache Handler\n        ")]),e._v(" "),n("template",{slot:"content"},[n("ui-form-element",{attrs:{group:"createHandler",validators:{required:!0,maxLength:50}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    Name\n                ")]),e._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.add.name,callback:function(t){e.$set(e.add,"name",t)},expression:"add.name"}})],1),e._v(" "),n("ui-form-element",{attrs:{group:"createHandler",validators:{required:!0,notEmpty:function(e){return!e||!!e.trim()},validateExtension:e.validateExtension,maxLength:10}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    Extension\n                ")]),e._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.add.extension,callback:function(t){e.$set(e.add,"extension",t)},expression:"add.extension"}}),e._v(" "),n("translate",{attrs:{slot:"error:notEmpty"},slot:"error:notEmpty"},[e._v("\n                    Required field\n                ")]),e._v(" "),n("translate",{attrs:{slot:"error:validateExtension"},slot:"error:validateExtension"},[e._v("\n                    Handler for such extension already exists\n                ")])],1)],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"safe","validate-group":"createHandler"},on:{click:e.createHandler},slot:"buttons"},[n("translate",[e._v("Create")])],1)],2),e._v(" "),n("ui-dialog-delete-items",{attrs:{id:"DELETE_HANDLERS_DIALOG",subject:e.$ngettext("handler","handlers",e.select.length)},on:{"click:confirm":e.deleteHandlers}}),e._v(" "),n("ui-dialog",{attrs:{id:"DELETE_EXTENSION_DIALOG",theme:"danger"},on:{"dialog:open":e.initDel}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            Delete Extension\n        ")]),e._v(" "),n("ui-form-element",{attrs:{slot:"content",group:"deleteExtension",validators:{required:!0}},slot:"content"},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Extension:\n            ")]),e._v(" "),n("input-select",{attrs:{slot:"content",options:e.checkedExtensions},slot:"content",model:{value:e.del.extension,callback:function(t){e.$set(e.del,"extension",t)},expression:"del.extension"}})],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"danger","validate-group":"deleteExtension"},on:{click:e.deleteExtensions},slot:"buttons"},[n("translate",[e._v("Delete")])],1)],1)],2)},s=[]}}]);