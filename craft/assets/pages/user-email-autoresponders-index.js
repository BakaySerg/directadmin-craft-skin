(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[3344],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/email/autoresponders/index.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js");var s=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var r=s(o("./node_modules/@babel/runtime/regenerator/index.js")),n=s(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"));o("./node_modules/core-js/modules/es.array.map.js"),o("./node_modules/core-js/modules/es.function.name.js");var a,u=o("./src/js/api/commands/user/email/autoresponders.js"),i={name:"AutoResponders",preload:u.getAutoresponders,api:[{command:u.getAutoresponders,bind:"autoresponders"}],data:function(){return{checkedRows:[]}},computed:{checkedAutoresponders:function(){return this.checkedRows.map((function(e){return e.name}))},limit:function(){return this.$_session.usage.autoresponders.limit}},watch:{$domain:function(){this.reloadRows()}},methods:{reloadRows:function(){(0,u.getAutoresponders)()},deleteAutoResponders:(a=(0,n.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.deleteAutoresponders)({select:this.checkedAutoresponders});case 2:e.sent&&(this.checkedRows=[],this.reloadRows());case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})}};t.Z=i},"./src/js/api/commands/user/email/autoresponders.js":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js");var s=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.modifyAutoresponder=t.getAutoresponders=t.getAutoresponderDefaults=t.getAutoresponder=t.deleteAutoresponders=t.createAutoresponder=void 0,o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.promise.js"),o("./node_modules/core-js/modules/es.array.includes.js");var r=s(o("./src/js/api/command/index.js")),n=function(e){return e.mapProps({custom_reply_headers:e.isEqual("1"),reply_content_types:e.toSelect,reply_encodings:e.toSelect,reply_once_select:e.toSelect})},a=r.default.get({id:"AUTORESPONDERS",url:"/CMD_EMAIL_AUTORESPONDER",domain:!0,after:function(e){return e.flow(e.mapValues((function(e,t){return{name:t,cc:e}})),e.toArray)}});t.getAutoresponders=a;var u=r.default.select({url:"/CMD_EMAIL_AUTORESPONDER",params:{action:"delete"},domain:!0});t.deleteAutoresponders=u;var i=r.default.post({url:"/CMD_EMAIL_AUTORESPONDER",params:{action:"create"},domain:!0,schema:{user:r.default.REQUIRED_STRING,text:r.default.REQUIRED_STRING,cc:{type:String,required:!0,validator:function(e){return["ON","OFF"].includes(e)}},email:r.default.OPTIONAL_STRING}});t.createAutoresponder=i;var d=i.extend({params:{action:"modify"}});t.modifyAutoresponder=d;var l=r.default.get({id:"AUTORESPONDER",url:"/CMD_EMAIL_AUTORESPONDER_MODIFY",domain:!0,schema:{user:r.default.REQUIRED_STRING},after:function(e){return e.mapProps({text:e.flow(e.convert.toAppString,e.convert.toAppText),email:e.setDefault(""),cc:e.feedWith(1,e.flow(e.getProp("email"),e.notEmpty)),headers:n(e)})}});t.getAutoresponder=l;var c=r.default.get({id:"AUTORESPONDER_DEFAULTS",url:"/CMD_EMAIL_AUTORESPONDER_CREATE",domain:!0,after:function(e){return e.flow(e.getProp("headers"),n(e))}});t.getAutoresponderDefaults=c},"./src/js/pages/user/email/autoresponders/index.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return s.X},default:function(){return d}});var s=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/email/autoresponders/index.vue?vue&type=script&lang=js&"),r=s.Z,n=o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),a=o("./src/js/pages/user/email/autoresponders/index.vue?vue&type=custom&index=0&blockType=route"),u=o.n(a),i=(0,n.Z)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("app-page",{attrs:{actions:[{label:e.$gettext("Create Autoresponder"),name:"user/email/autoresponders/create",icon:"#plus-fill"}]}},[o("template",{slot:"details"},[o("ui-infobar-item",{attrs:{title:e.$gettext("Details")}},[o("ui-infobar-stats",{attrs:{title:e.$gettext("Forwarders"),usage:e.$api.autoresponders.length,limit:e.limit}})],1)],1),e._v(" "),o("ui-limited-button",{attrs:{slot:"header:buttons",link:"",theme:"primary",name:"user/email/autoresponders/create",usage:e.$api.autoresponders.length,limit:e.$_session.usage.autoresponders.limit},slot:"header:buttons"},[o("translate",[e._v("Create Autoresponder")]),e._v(" "),o("translate",{attrs:{slot:"limitText"},slot:"limitText"},[e._v("Autoresponders limit reached")])],1),e._v(" "),o("app-page-section",[o("ui-r-table",e._b({attrs:{"disable-pagination":"","checked-rows":e.checkedRows},on:{"update:checkedRows":function(t){e.checkedRows=t},"update:checked-rows":function(t){e.checkedRows=t}},scopedSlots:e._u([{key:"row:actions",fn:function(t){var s=t.name;return o("ui-button-link",{attrs:{size:"small",theme:"light",name:"user/email/autoresponders/modify",params:{user:s},icon:"pencil",title:e.$gettext("Modify")}},[e.$_Client.isDesktop?o("translate",[e._v("Modify")]):e._e()],1)}},{key:"col:name",fn:function(t){var s=t.name;return o("span",{},[e._v("\n                "+e._s(s)+"@"+e._s(e.$domainUnicode)+"\n            ")])}},{key:"col:cc",fn:function(t){var s=t.cc;return o("span",{},[e._v("\n                "+e._s(e._f("p6eUnicodeEmail")(s))+"\n            ")])}}])},"ui-r-table",{rows:e.$api.autoresponders,columns:[{id:"name",label:e.$gettext("Autoresponder"),grow:!0},{id:"cc",label:e.$gettext("CC Address")}],verticalLayout:e.$_Client.isPhone},!1),[o("ui-table-action",{attrs:{slot:"table:actions"},on:{click:function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()}},slot:"table:actions"},[o("translate",[e._v("Delete")])],1)],1)],1),e._v(" "),o("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("autoresponder","autoresponders",e.checkedRows.length)},on:{"click:confirm":e.deleteAutoResponders}})],2)}),[],!1,null,null,null);"function"==typeof u()&&u()(i);var d=i.exports},"./src/js/pages/user/email/autoresponders/index.vue?vue&type=custom&index=0&blockType=route":function(){}}]);