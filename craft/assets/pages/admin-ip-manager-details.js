(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[6402],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/ip-manager/_dialogs/link-ip-dialog.vue?vue&type=script&lang=js&":function(e,t,a){"use strict";a("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s={props:{ip:{type:String,required:!0,default:""},availableIps:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{linkIP:"",dns:!0,apache:!0,apply:!0,background:!0}},methods:{submit:function(){this.$emit("submit",{ip:this.ip,ip_to_link:this.linkIP,dns:this.dns,apache:this.apache,apply:this.apply,background:this.background})}}};t.Z=s},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/ip-manager/_dialogs/unlink-ip-dialog.vue?vue&type=script&lang=js&":function(e,t,a){"use strict";a("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s={props:{ip:{type:String,required:!0},select:{type:Array,requried:!0}},data:function(){return{flushDNS:!0,rewriteApache:!0}},methods:{submit:function(){this.$emit("submit",{ip:this.ip,select:this.select,flush_dns:this.flushDNS,rewrite_apache:this.rewriteApache})}}};t.Z=s},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/ip-manager/details.vue?vue&type=script&lang=js&":function(e,t,a){"use strict";a("./node_modules/core-js/modules/es.array.iterator.js"),a("./node_modules/core-js/modules/es.object.to-string.js"),a("./node_modules/core-js/modules/es.string.iterator.js"),a("./node_modules/core-js/modules/es.weak-map.js"),a("./node_modules/core-js/modules/web.dom-collections.iterator.js"),a("./node_modules/core-js/modules/es.object.define-property.js"),a("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var s=a("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=a("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var n=s(a("./node_modules/@babel/runtime/regenerator/index.js")),i=s(a("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}s.default=e,a&&a.set(e,s);return s}(a("./src/js/api/commands/admin/ip-manager/details.js")),r=a("./src/js/vue/mixins.js"),u=s(a("./src/js/pages/admin/ip-manager/_dialogs/link-ip-dialog.vue")),d=s(a("./src/js/pages/admin/ip-manager/_dialogs/unlink-ip-dialog.vue"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}var c,m={preload:o.getDetails,commands:o,components:{LinkIpDialog:u.default,UnlinkIpDialog:d.default},api:[{command:o.getDetails,bind:"data"}],mixins:[(0,r.$bindTab)({defaultTab:"details",param:"tab"})],props:{ip:{type:String,required:!0}},data:function(){return{select:[]}},computed:{details:function(){return this.$api.data.details},available_ips:function(){return this.$api.data.available_ips}},created:function(){this.detailsData={status:this.$gettext("Status"),netmask:this.$gettext("Netmask"),users:this.$gettext("Users"),nameserver:this.$gettext("Name Server")}},methods:{linkIp:function(e){o.linkIp(e).then(this.$reloadApiTable)},unlinkIp:function(e){o.unlinkIp(e).then(this.$reloadApiTable)},setGlobal:(c=(0,i.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.setGlobal({ip:this.ip,global:t||null});case 2:o.getDetails({ip:this.ip});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})}};t.Z=m},"./src/js/api/commands/admin/ip-manager/details.js":function(e,t,a){"use strict";a("./node_modules/core-js/modules/es.object.define-property.js");var s=a("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.unlinkIp=t.setGlobal=t.linkIp=t.getDetails=void 0;var l=s(a("./src/js/api/command/index.js")),n="/CMD_IP_MANAGER_DETAILS",i=l.default.get({url:n,id:"IP_MANAGER_DETAILS",schema:{ip:l.default.REQUIRED_STRING},pagiantion:!0,after:function(e){return e.flow(e.moveProp("value","details.users"),e.moveProp("status","details.status"),e.moveProp("reseller","details.reseller"),e.moveProp("resellers_with_ip","details.resellers"),e.moveProp("ns","details.nameserver"),e.moveProp("netmask","details.netmask"),e.moveProp("gateway","details.gateway"),e.moveProp("ip","details.ip"),e.moveProp("global","details.global"),e.mapProps({linked_ips:e.toTable(e.mapArrayProps({dns:e.convert.toAppBoolean,apache:e.convert.toAppBoolean})),details:e.mapProps({users:e.convert.toAppNumber,global:e.isEqual("yes"),resellers:e.setDefault([])})}))}});t.getDetails=i;var o=l.default.post({url:n,params:{json:!0,action:"add"},schema:{ip:l.default.REQUIRED_STRING,ip_to_link:l.default.REQUIRED_STRING,dns:l.default.REQUIRED_BOOL,apache:l.default.REQUIRED_BOOL,apply:l.default.REQUIRED_BOOL}});t.linkIp=o;var r=l.default.select({url:n,params:{json:!0,remove:!0},schema:{ip:l.default.REQUIRED_STRING,rewrite_apache:l.default.REQUIRED_BOOL,flush_dns:l.default.REQUIRED_BOOL}});t.unlinkIp=r;var u=l.default.post({url:n,params:{action:"global"},schema:{ip:l.default.REQUIRED_STRING,global:l.default.OPTIONAL_BOOL}});t.setGlobal=u},"./src/js/pages/admin/ip-manager/_dialogs/link-ip-dialog.vue":function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return n}});var s=a("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/ip-manager/_dialogs/link-ip-dialog.vue?vue&type=script&lang=js&"),l=s.Z,n=(0,a("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-dialog",{attrs:{id:"LINK_IP_DIALOG",theme:"safe"},on:{"dialog:close":e.$reset}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        Link an IP to %{ip}\n    ")]),e._v(" "),a("template",{slot:"content"},[a("ui-form-element",{attrs:{group:"linkIP",validators:{required:!0},vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                IP Address\n            ")]),e._v(" "),a("input-select",{attrs:{slot:"content",options:e.availableIps},slot:"content",model:{value:e.linkIP,callback:function(t){e.linkIP=t},expression:"linkIP"}})],1),e._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.dns,callback:function(t){e.dns=t},expression:"dns"}},[a("translate",[e._v("Add to DNS")])],1),e._v(" "),a("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[e._v("\n                Linking an IP with DNS will duplicate the A/AAAA records for the current IP with the linked IP.\n            ")])],1),e._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.apache,callback:function(t){e.apache=t},expression:"apache"}},[a("translate",[e._v("Add to Apache")])],1),e._v(" "),a("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[e._v("\n                Linking an IP with apache will add the linked IP into the VirtualHost with the current IP.\n            ")])],1),e._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.apply,callback:function(t){e.apply=t},expression:"apply"}},[a("translate",[e._v("Apply to existing domains")])],1),e._v(" "),a("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[e._v('\n                The "Apply to existing Domains" option will trigger the httpd.conf rewrites and insert A/AAAA records into the local DNS zones. Disabling this checkbox won\'t touch the DNS or httpd.conf files, but future httpd.cont rewrites will have the linked IP added.\n            ')])],1),e._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.background,callback:function(t){e.background=t},expression:"background"}},[a("translate",[e._v("Link in background")])],1),e._v(" "),a("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[e._v("\n                When this is set, the add link task is processed in the background via task.queue. It may take up to 1 minute before the processing starts, and an unknown amount of time, depending on the number of websites present.\n            ")])],1)],1),e._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"safe","validate-group":"linkIP"},on:{click:e.submit},slot:"buttons"},[a("translate",[e._v("Link")])],1)],2)}),[],!1,null,null,null).exports},"./src/js/pages/admin/ip-manager/_dialogs/unlink-ip-dialog.vue":function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return n}});var s=a("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/ip-manager/_dialogs/unlink-ip-dialog.vue?vue&type=script&lang=js&"),l=s.Z,n=(0,a("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-dialog",{attrs:{id:"UNLINK_IP_DIALOG",theme:"danger"},on:{"dialog:close":e.$reset}},[a("translate",{attrs:{slot:"title","translate-n":e.select.length,"translate-plural":"Un-Link IP Addresses"},slot:"title"},[e._v("\n        Un-Link IP Address\n    ")]),e._v(" "),a("template",{slot:"content"},[a("translate",{staticClass:"txt:bold",attrs:{"translate-n":e.select.length,"translate-plural":"Are you sure you want to unlink selected IPs?"}},[e._v("\n            Are you sure you want to unlink selected IP?\n        ")]),e._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.flushDNS,callback:function(t){e.flushDNS=t},expression:"flushDNS"}},[a("translate",[e._v("Flush from DNS")])],1)],1),e._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.rewriteApache,callback:function(t){e.rewriteApache=t},expression:"rewriteApache"}},[a("translate",[e._v("Rewrite Apache")])],1)],1)],1),e._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"danger"},on:{click:e.submit},slot:"buttons"},[a("translate",[e._v("Un-Link")])],1)],2)}),[],!1,null,null,null).exports},"./src/js/pages/admin/ip-manager/details.vue":function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return u}});var s=a("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/ip-manager/details.vue?vue&type=script&lang=js&"),l=s.Z,n=a("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),i=a("./src/js/pages/admin/ip-manager/details.vue?vue&type=custom&index=0&blockType=route"),o=a.n(i),r=(0,n.Z)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-page",{attrs:{actions:e.available_ips.length?[{label:e.$gettext("Link IP"),icon:"#plus-fill",handler:e.$dialog("LINK_IP_DIALOG").open}]:[]}},[a("translate",{attrs:{slot:"page:title"},slot:"page:title"},[e._v("\n        Details for %{ip}\n    ")]),e._v(" "),e.available_ips.length?a("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:function(t){e.$dialog("LINK_IP_DIALOG").open()}},slot:"header:buttons"},[a("translate",[e._v("Link IP")])],1):e._e(),e._v(" "),a("app-page-section",[a("ui-tabs",{attrs:{tabs:[{id:"details",label:e.$gettext("Details")},{id:"ips",label:e.$gettext("Linked IP(s)")}],selected:e.tab},on:{"update:selected":function(t){e.tab=t}}},[a("ui-table",{key:"details-table",attrs:{slot:"tab:details",items:[e.details],transposed:""},slot:"tab:details"},[e._l(e.detailsData,(function(t,s){return a("ui-column",e._b({key:s,attrs:{visible:!!e.details[s],fit:""}},"ui-column",{label:t,id:s},!1))})),e._v(" "),a("ui-column",{attrs:{id:"resellers",visible:Boolean(e.details.global&&e.details.resellers.length),label:e.$gettext("Resellers")}},[[e._v("\n                        "+e._s(e.details.resellers.join(", "))+"\n                    ")]],2),e._v(" "),a("ui-column",{attrs:{id:"reseller",label:e.$gettext("Reseller"),visible:Boolean(e.details.reseller&&!(e.details.global&&e.details.resellers.length))}}),e._v(" "),a("ui-column",{attrs:{id:"global",label:e.$gettext("Global"),visible:["shared","free"].includes(e.details.status)},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.global;return[a("input-checkbox",{attrs:{model:s},on:{change:e.setGlobal}},[a("translate",[e._v("When enabled, this IP can be used by multiple Resellers")])],1)]}}])})],2),e._v(" "),a("ui-api-table",e._b({attrs:{slot:"tab:ips"},on:{"action:unlink":function(t){e.$dialog("UNLINK_IP_DIALOG").open()}},slot:"tab:ips",scopedSlots:e._u([{key:"col:dns",fn:function(t){var s=t.dns;return[a("translate",s?[e._v("\n                        Yes\n                    ")]:[e._v("\n                        No\n                    ")])]}},{key:"col:apache",fn:function(t){var s=t.apache;return[a("translate",s?[e._v("\n                        Yes\n                    ")]:[e._v("\n                        No\n                    ")])]}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getDetails,property:"linked_ips",rowID:"ip",columns:{ip:e.$gettext("IP Address"),dns:e.$gettext("Added to DNS"),apache:e.$gettext("Added to Apache")},actions:{unlink:e.$gettext("Un-Link")},requestData:{ip:e.ip},verticalLayout:e.$_Client.isPhone},!1))],1)],1),e._v(" "),a("link-ip-dialog",{attrs:{ip:e.ip,"available-ips":e.available_ips},on:{submit:e.linkIp}}),e._v(" "),a("unlink-ip-dialog",e._b({on:{submit:e.unlinkIp}},"unlink-ip-dialog",{ip:e.ip,select:e.select},!1))],1)}),[],!1,null,null,null);"function"==typeof o()&&o()(r);var u=r.exports},"./src/js/pages/admin/ip-manager/details.vue?vue&type=custom&index=0&blockType=route":function(){}}]);