(window.webpackJsonp=window.webpackJsonp||[]).push([[144],{1752:function(e,t,a){"use strict";a.r(t);var s=a(3953),n=a(2227);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);var l=a(0),o=a(3331),u=a.n(o),i=Object(l.a)(n.default,s.a,s.b,!1,null,null,null);"function"==typeof u.a&&u()(i),t.default=i.exports},1929:function(e,t,a){"use strict";a(7),a(10),a(6),a(8),a(11);var s=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.increaseBandwidth=t.setPackageData=t.setPackage=t.getReseller=t.getUsers=t.getStats=t.getResellers=t.createReseller=t.getResellerOptions=void 0,a(21),a(61),a(5),a(12),a(50),a(57),a(26),a(49);var n=s(a(2)),r=s(a(38)),l=s(a(78));function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var i=l.default.post({id:"RESELLER_OPTIONS",url:"/CMD_ACCOUNT_RESELLER",notifySuccess:!1,blocking:!1,after:function(e){return e.flow(e.moveProp("free_ips","freeIPs"),e.mapProp("freeIPs",e.convert.toAppNumber),e.mapProp("ip_select",e.toSelect))}});t.getResellerOptions=i;var d=l.default.post({url:"/CMD_ACCOUNT_RESELLER",params:{action:"create",add:!0},schema:{username:l.default.REQUIRED_STRING,email:l.default.REQUIRED_STRING,passwd:l.default.REQUIRED_STRING,passwd2:l.default.REQUIRED_STRING,domain:l.default.REQUIRED_STRING,package:l.default.OPTIONAL_STRING,notify:l.default.REQUIRED_BOOL,ip:l.default.REQUIRED_STRING}});t.createReseller=d;var c=l.default.get({id:"RESELLERS",url:"/CMD_RESELLER_SHOW",pagination:!0,params:{bytes:!0},after:function(e){return e.flow(e.wrap("resellers"),e.moveProp({"resellers.reasons":"reasons"}),e.mapProp("resellers",e.toTable(e.mapArray((function(t){if("string"==typeof t.bandwidth)return{username:t.username,valid:!1};var a=t.nusers.split("/"),s=(0,r.default)(a,2),n=s[0],l=s[1];return{username:t.username,nusers:n,nuserslimit:e.convert.toAppLimit(l),suspended:"no:"!==t.suspended.value,reason:t.suspended.reason||"none",vdomains:e.toLimitedUsage()(t.vdomains),bandwidth:e.toLimitedUsage()(t.bandwidth),quota:e.toLimitedUsage()(t.quota),valid:!0}})))),e.mapProp("reasons",e.toSelect))}});t.getResellers=c;var f=l.default.get({id:"RESELLER_STATS",url:"/CMD_SHOW_RESELLER",params:{bytes:!0},schema:{user:l.default.REQUIRED_STRING},after:function(e){return e.flow(e.project({comments:"comments",info:"stats",usage:"stats",stats:"stats",users:"users",deleted_user_bandwidth:"stats",additional_bandwidth:"stats"}),e.mapProps({usage:e.flow(e.deleteProp("info"),e.filter(e.getProp("max_usage")),e.transformObject((function(e){var t=e.setting,a=e.usage,s=e.allocated,r=e.max_usage;return(0,n.default)({},t,{usage:a,allocated:s,limit:r})})),e.mapValues(e.mapProps({usage:e.convert.toAppNumber,limit:e.convert.toAppLimit,allocated:e.convert.toAppLimit}))),stats:e.flow(e.deleteProp("info"),e.filter(e.flow(e.getProp("usage"),(function(e){return["ON","OFF"].includes(e)}))),e.transformObject((function(e){var t=e.setting,a=e.usage;return(0,n.default)({},t,a)})),e.mapValues(e.convert.toAppBoolean)),info:e.flow(e.deleteProp("info"),e.filter((function(e){return!e.max_usage&&!["ON","OFF"].includes(e.usage)})),e.transformObject((function(e){var t=e.setting,a=e.usage;return(0,n.default)({},t,a)}))),comments:e.flow(e.convert.toAppString,e.convert.toAppText),users:e.toTable(e.mapArrayProps({bandwidth:e.toLimitedUsage(),quota:e.toLimitedUsage(),vdomains:e.toLimitedUsage(),suspended:e.flow(e.isEqual("No"),e.not)})),skinInfo:e.feedWith(1,e.flow(e.project({custom:"is_reseller_skin",path:"reseller_skin",owner:"reseller_skin_owner"}),e.mapProp("custom",e.isEqual("1")))),deleted_user_bandwidth:e.flow(e.deleteProp("info"),Object.values,(function(e){return e.find((function(e){return"deleted_user_bandwidth"===e.setting}))}),(function(t){return void 0!==t&&e.mapProps({usage:e.convert.toAppNumber,limit:e.convert.toAppLimit,allocated:e.convert.toAppLimit})(t)})),additional_bandwidth:e.flow(e.deleteProp("info"),Object.values,(function(e){return e.find((function(e){return"additional_bandwidth"===e.setting}))||{usage:!1}}),(function(e){return e.usage}))}))}});t.getStats=f;var p=l.default.get({id:"RESELLER_USERS",url:"/CMD_SHOW_RESELLER",params:{bytes:!0},pagination:!0,schema:{user:l.default.REQUIRED_STRING},after:function(e){return e.flow(e.getProp("users"),e.toTable(e.mapArrayProps({bandwidth:e.toLimitedUsage(),quota:e.toLimitedUsage(),vdomains:e.toLimitedUsage(),suspended:e.flow(e.isEqual("No"),e.not)})))}});t.getUsers=p;var m=l.default.get({id:"RESELLER_DATA",url:"/CMD_MODIFY_RESELLER",params:{bytes:!0},schema:{user:l.default.REQUIRED_STRING},after:function(e){return e.flow((function(e){return{packageData:e,packages:e.packages,package:e.packages,custom:e.custom_items,haveInode:e.have_inode,cgroup:e.cgroup}}),e.mapProps({haveInode:e.isEqual("yes"),package:e.flow(e.find(e.getProp("selected")),e.getProp("value")),packages:e.flow(e.transformObject((function(e){var t=e.value,a=e.text;return(0,n.default)({},t,a)})),e.filter((function(e,t){return!!t}))),custom:e.flow(e.toArray,e.mapArray((function(t){var a={type:t.type,description:t.desc,label:t.string,name:t.name};switch(t.type){case"checkbox":return Object.assign(a,{value:e.isEqual("yes")(t.checked)});case"text":return Object.assign(a,{value:t.value});case"listbox":return Object.assign(a,{value:e.flow(e.find(e.getProp("selected")),e.getProp("value"))(t.select),options:e.transformObject((function(e){var t=e.value,a=e.text;return(0,n.default)({},t,a)}))(t.select)});default:return!1}})),e.filter(e.notEmpty)),packageData:e.flow(e.deleteProps(["packages","have_inode","custom_items"]),e.transformObject((function(t,a){if("unlimited"===t.type){var s=e.convert.toAppLimit(t.value)===1/0,r=s?"":t.value;return{limits:(0,n.default)({},a,{value:r,unlimited:s})}}return"checkbox"===t.type?{features:(0,n.default)({},a,"yes"===t.checked)}:(0,n.default)({},a,t)}))),cgroup:function(e){return e?Object.values(u(u({},e.options||{}),e.saved||{})):[]}}))}});t.getReseller=m;var _=l.default.post({url:"/CMD_MODIFY_RESELLER",params:{action:"package"},schema:{user:l.default.REQUIRED_STRING,package:l.default.REQUIRED_STRING}});t.setPackage=_;var O=l.default.post({url:"/CMD_MODIFY_RESELLER",params:{action:"customize",bytes:!0},schema:{user:l.default.REQUIRED_STRING,bandwidth:l.default.OPTIONAL_STRING,ubandwidth:l.default.OPTIONAL_BOOL,quota:l.default.OPTIONAL_STRING,uquota:l.default.OPTIONAL_BOOL,inode:l.default.OPTIONAL_STRING,uinode:l.default.OPTIONAL_BOOL,vdomains:l.default.OPTIONAL_STRING,uvdomains:l.default.OPTIONAL_BOOL,nsubdomains:l.default.OPTIONAL_STRING,unsubdomains:l.default.OPTIONAL_BOOL,nemails:l.default.OPTIONAL_STRING,unemails:l.default.OPTIONAL_BOOL,nemailf:l.default.OPTIONAL_STRING,unemailf:l.default.OPTIONAL_BOOL,nemailml:l.default.OPTIONAL_STRING,unemailml:l.default.OPTIONAL_BOOL,nemailr:l.default.OPTIONAL_STRING,unemailr:l.default.OPTIONAL_BOOL,mysql:l.default.OPTIONAL_STRING,umysql:l.default.OPTIONAL_BOOL,domainptr:l.default.OPTIONAL_STRING,udomainptr:l.default.OPTIONAL_BOOL,ftp:l.default.OPTIONAL_STRING,uftp:l.default.OPTIONAL_BOOL,aftp:l.default.OPTIONAL_STRING,cgi:l.default.OPTIONAL_STRING,git:l.default.OPTIONAL_STRING,php:l.default.OPTIONAL_STRING,spam:l.default.OPTIONAL_STRING,catchall:l.default.OPTIONAL_STRING,ssl:l.default.OPTIONAL_STRING,ssh:l.default.OPTIONAL_STRING,userssh:l.default.OPTIONAL_STRING,oversell:l.default.OPTIONAL_STRING,cron:l.default.OPTIONAL_STRING,sysinfo:l.default.OPTIONAL_STRING,login_keys:l.default.OPTIONAL_STRING,dnscontrol:l.default.OPTIONAL_STRING}});t.setPackageData=O;var g=l.default.post({url:"/CMD_MODIFY_RESELLER",params:{additional_bw:!0,action:"single",json:null},schema:{user:l.default.REQUIRED_STRING,additional_bandwidth:l.default.REQUIRED_STRING}});t.increaseBandwidth=g},1938:function(e,t,a){"use strict";var s=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getUsersCountPerReseller=t.saveComments=t.createAdmin=t.deleteUsers=t.unsuspendUsers=t.suspendUsers=void 0;var n=s(a(78)),r=n.default.post({url:"/CMD_SELECT_USERS",notifySuccess:!0,notifyError:!0,params:{location:"CMD_ALL_USER_SHOW"},schema:{select:n.default.ROWS},blocking:!0}),l=r.extend({params:{dosuspend:!0},schema:{reason:n.default.REQUIRED_STRING},blocking:!0});t.suspendUsers=l;var o=r.extend({params:{dounsuspend:!0},blocking:!0});t.unsuspendUsers=o;var u=r.extend({params:{delete:!0,confirmed:!0},schema:{leave_dns:n.default.OPTIONAL_BOOL},blocking:!0});t.deleteUsers=u;var i=n.default.post({url:"/CMD_ACCOUNT_ADMIN",params:{action:"create"},schema:{username:n.default.REQUIRED_STRING,email:n.default.REQUIRED_STRING,passwd:n.default.REQUIRED_STRING,passwd2:n.default.REQUIRED_STRING,notify:n.default.REQUIRED_BOOL}});t.createAdmin=i;var d=n.default.post({url:"/CMD_COMMENTS",params:{location:"CMD_SHOW_RESELLER"},schema:{user:n.default.REQUIRED_STRING,comments:n.default.REQUIRED_STRING}});t.saveComments=d;var c=n.default.post({url:"/CMD_MOVE_USERS",id:"USERS_COUNT_PER_RESELLER",response:{},after:function(e){return e.flow(e.getProp("data_list"),e.mapValues((function(e){return e.length})))}});t.getUsersCountPerReseller=c},2227:function(e,t,a){"use strict";a.r(t);var s=a(2228),n=a.n(s);for(var r in s)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(r);t.default=n.a},2228:function(e,t,a){"use strict";a(7),a(10),a(5),a(6),a(8),a(11);var s=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(2));a(34),a(57);var r=a(1929),l=a(1938),o=s(a(2044)),u=s(a(2007)),i=s(a(1951));function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={preload:r.getResellers,commands:{getResellers:r.getResellers},components:{CreateMessageDialog:o.default,SuspendUserDialog:u.default,ChangePasswordDialog:i.default},api:r.getResellers,data:function(){return{select:[],remove:[]}},computed:{reasons:function(){return u.default.$exports.reasons.call(this,this.$api.reasons.options)},selectedResellers:function(){var e=this;return this.select.map((function(t){return e.$api.resellers.rows.find((function(e){return e.username===t}))}))},count:function(){return this.$api.resellers.rowsCount}},methods:{deleteResellers:function(){(0,l.deleteUsers)({select:this.remove,location:"CMD_RESELLER_SHOW"}).then(this.$reloadApiTable)},suspendResellers:function(e){(0,l.suspendUsers)(c(c({select:this.select},e),{},{location:"CMD_RESELLER_SHOW"})).then(this.$reloadApiTable)},unsuspendResellers:function(){(0,l.unsuspendUsers)({select:this.select,location:"CMD_RESELLER_SHOW"}).then(this.$reloadApiTable)},loginAs:function(e){this.$store.dispatch("app/LOGIN_AS",{user:e,path:this.$route.path,router:this.$router})},changePassword:function(e){this.$refs.cpd.show(e)},showDeleteDialog:function(){this.remove=this.select,this.$dialog("DELETE_RESELLERS_DIALOG").open()}}};t.default=f},3331:function(e,t){},3953:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return n}));var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-page",{attrs:{actions:[{name:"admin/users/resellers/create",label:e.$gettext("Create Reseller"),icon:"create-reseller"},{name:"admin/users/create-admin",label:e.$gettext("Create Administrator"),icon:"create-administrator"},{name:"reseller/users/create",label:e.$gettext("Add New User"),icon:"add-new-user"}]}},[a("ui-button-link",{attrs:{slot:"header:buttons",theme:"primary",name:"admin/users/resellers/create"},slot:"header:buttons"},[a("translate",[e._v("Create Reseller")])],1),e._v(" "),a("template",{slot:"details"},[a("ui-infobar-item",{attrs:{title:e.$gettext("Stats")}},[a("ui-infobar-stats",{attrs:{usage:e.count,limit:1/0,title:e.$gettext("Resellers Count")}})],1)],1),e._v(" "),a("app-page-section",[a("ui-api-table",e._b({on:{"action:message":function(t){e.$dialog("CREATE_MESSAGE_DIALOG").open()},"action:suspend":function(t){e.$dialog("SUSPEND_USER_DIALOG").open()},"action:unsuspend":e.unsuspendResellers,"action:remove":e.showDeleteDialog},scopedSlots:e._u([{key:"col:username",fn:function(t){var s=t.username,n=t.suspended,r=t.reason,l=t.valid;return[l?a("ui-link",{attrs:{name:"admin/users/resellers/view",params:{user:s}}},[e._v("\n                    "+e._s(s)+"\n                ")]):a("span",[e._v(e._s(s))]),e._v(" "),n?a("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},[a("translate",{attrs:{"translate-params":{reason:e.reasons[r]}}},[e._v("\n                        Suspended: %{ reason }\n                    ")])],1):e._e(),e._v(" "),l?e._e():a("ui-tooltip",{key:"corrupted",attrs:{theme:"danger",icon:"warning"}},[a("translate",[e._v("Error reading file")])],1)]}},{key:"col:bandwidth",fn:function(t){var s=t.bandwidth;return t.valid?a("ui-limited-usage",e._b({},"ui-limited-usage",s,!1)):e._e()}},{key:"col:quota",fn:function(t){var s=t.quota;return t.valid?a("ui-limited-usage",e._b({},"ui-limited-usage",s,!1)):e._e()}},{key:"col:vdomains",fn:function(t){var s=t.vdomains;return t.valid?a("ui-limited-usage",e._b({attrs:{plain:""}},"ui-limited-usage",s,!1)):e._e()}},{key:"col:nusers",fn:function(t){var s=t.nusers,n=t.nuserslimit;return t.valid?a("ui-limited-usage",{attrs:{plain:"",usage:s,limit:n}}):e._e()}},{key:"row:actions",fn:function(t){var s=t.username,n=t.suspended;return a("ui-actions",{},[a("ui-link",{on:{click:function(t){e.select=[s],e.$dialog("CREATE_MESSAGE_DIALOG").open()}}},[a("translate",[e._v("Send a Message")])],1),e._v(" "),n?e._e():a("ui-link",{on:{click:function(t){e.select=[s],e.$dialog("SUSPEND_USER_DIALOG").open()}}},[a("translate",[e._v("Suspend")])],1),e._v(" "),n?a("ui-link",{on:{click:function(t){e.select=[s],e.unsuspendResellers()}}},[a("translate",[e._v("Unsuspend")])],1):e._e(),e._v(" "),a("ui-link",{on:{click:function(t){return e.loginAs(s)}}},[a("translate",{attrs:{"translate-params":{username:s}}},[e._v("\n                        Login as %{ username }\n                    ")])],1),e._v(" "),a("ui-link",{on:{click:function(t){return e.changePassword(s)}}},[a("translate",{attrs:{"translate-params":{username:s}}},[e._v("\n                        Change %{ username }'s password\n                    ")])],1),e._v(" "),a("ui-link",{on:{click:function(t){e.select=[s],e.showDeleteDialog}}},[a("translate",[e._v("Remove")])],1)],1)}}],null,!0),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getResellers,property:"resellers",rowID:"username",columns:{username:{label:e.$gettext("Name"),grow:!0,searchable:!0},bandwidth:{label:e.$gettext("Bandwidth"),getClass:function(e){return e.valid&&e.bandwidth.status?"--usage:"+e.bandwidth.status:""},width:"20%"},quota:{label:e.$gettext("Disk Usage"),getClass:function(e){return e.valid&&e.bandwidth.status?"--usage:"+e.quota.status:""},width:"20%"},nusers:e.$gettext("# of Users"),vdomains:e.$gettext("# of domains"),suspended:{label:e.$gettext("Suspended"),hide:!0,searchable:{type:"select",comparison:"contains",options:{"yes:":e.$gettext("Yes"),"no:":e.$gettext("No")}}}},actions:{message:e.$gettext("Send a Message"),suspend:e.$gettext("Suspend"),unsuspend:e.$gettext("Unsuspend"),remove:e.$gettext("Delete")},verticalLayout:e.$_Client.isPhone},!1))],1),e._v(" "),a("create-message-dialog",{attrs:{users:e.select}}),e._v(" "),a("ui-dialog",{attrs:{id:"DELETE_RESELLERS_DIALOG",theme:"danger",size:"normal"}},[a("translate",{attrs:{slot:"title","translate-plural":"Delete Resellers","translate-n":e.select.length},slot:"title"},[e._v("\n            Delete Reseller\n        ")]),e._v(" "),a("template",{slot:"content"},[a("translate",[e._v("Please confirm your request")]),e._v(" "),a("input-select-multiple",{attrs:{options:e.select,"hide-header":""},model:{value:e.remove,callback:function(t){e.remove=t},expression:"remove"}},e._l(e.selectedResellers,(function(t){return a("span",{key:t.username,attrs:{slot:"option:"+t.username},slot:"option:"+t.username},[Number(t.nusers)?[a("translate",{attrs:{"translate-params":t,"translate-n":Number(t.nusers),"translate-plural":"Reseller: %{ username } and %{ nusers } users"}},[e._v("Reseller: %{ username } and %{ nusers } user")]),e._v(" "),a("ui-tooltip",{attrs:{theme:"danger"}},[a("translate",[e._v("\n                                You are deleting reseller that have users\n                                under control. If you proceed, these user\n                                accounts, along with ALL the associated\n                                website and email contents, which are not\n                                listed here, will also be removed.\n                            ")])],1)]:a("translate",{attrs:{"translate-params":t}},[e._v("Reseller: %{ username }")])],2)})),0)],1),e._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"danger",disabled:0===e.remove.length},on:{click:e.deleteResellers},slot:"buttons"},[a("translate",[e._v("Confirm")])],1)],2),e._v(" "),a("suspend-user-dialog",{attrs:{"api-reasons":e.$api.reasons.options},on:{suspend:e.suspendResellers}}),e._v(" "),a("change-password-dialog",{ref:"cpd"})],2)},n=[]}}]);