(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{1820:function(t,e,n){"use strict";n.r(e);var a=n(4018),i=n(2614);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);var r=n(0),s=n(3652),l=n.n(s),c=Object(r.a)(i.default,a.a,a.b,!1,null,null,null);"function"==typeof l.a&&l()(c),e.default=c.exports},1942:function(t,e,n){"use strict";var a=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.getIdInfo=e.loadSmtpLog=e.unblockBlockcrackerPaths=e.getUsage=e.getSendingScripts=e.getBlockCracking=void 0,n(21),n(61);var i=a(n(78)),o=i.default.get({id:"BLOCK_CRACKING",url:"/CMD_EMAIL_USAGE",params:{main_info:!1,sending_php_scripts:!1,block_cracking_paths:!0},domain:!0,pagination:!0,after:function(t){return t.flow((function(t){return t.block_cracking_paths?t:{block_cracking_paths:"no",block_cracking_paths_table:{info:{ipp:"10",total_pages:"1",current_page:"1",rows:"0"}}}}),t.moveProp({block_cracking_paths:"options.enabled",block_cracking_paths_table:"rows"}),t.processTableInfo("rows"),t.mapProps({options:t.mapProps({enabled:t.convert.toAppBoolean}),rows:t.flow(t.toArray,t.mapArray(t.flow(t.moveProp({date_blocked:"date",blocked_path:"path"}),t.mapProps({date:t.convert.toAppDate}))))}))}});e.getBlockCracking=o;var r=i.default.get({id:"SENDING_SCRIPTS",url:"/CMD_EMAIL_USAGE",params:{main_info:!1,sending_php_scripts:!0,block_cracking_paths:!1,which:"both"},domain:!0,pagination:!0,after:function(t){return t.flow(t.moveProp({sending_php_scripts:"rows"}),t.processTableInfo("rows"),t.mapProp("rows",t.flow(t.toArray,t.mapArray(t.flow(t.moveProp({script_name:"script",mail_line_number:"line",send_count:"send"}),t.mapProps({send:t.convert.toAppNumber,line:t.flow(t.convert.toAppString,t.convert.toAppNumber)}))))))}});e.getSendingScripts=r;var s=i.default.get({id:"EMAIL_USAGE",url:"/CMD_EMAIL_USAGE",params:{main_info:!0,sending_php_scripts:!1,block_cracking_paths:!1,which:"both"},schema:{direction:i.default.OPTIONAL_STRING},domain:!0,pagination:!0,after:function(t){return t.flow(t.project({rows:"deliveries",highest:"highest"}),t.processTableInfo("rows"),t.mapProp("rows",t.mapArrayProps({time:t.convert.toAppDate,size:t.convert.toAppNumber})))}});e.getUsage=s;var l=i.default.select({url:"/CMD_EMAIL_USAGE",params:{unblock:!0,action:"unblock"},domain:!0});e.unblockBlockcrackerPaths=l;var c=i.default.get({id:"SMTP_LOG",url:"/CMD_EMAIL_USAGE",params:{action:"smtp_log"},schema:{user:i.default.REQUIRED_STRING,method:i.default.REQUIRED_STRING},domain:!0,accept:"text/plain",response:[],after:function(){return function(t){return t.split("\n")}}});e.loadSmtpLog=c;var u=i.default.get({id:"EMAIL_USAGE_ID_INFO",url:"/CMD_EMAIL_USAGE",params:{action:"id_info"},schema:{id:i.default.REQUIRED_STRING},domain:!0,accept:"text/plain",response:[],after:function(){return function(t){return t.split("\n")}}});e.getIdInfo=u},2614:function(t,e,n){"use strict";n.r(e);var a=n(2615),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e.default=i.a},2615:function(t,e,n){"use strict";n(7),n(10),n(5),n(6),n(8),n(11);var a=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n(36)),o=a(n(37)),r=a(n(2)),s=n(1942);function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u,d={components:{IdInfoDialog:a(n(3651)).default},preload:[function(t){var e=t.direction,n=void 0===e?"outgoing":e;return(0,s.getUsage)({direction:n})},s.getBlockCracking],api:[{command:s.getUsage,bind:{"response.highest":"highest"}},{command:s.getBlockCracking,bind:{"response.options.enabled":"blockCracking"}}],props:{direction:{type:String,required:!1,default:"outgoing"}},commands:{getUsage:s.getUsage},data:function(){return{showFrom:"both"}},computed:{totalUsage:function(){return[c({label:this.$gettext("Sender"),tooltip:this.$gettext('The "From" value set in the email header. This value should not be considered as accurate, as a sender can specify any value they wish.')},this.$api.highest.sender),c({label:this.$gettext("Authentication"),tooltip:this.$gettext("If SMTP authentication is used, this will show the login name used. Scripts will show the owner of the script. Can be considered accurate.")},this.$api.highest.authenticated_id),c({label:this.$gettext("Sender Host"),tooltip:this.$gettext("If this is set, it will show the IP that connect to the server. If no IP is set, then the email was sent vie a local script.")},this.$api.highest.sender_host_address),c({label:this.$gettext("Path"),tooltip:this.$gettext('If the email was generated from a script, the path value will show the working directory the script was in. An email in the spool will have a path value of "retry" for each attempt.')},this.$api.highest.php_script)]}},methods:{toggleDirection:function(t){this.$router.push({name:"user/email/usage",params:{direction:t}})},showIdInfo:(u=(0,o.default)(i.default.mark((function t(e){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.getIdInfo)({id:e});case 2:this.$dialog("ID_INFO_DIALOG").open();case 3:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})}};e.default=d},2616:function(t,e,n){"use strict";n.r(e);var a=n(2617),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e.default=i.a},2617:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={api:[{command:n(1942).getIdInfo,bind:"info"}]};e.default=a},3651:function(t,e,n){"use strict";n.r(e);var a=n(4166),i=n(2616);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);var r=n(0),s=Object(r.a)(i.default,a.a,a.b,!1,null,null,null);e.default=s.exports},3652:function(t,e){},4018:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[n("app-page-section",[n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:t.$_Client.isPhone?"column":"row",cross:t.$_Client.isPhone?"start":"center"},expression:"{\n                dir: $_Client.isPhone ? 'column' : 'row',\n                cross: $_Client.isPhone ? 'start' : 'center',\n            }"},{name:"gutter",rawName:"v-gutter",value:[1,1],expression:"[1, 1]"}]},[n("translate",{staticClass:"txt:bold",style:{minWidth:"11rem"}},[t._v("\n                Show Usage From:\n            ")]),t._v(" "),n("input-radio",{attrs:{value:"today"},model:{value:t.showFrom,callback:function(e){t.showFrom=e},expression:"showFrom"}},[n("translate",[t._v("Today")])],1),t._v(" "),n("input-radio",{attrs:{value:"past"},model:{value:t.showFrom,callback:function(e){t.showFrom=e},expression:"showFrom"}},[n("translate",[t._v("This Month (excluding today)")])],1),t._v(" "),n("input-radio",{attrs:{value:"both"},model:{value:t.showFrom,callback:function(e){t.showFrom=e},expression:"showFrom"}},[n("translate",[t._v("This Month")])],1)],1),t._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:t.$_Client.isPhone?"column":"row",cross:t.$_Client.isPhone?"start":"center"},expression:"{\n                dir: $_Client.isPhone ? 'column' : 'row',\n                cross: $_Client.isPhone ? 'start' : 'center',\n            }"},{name:"gutter",rawName:"v-gutter",value:[null,1],expression:"[null, 1]"}]},[n("translate",{directives:[{name:"margin",rawName:"v-margin",value:[1,0,0,0],expression:"[1, 0, 0, 0]"}],staticClass:"txt:bold",style:{minWidth:"11rem"}},[t._v("\n                Direction:\n            ")]),t._v(" "),n("input-radio",{attrs:{value:"outgoing",model:t.direction},on:{change:t.toggleDirection}},[n("translate",[t._v("Outgoing")])],1),t._v(" "),n("input-radio",{attrs:{value:"incoming",model:t.direction},on:{change:t.toggleDirection}},[n("translate",[t._v("Incoming")])],1)],1)]),t._v(" "),"outgoing"===t.direction?n("app-page-section",[n("ui-r-table",{attrs:{"is-checkable":!1,rows:t.totalUsage,"disable-pagination":"","is-sortable":!1,editable:!1,columns:[{id:"label",label:t.$gettext("Highest")},{id:"value",label:t.$gettext("Value")},{id:"count",label:t.$gettext("Count")},{id:"percent",label:t.$gettext("Percent")}],"vertical-layout":t.$_Client.isPhone},scopedSlots:t._u([{key:"col:label",fn:function(e){var a=e.label,i=e.tooltip;return n("ui-tooltip",{attrs:{theme:"safe"}},[n("span",{staticClass:"txt:bold cursor:pointer",attrs:{slot:"trigger"},slot:"trigger"},[t._v("\n                    "+t._s(a)+"\n                    "),n("ui-icon",{attrs:{id:"question",theme:"safe",size:"medium"}})],1),t._v("\n                "+t._s(i)+"\n            ")])}}],null,!1,3406668854)},[t._v(" "),n("translate",{attrs:{slot:"table:after"},slot:"table:after"},[t._v("\n                Note: For older exim.pl files before version 13, each delivery attempt is counted, including retries.\n            ")])],1)],1):t._e(),t._v(" "),n("app-page-section",[n("ui-api-table",t._b({ref:"table",attrs:{"disable-select":"","vertical-layout":t.$_Client.isPhone},scopedSlots:t._u([{key:"col:id",fn:function(e){var a=e.id;return n("ui-link",{on:{click:function(e){return t.showIdInfo(a)}}},[t._v("\n                "+t._s(a)+"\n            ")])}}])},"ui-api-table",{command:t.$commands.getUsage,columns:{time:{label:t.$gettext("Time"),filter:"date"},sender:{label:t.$gettext("Sender"),searchable:!0},authenticated_id:{label:t.$gettext("Authentication"),searchable:!0},sender_host_address:{label:t.$gettext("Sender Host"),searchable:!0},size:{label:t.$gettext("Size"),filter:"humanReadableSize"},destination:{label:t.$gettext("Destination"),searchable:!0},path:{label:t.$gettext("Path"),searchable:!0},id:t.$gettext("ID")},requestData:{direction:t.direction,which:t.showFrom}},!1))],1),t._v(" "),n("template",{slot:"bottom:links"},[t.$api.blockCracking?n("ui-link",{attrs:{name:"user/email/usage/blockcracking",bullet:""}},[n("translate",[t._v("BlockCracking Blocked Paths")])],1):t._e(),t._v(" "),n("ui-link",{attrs:{name:"user/email/usage/php-scripts",bullet:""}},[n("translate",[t._v("PHP Scripts")])],1)],1),t._v(" "),n("id-info-dialog")],2)},i=[]},4166:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var a=function(){var t=this.$createElement,e=this._self._c||t;return e("ui-dialog",{attrs:{id:"ID_INFO_DIALOG","no-close-btn":"",size:"normal"}},[e("translate",{attrs:{slot:"title"},slot:"title"},[this._v("\n        ID Info\n    ")]),this._v(" "),e("ui-pre",{attrs:{slot:"content","content-lines":this.$api.info},slot:"content"})],1)},i=[]}}]);