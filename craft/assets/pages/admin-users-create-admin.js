(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[1576],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/edit-admin-message-dialog.vue?vue&type=script&lang=js&":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.weak-map.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var a=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=t("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(s,"X",{value:!0}),s.Z=void 0;var n=a(t("./node_modules/@babel/runtime/regenerator/index.js")),r=a(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"));t("./node_modules/core-js/modules/es.object.assign.js");var l=function(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=d(s);if(t&&t.has(e))return t.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=n?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(a,r,l):a[r]=e[r]}a.default=e,t&&t.set(e,a);return a}(t("./src/js/api/commands/admin/users/message.js"));function d(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:s})(e)}var i,u,c={api:[{command:l.getMessage,bind:"message"}],data:function(){return{message:"",subject:""}},methods:{loadData:function(){Object.assign(this,this.$api.message)},updateMessage:(u=(0,r.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.updateMessage({level:"admin",subject:this.subject,message:this.message});case 1:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)}),resetMessage:(i=(0,r.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.resetMessage({level:"admin"});case 2:return e.t0=Object,e.t1=this,e.next=6,l.getMessage({level:"admin"});case 6:e.t2=e.sent,e.t0.assign.call(e.t0,e.t1,e.t2);case 8:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})}};s.Z=c},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/users/create-admin.vue?vue&type=script&lang=js&":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.object.define-property.js");var a=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"X",{value:!0}),s.Z=void 0;var o,n,r=a(t("./node_modules/@babel/runtime/regenerator/index.js")),l=a(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),d=t("./src/js/api/commands/validation/index.js"),i=t("./src/js/api/commands/admin/users/actions.js"),u=t("./src/js/api/commands/admin/users/message.js"),c=a(t("./src/js/components/local/edit-admin-message-dialog.vue")),m={commands:{validateUsername:d.validateUsername,validatePassword:d.validatePassword},components:{EditAdminMessageDialog:c.default},data:function(){return{username:"",passwd:"",email:"",notify:!1}},methods:{editAdminMessage:(n=(0,l.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getMessage)({level:"admin"});case 2:this.$dialog("EDIT_ADMIN_MESSAGE_DIALOG").open();case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),createAdmin:(o=(0,l.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.createAdmin)({username:this.username,email:this.email,passwd:this.passwd,passwd2:this.passwd,notify:this.notify});case 2:e.sent&&this.$router.push({name:"admin/users/admins"});case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}};s.Z=m},"./src/js/api/commands/admin/users/actions.js":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.object.define-property.js");var a=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.unsuspendUsers=s.suspendUsers=s.saveComments=s.getUsersCountPerReseller=s.deleteUsers=s.createAdmin=void 0;var o=a(t("./src/js/api/command/index.js")),n=o.default.post({url:"/CMD_SELECT_USERS",notifySuccess:!0,notifyError:!0,params:{location:"CMD_ALL_USER_SHOW"},schema:{select:o.default.ROWS},blocking:!0}),r=n.extend({params:{dosuspend:!0},schema:{reason:o.default.REQUIRED_STRING},blocking:!0});s.suspendUsers=r;var l=n.extend({params:{dounsuspend:!0},blocking:!0});s.unsuspendUsers=l;var d=n.extend({params:{delete:!0,confirmed:!0},schema:{leave_dns:o.default.OPTIONAL_BOOL},blocking:!0});s.deleteUsers=d;var i=o.default.post({url:"/CMD_ACCOUNT_ADMIN",params:{action:"create"},schema:{username:o.default.REQUIRED_STRING,email:o.default.REQUIRED_STRING,passwd:o.default.REQUIRED_STRING,passwd2:o.default.REQUIRED_STRING,notify:o.default.REQUIRED_BOOL}});s.createAdmin=i;var u=o.default.post({url:"/CMD_COMMENTS",params:{location:"CMD_SHOW_RESELLER"},schema:{user:o.default.REQUIRED_STRING,comments:o.default.REQUIRED_STRING}});s.saveComments=u;var c=o.default.post({url:"/CMD_MOVE_USERS",id:"USERS_COUNT_PER_RESELLER",response:{},after:function(e){return e.flow(e.getProp("data_list"),e.mapValues((function(e){return e.length})))}});s.getUsersCountPerReseller=c},"./src/js/api/commands/admin/users/message.js":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.object.define-property.js");var a=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.updateMessage=s.resetMessage=s.getMessage=void 0,t("./node_modules/core-js/modules/es.array.includes.js");var o=a(t("./src/js/api/command/index.js")),n=function(e){var s=e.level;return"/CMD_EDIT_".concat(s.toUpperCase(),"_MESSAGE")},r={type:String,required:!0,default:"reseller",validator:function(e){return["admin","reseller"].includes(e)}},l=o.default.get({id:"MESSAGE",url:n,schema:{level:r},after:function(e){return e.mapProp("message",e.convert.toAppText)}});s.getMessage=l;var d=o.default.post({url:n,params:{save:!0},schema:{level:r,subject:o.default.REQUIRED_STRING,message:o.default.REQUIRED_STRING}});s.updateMessage=d;var i=o.default.post({url:n,params:{reset:!0},schema:{level:r}});s.resetMessage=i},"./src/js/api/commands/validation/index.js":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.object.define-property.js");var a=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.validateUsername=s.validateSubdomain=s.validatePassword=s.validateMXValue=s.validateIPRangeList=s.validateForwarder=s.validateFTP=s.validateEmail=s.validateDomain=s.validateDatabase=s.validateDNSValue=s.validateDNSName=s.validateDBUser=void 0;var o=a(t("./src/js/api/command/index.js")),n=a(t("./node_modules/punycode/punycode.es6.js")),r=a(t("./src/js/api/commands/validation/$processors.ts")),l=o.default.get({url:"/CMD_JSON_VALIDATE",schema:{value:o.default.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:r.default.isValid,message:r.default.getMessage}}),d=l.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}});s.validateForwarder=d;var i=l.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}});s.validateEmail=i;var u=l.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0});s.validateFTP=u;var c=l.extend({params:{type:"dns"},domain:!0,schema:{record:o.default.REQUIRED_STRING}}),m=c.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:o.default.REQUIRED_STRING}});s.validateDNSValue=m;var p=m.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:function(e){return{value:"10",mx_value:e.value}}});s.validateMXValue=p;var v=c.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:o.default.REQUIRED_STRING,value:null}});s.validateDNSName=v;var _=l.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}});s.validateDatabase=_;var f=l.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}});s.validateDBUser=f;var j=l.extend({id:"VALIDATE_USERNAME",params:{type:"username"}});s.validateUsername=j;var g=l.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}});s.validateSubdomain=g;var b=l.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}});s.validatePassword=b;var E=l.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:function(e){var s=e.value;return{value:n.default.toASCII(s)}}});s.validateDomain=E;var R=l.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}});s.validateIPRangeList=R},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/edit-admin-message-dialog.vue?vue&type=style&index=0&id=2b0589ca&lang=scss&scoped=true&":function(){},"./src/js/api/commands/validation/$processors.ts":function(e,s,t){"use strict";t.r(s);var a=t("./src/js/api/commands/converters/index.ts");s.default={isValid:function(e){return void 0===e.error},getMessage:function(e){return(0,a.toAppHtml)(e.error||"")}}},"./src/js/components/local/edit-admin-message-dialog.vue":function(e,s,t){"use strict";t.r(s),t.d(s,{__esModule:function(){return a.X},default:function(){return n}});var a=t("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/edit-admin-message-dialog.vue?vue&type=script&lang=js&"),o=a.Z,n=(t("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/edit-admin-message-dialog.vue?vue&type=style&index=0&id=2b0589ca&lang=scss&scoped=true&"),(0,t("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(o,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ui-dialog",{attrs:{id:"EDIT_ADMIN_MESSAGE_DIALOG",size:"normal","no-close-btn":""},on:{"dialog:open":e.loadData}},[t("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        Edit E-mail Message\n    ")]),e._v(" "),t("template",{slot:"content"},[t("ui-form-element",{attrs:{vertical:""}},[t("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Subject\n            ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.subject,expression:"subject"}],attrs:{slot:"content",type:"text"},domProps:{value:e.subject},on:{input:function(s){s.target.composing||(e.subject=s.target.value)}},slot:"content"})],1),e._v(" "),t("ui-form-element",{attrs:{vertical:""}},[t("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Message\n            ")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{slot:"content"},domProps:{value:e.message},on:{input:function(s){s.target.composing||(e.message=s.target.value)}},slot:"content"})],1)],1),e._v(" "),t("ui-button",{attrs:{slot:"buttons",theme:"safe"},on:{click:e.updateMessage},slot:"buttons"},[t("translate",[e._v("Save")])],1),e._v(" "),t("ui-button",{attrs:{slot:"buttons",theme:"danger"},on:{click:e.resetMessage},slot:"buttons"},[t("translate",[e._v("Reset")])],1)],2)}),[],!1,null,"2b0589ca",null).exports)},"./src/js/pages/admin/users/create-admin.vue":function(e,s,t){"use strict";t.r(s),t.d(s,{__esModule:function(){return a.X},default:function(){return i}});var a=t("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/users/create-admin.vue?vue&type=script&lang=js&"),o=a.Z,n=t("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),r=t("./src/js/pages/admin/users/create-admin.vue?vue&type=custom&index=0&blockType=route"),l=t.n(r),d=(0,n.Z)(o,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("app-page",{attrs:{actions:[{label:e.$gettext("Edit Admin Message"),icon:"#pencil",handler:e.editAdminMessage}]}},[t("ui-button",{attrs:{slot:"header:buttons",theme:"safe"},on:{click:e.editAdminMessage},slot:"header:buttons"},[t("translate",[e._v("Edit Admin Message")])],1),e._v(" "),t("app-page-section",[t("ui-form-element",{attrs:{group:"createAdmin",validators:{required:!0,api:e.$commands.validateUsername}}},[t("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Username\n            ")]),e._v(" "),t("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.username,callback:function(s){e.username=s},expression:"username"}})],1),e._v(" "),t("ui-form-element",{attrs:{group:"createAdmin",validators:{required:!0,regex:e.regexps.email}}},[t("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                E-mail\n            ")]),e._v(" "),t("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.email,callback:function(s){e.email=s},expression:"email"}}),e._v(" "),t("translate",{attrs:{slot:"error:regex"},slot:"error:regex"},[e._v("\n                Should be valid email\n            ")])],1),e._v(" "),t("ui-form-element",{attrs:{group:"createAdmin",validators:{required:!0,api:e.$commands.validatePassword}}},[t("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Enter Password\n            ")]),e._v(" "),t("input-password",{attrs:{slot:"content","show-generator":""},slot:"content",model:{value:e.passwd,callback:function(s){e.passwd=s},expression:"passwd"}})],1),e._v(" "),t("ui-form-element",[t("span",{attrs:{slot:"title"},slot:"title"}),e._v(" "),t("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.notify,callback:function(s){e.notify=s},expression:"notify"}},[t("translate",[e._v("Send E-mail Notification")])],1)],1)],1),e._v(" "),t("ui-button",{attrs:{slot:"footer:buttons",theme:"safe","validate-group":"createAdmin"},on:{click:e.createAdmin},slot:"footer:buttons"},[t("translate",[e._v("Create")])],1),e._v(" "),t("edit-admin-message-dialog")],1)}),[],!1,null,null,null);"function"==typeof l()&&l()(d);var i=d.exports},"./src/js/pages/admin/users/create-admin.vue?vue&type=custom&index=0&blockType=route":function(){},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/edit-admin-message-dialog.vue?vue&type=style&index=0&id=2b0589ca&lang=scss&scoped=true&":function(e,s,t){var a=t("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/edit-admin-message-dialog.vue?vue&type=style&index=0&id=2b0589ca&lang=scss&scoped=true&");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,t("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("32a8be99",a,!0,{})}}]);