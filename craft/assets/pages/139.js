(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{1734:function(e,t,n){"use strict";n.r(t);var r=n(3935),o=n(2176);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);var i=n(0),u=n(3285),c=n.n(u),s=Object(i.a)(o.default,r.a,r.b,!1,null,null,null);"function"==typeof c.a&&c()(s),t.default=s.exports},1936:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(45),o=n(711),a=n(20);function i(e,t){Object(a.a)(2,arguments);var n=Object(r.a)(t);return Object(o.a)(e,1e3*n)}},1947:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n(45),o=n(1936),a=n(20);function i(e,t){Object(a.a)(2,arguments);var n=Object(r.a)(t);return Object(o.a)(e,-n)}},2004:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getQueueItem=t.doAction=t.getQueue=void 0;var o=r(n(2)),a=r(n(78)),i=r(n(1947)),u=a.default.get({id:"MAIL_QUEUE",url:"/CMD_MAIL_QUEUE",pagination:!0,schema:{force:a.default.OPTIONAL_BOOL},after:function(e){return function(t){return t.error?e.flow(e.project({queue_size:"queue_size",max_load_size:"mq_exim_max_load_size",error:"error"}),e.mapProp("error",e.convert.toAppBoolean))(t):e.flow(e.getProp("table"),e.toTable(e.mapArrayProps({time:function(e){return(0,i.default)(new Date,e)},size:e.convert.toAppNumber,frozen:e.convert.toAppBoolean})))(t)}}});t.getQueue=u;var c=a.default.select({url:"/CMD_MAIL_QUEUE",schema:{action:a.default.REQUIRED_STRING},before:function(e){var t,n=e.action;return t={},(0,o.default)(t,n,!0),(0,o.default)(t,"action","select"),t}});t.doAction=c;var s=a.default.get({id:"MAIL_QUEUE_ITEM",url:"/CMD_MAIL_QUEUE",schema:{id:a.default.REQUIRED_STRING},after:function(e){return e.mapProps({body:e.convert.toAppText,headers:e.convert.toAppText,logs:e.convert.toAppText})}});t.getQueueItem=s},2176:function(e,t,n){"use strict";n.r(t);var r=n(2177),o=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t.default=o.a},2177:function(e,t,n){"use strict";n(16),n(14),n(23),n(25),n(18),n(6);var r=n(1),o=n(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(36)),i=r(n(37)),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var u=a?Object.getOwnPropertyDescriptor(e,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=e[i]}r.default=e,n&&n.set(e,r);return r}(n(2004));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var s,l={preload:u.getQueue,commands:u,api:[{command:u.getQueue,bind:"queue"}],props:{force:{type:Boolean,required:!1,default:!1}},data:function(){return{checkedRows:[],select:[],forceSet:this.force}},methods:{forceLoad:function(){this.forceSet=!0,u.getQueue({force:this.forceSet})},doAction:(s=(0,i.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.doAction({action:t,select:this.select});case 2:e.sent&&(this.select=[],this.$reloadApiTable());case 4:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})}};t.default=l},3285:function(e,t){},3935:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[e.$api.queue.error?n("app-page-section",[n("translate",{attrs:{"translate-params":e.$api.queue}},[e._v("\n            Queue size (%{ queue_size }) is larger than the maximum value (%{ max_load_size}) and may timeout.\n        ")]),e._v(" "),n("ui-button",{attrs:{theme:"danger",size:"normal"},on:{click:e.forceLoad}},[n("translate",[e._v("Force Load")])],1)],1):n("app-page-section",[n("ui-api-table",e._b({attrs:{"initial-sort":{key:"time",order:"ASC"}},on:{"action:thaw":function(t){return e.doAction("thaw")},"action:freeze":function(t){return e.doAction("freeze")},"action:retry":function(t){return e.doAction("retry")},"action:bounce":function(t){return e.doAction("bounce")},"action:del":function(t){return e.doAction("delete")}},scopedSlots:e._u([{key:"col:id",fn:function(t){var r=t.id,o=t.item;return[n("ui-link",{attrs:{name:"admin/mail-queue/view",params:{id:r}}},[e._v("\n                    "+e._s(r)+"\n                ")]),e._v(" "),o.frozen?n("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},[n("translate",[e._v("Frozen")])],1):e._e()]}},{key:"col:time",fn:function(t){var n=t.time;return[e._v("\n                "+e._s(e._f("distanceFromNow")(n))+"\n            ")]}},{key:"col:recipients",fn:function(t){var r=t.recipients;return e._l(r,(function(t){return n("div",{directives:[{name:"margin",rawName:"v-margin",value:0,expression:"0"}],key:t},[e._v("\n                    "+e._s(t)+"\n                ")])}))}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getQueue,rowID:"id",requestData:{force:e.forceSet},columns:{id:{label:e.$gettext("ID"),searchable:!0},time:e.$gettext("Time"),size:e.$gettext("Size"),sender:{label:e.$gettext("Sender"),searchable:!0},recipients:{label:e.$gettext("Recipient(s)"),grow:!0,searchable:!0},frozen:{label:e.$gettext("Frozen"),hide:!0,searchable:{type:"select",options:{yes:e.$gettext("Yes"),no:e.$gettext("No")}}}},actions:{thaw:e.$gettext("Thaw"),freeze:e.$gettext("Freeze"),retry:e.$gettext("Retry"),bounce:e.$gettext("Bounce"),del:e.$gettext("Delete")},verticalLayout:e.$_Client.isPhone},!1))],1)],1)},o=[]}}]);