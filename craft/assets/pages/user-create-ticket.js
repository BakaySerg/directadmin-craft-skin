(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[4007],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/create-ticket.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var r,l,n=o(s("./node_modules/@babel/runtime/regenerator/index.js")),a=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),u=s("./src/js/api/commands/reseller/tickets.js"),i=s("./src/js/vue/helpers.js"),d={beforeRouteEnter:(l=(0,a.default)(n.default.mark((function e(t,s,o){var r,l;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getSystemStatus)();case 2:(r=e.sent)instanceof Error?((l=r.apiData).url&&(0,i.openInNewTab)(l.url),o(!1)):o();case 4:case"end":return e.stop()}}),e)}))),function(e,t,s){return l.apply(this,arguments)}),data:function(){return{user:"creator",type:"request",priority:"10",subject:"",message:"",emailOnly:!1}},methods:{createTicket:(r=(0,a.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.createTicket)({user:this.user,type:this.type,priority:this.priority,subject:this.subject,message:this.message});case 2:e.sent&&(this.$reset(),this.$router.back());case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}};t.Z=d},"./src/js/api/commands/reseller/tickets.js":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.symbol.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),s("./node_modules/core-js/modules/es.object.define-properties.js"),s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.updateEmailSetting=t.updateActiveStatus=t.sendMessageMultiple=t.replyTicket=t.openTicket=t.markTicketsRead=t.getTickets=t.getTicketDefaults=t.getSystemStatus=t.getMessages=t.getEmailSetting=t.getActiveStatus=t.createTicket=t.closeTickets=void 0,s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.object.values.js"),s("./node_modules/core-js/modules/es.array.map.js");var r=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),l=o(s("./src/js/api/command/index.js")),n=o(s("./node_modules/date-fns/esm/formatDistance/index.js"));function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){(0,r.default)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var i=l.default.post({url:"/CMD_TICKET_CREATE",params:{action:"create",type:"message",user:"multiple",priority:"20"},schema:{users:l.default.ROWS,subject:l.default.REQUIRED_STRING,message:l.default.REQUIRED_STRING,emailOnly:u(u({},l.default.OPTIONAL_BOOL),{},{default:!1}),all_email_accounts:l.default.OPTIONAL_BOOL}});t.sendMessageMultiple=i;var d=u(u({},l.default.OPTIONAL_BOOL),{},{default:!0}),c=l.default.get({id:"TICKETS",url:"/CMD_TICKET_MANAGE",response:{tickets:[],info:{columns:[],pagination:{},tickets:{}}},pagination:!0,schema:{show_open:d,show_hold:d,show_closed:d},after:function(e){return e.flow(e.wrap("rows"),e.moveProp({"rows.info.new_all":"filters.all.new","rows.info.num_all":"filters.all.total","rows.info.new_hold":"filters.hold.new","rows.info.num_hold":"filters.hold.total","rows.info.new_open":"filters.open.new","rows.info.num_open":"filters.open.total","rows.info.new_closed":"filters.closed.new","rows.info.num_closed":"filters.closed.total","rows.info.active":"enabled","rows.info.html":"message"}),e.processTableInfo("rows"),e.mapProps({rows:e.flow(e.toArray,e.mapArrayProps({new:e.convert.toAppBoolean,priority:e.convert.toAppNumber,replies:e.convert.toAppNumber,last_message:e.convert.toAppDate,subject:e.convert.toAppString,user:e.convert.toAppString})),filters:e.mapValues(e.mapProps({new:e.convert.toAppNumber,total:e.convert.toAppNumber})),enabled:e.convert.toAppBoolean,message:e.convert.toAppHtml}))}});t.getTickets=c;var p=l.default.get({id:"TICKET_MESSAGES",url:"/CMD_TICKET_MANAGE",response:[],params:{action:"view",type:"ticket"},schema:{number:l.default.REQUIRED_STRING},after:function(e){return e.flow(e.deleteProp("info"),e.toArray,(function(e){return e.reverse()}),e.mapArrayProps({message:e.convert.toAppHtml,time:function(t){return(0,n.default)(Date.now(),e.convert.toAppDate(t))}}))}});t.getMessages=p;var m=l.default.select({url:"/CMD_TICKET_MANAGE",params:{close:!0}});t.closeTickets=m;var f=l.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"status",status:"open"},schema:{number:l.default.REQUIRED_STRING}});t.openTicket=f;var _=l.default.select({url:"/CMD_TICKET_MANAGE",params:{read:!0}});t.markTicketsRead=_;var v=l.default.post({url:"/CMD_TICKET_CREATE",params:{action:"create",type:"request"},before:function(e){return{encoding:e.email_only?"utf-8":null}},schema:{user:l.default.REQUIRED_STRING,priority:u(u({},l.default.REQUIRED_STRING),{},{validator:function(e){return["10","20","30"].includes(e)}}),subject:l.default.REQUIRED_STRING,message:l.default.REQUIRED_STRING,email_only:l.default.OPTIONAL_BOOL}});t.createTicket=v;var j=l.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"reply",type:"reply",priority:"none"},schema:{number:l.default.REQUIRED_STRING,user:l.default.REQUIRED_STRING,subject:l.default.REQUIRED_STRING,status:{type:String,required:!1,default:"open",validator:function(e){return["open","closed"].includes(e)}},message:l.default.REQUIRED_STRING}});t.replyTicket=j;var T=l.default.get({id:"TICKET_DEFAULTS",url:"/CMD_TICKET_CREATE",after:function(e){return e.flow(e.moveProp("EML_ONLY_CHEKCED","email.set"),e.moveProp("SHOW_EML_ONLY","email.show"),e.moveProp("TCKTTO","to"),e.moveProp("TCKTTYPE","type"),(function(e){return u(u({},e),{},{selected:Object.values(e.to).find((function(e){return!!e.selected}))})}),e.mapProps({email:e.mapProps({set:e.convert.toAppBoolean,show:e.convert.toAppBoolean}),to:function(e){return Object.values(e).map((function(e){return{label:e.text,value:e.value}}))},selected:function(e){return{label:e.text,value:e.value}}}))}});t.getTicketDefaults=T;var E=l.default.get({id:"TICKETS_EMAIL_SETTING",url:"/CMD_TICKET",after:function(e){return e.flow(e.project({email:"settings.EMAIL",checked:"settings.EMAILCHECKED"}),e.mapProps({featureEnabled:e.feedWith(1,(function(e){return void 0!==e.checked})),email:e.setDefault(""),checked:e.flow(e.setDefault("no"),e.convert.toAppBoolean)}))}});t.getEmailSetting=E;var b=l.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"email"},schema:{email:l.default.REQUIRED_STRING,ON:l.default.REQUIRED_BOOL}});t.updateEmailSetting=b;var g=l.default.get({id:"TICKETS_ACTIVE_STATUS",url:"/CMD_TICKET_MANAGE",response:{html:"",active:!1},after:function(e){return function(t){return{html:t.info.html,active:e.convert.toAppBoolean(t.info.active)}}}});t.getActiveStatus=g;var y=l.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"active"},schema:{active:l.default.REQUIRED_BOOL,html:l.default.REQUIRED_STRING}});t.updateActiveStatus=y;var R=l.default.get({id:"TICKET_SYSTEM_STATUS",url:"/CMD_TICKET_CREATE",params:{type:"Ticket"},notifyError:!0});t.getSystemStatus=R},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/create-ticket.vue?vue&type=style&index=0&id=54803119&lang=scss&scoped=true&":function(){},"./src/js/pages/user/create-ticket.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return o.X},default:function(){return i}});var o=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/create-ticket.vue?vue&type=script&lang=js&"),r=o.Z,l=(s("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/create-ticket.vue?vue&type=style&index=0&id=54803119&lang=scss&scoped=true&"),s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),n=s("./src/js/pages/user/create-ticket.vue?vue&type=custom&index=0&blockType=route"),a=s.n(n),u=(0,l.Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page",[s("app-page-section",[s("ui-form-element",[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Priority:\n            ")]),e._v(" "),s("input-select",{attrs:{slot:"content",options:{10:e.$gettext("Low"),20:e.$gettext("Medium"),30:e.$gettext("High")}},slot:"content",model:{value:e.priority,callback:function(t){e.priority=t},expression:"priority"}})],1),e._v(" "),s("ui-form-element",{attrs:{group:"message",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Subject:\n            ")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.subject,expression:"subject"}],attrs:{slot:"content",type:"text"},domProps:{value:e.subject},on:{input:function(t){t.target.composing||(e.subject=t.target.value)}},slot:"content"})],1),e._v(" "),s("ui-form-element",{attrs:{group:"message",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Message:\n            ")]),e._v(" "),s("input-textarea",{attrs:{slot:"content"},slot:"content",model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),e._v(" "),s("ui-form-element",[s("span",{attrs:{slot:"title"},slot:"title"}),e._v(" "),s("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.emailOnly,callback:function(t){e.emailOnly=t},expression:"emailOnly"}},[s("translate",[e._v("E-mail Only")])],1)],1)],1),e._v(" "),s("ui-button",{attrs:{slot:"footer:buttons",theme:"safe","validate-group":"message"},on:{click:e.createTicket},slot:"footer:buttons"},[s("translate",[e._v("Create")])],1)],1)}),[],!1,null,"54803119",null);"function"==typeof a()&&a()(u);var i=u.exports},"./src/js/pages/user/create-ticket.vue?vue&type=custom&index=0&blockType=route":function(){},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/create-ticket.vue?vue&type=style&index=0&id=54803119&lang=scss&scoped=true&":function(e,t,s){var o=s("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/create-ticket.vue?vue&type=style&index=0&id=54803119&lang=scss&scoped=true&");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,s("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("15f1cc50",o,!0,{})}}]);