(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[9089],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/phpmyadmin.vue?vue&type=script&lang=js&":function(e,a,s){"use strict";s("./node_modules/core-js/modules/es.regexp.flags.js"),s("./node_modules/core-js/modules/es.object.define-property.js");var t=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"X",{value:!0}),a.Z=void 0;var r=t(s("./node_modules/@babel/runtime/regenerator/index.js"));s("./node_modules/core-js/modules/es.array.concat.js");var o,n=t(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),u=s("./src/js/api/commands/user/database.js"),d=s("./src/js/vue/helpers.js"),l=s("./src/js/session.js"),i={name:"PhpMyAdmin",beforeRouteEnter:(o=(0,n.default)(r.default.mark((function e(a,s,t){var o,n,i,p,c,m,f,_;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getLoginPMAStatus)();case 2:if(o=e.sent,n=o instanceof Error,!o||n){e.next=13;break}return e.next=7,(0,u.globalLoginPMA)();case 7:if((i=e.sent)instanceof Error){e.next=13;break}return p=i.token,c=i.url,(0,d.openInNewTab)("".concat(c,"?token=").concat(p)),t(!1),e.abrupt("return");case 13:l.flags["server.phpmyadminPublic"]&&(m=l.session.webappsSSL,f=l.session.servername,_=m?"https":"http",(0,d.openInNewTab)("".concat(_,"://").concat(f,"/phpmyadmin"))),t(!1);case 15:case"end":return e.stop()}}),e)}))),function(e,a,s){return o.apply(this,arguments)}),render:function(){return null}};a.Z=i},"./src/js/api/commands/user/database.js":function(e,a,s){"use strict";s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var t=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(a,"__esModule",{value:!0}),a.uploadBackup=a.setUserPrivs=a.repairDatabase=a.optimizeDatabase=a.loginPMA=a.globalLoginPMA=a.getUsers=a.getUserPrivs=a.getLoginPMAStatus=a.getDatabases=a.getDatabase=a.deleteUsers=a.deleteDatabase=a.deleteAccessHost=a.createDatabase=a.checkDatabase=a.changeUserPassword=a.assignUser=a.addUser=a.addAccessHost=void 0,s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.promise.js");var o=t(s("./src/js/api/command/index.js")),n=function(e,a){if(!a&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var s=u(a);if(s&&s.has(e))return s.get(e);var t={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var d=o?Object.getOwnPropertyDescriptor(e,n):null;d&&(d.get||d.set)?Object.defineProperty(t,n,d):t[n]=e[n]}t.default=e,s&&s.set(e,t);return t}(s("./node_modules/ramda/src/index.js"));function u(e){if("function"!=typeof WeakMap)return null;var a=new WeakMap,s=new WeakMap;return(u=function(e){return e?s:a})(e)}var d=o.default.get({id:"DB_USERS",url:"/CMD_DB_CREATE",domain:!0,mapResponse:{users:n.pipe(n.omit(["MAX_DB_LENGTH","MAX_DB_USER_LENGTH"]),n.values,n.filter((function(e){return"..."!==e.text})),n.map((function(e){return{value:e.value,label:e.text}}))),max_db_length:n.prop("MAX_DB_LENGTH"),max_db_user_length:n.prop("MAX_DB_USER_LENGTH")}});a.getUsers=d;var l=o.default.post({url:"/CMD_DB",params:{action:"create"},domain:!0,schema:{name:o.default.REQUIRED_STRING,user:o.default.REQUIRED_STRING,passwd:o.default.OPTIONAL_STRING,passwd2:o.default.OPTIONAL_STRING,userlist:o.default.OPTIONAL_STRING},after:function(e){return e.mapProp("result",e.convert.toAppHtml)}});a.createDatabase=l;var i=o.default.get({id:"DATABASES",url:"/CMD_DB",domain:!0,pagination:!0,after:function(e){return e.mapProps({databases:e.toTable(e.mapArrayProps({nusers:e.convert.toAppNumber,size:e.convert.toAppNumber})),HAVE_ONE_CLICK_PMA_LOGIN:e.convert.toAppBoolean,total_usage:e.convert.toAppNumber,dbs_select:e.toSelect})}});a.getDatabases=i;var p=o.default.select({url:"/CMD_DB",domain:!0,params:{json:!0}}),c=p.extend({params:{repair:!0}});a.repairDatabase=c;var m=p.extend({params:{check:!0}});a.checkDatabase=m;var f=p.extend({params:{optimize:!0}});a.optimizeDatabase=f;var _=p.extend({params:{delete_db:!0}});a.deleteDatabase=_;var R=o.default.post({url:"/CMD_DB",params:{action:"restore",method:"default"},domain:!0,schema:{name:o.default.REQUIRED_STRING,dbuser:o.default.REQUIRED_STRING,dbpass:o.default.REQUIRED_STRING,file:{type:File,required:!0}},before:function(e){return{file1:e.file,file:null}},fileTransfer:!0,continous:!0});a.uploadBackup=R;var D=o.default.get({id:"DB_VIEW",url:"/CMD_DB_VIEW",params:{page:1,ipp:9999},domain:!0,schema:{name:o.default.REQUIRED_STRING},after:function(e){return e.flow(e.project({hosts:"access_hosts",users:"db_users",pmaLogin:"HAVE_ONE_CLICK_PMA_LOGIN"}),e.mapProps({users:e.flow(e.deleteProp("info"),e.toArray,e.mapArray(e.getProp("User"))),hosts:e.flow(e.deleteProp("info"),e.toArray,e.mapArray(e.getProp("Access Hosts"))),pmaLogin:e.convert.toAppBoolean}))}});a.getDatabase=D;var b=o.default.post({url:"/CMD_DB",method:"POST",params:{action:"deleteuser",delete:!0,json:!0},domain:!0,schema:{name:o.default.REQUIRED_STRING,select:o.default.ROWS}});a.deleteUsers=b;var E=o.default.post({url:"/CMD_DB_ACCESS",domain:!0,params:{add:!0,json:!0},schema:{name:o.default.REQUIRED_STRING,host:o.default.REQUIRED_STRING}});a.addAccessHost=E;var j=o.default.select({url:"/CMD_DB_ACCESS",domain:!0,params:{delete:!0,json:!0},schema:{name:o.default.REQUIRED_STRING}});a.deleteAccessHost=j;var v=o.default.post({url:"/CMD_DB",domain:!0,params:{action:"createuser",json:!0},schema:{name:o.default.REQUIRED_STRING,passwd:o.default.REQUIRED_STRING,passwd2:o.default.REQUIRED_STRING}});a.addUser=v;var I=o.default.post({url:"/CMD_DB",domain:!0,params:{action:"createuser",json:!0,passwd:"*****",passwd2:"*****"},schema:{name:o.default.REQUIRED_STRING,userlist:o.default.REQUIRED_STRING}});a.assignUser=I;var g=o.default.post({url:"/CMD_DB",domain:!0,params:{action:"modifyuser",json:!0},schema:{name:o.default.REQUIRED_STRING,user:o.default.REQUIRED_STRING,passwd:o.default.REQUIRED_STRING,passwd2:o.default.REQUIRED_STRING}});a.changeUserPassword=g;var S=o.default.get({id:"DB_USER_PRIVS",url:"/CMD_DB_USER_PRIVS",domain:!0,schema:{name:o.default.REQUIRED_STRING,user:o.default.REQUIRED_STRING},after:function(e){return e.mapValues(e.isEqual("Y"))}});a.getUserPrivs=S;var N=o.default.post({url:"/CMD_DB_USER_PRIVS",domain:!0,params:{action:"save "},body:{name:o.default.REQUIRED_STRING,user:o.default.REQUIRED_STRING}});a.setUserPrivs=N;var y=o.default.post({url:"/CMD_PMA_LOGIN",domain:!0,params:{json:!0},notifySuccess:!1,notifyError:!1,schema:{name:o.default.REQUIRED_STRING}});a.loginPMA=y;var h=o.default.post({url:"/CMD_PMA_LOGIN",params:{json:!0,name:"all",domain:""},notifySuccess:!1,notifyError:!1});a.globalLoginPMA=h;var A=o.default.get({url:"/CMD_DB",response:!1,mapResponse:function(e){return"yes"===e.HAVE_ONE_CLICK_PMA_LOGIN},notifyError:!1});a.getLoginPMAStatus=A},"./src/js/pages/phpmyadmin.vue":function(e,a,s){"use strict";s.r(a),s.d(a,{__esModule:function(){return t.X},default:function(){return l}});var t=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/phpmyadmin.vue?vue&type=script&lang=js&"),r=t.Z,o=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),n=s("./src/js/pages/phpmyadmin.vue?vue&type=custom&index=0&blockType=route"),u=s.n(n),d=(0,o.Z)(r,undefined,undefined,!1,null,null,null);"function"==typeof u()&&u()(d);var l=d.exports},"./src/js/pages/phpmyadmin.vue?vue&type=custom&index=0&blockType=route":function(){}}]);