(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{1808:function(t,a,e){"use strict";e.r(a);var i=e(4006),n=e(2578);for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(s);var r=e(0),o=e(3620),l=e.n(o),u=Object(r.a)(n.default,i.a,i.b,!1,null,null,null);"function"==typeof l.a&&l()(u),a.default=u.exports},1884:function(t,a,e){"use strict";var i=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.validateIPRangeList=a.validateDomain=a.validatePassword=a.validateSubdomain=a.validateUsername=a.validateDBUser=a.validateDatabase=a.validateDNSName=a.validateMXValue=a.validateDNSValue=a.validateFTP=a.validateEmail=a.validateForwarder=void 0;var n=i(e(78)),s=i(e(98)),r=i(e(1885)),o=n.default.get({url:"/CMD_JSON_VALIDATE",schema:{value:n.default.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:r.default.isValid,message:r.default.getMessage}}),l=o.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}});a.validateForwarder=l;var u=o.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}});a.validateEmail=u;var d=o.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0});a.validateFTP=d;var m=o.extend({params:{type:"dns"},domain:!0,schema:{record:n.default.REQUIRED_STRING}}),c=m.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:n.default.REQUIRED_STRING}});a.validateDNSValue=c;var p=c.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:function(t){return{value:"10",mx_value:t.value}}});a.validateMXValue=p;var _=m.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:n.default.REQUIRED_STRING,value:null}});a.validateDNSName=_;var v=o.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}});a.validateDatabase=v;var f=o.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}});a.validateDBUser=f;var E=o.extend({id:"VALIDATE_USERNAME",params:{type:"username"}});a.validateUsername=E;var A=o.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}});a.validateSubdomain=A;var h=o.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}});a.validatePassword=h;var I=o.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:function(t){var a=t.value;return{value:s.default.toASCII(a)}}});a.validateDomain=I;var g=o.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}});a.validateIPRangeList=g},1885:function(t,a,e){"use strict";e.r(a);var i=e(97);a.default={isValid:function(t){return void 0===t.error},getMessage:function(t){return Object(i.toAppHtml)(t.error||"")}}},1906:function(t,a,e){"use strict";var i=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.getLoginsList=a.webmailSSO=a.changeDKIMStatus=a.changePassword=a.modifyAccount=a.createAccount=a.purgeAccounts=a.deleteAccounts=a.unsuspendAccounts=a.suspendAccounts=a.getAccounts=a.$processors=void 0;var n=i(e(2)),s=i(e(19));e(5),e(34),e(17),e(1940),e(135),e(136),e(12),e(15),e(21),e(61),e(40);var r=i(e(78)),o=e(47),l=e(504),u=function(t){return o.Maybe.Some(t).map(Number).filter(Number.isFinite).orSome(1/0)},d={sent:function(t){return o.Maybe.fromNull(t).filter((function(t){return"object"===(0,s.default)(t)})).flatMap((function(t){var a=t.sent,e=t.send_limit;try{return o.Maybe.Some({usage:u(a),limit:u(e)})}catch(t){return o.Maybe.None()}})).orSome(!1)},lastChange:function(t){return o.Maybe.fromNull(t).map((function(t){var a=t.ip,e=t.when;return{ip:(0,o.Identity)(a).map(l.toAppString).map(l.toAppText).get(),when:(0,o.Identity)(e).map(l.toAppDate).get()}})).orSome(!1)}};a.$processors=d;var m=r.default.get({id:"EMAIL_ACCOUNTS",url:"/CMD_EMAIL_POP",domain:!0,pagination:!0,params:{bytes:!0},after:function(t){return t.flow(t.wrap("options"),t.moveProp({"options.emails":"emails","options.EMAIL_MESSAGE":"options.email_message"}),t.mapProps({emails:t.toTable(t.mapArray(t.flow(t.moveProp({"usage.last_login":"last_login","usage.last_password_change":"last_password_change"}),t.mapProps({login:function(t){return t.includes("@")?t.split("@")[0]:t},is_default:function(t,a){return!a.login.includes("@")},sent:d.sent,usage:t.mapValues(u),last_login:d.lastChange,last_password_change:d.lastChange})))),options:t.mapProps({DKIM:t.isEqual("1"),DKIM_ENABLED:t.isEqual("1"),block_cracking_unblock:t.convert.toAppNumber,clean_forwarders_on_email_delete:t.isEqual("1"),count_pop_usage:t.isEqual("1"),hide_outlook:t.isEqual("1"),pop_disk_usage_cache:t.isEqual("1"),pop_disk_usage_true_bytes:t.isEqual("1"),user_can_set_email_limit:t.isEqual("1"),purge_select:t.toSelect,when_select:t.toSelect,HAVE_ONE_CLICK_WEBMAIL_LOGIN:t.convert.toAppBoolean,system_user_to_virtual_passwd:t.isEqual("1")})}))}});a.getAccounts=m;var c=r.default.post({url:"/CMD_EMAIL_POP",params:{action:"delete"},domain:!0}),p=c.extend({params:{suspend:!0}});a.suspendAccounts=p;var _=c.extend({params:{unsuspend:!0}});a.unsuspendAccounts=_;var v=c.extend({params:{delete:!0},schema:{clean_forwarders:r.default.REQUIRED_BOOL}});a.deleteAccounts=v;var f=c.extend({params:{purge:!0},body:{file:r.default.REQUIRED_STRING,what:r.default.REQUIRED_STRING}});a.purgeAccounts=f;var E=r.default.post({url:"/CMD_EMAIL_POP",params:{action:"create"},domain:!0,schema:{user:r.default.USER,passwd2:r.default.PASSWORD,passwd:r.default.PASSWORD,quota:r.default.REQUIRED_STRING,limit:r.default.OPTIONAL_STRING},after:function(t){return t.mapProp("result",(function(t){return t.replace(/(\\n)+/g,"\n")}))}});a.createAccount=E;var A=r.default.post({url:"/CMD_EMAIL_POP",params:{action:"modify"},domain:!0,schema:{user:r.default.USER,newuser:r.default.USER,passwd2:r.default.OPTIONAL_STRING,passwd:r.default.OPTIONAL_STRING,quota:r.default.REQUIRED_STRING,limit:r.default.OPTIONAL_STRING}});a.modifyAccount=A;var h=r.default.post({url:"/CMD_CHANGE_EMAIL_PASSWORD",schema:{email:r.default.REQUIRED_STRING,oldpassword:r.default.REQUIRED_STRING,password1:r.default.REQUIRED_STRING,password2:r.default.REQUIRED_STRING}});a.changePassword=h;var I=r.default.post({url:"/CMD_EMAIL_POP",domain:!0,schema:{action:r.default.REQUIRED_STRING},before:function(t){var a=t.action;return(0,n.default)({action:"set_dkim"},a,!0)}});a.changeDKIMStatus=I;var g=r.default.post({url:"/CMD_WEBMAIL_LOGIN",notifySuccess:!1,schema:{email:r.default.REQUIRED_STRING}});a.webmailSSO=g;var L=r.default.get({id:"LOGINS_LIST",url:"/CMD_EMAIL_POP",domain:!0,response:[],params:{quick:!0},mapResponse:function(t){return t.emails}});a.getLoginsList=L},1940:function(t,a,e){e(29)({target:"Number",stat:!0},{isFinite:e(1941)})},1941:function(t,a,e){var i=e(39).isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&i(t)}},2578:function(t,a,e){"use strict";e.r(a);var i=e(2579),n=e.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(s);a.default=n.a},2579:function(t,a,e){"use strict";var i=e(1);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(e(36)),s=i(e(37));e(17),e(24);var r,o=e(1906),l=e(1884),u={preload:o.getAccounts,commands:{validateEmail:l.validateEmail,validatePassword:l.validatePassword},api:[{command:o.getAccounts,bind:{"response.options.user_can_set_email_limit":"setLimit","response.options.GLOBAL_PER_EMAIL_LIMIT":"globalSendLimit","response.options.DEFAULT_POP_QUOTA":"defaultQuota","response.options.MAX_PER_EMAIL_SEND_LIMIT":"maxPerEmailSendLimit","response.options.user_email_quota_max":"emailQuotaMax"}},{command:l.validateEmail,bind:"emailValidation"}],data:function(){return{user:"",password:"",quota:0,limit:"",quotaUnlimited:!1,limitUnlimited:!0}},computed:{maxLimit:function(){return"-1"===this.$api.maxPerEmailSendLimit?this.$api.globalSendLimit:this.$api.maxPerEmailSendLimit},canSetUnlimited:function(){return"0"===this.maxLimit},showUnlimitedQuotaCheckbox:function(){return"0"===this.$api.emailQuotaMax||"-1"===this.$api.emailQuotaMax||void 0===this.$api.emailQuotaMax}},created:function(){this.quota=this.$api.defaultQuota,this.quotaUnlimited="0"===this.quota,this.limitUnlimited="0"===this.maxLimit},methods:{createAccount:function(){var t=this;(0,o.createAccount)({user:this.user,passwd:this.password,passwd2:this.password,quota:this.quota,limit:this.$api.setLimit?this.limit||this.maxLimit:null}).then((function(){return t.$router.back()}))},validateLimit:function(t){return"0"===this.maxLimit||Number(t||0)<=Number(this.maxLimit)},validateUser:(r=(0,s.default)(n.default.mark((function t(a){var e,i;return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!0);case 2:return t.next=4,(0,l.validateEmail)({value:"".concat(a,"@").concat(this.$domain)});case 4:return e=t.sent,i=e.valid,t.abrupt("return",i);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)}),toggleLimit:function(){this.limitUnlimited=!this.limitUnlimited,this.limit=this.limitUnlimited?"0":""},toggleQuota:function(){this.quotaUnlimited=!this.quotaUnlimited,this.quota=this.quotaUnlimited?"0":this.$api.defaultQuota},validateQuota:function(t){return Number(t)<=100*Math.pow(2,20)}}};a.default=u},3620:function(t,a){},4006:function(t,a,e){"use strict";e.d(a,"a",(function(){return i})),e.d(a,"b",(function(){return n}));var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("app-page",[e("app-page-section",[e("ui-form-element",{attrs:{group:"account",validators:{required:!0,validateUser:t.validateUser}}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Username\n            ")]),t._v(" "),e("input-text",{attrs:{slot:"content",suffix:"@"+t.$domainUnicode,vertical:t.$_Client.isPhone},slot:"content",model:{value:t.user,callback:function(a){t.user=a},expression:"user"}}),t._v(" "),e("span",{attrs:{slot:"error:validateUser"},slot:"error:validateUser"},[t._v("\n                "+t._s(t.$api.emailValidation.message)+"\n            ")])],1),t._v(" "),e("ui-form-element",{attrs:{group:"account",validators:{required:!0,api:t.$commands.validatePassword}}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Password\n            ")]),t._v(" "),e("input-password",{attrs:{slot:"content","show-generator":""},slot:"content",model:{value:t.password,callback:function(a){t.password=a},expression:"password"}})],1),t._v(" "),e("ui-form-element",{attrs:{group:"account",validators:{required:!0,validateQuota:t.validateQuota},underline:t.$api.setLimit}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                E-mail Quota (MB)\n            ")]),t._v(" "),e("input-text",{attrs:{slot:"content",disabled:t.quotaUnlimited,number:""},slot:"content",model:{value:t.quota,callback:function(a){t.quota=a},expression:"quota"}},[t.showUnlimitedQuotaCheckbox?e("ui-button",{attrs:{slot:"additions:right"},on:{click:t.toggleQuota},slot:"additions:right"},[e("input-checkbox",{attrs:{model:t.quotaUnlimited}},[e("translate",[t._v("Max")])],1)],1):t._e()],1),t._v(" "),e("translate",{attrs:{slot:"error:validateQuota"},slot:"error:validateQuota"},[t._v("\n                Quota can't be larger than 100TB\n            ")])],1),t._v(" "),t.$api.setLimit?e("ui-form-element",{attrs:{group:"account",validators:{validateLimit:t.validateLimit},underline:!1}},[e("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Send Limit\n            ")]),t._v(" "),e("translate",{attrs:{slot:"tooltip","translate-params":{limit:t.maxLimit}},slot:"tooltip"},[t._v("\n                Blank will default to %{ limit }\n            ")]),t._v(" "),e("input-text",{attrs:{slot:"content",number:"",placeholder:t.maxLimit,disabled:t.limitUnlimited},slot:"content",model:{value:t.limit,callback:function(a){t.limit=a},expression:"limit"}},[e("ui-button",{attrs:{slot:"additions:right",disabled:!t.canSetUnlimited},on:{click:t.toggleLimit},slot:"additions:right"},[e("input-checkbox",{attrs:{model:t.limitUnlimited}},[e("translate",[t._v("Max")])],1)],1)],1),t._v(" "),e("translate",{attrs:{slot:"error:validateLimit","translate-params":{limit:t.maxLimit}},slot:"error:validateLimit"},[t._v("\n                Limit can't be larger than %{ limit }\n            ")])],1):t._e()],1),t._v(" "),e("ui-button",{attrs:{slot:"footer:buttons",theme:"primary",disabled:!t.password,"validate-group":"account"},on:{click:t.createAccount},slot:"footer:buttons"},[e("translate",[t._v("Create Account")])],1)],1)},n=[]}}]);