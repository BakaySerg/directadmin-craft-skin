(window.webpackJsonp=window.webpackJsonp||[]).push([[158],{1809:function(e,t,n){"use strict";n.r(t);var r=n(4007),o=n(2580);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);var s=n(0),u=n(3621),i=n.n(u),c=Object(s.a)(o.default,r.a,r.b,!1,null,null,null);"function"==typeof i.a&&i()(c),t.default=c.exports},2035:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getAutoresponderDefaults=t.getAutoresponder=t.modifyAutoresponder=t.createAutoresponder=t.deleteAutoresponders=t.getAutoresponders=void 0,n(12);var o=r(n(78)),a=function(e){return e.mapProps({custom_reply_headers:e.isEqual("1"),reply_content_types:e.toSelect,reply_encodings:e.toSelect,reply_once_select:e.toSelect})},s=o.default.get({id:"AUTORESPONDERS",url:"/CMD_EMAIL_AUTORESPONDER",domain:!0,after:function(e){return e.flow(e.mapValues((function(e,t){return{name:t,cc:e}})),e.toArray)}});t.getAutoresponders=s;var u=o.default.select({url:"/CMD_EMAIL_AUTORESPONDER",params:{action:"delete"},domain:!0});t.deleteAutoresponders=u;var i=o.default.post({url:"/CMD_EMAIL_AUTORESPONDER",params:{action:"create"},domain:!0,schema:{user:o.default.REQUIRED_STRING,text:o.default.REQUIRED_STRING,cc:{type:String,required:!0,validator:function(e){return["ON","OFF"].includes(e)}},email:o.default.OPTIONAL_STRING}});t.createAutoresponder=i;var c=i.extend({params:{action:"modify"}});t.modifyAutoresponder=c;var d=o.default.get({id:"AUTORESPONDER",url:"/CMD_EMAIL_AUTORESPONDER_MODIFY",domain:!0,schema:{user:o.default.REQUIRED_STRING},after:function(e){return e.mapProps({text:e.flow(e.convert.toAppString,e.convert.toAppText),email:e.setDefault(""),cc:e.feedWith(1,e.flow(e.getProp("email"),e.notEmpty)),headers:a(e)})}});t.getAutoresponder=d;var l=o.default.get({id:"AUTORESPONDER_DEFAULTS",url:"/CMD_EMAIL_AUTORESPONDER_CREATE",domain:!0,after:function(e){return e.flow(e.getProp("headers"),a(e))}});t.getAutoresponderDefaults=l},2580:function(e,t,n){"use strict";n.r(t);var r=n(2581),o=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t.default=o.a},2581:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(36)),a=r(n(37));n(34),n(26),n(17);var s,u=n(2035),i={preload:u.getAutoresponders,api:[{command:u.getAutoresponders,bind:"autoresponders"}],data:function(){return{checkedRows:[]}},computed:{checkedAutoresponders:function(){return this.checkedRows.map((function(e){return e.name}))},limit:function(){return Number(this.$state.app.tokens.USERRESPONDERMAX)||1/0}},watch:{$domain:function(){this.reloadRows()}},methods:{reloadRows:function(){(0,u.getAutoresponders)()},deleteAutoResponders:(s=(0,a.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.deleteAutoresponders)({select:this.checkedAutoresponders});case 2:e.sent&&(this.checkedRows=[],this.reloadRows());case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})}};t.default=i},3621:function(e,t){},4007:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",{attrs:{actions:[{label:e.$gettext("Create Autoresponder"),name:"user/email/autoresponders/create",icon:"#plus-fill"}]}},[n("template",{slot:"details"},[n("ui-infobar-item",{attrs:{title:e.$gettext("Details")}},[n("ui-infobar-stats",{attrs:{title:e.$gettext("Forwarders"),usage:e.$api.autoresponders.length,limit:e.limit}})],1)],1),e._v(" "),n("ui-tokens-conditional-button",{attrs:{slot:"header:buttons",link:"",theme:"primary",name:"user/email/autoresponders/create",token:"USERRESPONDERMAX"},slot:"header:buttons"},[n("translate",[e._v("Create Autoresponder")]),e._v(" "),n("translate",{attrs:{slot:"limitText"},slot:"limitText"},[e._v("\n            Autoresponders limit reached\n        ")])],1),e._v(" "),n("app-page-section",[n("ui-r-table",e._b({attrs:{"disable-pagination":"","checked-rows":e.checkedRows},on:{"update:checkedRows":function(t){e.checkedRows=t},"update:checked-rows":function(t){e.checkedRows=t}},scopedSlots:e._u([{key:"row:actions",fn:function(t){var r=t.name;return n("ui-button-link",{attrs:{size:"small",theme:"light",name:"user/email/autoresponders/modify",params:{user:r},icon:"pencil",title:e.$gettext("Modify")}},[e.$_Client.isDesktop?n("translate",[e._v("\n                    Modify\n                ")]):e._e()],1)}},{key:"col:name",fn:function(t){var r=t.name;return n("span",{},[e._v(e._s(r)+"@"+e._s(e.$domainUnicode))])}},{key:"col:cc",fn:function(t){var r=t.cc;return n("span",{},[e._v(e._s(e._f("p6eUnicodeEmail")(r)))])}}])},"ui-r-table",{rows:e.$api.autoresponders,columns:[{id:"name",label:e.$gettext("Autoresponder"),grow:!0},{id:"cc",label:e.$gettext("CC Address")}],verticalLayout:e.$_Client.isPhone},!1),[n("ui-table-action",{attrs:{slot:"table:actions"},on:{click:function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()}},slot:"table:actions"},[n("translate",[e._v("Delete")])],1)],1)],1),e._v(" "),n("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("autoresponder","autoresponders",e.checkedRows.length)},on:{"click:confirm":e.deleteAutoResponders}})],2)},o=[]}}]);