(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[8187],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/nginx-templates/_components/add-new-template.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.keys.js"),o("./node_modules/core-js/modules/es.symbol.js"),o("./node_modules/core-js/modules/es.array.filter.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),o("./node_modules/core-js/modules/web.dom-collections.for-each.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),o("./node_modules/core-js/modules/es.object.define-properties.js"),o("./node_modules/core-js/modules/es.object.define-property.js");var s=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var n=s(o("./node_modules/@babel/runtime/regenerator/index.js")),r=s(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),l=s(o("./node_modules/@babel/runtime/helpers/defineProperty.js"));o("./node_modules/core-js/modules/es.array.reduce.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.function.name.js");var a=o("./src/js/api/commands/user/nginx-templates/index.js");function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,s)}return o}var u,d={api:a.getTemplates,data:function(){return{location:"/",template:""}},computed:{templates:function(){return this.$api.templates.reduce((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){(0,l.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}((0,l.default)({},t.template,t.name),e)}),{})}},watch:{location:function(e,t){var o=this;""===e&&t&&this.$nextTick((function(){o.location=t}))}},methods:{addTemplate:(u=(0,r.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.addTemplate)({location:this.location,nginx_template:this.template});case 2:if(!(e.sent instanceof Error)){e.next=5;break}return e.abrupt("return");case 5:(0,a.getTemplates)();case 6:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})}};t.Z=d},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/nginx-templates/index.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.keys.js"),o("./node_modules/core-js/modules/es.symbol.js"),o("./node_modules/core-js/modules/es.array.filter.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),o("./node_modules/core-js/modules/web.dom-collections.for-each.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),o("./node_modules/core-js/modules/es.object.define-properties.js"),o("./node_modules/core-js/modules/es.object.define-property.js");var s=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var n=s(o("./node_modules/@babel/runtime/regenerator/index.js")),r=s(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),l=s(o("./node_modules/@babel/runtime/helpers/defineProperty.js"));o("./node_modules/core-js/modules/es.array.reduce.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.function.name.js"),o("./node_modules/core-js/modules/es.array.map.js");var a=o("./src/js/api/commands/user/nginx-templates/index.js"),i=s(o("./src/js/pages/user/nginx-templates/_components/add-new-template.vue"));function u(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,s)}return o}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?u(Object(o),!0).forEach((function(t){(0,l.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var c,p,m={name:"NginxTemplates",preload:a.getTemplates,api:a.getTemplates,components:{AddNewTemplate:i.default},data:function(){return{selectedRows:[]}},computed:{templateNames:function(){return this.$api.templates.reduce((function(e,t){var o=t.template,s=t.name;return d(d({},e),{},(0,l.default)({},o,s))}))},locations:function(){var e=this;return this.$api.locations.map((function(t){return d(d({},t),{},{template:e.templateNames[t.nginx_template]})}))},nginxProxy:function(){return this.$_flags["server.nginxProxy"]},settings:function(){return this.$api.settings},isDisabled:function(){return!0===this.nginxProxy&&"1"===this.settings.nginx_proxy&&"0"===this.settings.domain_nginx}},methods:{addTemplateDialog:function(){this.$dialog("ADD_TEMPLATE_DIALOG").open()},deleteTemplates:(p=(0,r.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.deleteTemplates)({select:this.selectedRows.map((function(e){return e.location}))});case 2:(0,a.getTemplates)(),this.selectedRows=[];case 4:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)}),toggleNginxState:(c=(0,r.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.toggleNginxState)({state:this.isDisabled});case 2:(0,a.getTemplates)();case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})}};t.Z=m},"./src/js/api/commands/user/nginx-templates/index.js":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.keys.js"),o("./node_modules/core-js/modules/es.symbol.js"),o("./node_modules/core-js/modules/es.array.filter.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),o("./node_modules/core-js/modules/web.dom-collections.for-each.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),o("./node_modules/core-js/modules/es.object.define-properties.js"),o("./node_modules/core-js/modules/es.object.define-property.js"),o("./node_modules/core-js/modules/es.array.iterator.js"),o("./node_modules/core-js/modules/es.string.iterator.js"),o("./node_modules/core-js/modules/es.weak-map.js"),o("./node_modules/core-js/modules/web.dom-collections.iterator.js");var s=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=o("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"__esModule",{value:!0}),t.toggleNginxState=t.getTemplates=t.deleteTemplates=t.addTemplate=void 0;var r=s(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),l=s(o("./node_modules/@babel/runtime/helpers/slicedToArray.js")),a=s(o("./src/js/api/command/index.js")),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var o=u(t);if(o&&o.has(e))return o.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(s,l,a):s[l]=e[l]}s.default=e,o&&o.set(e,s);return s}(o("./node_modules/ramda/src/index.js"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(u=function(e){return e?o:t})(e)}function d(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,s)}return o}function c(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(Object(o),!0).forEach((function(t){(0,r.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var p=i.curry((function(e,t){return i.map((function(t){var o=(0,l.default)(t,2),s=o[0];return c(c({},o[1]),{},(0,r.default)({},e,s))}),i.toPairs(t))})),m=a.default.get({url:"/CMD_NGINX_TEMPLATES",id:"NGINX_TEMPLATES",domain:!0,mapResponse:{locations:i.pipe(i.prop("locations"),p("location")),templates:i.pipe(i.prop("templates"),p("template")),settings:i.prop("settings")}});t.getTemplates=m;var j=a.default.post({url:"/CMD_NGINX_TEMPLATES",domain:!0,params:{action:"save"},schema:{location:a.default.REQUIRED_STRING,nginx_template:a.default.REQUIRED_STRING}});t.addTemplate=j;var f=a.default.select({url:"/CMD_NGINX_TEMPLATES",domain:!0,params:{action:"delete"}});t.deleteTemplates=f;var b=a.default.post({url:"/CMD_DOMAIN",domain:!0,params:{action:"modify",only_affect:"nginx"},schema:{state:a.default.REQUIRED_BOOL},before:function(e){return{state:null,nginx:e.state?"1":"0"}}});t.toggleNginxState=b},"./src/js/pages/user/nginx-templates/_components/add-new-template.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return s.X},default:function(){return r}});var s=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/nginx-templates/_components/add-new-template.vue?vue&type=script&lang=js&"),n=s.Z,r=(0,o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ui-dialog",{attrs:{id:"ADD_TEMPLATE_DIALOG",size:"normal"}},[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        Add Template\n    ")]),e._v(" "),o("template",{slot:"content"},[o("ui-form-element",{attrs:{vertical:"",group:"add-nginx-template",validators:{required:!0}}},[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Location\n            ")]),e._v(" "),o("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.location,callback:function(t){e.location=t},expression:"location"}})],1),e._v(" "),o("ui-form-element",{attrs:{vertical:""}},[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Template\n            ")]),e._v(" "),o("input-select",{attrs:{slot:"content",options:e.templates},slot:"content",model:{value:e.template,callback:function(t){e.template=t},expression:"template"}})],1)],1),e._v(" "),o("ui-button",{attrs:{slot:"buttons",theme:"safe","validate-group":"add-nginx-template",disabled:!e.template},on:{click:e.addTemplate},slot:"buttons"},[o("translate",[e._v("Add Template")])],1)],2)}),[],!1,null,null,null).exports},"./src/js/pages/user/nginx-templates/index.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return s.X},default:function(){return u}});var s=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/nginx-templates/index.vue?vue&type=script&lang=js&"),n=s.Z,r=o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),l=o("./src/js/pages/user/nginx-templates/index.vue?vue&type=custom&index=0&blockType=route"),a=o.n(l),i=(0,r.Z)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("app-page",{attrs:{actions:[{label:e.$gettext("Add Template"),icon:"#plus-fill",handler:e.addTemplateDialog,visible:!1===e.isDisabled},{label:e.isDisabled?e.$gettext("Enable"):e.$gettext("Disable"),icon:"#console",handler:e.toggleNginxState}]}},[!1===e.isDisabled?o("ui-button",{key:"add-template-button",attrs:{slot:"header:buttons",theme:"safe"},on:{click:e.addTemplateDialog},slot:"header:buttons"},[o("translate",[e._v("Add Template")])],1):e._e(),e._v(" "),o("ui-button",{key:"toggle-button",attrs:{slot:"header:buttons",theme:e.isDisabled?"safe":"danger"},on:{click:e.toggleNginxState},slot:"header:buttons"},[e._v("\n        "+e._s(e.isDisabled?e.$gettext("Enable"):e.$gettext("Disable"))+"\n    ")]),e._v(" "),o("app-page-section",[o("ui-r-table",{attrs:{rows:e.locations,columns:[{id:"location",label:e.$gettext("Location")},{id:"template",label:e.$gettext("Template")}],"checked-rows":e.selectedRows},on:{"update:checkedRows":function(t){e.selectedRows=t},"update:checked-rows":function(t){e.selectedRows=t}}},[o("ui-table-action",{attrs:{slot:"table:actions"},on:{click:e.deleteTemplates},slot:"table:actions"},[o("translate",[e._v("Delete")])],1)],1)],1),e._v(" "),o("add-new-template")],1)}),[],!1,null,null,null);"function"==typeof a()&&a()(i);var u=i.exports},"./src/js/pages/user/nginx-templates/index.vue?vue&type=custom&index=0&blockType=route":function(){}}]);