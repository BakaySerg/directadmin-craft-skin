(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{1832:function(t,e,n){"use strict";n.r(e);var r=n(4030),o=n(2652);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);var i=n(0),u=n(3674),s=n.n(u),c=Object(i.a)(o.default,r.a,r.b,!1,null,null,null);"function"==typeof s.a&&s()(c),e.default=c.exports},1886:function(t,e,n){"use strict";n.r(e),n.d(e,"preload",(function(){return _})),n.d(e,"GET",(function(){return w})),n.d(e,"POST",(function(){return T})),n.d(e,"PUT",(function(){return k})),n.d(e,"PATCH",(function(){return x})),n.d(e,"DELETE",(function(){return D})),n.d(e,"$gettext",(function(){return S}));var r=n(30),o=n.n(r),a=n(28),i=n(9),u=n(1893),s=n(1894),c=n(13),l=new o.a,d={401:"UNAUTHORIZED",404:"ENDPOINT_NOT_FOUND",405:"METHOD_NOT_ALLOWED"},f={BAD_REQUEST:l.$gettext("Bad Request: %{ message }"),UNAUTHORIZED:l.$gettext("Unauthorized"),ACCESS_DENIED:l.$gettext("Access Denied"),INTERNAL_ERROR:l.$gettext("Server Error: %{ message }"),METHOD_NOT_ALLOWED:l.$gettext("Method Not Allowed"),ENDPOINT_NOT_FOUND:l.$gettext("Endpoint Not Found")},p=function(t,e,n){void 0===n&&(n={});var r=l.$gettextInterpolate(e,n||{});return{status:t,message:r,type:n.type,data:i.omit(["type"],n),notify:function(){return a.Store.dispatch("notifications/NOTIFY",{theme:"danger",title:l.$gettext("Error"),content:r,route:a.Store.state.app.route.path||"/",time:new Date})}}},y=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function u(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,u)}s((r=r.apply(t,e||[])).next())}))},v=function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},m={data:{},statusCodes:{},errorMessages:{}},g=function(t,e,n){void 0===n&&(n={});var r=function(t,e){return(t+"_"+e.slice(5).replace(/\//,"_").replace(/\:/,"")).toUpperCase()}(t,e);n=i.mergeDeepRight(m,n);var o=Object(s.registerEndpoint)(r,n.data);return{endpoint:o,request:function(i){return y(void 0,void 0,void 0,(function(){var s,y,m;return v(this,(function(v){switch(v.label){case 0:return a.Store&&a.Store.state.commands.blockingRequest?[4,a.Store.state.commands.blockingRequest]:[3,2];case 1:v.sent(),v.label=2;case 2:o.params=i||{},o.state={isLoading:!0},v.label=3;case 3:return v.trys.push([3,5,,6]),[4,Object(u.request)({endpointID:r,url:e,method:t},o.params)];case 4:return s=v.sent(),"get"===t&&(o.data=s.data),o.state={isOk:!0,isDone:!0,isLoading:!1,error:null},[2,{state:"success",data:s.data,error:null}];case 5:return y=v.sent(),401===(m=function(t,e,n){var r;void 0===e&&(e={}),void 0===n&&(n={});var o=Object.assign(e,d),a=Object.assign(n,f);if(t.response){if(t.response.data&&t.response.data.type)if(void 0!==a[(i=t.response.data).type])return p(t.response.status,a[i.type],i);if(o[t.response.status]){var i={type:o[t.response.status]};t.response.data=i;var u=o[t.response.status];if(u&&a[u])return p(t.response.status,a[u],{type:u})}}else if(t.request)return c.emitter.emit("request:networkerror"),p(-1,l.$gettext("Network Error: Server is unreachable"),{type:"NETWORK_UNREACHABLE"});return p((null===(r=null==t?void 0:t.response)||void 0===r?void 0:r.status)||-1,l.$gettext("Unknown Error"),{type:"UNKNOWN_ERROR"})}(y,n.statusCodes,n.errorMessages)).status&&window.location.reload(),o.state={isOk:!1,isDone:!0,isLoading:!1,error:m},[2,{state:"error",error:m,data:null}];case 6:return[2]}}))}))}}},b=function(t,e,n){void 0===n&&(n={});var r=g(t,e,n),o=r.endpoint,a=r.request;return Object.freeze({get params(){return o.params},get state(){return o.state},request:a})},h=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function u(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,u)}s((r=r.apply(t,e||[])).next())}))},O=function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},E=function(t,e){return t.notify(),e(!1)},_=function(t,e){return void 0===e&&(e=E),function(n,r,o){return h(void 0,void 0,void 0,(function(){var a,i,u;return O(this,(function(s){switch(s.label){case 0:return[4,Promise.all(t.map((function(t){return t(n,r)})))];case 1:return a=s.sent(),void 0!==(i=a.find((function(t){return"error"===t.state})))?(u=i.error,[2,e(u,o)]):(o(),[2])}}))}))}},w=function(t,e){return function(t,e,n){void 0===n&&(n={});var r=g(t,e,n),o=r.endpoint,a=r.request;return Object.freeze({get data(){return o.data},set data(t){o.data=t},get params(){return o.params},get state(){return o.state},request:a,bindData:function(t){return function(){return t?t(o.data):o.data}}})}("get",t,e)},T=function(t,e){return b("post",t,e)},k=function(t,e){return b("put",t,e)},x=function(t,e){return b("patch",t,e)},D=function(t,e){return b("delete",t,e)},S=(new o.a).$gettext},1893:function(t,e,n){"use strict";n(16),n(14),n(23),n(25),n(18),n(6);var r=n(1),o=n(19);Object.defineProperty(e,"__esModule",{value:!0}),e.request=void 0;var a=r(n(36)),i=r(n(37));n(12),n(15),n(21),n(40),n(84);var u=r(n(505)),s=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!=typeof t)return{default:t};var n=d(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var u=a?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=t[i]}r.default=t,n&&n.set(t,r);return r}(n(9)),c=n(31),l=n(28);function d(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(d=function(t){return t?n:e})(t)}var f=u.default.create({baseURL:"/api"});f.interceptors.request.use(s.mergeDeepRight({timeout:0,headers:{Accept:"application/json","Content-Type":"application/json",Pragma:"no-cache"}}));var p,y=function(t,e){if(t.includes(":")){var n=[];return{url:t.replace(/:[a-z]*/g,(function(t){if(":domain"===t&&!e.domain)return l.Store.state.app.domain;t=t.slice(1);var r=e[t];if(void 0===r)throw new Error("EndpointParamError: ".concat(t," is not defined"));return n.push(t),r})),urlParams:n}}return{url:t,urlParams:[]}},v=(p=(0,i.default)(a.default.mark((function t(e,n){var r,o,i,u,l,d,p;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof e.url){t.next=2;break}throw new Error("Unsupported URL format");case 2:return r=y(e.url,n),o=r.url,i=r.urlParams,u={endpointID:e.endpointID,url:o,method:e.method},l=s.omit(i,n),!1===s.isEmpty(l)&&(d="get"===e.method?"params":"data",u[d]=l),t.prev=6,t.next=9,f.request(u);case 9:return t.abrupt("return",t.sent);case 12:throw t.prev=12,t.t0=t.catch(6),c.ENV.DEV&&(console.group(),console.dir(u),p=u.params||u.data,console.table({"Endpoint ID":u.endpointID,Url:u.url,Method:u.method,"Request Data":JSON.stringify(p),"Response Status Code":t.t0.response.status,"Response Data":JSON.stringify(t.t0.response.data)}),console.groupEnd()),t.t0;case 16:case"end":return t.stop()}}),t,null,[[6,12]])}))),function(t,e){return p.apply(this,arguments)});e.request=v},1894:function(t,e,n){"use strict";n(16),n(14),n(23),n(25),n(18),n(6);var r=n(19);Object.defineProperty(e,"__esModule",{value:!0}),e.registerEndpoint=void 0,n(49);var o=n(28),a=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=i(e);if(n&&n.has(t))return n.get(t);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var s=a?Object.getOwnPropertyDescriptor(t,u):null;s&&(s.get||s.set)?Object.defineProperty(o,u,s):o[u]=t[u]}o.default=t,n&&n.set(t,o);return o}(n(9));function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(i=function(t){return t?n:e})(t)}e.registerEndpoint=function(t,e){return o.Store.commit("endpoints/REGISTER_ENDPOINT",{id:t,data:e}),{get data(){return a.clone(o.Store.state.endpoints[t].data)},set data(e){o.Store.commit("endpoints/SET_DATA",{id:t,data:e})},get state(){return o.Store.state.endpoints[t].state},set state(e){o.Store.commit("endpoints/SET_STATE",{id:t,state:Object.assign({},{isLoading:!1,isOk:!1,isError:!1,error:null},e)})},get params(){return a.clone(o.Store.state.endpoints[t].params)},set params(e){o.Store.commit("endpoints/SET_PARAMS",{id:t,params:e})}}}},1943:function(t,e,n){"use strict";n.r(e),n.d(e,"postDeploy",(function(){return o})),n.d(e,"getGit",(function(){return a})),n.d(e,"postInit",(function(){return i})),n.d(e,"postFetch",(function(){return u})),n.d(e,"postWebhook",(function(){return s})),n.d(e,"deleteRepo",(function(){return c})),n.d(e,"getInfo",(function(){return l})),n.d(e,"getLogs",(function(){return d})),n.d(e,"putModify",(function(){return f})),n.d(e,"getCommit",(function(){return p})),n.d(e,"getDefaultBranch",(function(){return y}));var r=n(1886),o=Object(r.POST)("/git/uuid/:uuid/deploy",{statusCodes:{409:"GIT_DEPLOY_BRANCH_NOT_SET",410:"GIT_DEPLOY_DIR_NOT_SET"},errorMessages:{GIT_DEPLOY_BRANCH_NOT_SET:Object(r.$gettext)("Git deploy branch is not set"),GIT_DEPLOY_DIR_NOT_SET:Object(r.$gettext)("Git deploy directory is not set")}}),a=Object(r.GET)("/git/domain/:domain"),i=Object(r.POST)("/git/domain/:domain",{statusCodes:{409:"GIT_DIRECTORY_EXISTS"},errorMessages:{GIT_DIRECTORY_EXISTS:Object(r.$gettext)("Git directory exists %{ directory }")}}),u=Object(r.POST)("/git/uuid/:uuid/fetch"),s=Object(r.POST)("/git/uuid/:uuid/webhook"),c=Object(r.DELETE)("/git/uuid/:uuid"),l=Object(r.GET)("/git/uuid/:uuid"),d=Object(r.GET)("/git/uuid/:uuid/branch/:branch"),f=Object(r.PUT)("/git/uuid/:uuid"),p=Object(r.GET)("/git/uuid/:uuid/commit/:commit"),y=function(t){return 0===t.length?"":["main","master"].find((function(e){return t.includes(e)}))||t[0]}},2652:function(t,e,n){"use strict";n.r(e);var r=n(2653),o=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e.default=o.a},2653:function(t,e,n){"use strict";var r=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n(36));n(26);var a,i=r(n(37)),u=n(1943),s={data:function(){return{selectedRows:[],query:{name:"",keyfile:"",remote:""}}},computed:{domain:function(){return this.$domain}},methods:{git:(a=(0,i.default)(o.default.mark((function t(){var e,n;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.postInit.request({domain:this.domain,name:this.query.name,keyfile:this.query.keyfile||null,remote:this.query.remote||null});case 2:e=t.sent,(n=e.error)?n.notify():(this.$notifications.success({title:this.$gettext("Git"),content:this.$gettext("Repository created")}),this.$router.push("/user/git-version"));case 5:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})}};e.default=s},3674:function(t,e){},4030:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n            Domain\n        ")]),t._v(" "),n("input-text",{attrs:{slot:"content",disabled:""},slot:"content",model:{value:t.$domainUnicode,callback:function(e){t.$domainUnicode=e},expression:"$domainUnicode"}})],1),t._v(" "),n("ui-form-element",{attrs:{group:"git-init",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n            Name\n        ")]),t._v(" "),n("input-text",{attrs:{slot:"content",required:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.git.apply(null,arguments)}},slot:"content",model:{value:t.query.name,callback:function(e){t.$set(t.query,"name",e)},expression:"query.name"}})],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n            Remote\n        ")]),t._v(" "),n("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v("\n            Optional\n        ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.git.apply(null,arguments)}},slot:"content",model:{value:t.query.remote,callback:function(e){t.$set(t.query,"remote",e)},expression:"query.remote"}})],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n            Keyfile\n        ")]),t._v(" "),n("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v("\n            Optional\n        ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.git.apply(null,arguments)}},slot:"content",model:{value:t.query.keyfile,callback:function(e){t.$set(t.query,"keyfile",e)},expression:"query.keyfile"}})],1),t._v(" "),n("ui-button",{attrs:{slot:"footer:buttons",theme:"primary","validate-group":"git-init"},on:{click:t.git},slot:"footer:buttons"},[n("translate",[t._v("Create repository")])],1)],1)},o=[]}}]);