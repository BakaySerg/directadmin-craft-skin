(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{1726:function(e,t,n){"use strict";n.r(t);var r=n(3927),a=n(2132);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var u=n(0),o=n(3252),l=n.n(o),s=Object(u.a)(a.default,r.a,r.b,!1,null,null,null);"function"==typeof l.a&&l()(s),t.default=s.exports},2132:function(e,t,n){"use strict";n.r(t);var r=n(2133),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=a.a},2133:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(12);var a,i=r(n(36)),u=r(n(37)),o=n(1954),l=n(3247),s=r(n(2023)),d=r(n(3251)),f={preload:l.getEmailSummary,api:l.getEmailSummary,components:{DateRangePicker:s.default,DetailsDialog:d.default},data:function(){return{query:{range:{start:(0,o.subDays)(new Date,1),end:new Date}},rows:[],currentDomain:{}}},methods:{updateRange:function(e){this.query.range.start=e.start,this.query.range.end=e.end},request:(a=(0,u.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,l.getEmailSummary)({from:this.query.range.start,to:this.query.range.end});case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),showRawInfo:function(e){this.currentDomain=e,this.$dialog("EMAIL_SUMMARY_DETAILS_DIALOG").open()},sortBy:function(e){var t=["delivered","failed","deferred","unknown"].includes(e);return function(n){return t?n[e].count:n[e]}}}};t.default=f},2137:function(e,t,n){"use strict";n.r(t);var r=n(2138),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=a.a},2138:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(12);var r={props:{item:{type:Object,required:!0}},methods:{hasCount:function(e){return["unknown","deferred","failed","delivered"].includes(e)}}};t.default=r},3247:function(e,t,n){"use strict";var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getEmailSummary=void 0;var a=r(n(78)),i=n(1954),u=a.default.get({url:"/CMD_EMAIL_SUMMARY",id:"EMAIL_SUMMARY",schema:{from:{type:Date,required:!1,default:function(){return(0,i.subDays)(new Date,1)}},to:{type:Date,required:!1,default:function(){return new Date}}}});t.getEmailSummary=u},3251:function(e,t,n){"use strict";n.r(t);var r=n(4090),a=n(2137);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var u=n(0),o=Object(u.a)(a.default,r.a,r.b,!1,null,null,null);t.default=o.exports},3252:function(e,t){},3927:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[n("app-page-section",{on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.request.apply(null,arguments)}}},[n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Range\n            ")]),e._v(" "),n("date-range-picker",{attrs:{slot:"content",range:e.query.range},on:{"update:range":e.updateRange,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.request.apply(null,arguments)}},slot:"content"})],1),e._v(" "),n("ui-button",{attrs:{slot:"footer:buttons",theme:"primary"},on:{click:function(t){return t.preventDefault(),e.request.apply(null,arguments)}},slot:"footer:buttons"},[n("translate",[e._v("Search")])],1)],1),e._v(" "),n("app-page-section",[n("ui-r-table",e._b({attrs:{"disable-pagination":""},scopedSlots:e._u([{key:"col:domain",fn:function(t){var r=t.domain;return n("ui-link",{attrs:{name:"user/email/email-tracking",params:{domain:r}}},[e._v("\n                "+e._s(r)+"\n            ")])}},{key:"col:owner",fn:function(t){var r=t.owner;return"-unknown-"!==r?n("ui-link",{attrs:{name:"reseller/users/view",params:{user:r}}},[e._v("\n                "+e._s(r)+"\n            ")]):e._e()}},{key:"col:delivered",fn:function(t){var n=t.delivered;return[e._v("\n                "+e._s(n.count)+"\n            ")]}},{key:"col:failed",fn:function(t){var n=t.failed;return[e._v("\n                "+e._s(n.count)+"\n            ")]}},{key:"col:deferred",fn:function(t){var n=t.deferred;return[e._v("\n                "+e._s(n.count)+"\n            ")]}},{key:"col:unknown",fn:function(t){var n=t.unknown;return[e._v("\n                "+e._s(n.count)+"\n            ")]}},{key:"col:size",fn:function(t){var r=t.size;return n("span",{staticClass:"wrap:nowrap"},[e._v("\n                "+e._s(e._f("humanReadableSize")(r))+"\n            ")])}},{key:"row:actions",fn:function(t){var r=t.item;return n("ui-link",{attrs:{title:e.$gettext("Show Info")},on:{click:function(t){return e.showRawInfo(r)}}},[n("ui-icon",{attrs:{id:"circle-info",theme:"safe"}})],1)}}],null,!0)},"ui-r-table",{rows:e.$api,columns:[{id:"domain",label:e.$gettext("Domain")},{id:"mailbox",label:e.$gettext("Mailbox")},{id:"owner",label:e.$gettext("Owner")},{id:"delivered",label:e.$gettext("Delivered")},{id:"failed",label:e.$gettext("Failed")},{id:"deferred",label:e.$gettext("Deferred")},{id:"unknown",label:e.$gettext("Unknown")},{id:"size",label:e.$gettext("Size")},{id:"count",label:e.$gettext("Amount")}],verticalLayout:e.$_Client.isPhone,isCheckable:!1,isSortable:!0,sortBy:e.sortBy},!1)),e._v(" "),n("details-dialog",{attrs:{item:e.currentDomain}})],1)],1)},a=[]},4090:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"EMAIL_SUMMARY_DETAILS_DIALOG"}},[n("span",{attrs:{slot:"title"},domProps:{textContent:e._s(e.item.id||e.$gettext("Details"))},slot:"title"}),e._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("table",e._l(e.item,(function(t,r){return n("tr",{key:r},[n("td",{domProps:{textContent:e._s(r+":")}}),e._v(" "),n("td",[e.hasCount(r)?n("ui-tooltip",[n("span",{attrs:{slot:"trigger"},slot:"trigger"},[e._v("\n                            "+e._s(t.count)+" / "+e._s(e._f("humanReadableSize")(t.size))+"\n                        ")]),e._v(" "),n("translate",[e._v("\n                            Amount / Size\n                        ")])],1):"size"===r?[e._v("\n                        "+e._s(e._f("humanReadableSize")(t))+"\n                    ")]:n("span",{domProps:{textContent:e._s(t)}})],2)])})),0)])])},a=[]}}]);