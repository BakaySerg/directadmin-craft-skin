(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[4517],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/subdomains/docroot.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.string.search.js"),o("./node_modules/core-js/modules/es.array.iterator.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.string.iterator.js"),o("./node_modules/core-js/modules/es.weak-map.js"),o("./node_modules/core-js/modules/web.dom-collections.iterator.js"),o("./node_modules/core-js/modules/es.object.define-property.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var r=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),s=o("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,o("./node_modules/core-js/modules/es.regexp.exec.js"),o("./node_modules/core-js/modules/es.string.split.js"),o("./node_modules/core-js/modules/es.array.join.js");var n=r(o("./node_modules/@babel/runtime/regenerator/index.js")),a=r(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=o("./src/js/api/commands/subdomains.js"),l=o("./src/js/api/commands/fm.js"),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var o=p(t);if(o&&o.has(e))return o.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,o&&o.set(e,r);return r}(o("./node_modules/ramda/src/index.js")),d=o("./src/js/modules/utils/index.js");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(p=function(e){return e?o:t})(e)}var c,m,v,f="/domains",h=l.search.extend({params:{type:"directories"},mapResponse:function(e){return u.keys(e.directories)}}),_={preload:[i.getPhpDocrootOptions],api:[{command:i.getPhpDocrootOptions,bind:"options"}],props:{subdomain:{type:String,required:!0,default:""}},data:function(){return{http:"",https:"",overrideHttp:!1,overrideHttps:!1,dirs:[],php:"",active:""}},watch:{overrideHttp:function(e){e&&!this.http&&(this.http="".concat(f,"/").concat(this.$domain,"/"))},overrideHttps:function(e){e&&!this.https&&(this.https="".concat(f,"/").concat(this.$domain,"/"))}},created:(v=(0,a.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.php=this.$api.options.php.value,this.overrideHttp=Boolean(this.$api.options.http),this.overrideHttps=Boolean(this.$api.options.https),this.overrideHttp&&(this.http=this.$api.options.http),this.overrideHttps&&(this.https=this.$api.options.https);case 5:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)}),methods:{loadDirs:d._.debounce((0,a.default)(n.default.mark((function e(){var t,o,r,s;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this[this.active],o=t.split("/"),r=o.pop(),(s=o.join("/"))&&r&&!(r.length<2)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,h({path:s,search:r});case 8:this.dirs=e.sent;case 9:case"end":return e.stop()}}),e,this)}))),500),saveDocroot:(m=(0,a.default)(n.default.mark((function e(){var t;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={subdomain:this.subdomain,public_html:this.overrideHttp?this.http:this.http?"":null,private_html:this.overrideHttps?this.https:this.https?"":null},e.next=3,(0,i.docrootOverride)(t);case 3:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)}),savePhp:(c=(0,a.default)(n.default.mark((function e(){var t;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={subdomain:this.subdomain,php1_select:this.php},(0,i.phpOverride)(t);case 2:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})}};t.Z=_},"./src/js/api/commands/subdomains.js":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.symbol.js"),o("./node_modules/core-js/modules/es.array.filter.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),o("./node_modules/core-js/modules/web.dom-collections.for-each.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),o("./node_modules/core-js/modules/es.object.define-properties.js"),o("./node_modules/core-js/modules/es.object.define-property.js");var r=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.phpOverride=t.getSubdomains=t.getSubdomainLog=t.getPhpDocrootOptions=t.docrootOverride=t.deleteSubdomains=t.createSubdomain=void 0,o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.promise.js"),o("./node_modules/core-js/modules/es.object.keys.js"),o("./node_modules/core-js/modules/es.array.slice.js");var s=r(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),n=r(o("./src/js/api/command/index.js"));function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}var i=n.default.get({id:"GET_SUBDOMAINS",url:"/CMD_SUBDOMAIN",schema:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){(0,s.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({domain:n.default.DOMAIN},n.default.PAGINATION),after:function(e){return e.flow(e.moveProp("subdomains","rows"),e.moveProp("allow_subdomain_docroot_override","docroot"),e.processTableInfo("rows"),e.mapProps({awstats:function(e){return"0"!==e},webalizer:e.isEqual("1"),docroot:e.isEqual("1"),has_php_selector:e.isEqual("yes"),rows:e.flow(e.toArray,e.mapArray(e.moveProp("subdomain_docroot_override","docroot")),e.mapArrayProps({bandwidth:e.convert.toAppNumber,stats:e.mapProps({webalizer_only:e.convert.toAppBoolean}),docroot:function(t){if(t&&Object.keys(t).length){if(void 0!==t.php1_select){var o=e.toSelect(t.php1_select),r=o.options,s=o.value;return{public_html:t.public_html,private_html:t.private_html,php_labels:r,php1_select:s}}return t}return!1}}))}))}});t.getSubdomains=i;var l=n.default.post({url:"/CMD_SUBDOMAIN",params:{action:"create"},schema:{domain:n.default.DOMAIN,subdomain:n.default.REQUIRED_STRING}});t.createSubdomain=l;var u=n.default.select({url:"/CMD_SUBDOMAIN",params:{action:"delete"},domain:!0,body:{contents:n.default.REQUIRED_BOOL}});t.deleteSubdomains=u;var d=n.default.get({id:"GET_SUBDOMAIN_LOG",url:"/CMD_SHOW_LOG",params:{json:null},accept:"text/plain",schema:{domain:n.default.DOMAIN,type:n.default.REQUIRED_STRING,subdomain:n.default.REQUIRED_STRING,lines:n.default.OPTIONAL_STRING},after:function(e){return e.flow(e.convert.toLines,(function(e){return e.slice(0,-1)}))}});t.getSubdomainLog=d;var p=n.default.post({url:"/CMD_SUBDOMAIN",params:{action:"document_root_override"},domain:!0,schema:{subdomain:n.default.REQUIRED_STRING,private_html:n.default.OPTIONAL_STRING,public_html:n.default.OPTIONAL_STRING}});t.docrootOverride=p;var c=n.default.post({url:"/CMD_SUBDOMAIN",domain:!0,params:{action:"php_selector"},schema:{subdomain:n.default.REQUIRED_STRING,php1_select:n.default.REQUIRED_STRING}});t.phpOverride=c;var m=n.default.get({url:"/CMD_SUBDOMAIN",id:"SUBDOMAIN_DATA",domain:!0,params:{action:"show_docroot_override"},schema:{subdomain:n.default.REQUIRED_STRING},after:function(e){return e.flow(e.project({has_php_selector:"has_php_selector",http:"public_html",https:"private_html",php:"php1_select"}),e.mapProps({php:e.toSelect,has_php_selector:e.isEqual("yes")}))}});t.getPhpDocrootOptions=m},"./src/js/pages/user/subdomains/docroot.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return r.X},default:function(){return u}});var r=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/subdomains/docroot.vue?vue&type=script&lang=js&"),s=r.Z,n=o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),a=o("./src/js/pages/user/subdomains/docroot.vue?vue&type=custom&index=0&blockType=route"),i=o.n(a),l=(0,n.Z)(s,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("app-page",[o("app-page-section",[o("ui-form-element",[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Public HTML Root\n            ")]),e._v(" "),o("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center'}"}],attrs:{slot:"content"},slot:"content"},[o("input-radio",{attrs:{value:!1},model:{value:e.overrideHttp,callback:function(t){e.overrideHttp=t},expression:"overrideHttp"}},[o("translate",[e._v("Default")])],1),e._v(" "),o("input-radio",{directives:[{name:"margin",rawName:"v-margin:left",value:1,expression:"1",arg:"left"}],attrs:{value:!0},model:{value:e.overrideHttp,callback:function(t){e.overrideHttp=t},expression:"overrideHttp"}},[o("translate",[e._v("Custom")])],1)],1)],1),e._v(" "),e.overrideHttp?o("ui-form-element",{attrs:{group:"docroot-override",validators:{required:!0}}},[o("span",{attrs:{slot:"title"},slot:"title"}),e._v(" "),o("input-autocomplete",{attrs:{slot:"content",values:e.dirs,"allow-open":"http"===e.active,"force-all-values":""},on:{input:e.loadDirs,focus:function(t){e.active="http",e.dirs=[]}},slot:"content",model:{value:e.http,callback:function(t){e.http=t},expression:"http"}}),e._v(" "),o("translate",{attrs:{slot:"error:validateDir"},slot:"error:validateDir"},[e._v("\n                Folder does not exist\n            ")])],1):e._e(),e._v(" "),o("ui-form-element",[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Private HTML Root\n            ")]),e._v(" "),o("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center'}"}],attrs:{slot:"content"},slot:"content"},[o("input-radio",{attrs:{value:!1},model:{value:e.overrideHttps,callback:function(t){e.overrideHttps=t},expression:"overrideHttps"}},[o("translate",[e._v("Default")])],1),e._v(" "),o("input-radio",{directives:[{name:"margin",rawName:"v-margin:left",value:1,expression:"1",arg:"left"}],attrs:{value:!0},model:{value:e.overrideHttps,callback:function(t){e.overrideHttps=t},expression:"overrideHttps"}},[o("translate",[e._v("Custom")])],1)],1)],1),e._v(" "),e.overrideHttps?o("ui-form-element",{attrs:{group:"docroot-override",validators:{required:!0}}},[o("span",{attrs:{slot:"title"},slot:"title"}),e._v(" "),o("input-autocomplete",{attrs:{slot:"content",values:e.dirs,"allow-open":"http"===e.active,"force-all-values":""},on:{input:e.loadDirs,focus:function(t){e.active="https",e.dirs=[]}},slot:"content",model:{value:e.https,callback:function(t){e.https=t},expression:"https"}}),e._v(" "),o("translate",{attrs:{slot:"error:validateDir"},slot:"error:validateDir"},[e._v("\n                Folder does not exist\n            ")])],1):e._e(),e._v(" "),o("ui-button",{attrs:{slot:"footer:buttons",theme:"safe","validate-group":"docroot-override"},on:{click:e.saveDocroot},slot:"footer:buttons"},[o("translate",[e._v("Save")])],1)],1),e._v(" "),e.$api.options.has_php_selector?o("app-page-section",[o("translate",{attrs:{slot:"section:title"},slot:"section:title"},[e._v("\n            PHP Version Selector\n        ")]),e._v(" "),o("ui-form-element",[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                First\n            ")]),e._v(" "),o("input-select",{attrs:{slot:"content",options:e.$api.options.php.options},slot:"content",model:{value:e.php,callback:function(t){e.php=t},expression:"php"}})],1),e._v(" "),o("ui-button",{attrs:{slot:"footer:buttons",theme:"safe"},on:{click:e.savePhp},slot:"footer:buttons"},[o("translate",[e._v("Save")])],1)],1):e._e()],1)}),[],!1,null,null,null);"function"==typeof i()&&i()(l);var u=l.exports},"./src/js/pages/user/subdomains/docroot.vue?vue&type=custom&index=0&blockType=route":function(){}}]);