(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{1813:function(t,e,n){"use strict";n.r(e);var r=n(4011),a=n(2588);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);var o=n(0),u=n(3632),l=n.n(u),s=Object(o.a)(a.default,r.a,r.b,!1,null,null,null);"function"==typeof l.a&&l()(s),e.default=s.exports},2588:function(t,e,n){"use strict";n.r(e);var r=n(2589),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e.default=a.a},2589:function(t,e,n){"use strict";n(16),n(14),n(23),n(25),n(18),n(6);var r=n(1),a=n(19);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(36)),o=r(n(37)),u=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=y(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var u=i?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=t[o]}r.default=t,n&&n.set(t,r);return r}(n(9)),l=r(n(3123)),s=r(n(2023)),c=r(n(3630)),d=n(1954),f=n(3631),p=r(n(3124));function y(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(y=function(t){return t?n:e})(t)}var v,g={components:{DateRangePicker:s.default,DetailsDialog:c.default,RecipientBadge:l.default},mixins:[p.default],api:f.getEmailTracking,preload:[function(t){var e=t.domain;return(0,f.getEmailTracking)({domain:e})}],props:{domain:{type:String,default:null}},data:function(){return{query:{domain:"",address:"",state:"",range:{start:(0,d.subDays)(new Date,1),end:new Date},type:["out","in"]},details:{}}},methods:{updateRange:function(t){this.query.range.start=t.start,this.query.range.end=t.end},request:(v=(0,o.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(0,f.getEmailTracking)({from:this.query.range.start,to:this.query.range.end,domain:this.query.domain||null,address:this.query.address||null,state:this.query.state||null,type:2===this.query.type.length?null:this.query.type[0]});case 1:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)}),showRawInfo:function(t){this.details=t,this.$dialog("EMAIL_TRACKING_DETAILS_DIALOG").open()},sortBy:function(t){var e=u.pipe(u.prop("to"),u.map(u.prop("address")));return"to"===t?e:u.prop(t)}}};e.default=g},2590:function(t,e,n){"use strict";n.r(e);var r=n(2591),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e.default=a.a},2591:function(t,e,n){"use strict";var r=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={mixins:[r(n(3124)).default],props:{address:{type:String,required:!0},state:{type:String,required:!0},message:{type:String,required:!1,default:""}},computed:{badge:function(){return this.STATES[this.state]}}};e.default=a},2592:function(t,e,n){"use strict";n.r(e);var r=n(2593),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e.default=a.a},2593:function(t,e,n){"use strict";var r=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={components:{RecipientBadge:r(n(3123)).default},props:{item:{type:Object,required:!0}}};e.default=a},3123:function(t,e,n){"use strict";n.r(e);var r=n(4160),a=n(2590);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);var o=n(0),u=Object(o.a)(a.default,r.a,r.b,!1,null,null,null);e.default=u.exports},3124:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={created:function(){this.STATES={delivered:{theme:"safe",label:this.$gettext("Delivered"),icon:"circle-check-fill"},failed:{theme:"danger",label:this.$gettext("Failed"),icon:"warning"},unknown:{theme:"neutral",label:this.$gettext("Unknown"),icon:"information"},deferred:{theme:"primary",label:this.$gettext("Deferred"),icon:"information"}}}}},3630:function(t,e,n){"use strict";n.r(e);var r=n(4161),a=n(2592);for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);var o=n(0),u=Object(o.a)(a.default,r.a,r.b,!1,null,null,null);e.default=u.exports},3631:function(t,e,n){"use strict";n(7),n(10),n(5),n(6),n(8),n(11);var r=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.getEmailTracking=void 0;var a=r(n(2));n(34);var i=r(n(78)),o=n(1954);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,a.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var s=i.default.get({url:"/CMD_EMAIL_LOG",id:"EMAIL_TRACKING_ENTRIES",schema:{from:{type:Date,required:!1,default:function(){return(0,o.subDays)(new Date,1)}},to:{type:Date,required:!1,default:function(){return new Date}},type:{type:String,required:!1,default:"out"},domain:i.default.OPTIONAL_STRING,address:i.default.OPTIONAL_STRING,state:i.default.OPTIONAL_STRING},mapResponse:function(t){return t.emails.map((function(t){return l(l({},t),{},{datetime:new Date(t.datetime)})}))}});e.getEmailTracking=s},3632:function(t,e){},4011:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",[n("app-page-section",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.request.apply(null,arguments)}}},[n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Range\n            ")]),t._v(" "),n("date-range-picker",{attrs:{slot:"content",range:t.query.range},on:{"update:range":t.updateRange,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.request.apply(null,arguments)}},slot:"content"})],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Domain\n            ")]),t._v(" "),n("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v("\n                Optional\n            ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.request.apply(null,arguments)}},slot:"content",model:{value:t.query.domain,callback:function(e){t.$set(t.query,"domain",e)},expression:"query.domain"}})],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Address\n            ")]),t._v(" "),n("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v("\n                Optional\n            ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.request.apply(null,arguments)}},slot:"content",model:{value:t.query.address,callback:function(e){t.$set(t.query,"address",e)},expression:"query.address"}})],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                State\n            ")]),t._v(" "),n("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v("\n                Optional\n            ")]),t._v(" "),n("input-select",{attrs:{slot:"content",options:{"":t.$gettext("Select"),unknown:t.$gettext("Unknown"),deferred:t.$gettext("Deferred"),failed:t.$gettext("Failed"),delivered:t.$gettext("Delivered")}},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.request.apply(null,arguments)}},slot:"content",model:{value:t.query.state,callback:function(e){t.$set(t.query,"state",e)},expression:"query.state"}})],1),t._v(" "),n("ui-form-element",{attrs:{underline:!1}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Show\n            ")]),t._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"}],attrs:{slot:"content"},slot:"content"},[n("input-checkbox",{attrs:{value:"out",disabled:1===t.query.type.length&&"out"===t.query.type[0]},model:{value:t.query.type,callback:function(e){t.$set(t.query,"type",e)},expression:"query.type"}},[n("translate",[t._v("Outbound")])],1),t._v(" "),n("input-checkbox",{attrs:{value:"in",disabled:1===t.query.type.length&&"in"===t.query.type[0]},model:{value:t.query.type,callback:function(e){t.$set(t.query,"type",e)},expression:"query.type"}},[n("translate",[t._v("Inbound")])],1)],1)],1),t._v(" "),n("ui-button",{attrs:{slot:"footer:buttons",theme:"primary"},on:{click:function(e){return e.preventDefault(),t.request.apply(null,arguments)}},slot:"footer:buttons"},[n("translate",[t._v("Search")])],1)],1),t._v(" "),n("app-page-section",[n("ui-r-table",t._b({attrs:{"disable-pagination":""},scopedSlots:t._u([{key:"col:direction",fn:function(e){var r=e.direction;return n("ui-tooltip",{},[n("ui-icon",t._b({staticClass:"cursor:pointer",attrs:{slot:"trigger"},slot:"trigger"},"ui-icon","in"===r?{id:"circle-arrow-left",theme:"safe",size:24}:{id:"circle-arrow-right",theme:"primary",size:24},!1)),t._v(" "),n("span",[t._v("\n                    "+t._s("in"===r?t.$gettext("Inbound"):t.$gettext("Outbound"))+"\n                ")])],1)}},{key:"col:from",fn:function(e){var r=e.from;return[n("div",{staticStyle:{"overflow-wrap":"anywhere"}},[t._v("\n                    "+t._s(r)+"\n                ")])]}},{key:"col:to",fn:function(e){var r=e.id,a=e.to;return[n("div",{staticStyle:{"overflow-wrap":"anywhere"}},t._l(a,(function(e){return n("recipient-badge",t._b({key:r+"-"+e.address},"recipient-badge",e,!1))})),1)]}},{key:"col:state",fn:function(e){var r=e.state;return[n("ui-badge",t._b({},"ui-badge",t.STATES[r],!1))]}},{key:"col:size",fn:function(e){var r=e.size;return n("span",{staticClass:"wrap:nowrap"},[t._v("\n                "+t._s(t._f("humanReadableSize")(r))+"\n            ")])}},{key:"col:datetime",fn:function(e){var r=e.datetime;return n("span",{staticClass:"wrap:nowrap"},[t._v("\n                "+t._s(t._f("date")(r))+"\n            ")])}},{key:"row:actions",fn:function(e){var r=e.item;return n("ui-link",{attrs:{title:t.$gettext("Show Info")},on:{click:function(e){return t.showRawInfo(r)}}},[n("ui-icon",{attrs:{id:"circle-info",theme:"safe"}})],1)}}])},"ui-r-table",{rows:t.$api,columns:[{id:"direction",label:" "},{id:"state",label:t.$gettext("State")},{id:"from",label:t.$gettext("From")},{id:"to",label:t.$gettext("To")},{id:"subject",label:t.$gettext("Subject")},{id:"size",label:t.$gettext("Size")},{id:"datetime",label:t.$gettext("Date")}],verticalLayout:t.$_Client.isPhone,isCheckable:!1,sortBy:t.sortBy,sort:{key:"datetime",order:"DESC"}},!1))],1),t._v(" "),n("details-dialog",{attrs:{item:t.details}})],1)},a=[]},4160:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ui-tooltip",{attrs:{theme:t.badge.theme}},[n("span",{staticClass:"cursor:pointer",attrs:{slot:"trigger"},slot:"trigger"},[n("ui-icon",{directives:[{name:"margin",rawName:"v-margin:right",value:.5,expression:"0.5",arg:"right"}],attrs:{id:t.badge.icon,size:16,theme:t.badge.theme}}),t._v("\n            "+t._s(t.address)+"\n        ")],1),t._v("\n\n        "+t._s(t.message||t.badge.label)+"\n    ")])],1)},a=[]},4161:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-dialog",{attrs:{id:"EMAIL_TRACKING_DETAILS_DIALOG"}},[n("span",{attrs:{slot:"title"},domProps:{textContent:t._s(t.item.id)},slot:"title"}),t._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("table",t._l(t.item,(function(e,r){return n("tr",{key:r},[n("td",{domProps:{textContent:t._s(r+":")}}),t._v(" "),n("td",["to"===r?t._l(t.item.to,(function(e){return n("recipient-badge",t._b({key:e.address},"recipient-badge",e,!1))})):n("span",{domProps:{textContent:t._s(e)}})],2)])})),0)])])},a=[]}}]);