(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[4300],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/terminal/_components/xterm-terminal.vue?vue&type=script&lang=js&":function(e,s,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js");var t=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"X",{value:!0}),s.Z=void 0;var n=t(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),l=o("./src/js/pages/user/terminal/_components/xterm.js"),d={data:function(){return{terminal:null,socket:null,state:"connecting"}},computed:{options:function(){return{theme:{cursor:"#4fb636",background:"#073642",forground:"#ffffff"},fontWeight:500,fontFamily:'"Consolas", "Lucida Console", monospace'}}},created:function(){var e;this.CONNECTING="connecting",this.ACTIVE="active",this.CLOSED="closed",this.stateLabels=(e={},(0,n.default)(e,this.CONNECTING,this.$gettext("Connecting...")),(0,n.default)(e,this.ACTIVE,this.$gettext("Active")),(0,n.default)(e,this.CLOSED,this.$gettext("Closed")),e)},mounted:function(){this.init()},beforeDestroy:function(){this.dispose()},methods:{init:function(){this.terminal=(0,l.createXterm)(this.$refs.terminal,this.options),this.connect()},dispose:function(){this.terminal&&(this.terminal.dispose(),this.state=this.CLOSED,this.terminal=null)},disconnect:function(){this.socket&&this.socket.dispose()},connect:function(){var e=this;this.socket&&this.terminal.writeln(""),this.state=this.CONNECTING,this.socket=(0,l.connectSocket)(this.terminal,{onConnect:function(){e.state=e.ACTIVE},onDisconnect:function(){e.state=e.CLOSED}})}}};s.Z=d},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/terminal/index.vue?vue&type=script&lang=js&":function(e,s,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js");var t=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"X",{value:!0}),s.Z=void 0;var n=t(o("./src/js/pages/user/terminal/_components/xterm-terminal.vue")),l={render:function(e){return e(n.default)}};s.Z=l},"./src/js/pages/user/terminal/_components/custom-socket.js":function(e,s,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js");var t=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.CustomSocket=void 0;var n=t(o("./node_modules/@babel/runtime/helpers/classCallCheck.js")),l=t(o("./node_modules/@babel/runtime/helpers/createClass.js")),d=t(o("./node_modules/@babel/runtime/helpers/toConsumableArray.js"));o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/web.dom-collections.for-each.js"),o("./node_modules/core-js/modules/es.object.entries.js"),o("./node_modules/core-js/modules/es.array.concat.js"),o("./node_modules/core-js/modules/es.array.iterator.js"),o("./node_modules/core-js/modules/es.typed-array.uint8-array.js"),o("./node_modules/core-js/modules/es.typed-array.copy-within.js"),o("./node_modules/core-js/modules/es.typed-array.every.js"),o("./node_modules/core-js/modules/es.typed-array.fill.js"),o("./node_modules/core-js/modules/es.typed-array.filter.js"),o("./node_modules/core-js/modules/es.typed-array.find.js"),o("./node_modules/core-js/modules/es.typed-array.find-index.js"),o("./node_modules/core-js/modules/es.typed-array.for-each.js"),o("./node_modules/core-js/modules/es.typed-array.includes.js"),o("./node_modules/core-js/modules/es.typed-array.index-of.js"),o("./node_modules/core-js/modules/es.typed-array.iterator.js"),o("./node_modules/core-js/modules/es.typed-array.join.js"),o("./node_modules/core-js/modules/es.typed-array.last-index-of.js"),o("./node_modules/core-js/modules/es.typed-array.map.js"),o("./node_modules/core-js/modules/es.typed-array.reduce.js"),o("./node_modules/core-js/modules/es.typed-array.reduce-right.js"),o("./node_modules/core-js/modules/es.typed-array.reverse.js"),o("./node_modules/core-js/modules/es.typed-array.set.js"),o("./node_modules/core-js/modules/es.typed-array.slice.js"),o("./node_modules/core-js/modules/es.typed-array.some.js"),o("./node_modules/core-js/modules/es.typed-array.sort.js"),o("./node_modules/core-js/modules/es.typed-array.subarray.js"),o("./node_modules/core-js/modules/es.typed-array.to-locale-string.js"),o("./node_modules/core-js/modules/es.typed-array.to-string.js");var r=t(o("./node_modules/lodash.debounce/index.js")),u=function(e,s){return Object.entries(s).forEach((function(s){return e.apply(void 0,(0,d.default)(s))}))},i=function(){function e(s){(0,n.default)(this,e),this._socket=null,this._handlers=s,this._disposables=[],this._terminal=null}return(0,l.default)(e,[{key:"activate",value:function(e){this._terminal=e,this._createSocket(),this._setSocketEvents({message:this._processMessage.bind(this),open:this._handlers.onConnect.bind(this),close:this.dispose.bind(this),error:this.dispose.bind(this)}),this._setTerminalEvents({onData:this._sendData.bind(this),onBinary:this._sendBinary.bind(this),onResize:(0,r.default)(this._setTerminalSize.bind(this),1e3)})}},{key:"dispose",value:function(){this._handlers.onDisconnect(this._socket),3!==this._socket.readyState&&this._socket.close()}},{key:"_createSocket",value:function(){var e=this._terminal,s=e.rows,o=e.cols,t="https:"===window.location.protocol?"wss:":"ws:",n="".concat(t,"//").concat(window.location.host,"/CMD_TERMINAL?cols=").concat(o,"&rows=").concat(s);this._socket=new WebSocket(n),this._socket.binaryType="arraybuffer"}},{key:"_setSocketEvents",value:function(e){var s=this;u((function(e,o){s._socket.addEventListener(e,o);s._disposables.push({dispose:function(){o&&s._socket.removeEventListener(e,o)}})}),e)}},{key:"_setTerminalEvents",value:function(e){var s=this;if(this._terminal){u((function(e,o){"function"==typeof s._terminal[e]&&s._disposables.push(s._terminal[e](o))}),e)}}},{key:"_setTerminalSize",value:function(e){var s=JSON.stringify(e,null,2);this._sendBinary(s)}},{key:"_sendData",value:function(e){1===this._socket.readyState&&this._socket.send(e)}},{key:"_sendBinary",value:function(e){if(1===this._socket.readyState){for(var s=new Uint8Array(e.length),o=0;o<e.length;++o)s[o]=255&e.charCodeAt(o);this._socket.send(s)}}},{key:"_processMessage",value:function(e){if(this._terminal){var s="string"==typeof e.data?e.data:new Uint8Array(e.data);this._terminal.write(s)}}}]),e}();s.CustomSocket=i},"./src/js/pages/user/terminal/_components/xterm.js":function(e,s,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js");var t=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.connectSocket=function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{onConnect:u,onDisconnect:u},o=new r.CustomSocket(s);return e.loadAddon(o),o},s.createXterm=function(e,s){var o=new l.Terminal(s),t=new d.FitAddon;return o.loadAddon(t),o.open(e),t.fit(),function(e,s){var o=(0,n.default)(s,200);new ResizeObserver(o).observe(e)}(e,(function(){return t.fit()})),o};var n=t(o("./node_modules/lodash.debounce/index.js")),l=o("./node_modules/xterm/lib/xterm.js"),d=o("./node_modules/xterm-addon-fit/lib/xterm-addon-fit.js"),r=o("./src/js/pages/user/terminal/_components/custom-socket.js"),u=function(){}},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/terminal/_components/xterm-terminal.vue?vue&type=style&index=0&lang=scss&":function(){},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/terminal/_components/xterm-terminal.vue?vue&type=style&index=1&lang=css&":function(){},"./src/js/pages/user/terminal/_components/xterm-terminal.vue":function(e,s,o){"use strict";o.r(s),o.d(s,{__esModule:function(){return t.X},default:function(){return l}});var t=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/terminal/_components/xterm-terminal.vue?vue&type=script&lang=js&"),n=t.Z,l=(o("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/terminal/_components/xterm-terminal.vue?vue&type=style&index=0&lang=scss&"),o("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/terminal/_components/xterm-terminal.vue?vue&type=style&index=1&lang=css&"),(0,o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(n,(function(){var e=this,s=e.$createElement,o=e._self._c||s;return o("div",{attrs:{id:"terminal"}},[o("div",{staticClass:"header"},[o("span",{directives:[{name:"margin",rawName:"v-margin",value:[0,.5],expression:"[0, 0.5]"}],class:e.state===e.ACTIVE?"c:txt:safe":"c:txt:danger",domProps:{innerHTML:e._s("&bull;")}}),e._v(" "),o("translate",[e._v("Terminal")]),e._v(" "),o("span",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{grow:!0},expression:"{ grow: true }"},{name:"margin",rawName:"v-margin:left",value:.5,expression:"0.5",arg:"left"}]},[e._v("\n            ("+e._s(e.stateLabels[e.state])+")\n        ")]),e._v(" "),e.state===e.CLOSED?[o("a",{key:"connect-button",staticClass:"cursor:pointer",on:{click:e.connect}},[e._v("\n                ⟳\n                "),o("translate",[e._v("Connect")])],1),e._v(" "),o("span",{directives:[{name:"margin",rawName:"v-margin",value:[0,1],expression:"[0, 1]"}],staticClass:"c:txt:primary"},[e._v("|")])]:e.state===e.ACTIVE?[o("a",{key:"disconnect-button",staticClass:"cursor:pointer",on:{click:e.disconnect}},[e._v("\n                ⟳\n                "),o("translate",[e._v("Disconnect")])],1),e._v(" "),o("span",{directives:[{name:"margin",rawName:"v-margin",value:[0,1],expression:"[0, 1]"}],staticClass:"c:txt:primary"},[e._v("|")])]:e._e(),e._v(" "),o("a",{staticClass:"cursor:pointer",on:{click:function(s){return e.$router.back()}}},[e._v("\n            ←\n            "),o("translate",[e._v("Back")])],1)],2),e._v(" "),o("div",{ref:"terminal",staticClass:"console"})])}),[],!1,null,null,null).exports)},"./src/js/pages/user/terminal/index.vue":function(e,s,o){"use strict";o.r(s),o.d(s,{__esModule:function(){return t.X},default:function(){return i}});var t=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/terminal/index.vue?vue&type=script&lang=js&"),n=t.Z,l=o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),d=o("./src/js/pages/user/terminal/index.vue?vue&type=custom&index=0&blockType=route"),r=o.n(d),u=(0,l.Z)(n,undefined,undefined,!1,null,null,null);"function"==typeof r()&&r()(u);var i=u.exports},"./src/js/pages/user/terminal/index.vue?vue&type=custom&index=0&blockType=route":function(){},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/terminal/_components/xterm-terminal.vue?vue&type=style&index=0&lang=scss&":function(e,s,o){var t=o("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/terminal/_components/xterm-terminal.vue?vue&type=style&index=0&lang=scss&");t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.id,t,""]]),t.locals&&(e.exports=t.locals);(0,o("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("4217df35",t,!0,{})},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/terminal/_components/xterm-terminal.vue?vue&type=style&index=1&lang=css&":function(e,s,o){var t=o("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/terminal/_components/xterm-terminal.vue?vue&type=style&index=1&lang=css&");t.__esModule&&(t=t.default),"string"==typeof t&&(t=[[e.id,t,""]]),t.locals&&(e.exports=t.locals);(0,o("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("f0bccf8e",t,!0,{})}}]);