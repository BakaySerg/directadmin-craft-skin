(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{1733:function(e,t,n){"use strict";n.r(t);var r=n(3934),i=n(2170);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n(3282);var a=n(0),s=n(3284),l=n.n(s),u=Object(a.a)(i.default,r.a,r.b,!1,null,"70d8e574",null);"function"==typeof l.a&&l()(u),t.default=u.exports},2170:function(e,t,n){"use strict";n.r(t);var r=n(2171),i=n.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t.default=i.a},2171:function(e,t,n){"use strict";n(7),n(10),n(5),n(6),n(8),n(11),n(16),n(14),n(23),n(25),n(18);var r=n(1),i=n(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(36)),a=r(n(37)),s=r(n(2)),l=r(n(38));n(55),n(27),n(72),n(24),n(21),n(40);var u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(n(3275)),c=r(n(1935)),f=r(n(3276)),p=r(n(3279));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m,_={preload:u.getData,components:{InputTextEditor:c.default,LogFileSelect:f.default,LogViewOptions:p.default},data:function(){return{dataFile:"",showLog:!1,options:{lines:"50",grep:"",invert_grep:!1,ignore_case:!1}}},api:[{command:u.getData,bind:"data"},{command:u.getLogfile,bind:"logfile"}],computed:{file:function(){return this.$route.query.file},defaultLinesCount:function(){return this.$api.data.lines},log:function(){return this.$api.logfile.join("\n")},rawLink:function(){var e;return(e=g(g({},this.options),{},{invert_grep:this.options.invert_grep||"",ignore_case:this.options.ignore_case||"",type:"raw",file:this.dataFile}),Object.entries(e).reduce((function(e,t){var n=(0,l.default)(t,2),r=n[0],i=n[1];return i?"".concat(e,"&").concat(encodeURIComponent(r),"=").concat(encodeURIComponent(i)):e}),"/CMD_LOG_VIEWER?")).replace("?&","?")}},watch:{dataFile:function(e){this.showLog=!1,this.$route.query.file!==e&&this.$router.replace({name:"admin/log-viewer",query:{file:e}})}},created:function(){this.linesCount=this.defaultLinesCount,this.dataFile=this.file},methods:{loadLog:(m=(0,a.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getLogfile(g(g({},this.options),{},{file:this.dataFile}));case 2:this.showLog=!0;case 3:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)})}};t.default=_},2172:function(e,t,n){"use strict";n.r(t);var r=n(2173),i=n.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t.default=i.a},2173:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(57);var r={model:{prop:"file",event:"change"},props:{file:{type:String,required:!1,default:""},files:{type:Array,required:!0}},data:function(){return{open:!1}},computed:{currentItem:function(){var e=this;return this.files.find((function(t){return t.file===e.file}))}},methods:{select:function(e){this.$emit("change",e),this.open=!1}}};t.default=r},2174:function(e,t,n){"use strict";n.r(t);var r=n(2175),i=n.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t.default=i.a},2175:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(55);t.default={data:function(){return{grepOptions:{invert:!1,ignore:!1},grep:"",linesCount:"50",showEntireFile:!1}},computed:{grepOptionsString:function(){var e=[];return this.grep&&e.push('"'.concat(this.grep,'"')),this.grepOptions.invert&&e.push(this.$gettext("Invert")),this.grepOptions.ignore&&e.push(this.$gettext("Ignore Case")),e.join("; ")},requestData:function(){return{lines:this.showEntireFile?"0":this.linesCount,grep:this.grep,invert_grep:this.grepOptions.invert?"yes":null,ignore_case:this.grepOptions.ignore?"yes":null}}},watch:{requestData:{deep:!0,handler:function(e){this.$emit("update:request-data",e)}}}}},3042:function(e,t,n){var r=n(3278);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(4).default)("2edf18b5",r,!0,{})},3043:function(e,t,n){var r=n(3281);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(4).default)("bdcdfce2",r,!0,{})},3044:function(e,t,n){var r=n(3283);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(4).default)("45bf29ca",r,!0,{})},3275:function(e,t,n){"use strict";n(7),n(10),n(6),n(8),n(11);var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getLogfile=t.getData=void 0,n(5),n(24),n(12),n(15);var i=r(n(44)),o=r(n(2)),a=r(n(78));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=a.default.get({id:"LOG_VIEWER_DATA",url:"/CMD_LOG_VIEWER",after:function(e){return e.mapProp("files",e.flow(e.mapValues((function(e,t){return l(l({},e),{},{file:t})})),e.toArray,e.sortBy(["name"]),(function(e){var t=e.filter((function(e){return"0"===e.size}));return[].concat((0,i.default)(e.filter((function(e){return!t.includes(e)}))),(0,i.default)(t))}),e.mapArray(e.mapProp("size",e.convert.toAppNumber))))}});t.getData=u;var c=a.default.get({id:"LOG_VIEWER_LOGFILE",url:"/CMD_LOG_VIEWER",params:{type:"textarea",json:!0},schema:{file:a.default.REQUIRED_STRING,lines:l(l({},a.default.REQUIRED_STRING),{},{default:"50"})},after:function(e){return e.flow(e.getProp("LOGDATA"),e.convert.toLines)}});t.getLogfile=c},3276:function(e,t,n){"use strict";n.r(t);var r=n(4098),i=n(2172);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n(3277);var a=n(0),s=Object(a.a)(i.default,r.a,r.b,!1,null,null,null);t.default=s.exports},3277:function(e,t,n){"use strict";n(3042)},3278:function(e,t,n){},3279:function(e,t,n){"use strict";n.r(t);var r=n(4099),i=n(2174);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n(3280);var a=n(0),s=Object(a.a)(i.default,r.a,r.b,!1,null,null,null);t.default=s.exports},3280:function(e,t,n){"use strict";n(3043)},3281:function(e,t,n){},3282:function(e,t,n){"use strict";n(3044)},3283:function(e,t,n){},3284:function(e,t){},3934:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",{attrs:{id:"view-log"}},[e.file?n("translate",{attrs:{slot:"page:title","translate-params":{log:e.file}},slot:"page:title"},[e._v("\n        View Log: %{ log }\n    ")]):n("translate",{attrs:{slot:"page:title"},slot:"page:title"},[e._v("\n        Select log file to view\n    ")]),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            Select log file to view\n        ")]),e._v(" "),n("log-file-select",{attrs:{slot:"content",files:e.$api.data.files},slot:"content",model:{value:e.dataFile,callback:function(t){e.dataFile=t},expression:"dataFile"}})],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            Log View Options\n        ")]),e._v(" "),n("log-view-options",{attrs:{slot:"content"},on:{"update:request-data":function(t){e.options=t}},slot:"content"})],1),e._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex",value:{main:"end"},expression:"{ main: 'end' }"},{name:"margin",rawName:"v-margin",value:[1,0],expression:"[1, 0]"}]},[e.showLog?n("ui-button",{attrs:{theme:"safe",size:"normal","validate-group":"logViewer"},on:{click:function(t){return e.loadLog(e.file)}}},[n("translate",[e._v("Reload Log")])],1):n("ui-button",{attrs:{theme:"safe",size:"normal","validate-group":"logViewer"},on:{click:function(t){return e.loadLog(e.file)}}},[n("translate",[e._v("Load Log")])],1),e._v(" "),n("ui-button-link",{directives:[{name:"margin",rawName:"v-margin",value:[,,,"1rem"],expression:"[,,,'1rem']"}],attrs:{size:"normal",theme:"light",href:e.rawLink,target:"_blank"}},[n("translate",[e._v("View RAW")])],1)],1),e._v(" "),e.showLog?n("app-page-section",[n("input-text-editor",{attrs:{value:e.log,"disable-modes":""}},[n("template",{slot:"header"},[e._v("\n                "+e._s(e.file)+"\n            ")])],2)],1):e._e()],1)},i=[]},4098:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"select log-file-select",class:{"-is-open":e.open}},[n("button",{key:"btn",ref:"btn",staticClass:"select-button",on:{click:function(t){e.open=!e.open}}},[e.currentItem?n("strong",{domProps:{textContent:e._s(e.currentItem.text)}}):n("translate",[e._v("\n            Select log file\n        ")]),e._v(" "),n("ui-icon",{staticClass:"Select__Button__Caret",attrs:{id:"caret-down",size:"small"}})],1),e._v(" "),e.$refs.btn?n("ui-dropdown",e._b({ref:"dropdown",attrs:{"exact-width":"","use-real-focus":!1,"is-open":e.open,placement:"bottom","click-outside-elem":e.$el,"trigger-elem":e.$el,"placement-elem":e.$refs.btn},on:{"update:isOpen":function(t){e.open=t},"update:is-open":function(t){e.open=t}}},"ui-dropdown",Object.assign({},e.$attrs,{maxHeight:"200px"}),!1),[n("table",{staticClass:"table-elem log-file-select-table",class:{"--dark":e.$_dark}},e._l(e.files,(function(t){return n("tr",{key:t.file},[n("td",[n("input-radio",{attrs:{model:e.file,value:t.file},on:{change:e.select}},[e._v("\n                        "+e._s(t.text)+"\n                    ")])],1),e._v(" "),n("td",[e._v(e._s(t.file))]),e._v(" "),n("td",[e._v(e._s(e._f("humanReadableSize")(t.size)))])])})),0)]):e._e()],1)},i=[]},4099:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-spoiler",{staticClass:"log-view-options"},[n("button",{staticClass:"log-view-options-button",attrs:{slot:"trigger"},slot:"trigger"},[n("ui-badge",{attrs:{theme:"primary"}},[n("strong",[e._v("Lines:")]),e._v("Â \n            "),e.showEntireFile?n("translate",{key:"entire-file"},[e._v("\n                Show entire file\n            ")]):n("translate",{key:"number-lines",attrs:{"translate-params":{linesCount:e.linesCount||"50"}}},[e._v("\n                Show %{ linesCount } lines\n            ")])],1),e._v(" "),n("ui-badge",{directives:[{name:"margin",rawName:"v-margin:left",value:1,expression:"1",arg:"left"}],attrs:{theme:"safe"}},[n("translate",{attrs:{tag:"strong"}},[e._v("\n                Grep:\n            ")]),e._v(" "),e.grep?n("span",{key:"grep-options",domProps:{textContent:e._s(e.grepOptionsString)}}):n("translate",{key:"grep-none"},[e._v("\n                None\n            ")])],1)],1),e._v(" "),n("div",{staticClass:"log-view-options-dropdown"},[n("ui-form-element",{attrs:{group:"logViewer",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Number of lines from the end\n            ")]),e._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{\n                    dir: 'column'\n                }"}],attrs:{slot:"content"},slot:"content"},[n("input-text",{attrs:{number:"",disabled:e.showEntireFile},model:{value:e.linesCount,callback:function(t){e.linesCount=t},expression:"linesCount"}},[n("input-checkbox-button",{directives:[{name:"margin",rawName:"v-margin",value:[1,0],expression:"[1, 0]"}],attrs:{slot:"additions:right"},slot:"additions:right",model:{value:e.showEntireFile,callback:function(t){e.showEntireFile=t},expression:"showEntireFile"}},[n("translate",[e._v("Show entire file")])],1)],1)],1)],1),e._v(" "),n("ui-form-element",{attrs:{underline:!1}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Grep\n            ")]),e._v(" "),n("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[e._v("\n                Use the | charter for separation.\n            ")]),e._v(" "),n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}],attrs:{slot:"content"},slot:"content"},[n("input-text",{directives:[{name:"margin",rawName:"v-margin",value:[,,"1rem"],expression:"[,,'1rem',]"}],model:{value:e.grep,callback:function(t){e.grep=t},expression:"grep"}},[n("input-checkbox-button",{attrs:{slot:"additions:right"},slot:"additions:right",model:{value:e.grepOptions.invert,callback:function(t){e.$set(e.grepOptions,"invert",t)},expression:"grepOptions.invert"}},[n("translate",[e._v("Invert")])],1),e._v(" "),n("input-checkbox-button",{attrs:{slot:"additions:left"},slot:"additions:left",model:{value:e.grepOptions.ignore,callback:function(t){e.$set(e.grepOptions,"ignore",t)},expression:"grepOptions.ignore"}},[n("translate",[e._v("Ignore Case")])],1)],1)],1)],1)],1)])},i=[]}}]);