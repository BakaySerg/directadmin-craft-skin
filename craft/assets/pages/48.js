(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{1745:function(e,t,n){"use strict";n.r(t);var r=n(3946),a=n(2203);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s=n(0),o=n(3317),l=n.n(o),u=Object(s.a)(a.default,r.a,r.b,!1,null,null,null);"function"==typeof l.a&&l()(u),t.default=u.exports},2203:function(e,t,n){"use strict";n.r(t);var r=n(2204),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=a.a},2204:function(e,t,n){"use strict";n(7),n(10),n(5),n(6),n(8),n(11),n(16),n(14),n(23),n(25),n(18);var r=n(1),a=n(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(2)),s=_(n(3052)),o=_(n(9)),l=r(n(3314)),u=r(n(3315)),c=r(n(3316));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={components:{InfoDialog:l.default,SettingsDialog:u.default,MakeRequestDialog:c.default},preload:s.getData,api:[{command:s.getData,bind:{"response.domains":"domains","response.settings":"settings"}}],commands:{ssl:s.getData},data:function(){return{select:[],currentItem:null,filters:{domain:"",username:"",issuer:""}}},computed:{domainParam:function(){return this.$route.query.domain},sortBy:function(){return function(e){return"issuer"===e?function(e){return e.certificate_info.issuer_simple||""}:o.prop(e)}},usernames:function(){return o.uniq(o.map(o.prop("username"),this.$api.domains))},domains:function(){var e=this,t=o.when((function(){return o.contains(o.toLower(e.filters.username),e.usernames)}),o.filter((function(t){return o.equals(o.toLower(e.filters.username),o.toLower(t.username))}))),n=o.when((function(){return e.filters.domain}),o.filter((function(t){return o.contains(o.toLower(e.filters.domain),o.toLower(t.domain))}))),r=o.when((function(){return e.filters.issuer}),o.filter((function(t){return o.contains(o.toLower(e.filters.issuer),o.toLower(t.certificate_info.issuer_simple||""))})));return o.pipe(t,n,r)(this.$api.domains)}},methods:{getData:function(){return this.select.length=0,s.getData()},showInfo:function(e){var t=this;this.currentItem=e,this.$nextTick((function(){return t.$dialog("SSL_INFO_DIALOG").open()}))},hideInfo:function(){this.currentItem=null},makeRequest:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s.makeRequest(p(p({},t),{},{select:this.select})).then((function(){e.getData(),e.select=[]}))}}};t.default=m},2205:function(e,t,n){"use strict";n.r(t);var r=n(2206),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=a.a},2206:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(7);var r={props:{domain:{type:String,required:!0},SSLCACertificateFile:{type:String,required:!1,default:""},SSLCertificateFile:{type:String,required:!1,default:""},SSLCertificateKeyFile:{type:String,required:!1,default:""},certificate_domains:{type:Array,required:!1,default:function(){return[]}},certificate_info:{type:Object,required:!1,default:function(){return{}}}},computed:{hasDomains:function(){return Boolean(this.certificate_domains.length)},hasInfo:function(){return Boolean(Object.keys(this.certificate_info).length)}}};t.default=r},2207:function(e,t,n){"use strict";n.r(t);var r=n(2208),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=a.a},2208:function(e,t,n){"use strict";n(16),n(14),n(23),n(25),n(18),n(6);var r=n(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(49);var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=s?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(a,o,l):a[o]=e[o]}a.default=e,n&&n.set(e,a);return a}(n(3052));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}var s={api:[{command:a.getData,bind:{"response.settings":"settings"}}],data:function(){return{admin_ssl_replace_all_expired_invalid:!1,letsencrypt_disable_renew_after_renew_failure:!1,letsencrypt_renewal_error_to_users:!1,letsencrypt_renewal_failure_notice_after_attempt:"5",letsencrypt_renewal_notice_to_admins:!1,letsencrypt_renewal_success_notice:!1,renew_letsencrypt_on_suspended_domain:!1}},mounted:function(){Object.assign(this,this.$api.settings)},methods:{updateSettings:function(){a.saveSettings(this.$data)}}};t.default=s},2209:function(e,t,n){"use strict";n.r(t);var r=n(2210),a=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t.default=a.a},2210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={data:function(){return{wildcard:!0,subdomains:!0,pointers:!1}}}},3052:function(e,t,n){"use strict";n(16),n(14),n(23),n(25),n(18),n(6);var r=n(1),a=n(19);Object.defineProperty(t,"__esModule",{value:!0}),t.makeRequest=t.saveSettings=t.getData=void 0,n(17);var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=i?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(n(9)),s=r(n(78)),o=n(97);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}var u="/CMD_ADMIN_SSL",c=i.equals("1"),f=function(e){return e?"1":"0"},_=s.default.get({id:"ADMIN_SSL_DATA",url:u,pagination:!0,mapResponse:{settings:i.pipe(i.prop("settings"),i.evolve({letsencrypt_disable_renew_after_renew_failure:c,letsencrypt_renewal_error_to_users:c,letsencrypt_renewal_notice_to_admins:c,letsencrypt_renewal_success_notice:c,renew_letsencrypt_on_suspended_domain:c,admin_ssl_replace_all_expired_invalid:c})),domains:i.pipe(i.prop("domains"),(0,o.toTable)(i.evolve({ssl:i.equals("ON"),defaultdomain:i.equals("yes"),active:i.equals("yes"),server:i.equals("yes"),valid:i.equals("yes"),next_retry:function(e){if(e){var t=Number(e);if(t>0)return new Date(1e3*t)}return!1}})))}});t.getData=_;var d=s.default.post({url:u,params:{action:"settings"},schema:{letsencrypt_renewal_notice_to_admins:s.default.REQUIRED_BOOL,letsencrypt_renewal_error_to_users:s.default.REQUIRED_BOOL,renew_letsencrypt_on_suspended_domain:s.default.REQUIRED_BOOL,letsencrypt_renewal_success_notice:s.default.REQUIRED_BOOL,letsencrypt_disable_renew_after_renew_failure:s.default.REQUIRED_BOOL,letsencrypt_renewal_failure_notice_after_attempt:s.default.REQUIRED_STRING,admin_ssl_replace_all_expired_invalid:s.default.REQUIRED_BOOL},before:i.evolve({letsencrypt_renewal_notice_to_admins:f,letsencrypt_renewal_error_to_users:f,renew_letsencrypt_on_suspended_domain:f,letsencrypt_renewal_success_notice:f,letsencrypt_disable_renew_after_renew_failure:f,admin_ssl_replace_all_expired_invalid:f})});t.saveSettings=d;var p=s.default.select({url:u,params:{action:"multiple",request:!0},schema:{wildcard:s.default.OPTIONAL_BOOL,subdomains:s.default.OPTIONAL_BOOL,pointers:s.default.OPTIONAL_BOOL}});t.makeRequest=p},3314:function(e,t,n){"use strict";n.r(t);var r=n(4101),a=n(2205);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s=n(0),o=Object(s.a)(a.default,r.a,r.b,!1,null,null,null);t.default=o.exports},3315:function(e,t,n){"use strict";n.r(t);var r=n(4102),a=n(2207);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s=n(0),o=Object(s.a)(a.default,r.a,r.b,!1,null,null,null);t.default=o.exports},3316:function(e,t,n){"use strict";n.r(t);var r=n(4103),a=n(2209);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);var s=n(0),o=Object(s.a)(a.default,r.a,r.b,!1,null,null,null);t.default=o.exports},3317:function(e,t){},3946:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",{attrs:{actions:[{label:e.$gettext("Settings"),icon:"#settings",handler:e.$dialog("ADMIN_SSL_SETTINGS_DIALOG").open}]}},[n("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:function(t){e.$dialog("ADMIN_SSL_SETTINGS_DIALOG").open()}},slot:"header:buttons"},[n("translate",[e._v("Settings")])],1),e._v(" "),n("app-page-section",[e._e(),e._v(" "),n("ui-api-table",e._b({on:{"action:request":function(t){e.$dialog("MAKE_REQUEST_DIALOG").open()}},scopedSlots:e._u([{key:"col:domain",fn:function(t){var r=t.item,a=t.domain;return[n("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center'}"}]},[n(a===e.domainParam?"span":"ui-link",{tag:"component",attrs:{name:"admin/ssl",query:{domain:a}}},[e._v("\n                        "+e._s(e.$p6e.toU(a))+"\n                    ")]),e._v(" "),n("ui-link",{directives:[{name:"margin",rawName:"v-margin:left",value:1,expression:"1",arg:"left"}],on:{click:function(t){return e.showInfo(r)}}},[n("ui-icon",{attrs:{id:"information",theme:"safe",size:18}})],1)],1)]}},{key:"col:user",fn:function(t){var r=t.user;return[n("ui-link",{attrs:{name:"reseller/users/view",params:{user:r}}},[e._v("\n                    "+e._s(r)+"\n                ")])]}},{key:"col:active",fn:function(t){return[t.active?n("ui-badge",{key:"activeYes",attrs:{theme:"safe"}},[n("translate",[e._v("Yes")])],1):n("ui-badge",{key:"activeNo",attrs:{theme:"danger"}},[n("translate",[e._v("No")])],1)]}},{key:"col:valid",fn:function(t){var r=t.valid;return[n("ui-badge",{attrs:{theme:r?"safe":"danger"}},[e._v("\n                    "+e._s(r?e.$gettext("Yes"):e.$gettext("No"))+"\n                ")])]}},{key:"col:issuer",fn:function(t){return[e._v("\n                "+e._s(t.certificate_info.issuer_simple||"")+"\n            ")]}},{key:"col:next_retry",fn:function(t){var r=t.next_retry;return[r?[e._v("\n                    "+e._s(e._f("date")(r))+"\n                ")]:n("span")]}},{key:"col:server",fn:function(t){return[t.server?n("ui-badge",{key:"serverOn",attrs:{theme:"safe"}},[n("translate",[e._v("Yes")])],1):n("ui-badge",{key:"serverOff",attrs:{theme:"danger"}},[n("translate",[e._v("No")])],1)]}},{key:"col:ssl",fn:function(t){return[t.ssl?n("ui-badge",{key:"sslOn",attrs:{theme:"safe"}},[n("translate",[e._v("On")])],1):n("ui-badge",{key:"sslOff",attrs:{theme:"danger"}},[n("translate",[e._v("Off")])],1)]}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.ssl,rowID:"domain",columns:{domain:{label:e.$gettext("Domain"),searchable:!0},user:{label:e.$gettext("Username"),searchable:!0},creator:e.$gettext("Creator"),issuer:{label:e.$gettext("Issuer"),searchable:!0},next_retry:{label:e.$gettext("Next Retry")},server:{label:e.$gettext("Auto SSL"),searchable:{type:"select",options:{yes:e.$gettext("Yes"),no:e.$gettext("No")}}},active:{label:e.$gettext("Active"),visible:!1},valid:e.$gettext("Valid"),ssl:e.$gettext("SSL")},property:"domains",requestData:{domain:e.domainParam||null},actions:{request:e.$gettext("Make Request")}},!1),[e.domainParam?n("ui-button",{directives:[{name:"margin",rawName:"v-margin:right",value:1,expression:"1",arg:"right"}],attrs:{slot:"buttons:before",size:"small",theme:"light",title:e.$gettext("Clear Filter")},on:{click:function(t){return e.$router.push("/admin/ssl")}},slot:"buttons:before"},[n("translate",{attrs:{"translate-params":{domain:e.$p6e.toU(e.domainParam)}}},[e._v("\n                    Domain: %{ domain }\n                ")]),e._v(" "),n("ui-icon",{directives:[{name:"margin",rawName:"v-margin:left",value:1,expression:"1",arg:"left"}],attrs:{id:"close",size:12}})],1):e._e()],1)],2),e._v(" "),e.currentItem?n("info-dialog",e._b({on:{close:e.hideInfo}},"info-dialog",e.currentItem,!1)):e._e(),e._v(" "),n("settings-dialog"),e._v(" "),n("make-request-dialog",{on:{request:e.makeRequest}})],1)},a=[]},4101:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"SSL_INFO_DIALOG",size:"normal","no-close-btn":""},on:{"dialog:close":function(t){return e.$emit("close")}}},[n("span",{attrs:{slot:"title"},domProps:{textContent:e._s(e.domain)},slot:"title"}),e._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("ui-table",{attrs:{transposed:"",items:[{ca:e.SSLCACertificateFile,cert:e.SSLCertificateFile,key:e.SSLCertificateKeyFile,domains:e.certificate_domains,issuer:e.certificate_info.Issuer,subject:e.certificate_info.Subject,start:e.certificate_info["Not Before"],end:e.certificate_info["Not After"]}]}},[e.SSLCACertificateFile?n("ui-column",{attrs:{id:"ca",label:e.$gettext("CA Root Certificate")}}):e._e(),e._v(" "),n("ui-column",{attrs:{id:"cert",label:e.$gettext("Certificate")}}),e._v(" "),n("ui-column",{attrs:{id:"key",label:e.$gettext("Certificate Key")}}),e._v(" "),e.hasDomains?n("ui-column",{attrs:{id:"domains",label:e.$gettext("Domains")}},[n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{\n                        dir: 'column',\n                    }"}]},e._l(e.certificate_domains,(function(t){return n("span",{key:t,domProps:{textContent:e._s(e.$p6e.toU(t))}})})),0)]):e._e(),e._v(" "),e.hasInfo?n("ui-column",{attrs:{id:"issuer",label:e.$gettext("Issuer")}}):e._e(),e._v(" "),e.hasInfo?n("ui-column",{attrs:{id:"subject",label:e.$gettext("Subject")}}):e._e(),e._v(" "),e.hasInfo?n("ui-column",{attrs:{id:"start",label:e.$gettext("Not Before")}}):e._e(),e._v(" "),e.hasInfo?n("ui-column",{attrs:{id:"end",label:e.$gettext("Not After")}}):e._e()],1)],1)])},a=[]},4102:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"ADMIN_SSL_SETTINGS_DIALOG"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        Options\n    ")]),e._v(" "),n("template",{slot:"content"},[n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.letsencrypt_renewal_notice_to_admins,callback:function(t){e.letsencrypt_renewal_notice_to_admins=t},expression:"letsencrypt_renewal_notice_to_admins"}},[n("translate",[e._v("Notify administrator account on certificate request failures")])],1)],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.letsencrypt_renewal_error_to_users,callback:function(t){e.letsencrypt_renewal_error_to_users=t},expression:"letsencrypt_renewal_error_to_users"}},[n("translate",[e._v("Notify users on certificate request failures")])],1)],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.renew_letsencrypt_on_suspended_domain,callback:function(t){e.renew_letsencrypt_on_suspended_domain=t},expression:"renew_letsencrypt_on_suspended_domain"}},[n("translate",[e._v("Renew certificates on suspended domains")])],1)],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.letsencrypt_renewal_success_notice,callback:function(t){e.letsencrypt_renewal_success_notice=t},expression:"letsencrypt_renewal_success_notice"}},[n("translate",[e._v("Notify user on certificate request success")])],1)],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.letsencrypt_disable_renew_after_renew_failure,callback:function(t){e.letsencrypt_disable_renew_after_renew_failure=t},expression:"letsencrypt_disable_renew_after_renew_failure"}},[n("translate",[e._v("Disable auto-renew after certificate request failure")])],1)],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Number of auto-renew certificate request failures before disabling it\n            ")]),e._v(" "),n("input-text",{attrs:{slot:"content",number:"",disabled:!e.letsencrypt_disable_renew_after_renew_failure},slot:"content",model:{value:e.letsencrypt_renewal_failure_notice_after_attempt,callback:function(t){e.letsencrypt_renewal_failure_notice_after_attempt=t},expression:"letsencrypt_renewal_failure_notice_after_attempt"}})],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.admin_ssl_replace_all_expired_invalid,callback:function(t){e.admin_ssl_replace_all_expired_invalid=t},expression:"admin_ssl_replace_all_expired_invalid"}},[n("translate",[e._v("Replace expired/invalid certificates with the ones provided by ACME")]),e._v(" "),n("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},[n("translate",[e._v("This could replace paid EV certificates")])],1)],1)],1)],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"safe"},on:{click:e.updateSettings},slot:"buttons"},[e._v("\n        Update\n    ")])],2)},a=[]},4103:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ui-dialog",{attrs:{id:"MAKE_REQUEST_DIALOG"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        Make Request\n    ")]),e._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.wildcard,callback:function(t){e.wildcard=t},expression:"wildcard"}},[n("translate",[e._v("Wildcard")]),e._v(" "),n("ui-tooltip",[n("translate",[e._v("Only use wildcard on domains who currently have functional local DNS")])],1)],1)],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.subdomains,callback:function(t){e.subdomains=t},expression:"subdomains"}},[n("translate",[e._v("Sub-Domains")])],1)],1),e._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.pointers,callback:function(t){e.pointers=t},expression:"pointers"}},[n("translate",[e._v("Domain Pointers")])],1)],1)],1),e._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"safe"},on:{click:function(t){return e.$emit("request",{wildcard:e.wildcard,subdomains:e.subdomains,pointers:e.pointers})}},slot:"buttons"},[n("translate",[e._v("Make Request")])],1)],1)},a=[]}}]);