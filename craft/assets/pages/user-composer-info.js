(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[770],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/_components/packages-table.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var o={props:{packages:{type:Array,required:!0}}};t.Z=o},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/_dialogs/composer-action-dialog.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var o={props:{dir:{type:String,required:!0}},data:function(){return{mode:"prod"}}};t.Z=o},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/_dialogs/composer-install-dialog.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var r,n=o(s("./node_modules/@babel/runtime/regenerator/index.js")),a=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=s("./src/js/endpoints/composer/index.ts"),l={extends:o(s("./src/js/pages/user/composer/_dialogs/composer-action-dialog.vue")).default,beforeCreate:function(){this.id="COMPOSER_INSTALL_DIALOG",this.title=this.$gettext("Install Composer"),this.actionLabel=this.$gettext("Install"),this.docs="https://getcomposer.org/doc/03-cli.md#install-i"},methods:{submit:(r=(0,a.default)(n.default.mark((function e(t,s){var o,r;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.installComposer.request({domain:this.$domain,dir:t,mode:s});case 2:o=e.sent,(r=o.error)?this.$emit("error",r,"Error installing composer packages"):(this.$notifications.success({title:this.$gettext("Composer Install"),content:this.$gettext("Install completed")}),this.$dialog("COMPOSER_INSTALL_DIALOG").close());case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})}};t.Z=l},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/_dialogs/composer-update-dialog.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var r,n=o(s("./node_modules/@babel/runtime/regenerator/index.js")),a=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=s("./src/js/endpoints/composer/index.ts"),l={extends:o(s("./src/js/pages/user/composer/_dialogs/composer-action-dialog.vue")).default,beforeCreate:function(){this.id="COMPOSER_UPDATE_DIALOG",this.title=this.$gettext("Update Composer"),this.actionLabel=this.$gettext("Update"),this.docs="https://getcomposer.org/doc/03-cli.md#update-u"},methods:{submit:(r=(0,a.default)(n.default.mark((function e(t,s){var o,r;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.updateComposer.request({dir:t,mode:s});case 2:o=e.sent,(r=o.error)?this.$emit("error",r,"Error updating composer packages"):(this.$notifications.success({title:this.$gettext("Composer Update"),content:this.$gettext("Update completed")}),this.$dialog("COMPOSER_UPDATE_DIALOG").close());case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})}};t.Z=l},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/info.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var r,n=o(s("./node_modules/@babel/runtime/regenerator/index.js")),a=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=s("./src/js/endpoints/composer/index.ts"),l=o(s("./src/js/pages/user/composer/_components/packages-table.vue")),d=(s("./src/js/api/endpoint/index.ts"),o(s("./src/js/pages/user/composer/_dialogs/composer-install-dialog.vue"))),u=o(s("./src/js/pages/user/composer/_dialogs/composer-update-dialog.vue")),c={components:{PackagesTable:l.default,ComposerInstallDialog:d.default,ComposerUpdateDialog:u.default},props:{dir:{type:String,required:!0}},data:function(){return{item:{},hasDev:!1,hasProd:!1,hasInstalled:!1}},computed:{tabs:function(){var e=[{id:"packages",label:this.$gettext("Packages")}];return this.hasInstalled&&e.push({id:"installed",label:this.$gettext("Installed")}),e}},beforeMount:(r=(0,a.default)(n.default.mark((function e(){var t;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getComposerDetails.request({dir:this.dir,domain:this.$domain});case 2:t=i.getComposerDetails.data,this.item=t,this.hasDev=t.packages.dev_packages.length>0,this.hasProd=t.packages.prod_packages.length>0,this.hasInstalled=t.packages.installed_packages.length>0;case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})};t.Z=c},"./src/js/endpoints/composer/index.ts":function(e,t,s){"use strict";s.r(t),s.d(t,{getComposer:function(){return l},getComposerDetails:function(){return p},helpers:function(){return o},installComposer:function(){return d},scanComposer:function(){return u},updateComposer:function(){return c}});var o={};s.r(o),s.d(o,{processEntries:function(){return i}});var r=s("./src/js/api/endpoint/index.ts"),n=s("./src/js/store/index.js"),a=function(){return a=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)},i=function(e){return void 0===e&&(e=[]),e.map((function(e){var t="."===e.dir?"domains/".concat(n.Store.state.app.domain):e.dir;return a(a({},e),{pretty_dir:t,path:"".concat(t,"/composer.json")})}))},l=(0,r.GET)("/composer/:domain"),d=(0,r.POST)("/composer/:domain/install",{statusCodes:{520:"COMPOSER_CMD_ERROR",409:"COMPOSER_NOT_FOUND"},errorMessages:{COMPOSER_CMD_ERROR:(0,r.$gettext)("%{ message }"),COMPOSER_NOT_FOUND:(0,r.$gettext)("composer.json not found.")}}),u=(0,r.POST)("/composer/:domain/scan"),c=(0,r.POST)("/composer/:domain/update",{statusCodes:{520:"COMPOSER_CMD_ERROR",409:"COMPOSER_NOT_FOUND"},errorMessages:{COMPOSER_CMD_ERROR:(0,r.$gettext)("%{ message }"),COMPOSER_NOT_FOUND:(0,r.$gettext)("composer.json not found.")}}),p=(0,r.GET)("/composer/:domain/:dir")},"./src/js/pages/user/composer/_components/packages-table.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return o.X},default:function(){return n}});var o=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/_components/packages-table.vue?vue&type=script&lang=js&"),r=o.Z,n=(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ui-table",{attrs:{items:e.packages}},[s("ui-column",{attrs:{id:"name",label:e.$gettext("Name"),width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("ui-link",{staticClass:"txt:bold",attrs:{target:"_blank",href:t.source.url}},[s("ui-icon",{directives:[{name:"margin",rawName:"v-margin:right",value:1,expression:"1",arg:"right"}],attrs:{id:"refreshed-link",theme:"primary",size:24}}),e._v("\n                "+e._s(t.name)+"\n            ")],1)]}}])}),e._v(" "),s("ui-column",{attrs:{id:"description",label:e.$gettext("Description")}})],1)}),[],!1,null,null,null).exports},"./src/js/pages/user/composer/_dialogs/composer-action-dialog.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return o.X},default:function(){return n}});var o=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/_dialogs/composer-action-dialog.vue?vue&type=script&lang=js&"),r=o.Z,n=(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ui-dialog",{attrs:{id:e.id,"no-auto-close":"",cancel:!1}},[s("template",{slot:"title"},[e._v("\n        "+e._s(e.title)+"\n        "),s("ui-tooltip",{attrs:{theme:"safe"}},[s("ui-link",{attrs:{slot:"trigger",href:e.docs,target:"_blank"},slot:"trigger"},[s("ui-icon",{directives:[{name:"margin",rawName:"v-margin:left",value:.5,expression:"0.5",arg:"left"}],attrs:{id:"question",color:"#fff"}})],1),e._v(" "),s("translate",[e._v("View command description")])],1)],1),e._v(" "),s("div",{attrs:{slot:"content"},slot:"content"},[s("ui-form-element",{attrs:{vertical:""}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Environment\n            ")]),e._v(" "),s("input-select",{attrs:{slot:"content",options:{prod:e.$gettext("Production"),dev:e.$gettext("Development")}},slot:"content",model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}})],1),e._v(" "),s("div",{directives:[{name:"padding",rawName:"v-padding:left",value:1.5,expression:"1.5",arg:"left"}],staticClass:"c:txt:muted",staticStyle:{"font-size":"95%","letter-spacing":"0.5px"}},[e._v("\n            "+e._s("prod"===e.mode?e.$gettext("Skips packages listed in require-dev."):e.$gettext("Includes additional dependencies for development."))+"\n        ")])],1),e._v(" "),e._e(),e._v(" "),s("ui-button",{attrs:{slot:"buttons",theme:"primary"},domProps:{textContent:e._s(e.actionLabel)},on:{click:function(t){return e.submit(e.dir,e.mode)}},slot:"buttons"})],2)}),[],!1,null,null,null).exports},"./src/js/pages/user/composer/_dialogs/composer-install-dialog.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return o.X},default:function(){return n}});var o=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/_dialogs/composer-install-dialog.vue?vue&type=script&lang=js&"),r=o.Z,n=(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(r,undefined,undefined,!1,null,null,null).exports},"./src/js/pages/user/composer/_dialogs/composer-update-dialog.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return o.X},default:function(){return n}});var o=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/_dialogs/composer-update-dialog.vue?vue&type=script&lang=js&"),r=o.Z,n=(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(r,undefined,undefined,!1,null,null,null).exports},"./src/js/pages/user/composer/info.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return o.X},default:function(){return d}});var o=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/info.vue?vue&type=script&lang=js&"),r=o.Z,n=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),a=s("./src/js/pages/user/composer/info.vue?vue&type=custom&index=0&blockType=route"),i=s.n(a),l=(0,n.Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page",{attrs:{actions:[{handler:e.$dialog("COMPOSER_INSTALL_DIALOG").open,label:e.$gettext("Install"),icon:"#console"},{handler:e.$dialog("COMPOSER_UPDATE_DIALOG").open,label:e.$gettext("Update"),icon:"#upload"}]}},[s("template",{slot:"header:buttons"},[s("ui-button",{attrs:{theme:"primary"},on:{click:function(t){e.$dialog("COMPOSER_INSTALL_DIALOG").open()}}},[s("translate",[e._v("Install")])],1),e._v(" "),s("ui-button",{attrs:{theme:"safe"},on:{click:function(t){e.$dialog("COMPOSER_UPDATE_DIALOG").open()}}},[s("translate",[e._v("Update")])],1)],1),e._v(" "),s("ui-tabs",{attrs:{tabs:e.tabs,"hide-single-tab":""}},[s("template",{slot:"tab:packages"},[e.hasDev?s("app-page-section",[s("translate",{attrs:{slot:"section:title"},slot:"section:title"},[e._v("\n                    Development Packages\n                ")]),e._v(" "),s("packages-table",{attrs:{packages:e.item.packages.dev_packages}})],1):e._e(),e._v(" "),e.hasProd?s("app-page-section",[s("translate",{attrs:{slot:"section:title"},slot:"section:title"},[e._v("\n                    Production Packages\n                ")]),e._v(" "),s("packages-table",{attrs:{packages:e.item.packages.prod_packages}})],1):e._e(),e._v(" "),e.hasDev||e.hasProd?e._e():s("app-page-section",[s("translate",[e._v("No packages in composer.json")])],1)],1),e._v(" "),s("app-page-section",{attrs:{slot:"tab:installed"},slot:"tab:installed"},[s("ui-table",{attrs:{items:e.item.packages.installed_packages}},[s("ui-column",{attrs:{id:"name",label:e.$gettext("Name")},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.name;return s("span",{staticClass:"txt:bold",domProps:{textContent:e._s(o)}})}}])}),e._v(" "),s("ui-column",{attrs:{id:"description",label:e.$gettext("Description")}}),e._v(" "),s("ui-column",{attrs:{id:"version",label:e.$gettext("Version")}}),e._v(" "),s("ui-column",{attrs:{id:"latest",label:e.$gettext("Latest")}}),e._v(" "),s("ui-column",{attrs:{id:"latest-status",label:e.$gettext("Latest Status")}})],1)],1)],2),e._v(" "),s("composer-install-dialog",{attrs:{dir:decodeURIComponent(e.dir)}}),e._v(" "),s("composer-update-dialog",{attrs:{dir:decodeURIComponent(e.dir)}})],2)}),[],!1,null,null,null);"function"==typeof i()&&i()(l);var d=l.exports},"./src/js/pages/user/composer/info.vue?vue&type=custom&index=0&blockType=route":function(){}}]);