(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[2368],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/stats/domain-statistics.vue?vue&type=script&lang=js&":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.symbol.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),t("./node_modules/core-js/modules/es.object.define-properties.js"),t("./node_modules/core-js/modules/es.object.define-property.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"X",{value:!0}),s.Z=void 0;var a=o(t("./node_modules/@babel/runtime/regenerator/index.js")),r=o(t("./node_modules/@babel/runtime/helpers/slicedToArray.js")),n=o(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),u=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js"));t("./node_modules/core-js/modules/es.object.keys.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.function.name.js"),t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.promise.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js");var l=t("./src/js/api/commands/user/stats.js"),d=t("./src/js/vue/mixins.js"),i=t("./src/js/modules/utils/index.js");t("./src/js/api/converters.js");function c(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);s&&(o=o.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),t.push.apply(t,o)}return t}function m(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?c(Object(t),!0).forEach((function(s){(0,u.default)(e,s,t[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}))}return e}var p,j={preload:[l.getWebalizerReport,l.getStatsStatus],api:[{command:l.getWebalizerReport,bind:"hasWebalizerReport"},{command:l.getStatsStatus,bind:"stats"}],mixins:[(0,d.$bindTab)({defaultTab:"",param:"tab"})],props:{domain:{type:String,required:!0}},data:function(){return{report:""}},computed:{hasAwstatsReport:function(){return this.$api.stats.awstats&&!!Object.keys(this.awstatsOptions).length},hasWebalizerReport:function(){return this.$api.hasWebalizerReport},awstatsOptions:function(){var e=this;if(!this.$api.stats.awstats)return{};var s=i.fp.transformObject((function(s,t){if("has_dynamic"===t)return{};if("present"===s)return(0,u.default)({},t,e.$gettext("Present"));var o=i.fp.convert.toAppDate(s),a=[e.$gettext("January"),e.$gettext("February"),e.$gettext("March"),e.$gettext("April"),e.$gettext("May"),e.$gettext("June"),e.$gettext("July"),e.$gettext("August"),e.$gettext("September"),e.$gettext("October"),e.$gettext("November"),e.$gettext("December")];return(0,u.default)({},t,"".concat(a[o.getMonth()]," ").concat(o.getFullYear()))})),t=this.$api.stats.awstatsOptions[this.domain];return m(m({},"1"===t.has_dynamic?(0,u.default)({},"/CMD_AWSTATS/".concat(this.domain,"/awstats.pl"),this.$gettext("All Month(cgi)")):{}),s(t))},reportLink:function(){return"/CMD_WEBALIZER/".concat(this.domain,"/index.html")}},watch:{$domain:(p=(0,n.default)(a.default.mark((function e(s){var t=this;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$router.push({name:this.$route.name,params:m(m({},this.$route.params),{},{domain:s})}),e.next=3,Promise.all([(0,l.getWebalizerReport)(),(0,l.getStatsStatus)()]);case 3:this.$nextTick((function(){!t.$api.stats.webalizer&&t.$api.stats.awstats?t.tab="awstats":t.tab="webalizer"}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},created:function(){var e=this;this.$watch("awstatsOptions",(function(s){var t=Object.keys(s),o=(0,r.default)(t,1);e.report=o[0]}),{deep:!0,immediate:!0}),this.$nextTick((function(){!e.$api.stats.webalizer&&e.$api.stats.awstats?e.tab="awstats":e.tab="webalizer"}))}};s.Z=j},"./src/js/api/commands/user/stats.js":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.object.keys.js"),t("./node_modules/core-js/modules/es.symbol.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),t("./node_modules/core-js/modules/es.object.define-properties.js"),t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.weak-map.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=t("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(s,"__esModule",{value:!0}),s.updateDiskUsage=s.unsetPublicStats=s.setUserStats=s.setUserSkin=s.setUserName=s.setUserEmail=s.setUserAwstats=s.setPublicStats=s.setMultiple=s.licenseVerify=s.getWebalizerReport=s.getStatsStatus=s.getStats=s.getDomainLog=void 0;var r=o(t("./node_modules/@babel/runtime/helpers/typeof.js")),n=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js"));t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.promise.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.object.values.js"),t("./node_modules/core-js/modules/es.array.reduce.js"),t("./node_modules/core-js/modules/es.array.find.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.array.slice.js");var u=o(t("./src/js/api/command/index.js")),l=t("./src/js/api/commands/converters/customItems.ts"),d=function(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=i(s);if(t&&t.has(e))return t.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var u=r?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(o,n,u):o[n]=e[n]}o.default=e,t&&t.set(e,o);return o}(t("./node_modules/ramda/src/index.js"));function i(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:s})(e)}function c(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);s&&(o=o.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),t.push.apply(t,o)}return t}function m(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?c(Object(t),!0).forEach((function(s){(0,n.default)(e,s,t[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}))}return e}var p="/CMD_USER_STATS",j="/CMD_CHANGE_INFO",f=u.default.get({id:"USER_STATS",url:p,params:{bytes:!0},domain:!0,pagination:!0,after:function(e){return e.flow(e.project({domains:"domains",stats:"stats","addons.webalizer":"webalizer","addons.awstats":"awstats",limitNotice:"stats",customItems:"custom_items"}),e.mapProps({stats:e.flow(e.deleteProp("info"),e.toArray,e.filter((function(e){return!!e.usage})),e.transformObject((function(e){return(0,n.default)({},e.setting,{usage:e.usage||void 0,limit:e.max_usage||void 0})})),e.mapValues((function(e){return["ON","OFF"].includes(e.usage)?{usage:"ON"===e.usage}:"object"===(0,r.default)(e.usage)?m(m({},e),{},{usage:Object.values(e.usage)}):e})),e.mapValues((function(s){return s.limit?e.toLimitedUsage(e.convert.toAppNumber)(s):s.usage})),e.mapProps({awstats:e.flow(e.toSelect,e.getProp("value"))})),domains:e.toTable(e.mapArray(e.flow((function(e){var s=e.subdomains||e.settings.subdomains||[];return void 0!==e.settings.subdomains&&delete e.settings.subdomains,e.subdomains=s,e}),e.mapProps({bandwidth:e.mapProp("usage",e.convert.toAppNumber),quota:e.convert.toAppNumber,log_usage:e.convert.toAppNumber,nsubdomains:e.convert.toAppNumber,suspended:e.convert.toAppBoolean,settings:e.mapValues(e.convert.toAppBoolean)})))),addons:e.flow(e.toArray,e.mapArray(e.isEqual("1")),e.reduce((function(e,s){return e||s}),!1)),limitNotice:function(s){var t=Object.values(s).find((function(e){return"send_usage_message"===e.setting}));return!!t&&{defaultValue:t.max_usage,value:e.toSelect(t.usage).value}},customItems:d.pipe(d.defaultTo({}),d.map(l.fromObject),d.filter((function(e){return e.value||"checkbox"===e.type})),d.values)}))}});s.getStats=f;var b=u.default.get({id:"STATS_STATUS",url:p,domain:!0,after:function(e){return e.flow(e.project({awstats:"awstats",awstatsOptions:"domain_awstats",webalizer:"webalizer"}),e.mapProp("awstats",(function(e){return"0"!==e})),e.mapProp("webalizer",e.isEqual("1")))}});s.getStatsStatus=b;var _=u.default.get({id:"WEBALIZER_REPORT",url:"/CMD_FILE_MANAGER",response:!1,params:{action:"exists"},schema:{domain:u.default.DOMAIN,subdomain:u.default.OPTIONAL_STRING},before:function(e){var s=e.domain,t=e.subdomain;return{path:t?"/domains/".concat(s,"/stats/").concat(t,"/index.html"):"/domains/".concat(s,"/stats/index.html"),domain:null,subdomain:null}},after:function(){return function(e){return"1"===e.exists}}});s.getWebalizerReport=_;var v=u.default.select({url:"/CMD_PUBLIC_STATS",params:{action:"public",json:!0},domain:!0,schema:{path:u.default.REQUIRED_STRING}});s.setPublicStats=v;var g=u.default.select({url:"/CMD_PUBLIC_STATS",params:{action:"public",json:!0,unset:!0},schema:{path:u.default.REQUIRED_STRING}});s.unsetPublicStats=g;var y=u.default.post({url:j,params:{json:!0},domain:!0,schema:{evalue:u.default.OPTIONAL_STRING,nvalue:u.default.OPTIONAL_STRING,lvalue:u.default.OPTIONAL_STRING}});s.setUserStats=y;var O=u.default.post({url:j,domain:!0}),w=O.extend({params:{name:!0},schema:{nvalue:u.default.REQUIRED_STRING}});s.setUserName=w;var h=O.extend({params:{email:!0},schema:{evalue:u.default.REQUIRED_STRING}});s.setUserEmail=h;var S=O.extend({params:{skin:!0},schema:{skinvalue:u.default.REQUIRED_STRING}});s.setUserSkin=S;var R=O.extend({params:{set_multiple:!0,send_usage_message:!0},schema:{nvalue:u.default.OPTIONAL_STRING,evalue:u.default.OPTIONAL_STRING,skinvalue:u.default.OPTIONAL_STRING,lvalue:u.default.OPTIONAL_STRING,awstatsvalue:u.default.OPTIONAL_STRING,zvalue:u.default.OPTIONAL_STRING},before:function(e){return{name:!!e.nvalue||null,email:!!e.evalue||null,skin:!!e.skinvalue||null,language:!!e.lvalue||null,awstats:!!e.awstatsvalue||null,zoom:!!e.zvalue||null}}});s.setMultiple=R;var x=O.extend({params:{awstats:!0},schema:{awstatsvalue:u.default.REQUIRED_STRING}});s.setUserAwstats=x;var P=u.default.get({id:"LICENSE_VERIFY",url:"/CMD_LICENSE_VERIFY",notifySuccess:!0});s.licenseVerify=P;var T=u.default.post({url:"/CMD_CHANGE_INFO",params:{update:!0}});s.updateDiskUsage=T;var I=u.default.get({id:"DOMAIN_LOG",url:"/CMD_SHOW_LOG",params:{json:null},accepts:"text/plain",domain:!0,schema:{type:u.default.REQUIRED_STRING},after:function(e){return e.flow((function(e){return e.split("\n")}),(function(e){return e.slice(0,-1)}))}});s.getDomainLog=I},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/stats/domain-statistics.vue?vue&type=style&index=0&id=6b447f18&lang=scss&scoped=true&":function(){},"./src/js/pages/user/stats/domain-statistics.vue":function(e,s,t){"use strict";t.r(s),t.d(s,{__esModule:function(){return o.X},default:function(){return d}});var o=t("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/stats/domain-statistics.vue?vue&type=script&lang=js&"),a=o.Z,r=(t("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/stats/domain-statistics.vue?vue&type=style&index=0&id=6b447f18&lang=scss&scoped=true&"),t("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),n=t("./src/js/pages/user/stats/domain-statistics.vue?vue&type=custom&index=0&blockType=route"),u=t.n(n),l=(0,r.Z)(a,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("app-page",{attrs:{id:"domain-stats"}},[e.tab?t("app-page-section",[e.$api.stats.awstats||e.$api.stats.webalizer?t("ui-tabs",{attrs:{tabs:[e.$api.stats.webalizer?{id:"webalizer",label:e.$gettext("Webalizer")}:{},e.$api.stats.awstats?{id:"awstats",label:e.$gettext("AWStats")}:{}],"hide-single-tab":"",selected:e.tab},on:{"update:selected":function(s){e.tab=s}}},[t("div",{attrs:{slot:"tab:webalizer"},slot:"tab:webalizer"},[e.hasWebalizerReport?t("iframe",{staticClass:"report",attrs:{src:e.reportLink,frameborder:"0"}}):t("translate",[e._v("\n                    There are no statistics for the domain yet\n                ")])],1),e._v(" "),t("div",{attrs:{slot:"tab:awstats"},slot:"tab:awstats"},[t("ui-form-element",[t("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                        Month\n                    ")]),e._v(" "),t("input-select",{attrs:{slot:"content",options:e.awstatsOptions},slot:"content",model:{value:e.report,callback:function(s){e.report=s},expression:"report"}})],1),e._v(" "),e.report?t("iframe",{staticClass:"report",attrs:{src:e.report,frameborder:"0"}}):e._e()],1)]):t("translate",[e._v("\n            There are no statistics for the domain yet\n        ")])],1):e._e()],1)}),[],!1,null,"6b447f18",null);"function"==typeof u()&&u()(l);var d=l.exports},"./src/js/pages/user/stats/domain-statistics.vue?vue&type=custom&index=0&blockType=route":function(){},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/stats/domain-statistics.vue?vue&type=style&index=0&id=6b447f18&lang=scss&scoped=true&":function(e,s,t){var o=t("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/stats/domain-statistics.vue?vue&type=style&index=0&id=6b447f18&lang=scss&scoped=true&");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,t("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("629c050e",o,!0,{})}}]);