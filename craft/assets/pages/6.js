(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1924:function(e,t,r){"use strict";r(7),r(10),r(6),r(8),r(11);var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.updateCron=t.getCron=t.restoreBackup=t.getRestoreFiles=t.scheduleBackup=t.getRestoreOptions=t.getScheduleOptions=t.getSettings=t.updateSettings=t.deleteCrons=t.duplicateCrons=t.getEncryptionStatus=t.hasResellerCrons=t.getCrons=void 0;var s=a(r(2));r(86),r(21),r(40),r(50),r(57),r(27),r(5);var o=a(r(78));function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u="/CMD_USER_BACKUP",f=o.default.get({id:"USER_BACKUPS",url:u,after:function(e){return e.flow((function(e){return{rows:e.crons,location:e.files_location}}),e.processTableInfo("rows"),e.mapProps({rows:e.flow(e.toArray,e.mapArrayProps({where:e.flow(e.moveProp("encryption_password","encrypted"),e.mapProps({encrypted:e.flow(e.setDefault("0"),e.isEqual("1")),path:function(e){return e.replace("<span class='green_lock'>&#128274;</span>","").trim()}}))}))}))}});t.getCrons=f;var l=o.default.get({id:"HAS_USER_BACKUPS",url:u,response:!1,mapResponse:function(e){return 0!==e.crons.length}});t.hasResellerCrons=l;var i=o.default.get({id:"BACKUP_ENCRYPTION_STATUS",url:u,after:function(e){return e.flow(e.project({enabled:"settings.allow_backup_encryption",password:"settings.encryption_password"}),e.mapProp("enabled",e.convert.toAppBoolean))}});t.getEncryptionStatus=i;var _=o.default.select({url:u,params:{duplicate:!0}});t.duplicateCrons=_;var c=o.default.select({url:u,params:{delete:!0}});t.deleteCrons=c;var d=o.default.post({url:u,params:{action:"setting"},schema:{message:o.default.REQUIRED_BOOL,local_ns:o.default.REQUIRED_BOOL,restore_spf:o.default.REQUIRED_BOOL}});t.updateSettings=d;var O=o.default.get({id:"USER_BACKUP_SETTINGS",url:u,after:function(e){return e.flow(e.project({local_ns:"settings.local_ns",message:"settings.message",restore_spf:"settings.restore_spf"}),e.mapValues(e.convert.toAppBoolean))}});t.getSettings=O;var I=o.default.get({id:"USER_BACKUP_SCHEDULE_OPTIONS",url:u,after:function(e){return e.flow(e.project({settings:"settings","settings.append":"append_to_path",where:"where",users:"users",location:"files_location"}),e.mapProps({users:e.flow(e.deleteProp("info"),e.toArray,e.mapArray(e.getProp("user"))),settings:e.flow(e.project({ip:"ftp_ip",password:"ftp_password",path:"ftp_path",port:"ftp_port",secure:"ftp_secure",username:"ftp_username",append:"append"}),e.mapProps({secure:e.convert.toAppBoolean,append:function(e){var t=Object.values(e),r=t.find((function(e){return e.selected})),a=t.reduce((function(e,t){return p(p({},e),{},(0,s.default)({},t.value,t.text))}),{});return{value:r.value,options:a}}}))}))}});t.getScheduleOptions=I;var N=o.default.get({id:"USER_BACKUP_RESTORE_OPTIONS",url:u,after:function(e){return e.flow(e.project({settings:"settings",where:"where",location:"files_location",ips:"ip_list",files:"files"}),e.mapProps({files:e.flow(e.deleteProp("info"),e.toArray),settings:e.flow(e.getProps(["ftp_ip","ftp_password","ftp_path","ftp_port","ftp_secure","ftp_username"]),e.mapProps({ftp_secure:e.convert.toAppBoolean})),ips:function(e){var t=Object.values(e),r=t.find((function(e){return e.selected})),a=t.reduce((function(e,t){return p(p({},e),{},(0,s.default)({},t.value,t.text))}),{});return{value:r.value,options:a}}}))}});t.getRestoreOptions=N;var R=o.default.post({url:u,params:{action:"create",form_version:"3"},schema:{who:o.default.REQUIRED_STRING,select:{type:Array,required:!1},skip_suspended:o.default.OPTIONAL_BOOL,when:o.default.REQUIRED_STRING,minute:o.default.OPTIONAL_STRING,hour:o.default.OPTIONAL_STRING,dayofmonth:o.default.OPTIONAL_STRING,month:o.default.OPTIONAL_STRING,dayofweek:o.default.OPTIONAL_STRING,where:o.default.REQUIRED_STRING,ftp_ip:o.default.OPTIONAL_STRING,ftp_username:o.default.OPTIONAL_STRING,ftp_password:o.default.OPTIONAL_STRING,ftp_path:o.default.OPTIONAL_STRING,ftp_port:o.default.OPTIONAL_STRING,ftp_secure:o.default.OPTIONAL_STRING,append_to_path:o.default.OPTIONAL_STRING,custom_append:o.default.OPTIONAL_STRING,encryption_password:o.default.OPTIONAL_STRING}});t.scheduleBackup=R;var h=o.default.get({url:u,id:"USER_BACKUP_RESTORE_FILES",params:{action:"update_files"},schema:{where:o.default.REQUIRED_STRING,ftp_ip:o.default.OPTIONAL_STRING,ftp_username:o.default.OPTIONAL_STRING,ftp_password:o.default.OPTIONAL_STRING,ftp_path:o.default.OPTIONAL_STRING,ftp_port:o.default.OPTIONAL_STRING,ftp_secure:o.default.OPTIONAL_STRING},after:function(e){return e.flow(e.getProp("files"),e.deleteProp("info"),e.toArray)}});t.getRestoreFiles=h;var T=o.default.post({url:u,params:{action:"restore"},schema:{where:o.default.REQUIRED_STRING,ftp_ip:o.default.OPTIONAL_STRING,ftp_username:o.default.OPTIONAL_STRING,ftp_password:o.default.OPTIONAL_STRING,ftp_path:o.default.OPTIONAL_STRING,ftp_port:o.default.OPTIONAL_STRING,ftp_secure:o.default.OPTIONAL_STRING,ip_choice:o.default.REQUIRED_STRING,ip:o.default.OPTIONAL_STRING,select:{type:Array,required:!0},encryption_password:o.default.OPTIONAL_STRING}});t.restoreBackup=T;var w=o.default.post({url:"/CMD_USER_BACKUP_MODIFY",id:"USER_BACKUP_CRON",schema:{id:o.default.REQUIRED_STRING},notifySuccess:!1,notifyError:!0,after:function(e){return e.flow(e.moveProp({append_to_path:"append","settings.where":"where"}),e.mapProps({settings:e.mapProp("ftp_secure",e.convert.toAppBoolean),who:e.mapProps({skip_suspended:e.convert.toAppBoolean,users:e.flow(e.deleteProp("info"),e.toArray,e.mapArray(e.getProp("user"))),select:e.feedWith(1,e.flow(e.getProp("users"),e.deleteProp("info"),e.filter(e.flow(e.getProp("checkbox"),e.isEqual("checked"))),e.mapValues(e.getProp("user")),e.toArray))}),append:e.flow(e.mapProps({options:e.feedWith(1,e.transformObject((function(e){var t=e.value,r=e.text;return(0,s.default)({},t,r)}))),value:e.feedWith(1,e.flow(e.find(e.getProp("selected")),e.getProp("value")))}),e.getProps(["value","options"])),custom_append:e.feedWith(1,e.getProp("append.custom_append"))}))}});t.getCron=w;var P=o.default.post({url:u,params:{action:"modify",when:"cron",form_version:"3"},schema:{id:o.default.REQUIRED_STRING,who:o.default.REQUIRED_STRING,select:{type:Array,required:!1},skip_suspended:o.default.OPTIONAL_BOOL,minute:o.default.REQUIRED_STRING,hour:o.default.REQUIRED_STRING,dayofmonth:o.default.REQUIRED_STRING,month:o.default.REQUIRED_STRING,dayofweek:o.default.REQUIRED_STRING,where:o.default.REQUIRED_STRING,ftp_ip:o.default.OPTIONAL_STRING,ftp_username:o.default.OPTIONAL_STRING,ftp_password:o.default.OPTIONAL_STRING,ftp_path:o.default.OPTIONAL_STRING,ftp_port:o.default.OPTIONAL_STRING,ftp_secure:o.default.OPTIONAL_STRING,append_to_path:o.default.REQUIRED_STRING,custom_append:o.default.OPTIONAL_STRING}});t.updateCron=P},1945:function(e,t,r){"use strict";r(7),r(10),r(6),r(8),r(11),r(16),r(14),r(23),r(25),r(18);var a=r(1),s=r(19);Object.defineProperty(t,"__esModule",{value:!0}),t.modifyBackup=t.runCrons=t.deleteCrons=t.duplicateCrons=t.restoreBackup=t.scheduleBackup=t.updateSettings=t.killBackup=t.getCronDetails=t.getRestoreFiles=t.getRestoreOptions=t.getScheduleOptions=t.getBackupSettings=t.getCurrentBackup=t.getCurrentBackups=t.getCrons=t.getEncryptionStatus=void 0,r(86),r(21),r(40),r(17),r(84),r(12),r(15),r(5),r(57),r(50);var o=a(r(2)),n=a(r(78)),p=r(1924),u=a(r(3177)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var p=o?Object.getOwnPropertyDescriptor(e,n):null;p&&(p.get||p.set)?Object.defineProperty(a,n,p):a[n]=e[n]}a.default=e,r&&r.set(e,a);return a}(r(3178));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function(e,t){return n.default.get(_({url:"/CMD_ADMIN_BACKUP",id:e},t))},d=p.getEncryptionStatus.extend({url:"/CMD_ADMIN_BACKUP"});t.getEncryptionStatus=d;var O=c("ADMIN_CRONS",{after:function(e){return function(t){var r=e.flow(e.getProp("crons"),e.toTable(e.mapArrayProps({where:e.flow(e.moveProp("encryption_password","encrypted"),e.mapProps({encrypted:e.flow(e.setDefault("0"),e.isEqual("1")),path:function(e){return e.replace("<span class='green_lock'>&#128274;</span>","").trim()}}))})))(t);return r.has_reseller_level_backups="1"===t.has_reseller_level_backups,r}}});t.getCrons=O;var I=c("ADMIN_CURRENT_BACKUPS",{after:function(e){return e.flow(e.getProp("current_backups"),e.toTable(e.mapArray(e.flow(e.deleteProp("details"),e.mapProps({progress:function(e){return Number(e.slice(0,-1))},where:function(e){return{encrypted:e.includes("<span class='green_lock'>&#128274;</span>"),path:e.replace("<span class='green_lock'>&#128274;</span> ","")}}})))))},silent:!0});t.getCurrentBackups=I;var N=c("ADMIN_CURRENT_BACKUP",{params:{action:"monitor"},schema:{pid:n.default.REQUIRED_STRING},after:function(e){return e.flow(e.getProp("backup_info.0"),e.mapProp("start",e.convert.toAppDate))}});t.getCurrentBackup=N;var R=c("ADMIN_BACKUP_SETTINGS",{mapResponse:f.getBackupSettings});t.getBackupSettings=R;var h=c("ADMIN_SCHEDULE_OPTIONS",{after:function(e){return e.flow(e.project({who:"who.who","whoData.users":"data_list","whoData.skip_suspended":"who.skip_suspended",where:"where","whereData.append_to_path":"settings.append_to_path","whereData.ftp_ip":"settings.ftp_ip","whereData.ftp_username":"settings.ftp_username","whereData.ftp_password":"settings.ftp_password","whereData.ftp_path":"settings.ftp_path","whereData.ftp_port":"settings.ftp_port","whereData.ftp_secure":"settings.ftp_secure","whereData.local_path":"settings.local_path",appendOptions:"append_to_path",usertypes:"who.users"}),e.mapProps({whoData:e.mapProps({skip_suspended:e.convert.toAppBoolean}),whereData:e.mapProps({ftp_secure:e.convert.toAppBoolean}),appendOptions:e.transformObject((function(e){var t=e.value,r=e.text;return(0,o.default)({},t,r)})),usertypes:e.flow(e.deleteProp("info"),e.transformObject((function(e){var t=e.user,r=e.type;return(0,o.default)({},t,r.toLowerCase()||"user")})))}))}});t.getScheduleOptions=h;var T=c("ADMIN_RESTORE_OPTIONS",{after:function(e){return e.flow(e.project({where:"where",data_list:"data_list","whereData.ftp_ip":"settings.ftp_ip","whereData.ftp_username":"settings.ftp_username","whereData.ftp_password":"settings.ftp_password","whereData.ftp_path":"settings.ftp_path","whereData.ftp_port":"settings.ftp_port","whereData.ftp_secure":"settings.ftp_secure","whereData.local_path":"settings.local_path",ips:"ip_list","filesData.list":"files","filesData.location":"files_location","filesData.home_override":"create_user_home_override"}),e.mapProps({whereData:e.mapProps({ftp_secure:e.convert.toAppBoolean}),ips:e.toSelect,filesData:e.mapProps({list:e.flow(e.deleteProp("info"),e.toArray,e.mapArray((function(e){var t=e.file,r=e.info,a={file:t};return r.issues&&r.issues.length&&(a.issues=r.issues),"yes"===r.hide_checkbox&&(a.disabled=!0),a}))),home_override:function(t){return!!t&&e.toSelect(t)}})}))}});t.getRestoreOptions=T;var w=n.default.post({id:"ADMIN_RESTORE_FILES",url:"/CMD_ADMIN_BACKUP",params:{action:"update_files",json:!0},schema:{where:n.default.REQUIRED_STRING,ftp_ip:n.default.OPTIONAL_STRING,ftp_username:n.default.OPTIONAL_STRING,ftp_password:n.default.OPTIONAL_STRING,ftp_path:n.default.OPTIONAL_STRING,ftp_port:n.default.OPTIONAL_STRING,ftp_secure:n.default.OPTIONAL_BOOL,local_path:n.default.OPTIONAL_STRING},mapResponse:{location:u.default.location,list:u.default.filesList},notifySuccess:!1});t.getRestoreFiles=w;var P=n.default.get({id:"ADMIN_CRON_DETAILS",url:"/CMD_ADMIN_BACKUP_MODIFY",schema:{id:n.default.REQUIRED_STRING},after:function(e){return e.flow(e.project({who:"who.who","whoData.users":"data_list","whoData.select":"who.users","whoData.skip_suspended":"who.skip_suspended",where:"where","whereData.append_to_path":"append_to_path","whereData.ftp_ip":"settings.ftp_ip","whereData.ftp_username":"settings.ftp_username","whereData.ftp_password":"settings.ftp_password","whereData.ftp_path":"settings.ftp_path","whereData.ftp_port":"settings.ftp_port","whereData.ftp_secure":"settings.ftp_secure","whereData.local_path":"settings.local_path","whereData.custom_append":"append_to_path.custom_append",whenData:"when",what:"what.what","whatData.select":"what.select",appendOptions:"append_to_path",usertypes:"who.users"}),e.mapProps({whoData:e.mapProps({skip_suspended:e.convert.toAppBoolean,select:e.flow(e.toArray,(function(e){return e.filter((function(e){return"checked"===e.checkbox}))}),e.mapArray(e.getProp("user")))}),whereData:e.mapProps({ftp_secure:e.convert.toAppBoolean,append_to_path:e.flow((function(e){return Object.values(e).find((function(e){return e.selected}))}),e.getProp("value"))}),appendOptions:e.transformObject((function(e){var t=e.value,r=e.text;return(0,o.default)({},t,r)})),usertypes:e.flow(e.deleteProp("info"),e.transformObject((function(e){var t=e.user,r=e.type;return(0,o.default)({},t,r.toLowerCase()||"user")})))}))}});t.getCronDetails=P;var S=function(e){return n.default.post(_({url:"/CMD_ADMIN_BACKUP"},e))},m=S({params:{action:"kill",kill:!0},schema:{select:n.default.ROWS}});t.killBackup=m;var g=S({url:"/CMD_ADMIN_BACKUP",params:{action:"setting"},schema:{message:n.default.REQUIRED_BOOL,local_ns:n.default.REQUIRED_BOOL,restore_spf:n.default.REQUIRED_BOOL,confirm_with_domainowners:n.default.REQUIRED_BOOL},before:function(e){return _(_({},e),{},{message:e.message||null,local_ns:e.local_ns||null,restore_spf:e.restore_spf||null,confirm_with_domainowners:e.confirm_with_domainowners||null})}});t.updateSettings=g;var A=S({params:{action:"create",form_version:"4"},schema:{who:n.default.REQUIRED_STRING,select:{type:Array,required:!1},skip_suspended:n.default.OPTIONAL_BOOL,when:n.default.REQUIRED_STRING,minute:n.default.OPTIONAL_STRING,hour:n.default.OPTIONAL_STRING,dayofmonth:n.default.OPTIONAL_STRING,month:n.default.OPTIONAL_STRING,dayofweek:n.default.OPTIONAL_STRING,where:n.default.REQUIRED_STRING,ftp_ip:n.default.OPTIONAL_STRING,ftp_username:n.default.OPTIONAL_STRING,ftp_password:n.default.OPTIONAL_STRING,ftp_path:n.default.OPTIONAL_STRING,ftp_port:n.default.OPTIONAL_STRING,ftp_secure:n.default.OPTIONAL_STRING,append_to_path:n.default.OPTIONAL_STRING,custom_append:n.default.OPTIONAL_STRING,what:n.default.REQUIRED_STRING,option:{type:Array,required:!1}}});t.scheduleBackup=A;var y=S({params:{action:"restore"},schema:{where:n.default.REQUIRED_STRING,ftp_ip:n.default.OPTIONAL_STRING,ftp_username:n.default.OPTIONAL_STRING,ftp_password:n.default.OPTIONAL_STRING,ftp_path:n.default.OPTIONAL_STRING,ftp_port:n.default.OPTIONAL_STRING,ftp_secure:n.default.OPTIONAL_STRING,local_path:n.default.OPTIONAL_STRING,ip_choice:n.default.REQUIRED_STRING,ip:n.default.OPTIONAL_STRING,select:{type:Array,required:!0},reseller_override:n.default.OPTIONAL_STRING}});t.restoreBackup=y;var D=function(e){return n.default.select({url:"/CMD_ADMIN_BACKUP",params:(0,o.default)({},e,!0)})},v=D("duplicate");t.duplicateCrons=v;var E=D("delete");t.deleteCrons=E;var G=D("run");t.runCrons=G;var L=S({params:{action:"modify",form_version:"4"},schema:{id:n.default.REQUIRED_STRING,who:n.default.REQUIRED_STRING,select:{type:Array,required:!1},skip_suspended:n.default.OPTIONAL_BOOL,minute:n.default.OPTIONAL_STRING,hour:n.default.OPTIONAL_STRING,dayofmonth:n.default.OPTIONAL_STRING,month:n.default.OPTIONAL_STRING,dayofweek:n.default.OPTIONAL_STRING,where:n.default.REQUIRED_STRING,ftp_ip:n.default.OPTIONAL_STRING,ftp_username:n.default.OPTIONAL_STRING,ftp_password:n.default.OPTIONAL_STRING,ftp_path:n.default.OPTIONAL_STRING,ftp_port:n.default.OPTIONAL_STRING,ftp_secure:n.default.OPTIONAL_STRING,append_to_path:n.default.OPTIONAL_STRING,custom_append:n.default.OPTIONAL_STRING,what:n.default.REQUIRED_STRING,option:{type:Array,required:!1}}});t.modifyBackup=L},3177:function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(r(19));r(135),r(136),r(5),r(34),r(50);var o=r(47),n=r(32),p=function(e,t){return o.Maybe.fromNull(e).filter((function(e){return"object"===(0,s.default)(e)})).flatMap((function(e){return o.Maybe.fromNull(e[t])}))},u={location:function(e){return p(e,"files_location").map((function(e){return n.fp.convert.toAppString(e)})).orSome("")},filesList:function(e){return p(e,"files").map((function(e){return delete e.info,Object.values(e).map((function(e){var t=e.file,r=e.info,a={file:t};return r.issues&&r.issues.length&&(a.issues=r.issues),"yes"===r.hide_checkbox&&(a.disabled=!0),a}))})).orSome([])}};t.default=u},3178:function(e,t,r){"use strict";r.r(t),r.d(t,"getEncryptionStatus",(function(){return n})),r.d(t,"getIssues",(function(){return p})),r.d(t,"getFiles",(function(){return u})),r.d(t,"getSkipSuspendedValue",(function(){return f})),r.d(t,"getUsers",(function(){return l})),r.d(t,"getUsertypes",(function(){return i})),r.d(t,"getBackupSettings",(function(){return _}));var a=r(9),s=r(97),o=function(){return(o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},n=function(e){return"yes"===e.settings.allow_backup_encryption},p=function(e){return a.map(s.toAppHtml,e.file_issues)},u=function(e){var t=a.omit(["info"],e.files);return a.map(a.prop("file"),t)},f=function(e){return"yes"===e.who.skip_suspended},l=function(e){return e.data_list},i=function(e){return a.pipe(a.omit(["info"]),a.values)(e.who.users).reduce((function(e,t){var r,a=t.user,s=t.type;return o(o({},e),((r={})[a]=s||"User",r))}),{})},_=function(e){var t={local_ns:"yes"===e.settings.local_ns,message:"yes"===e.settings.message,confirm_with_domainowners:"yes"===e.settings.confirm_with_domainowners,restore_spf:"yes"===e.settings.restore_spf};return e.settings.directadmin_conf&&(t.directadmin_conf=a.pipe(a.pick(["backup_ftp_pre_test","backup_ftp_md5","allow_backup_encryption","restore_database_as_admin","tally_after_restore","backup_hard_link_check","strict_backup_permissions","webmail_backup_is_email_data"]),a.map(a.pipe(a.prop("value"),a.equals("1"))))(e.settings.directadmin_conf)),t}}}]);