(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{1854:function(t,e,n){"use strict";n.r(e);var r=n(4052),i=n(2721);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);var o=n(0),u=n(3745),s=n.n(u),c=Object(o.a)(i.default,r.a,r.b,!1,null,null,null);"function"==typeof s.a&&s()(c),e.default=c.exports},2721:function(t,e,n){"use strict";n.r(e);var r=n(2722),i=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e.default=i.a},2722:function(t,e,n){"use strict";n(16),n(14),n(23),n(25),n(18),n(6);var r=n(1),i=n(19);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n(12),n(15);var a=r(n(36)),o=r(n(37)),u=n(28),s=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=p(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var u=a?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=t[o]}r.default=t,n&&n.set(t,r);return r}(n(9)),c=n(13),l=n(508),f=r(n(3739)),d=r(n(3743));function p(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(p=function(t){return t?n:e})(t)}var m,h=function(t){return{admin:l.getAdminPlugins,reseller:l.getResellerPlugins,user:l.getUserPlugins}[t]()},g={components:{LegacyHost:f.default,VueHost:d.default},preload:(m=(0,o.default)(a.default.mark((function t(e){var n;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.level,(0,u.State)("commands.".concat(n.toUpperCase(),"_PLUGINS.isDone"))){t.next=5;break}return t.next=5,h(n);case 5:case"end":return t.stop()}}),t)}))),function(t){return m.apply(this,arguments)}),props:{id:{type:String,required:!0},level:{type:String,required:!0}},data:function(){return{lang:""}},api:[{command:l.getPluginLanguages,bind:"languages"}],computed:{pluginDefinition:function(){var t=this,e=this.$state.commands["".concat(this.level.toUpperCase(),"_PLUGINS")].response;return s.find((function(e){var n=e.id,r=e.dir;return[n.toLowerCase(),r.toLowerCase()].includes(t.id.toLowerCase())}),e)},host:function(){return"".concat(this.pluginDefinition.type,"-host")}},mounted:function(){c.emitter.on("navidation:update-notification-count",this.updateNotificationCount)},methods:{updateNotificationCount:function(){this.$store.dispatch("navigation/LOAD_UPDATE",{id:this.id,level:this.level})}}};e.default=g},2723:function(t,e,n){"use strict";n.r(e);var r=n(2724),i=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e.default=i.a},2724:function(t,e,n){"use strict";n(16),n(14),n(23),n(25),n(18),n(6);var r=n(1),i=n(19);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n(68),n(84),n(24),n(12),n(15),n(26),n(21),n(40);var a=r(n(3740)),o=(function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=s(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var u=a?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=t[o]}r.default=t,n&&n.set(t,r)}(n(9)),r(n(3175))),u=n(724);function s(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(s=function(t){return t?n:e})(t)}var c={components:{PluginsIframe:a.default,LoadingComponent:o.default},props:{pluginDefinition:{type:Object,required:!1,default:function(){return{}}}},data:function(){return{loading:!0,maximized:!1}},computed:{id:function(){return this.$route.params.id},level:function(){return this.$route.params.level},command:function(){return{user:"/CMD_PLUGINS",reseller:"/CMD_PLUGINS_RESELLER",admin:"/CMD_PLUGINS_ADMIN"}[this.level]},path:function(){var t=this.$route.query.path;return t&&t.startsWith("/")&&(t=t.slice(1)),t?"".concat(this.command,"/").concat(this.id,"/").concat(t):"".concat(this.command,"/").concat(this.id)},iframeKey:function(){return this.domainDependent?"".concat(this.id,"-").concat(this.$domain):this.id},domainDependent:function(){return Boolean(this.pluginDefinition&&this.pluginDefinition.href&&this.pluginDefinition.href.includes("|DOMAIN|"))},name:function(){return this.$gettext(this.pluginDefinition.name)}},methods:{updateState:function(t){var e=(0,u.parseURL)(t).path.replace("".concat(window.location.protocol,"//").concat(window.location.host).concat(this.command,"/").concat(this.id),"");e.startsWith("/")&&(e=e.slice(1));var n="/".concat(this.level,"/plugins/").concat(this.id),r=e?"".concat(n,"?path=").concat(e):n;window.history.pushState(r,"",r)}}};e.default=c},2725:function(t,e,n){"use strict";n.r(e);var r=n(2726),i=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e.default=i.a},2726:function(t,e,n){"use strict";n(16),n(14),n(23),n(25),n(18),n(6);var r=n(1),i=n(19);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n(44)),o=r(n(38));n(21),n(40),n(135),n(136),n(34),n(8),n(72),n(12),n(15),n(5),n(62);var u=n(47),s=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var n=l(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var u=a?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=t[o]}r.default=t,n&&n.set(t,r);return r}(n(9)),c=n(724);function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(l=function(t){return t?n:e})(t)}var f={display:"flex","justify-content":"center","align-items":"flex-start",margin:"0",padding:"0"},d={display:"inline-block","max-width":"100vw",overflow:"auto"},p={props:{src:{type:String,required:!0,default:""},domain:{type:Boolean,required:!1,default:!1}},data:function(){return{leaveUntouched:!1,blocked:!0,height:400,width:0}},computed:{iframeSrc:function(){var t=this.src.replace(/(\/|#)*$/g,"");return this.appendQuery(t)},iframe:function(){return this.$refs.iframe||null}},mounted:function(){var t=this;this.height=window.document.querySelector(".route-container").offsetHeight;!function e(n){if("complete"!==n.contentDocument.readyState)setTimeout((function(){return e(n)}),200);else{var r=n.contentDocument.querySelector("iframe");r?e(r):setTimeout(t.updateDimensions.bind(t),200)}}(this.iframe)},methods:{removeIframeParam:(0,c.removeParamFromURL)("iframe"),getDocument:function(){return u.Maybe.Some(this.$refs).flatMap((function(t){return u.Maybe.fromNull(t.iframe)})).flatMap((function(t){return u.Maybe.fromNull(t.contentDocument)}))},getBody:function(){return this.getDocument().map((function(t){return t.body}))},getClearSrc:function(){return this.getDocument().map((function(t){return t.location.href})).map((0,c.removeParamFromURL)("iframe")).some()},getContainer:function(){return this.getDocument().map((function(t){return t.querySelector("#iframe-container")}))},appendQuery:function(t){return t=(0,c.insertParamIntoURL)(t,"iframe","yes"),this.domain&&(t=(0,c.insertParamIntoURL)(t,"domain",this.$domain)),t},querySelectorAll:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.getDocument().map((function(t){return t.querySelectorAll.apply(t,e)}))},querySelector:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.getDocument().map((function(t){return t.querySelector.apply(t,e)}))},centerContent:function(){var t=function(t,e){var n=t.some();Object.entries(e).forEach((function(t){var e=(0,o.default)(t,2),r=e[0],i=e[1];n.style[r]=i}))};t(this.getBody(),f),t(this.getContainer(),d)},setTarget:function(t){var e=this.querySelector("base").orSome(null);e&&(e.target=t)},appendLinkHref:function(t){if(t){var e=t.getAttribute("href");if(e&&e.includes("PLUGINS")){var n=this.appendQuery(t.href);t.setAttribute("href",n)}}},appendScriptSrc:function(t){t&&t.src&&t.src.includes("PLUGINS")&&(t.src=this.appendQuery(t.src))},appendFormAction:function(t){if(t){var e=t.getAttribute("action");e&&!e.includes("iframe=yes")&&t.setAttribute("action",this.appendQuery(e))}},processTag:function(t,e){var n=this.querySelectorAll(t).orSome();s.forEach(e,n)},appendLocationQuery:function(t){t.href=this.appendQuery(t.href)},checkDestination:function(){return this.getDocument().flatMap((function(t){return u.Maybe.fromNull(t.location)})).filter((function(t){return!t.search.includes("iframe=yes")})).cata((function(){return{}}),this.appendLocationQuery),!0},onUnload:function(){this.$emit("loadStart"),this.blocked=!0,this.leaveUntouched||setTimeout(this.checkDestination,0),this.leaveUntouched=!1},onLoad:function(){this.$emit("loadEnd"),this.blocked=!1,this.iframe&&(this.iframe.contentWindow.onunload=this.onUnload),this.setTarget("_self"),this.processTag("a",this.appendLinkHref),this.processTag("form",this.appendFormAction),this.getClearSrc!==window.location.href&&this.pushState(),this.centerContent(),this.updateDimensions(),this.setupObserver()},pushState:function(){var t=this.getClearSrc();this.$emit("update:state",t)},updateDimensions:function(){var t=this,e=function(e){return t.getBody().map((function(t){return t.querySelectorAll("*")})).map((function(t){return(0,a.default)(t)})).map((function(t){return t.map((function(t){return t[e]}))})).map((function(t){return t.filter((function(t){return!!t}))})).map((function(t){return Math.max.apply(Math,(0,a.default)(t))})).orSome(0)};this.height=e("offsetHeight"),this.width=e("offsetWidth")},setupObserver:function(){var t=this.getBody().some();this.observer=new MutationObserver(this.updateDimensions),this.observer.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0});var e=t.querySelector("iframe");if(e){var n=window.document.querySelector(".route-container").offsetHeight;e.style.minHeight="".concat(n,"px")}}}};e.default=p},2727:function(t,e,n){"use strict";n.r(e);var r=n(2728),i=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e.default=i.a},2728:function(t,e,n){"use strict";var r=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(36)),a=r(n(37));n(55),n(24),n(12),n(15);n(28);var o,u,s=n(508),c=r(n(3175)),l=n(3744),f={props:{pluginDefinition:{type:Object,required:!0,default:function(){return{}}}},data:function(){return{pluginComponent:c.default,lang:""}},api:[{command:s.getPluginLanguages,bind:"languages"}],computed:{id:function(){return this.$route.params.id},level:function(){return this.$route.params.level},componentUrl:function(){if(this.pluginDefinition.type){if(/\/vue\/(user|reseller|admin).js/.test(this.pluginDefinition.componentUrl))return[{user:"/CMD_PLUGINS",reseller:"/CMD_PLUGINS_RESELLER",admin:"/CMD_PLUGINS_ADMIN"}[this.level],"".concat(this.pluginDefinition.dir).concat(this.pluginDefinition.componentUrl)].join("/")}return this.pluginDefinition.componentUrl||""}},watch:{componentUrl:{handler:"reload",immediate:!0},"$language.current":"loadLanguage"},methods:{reload:(u=(0,a.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.loadComponent)(this.componentUrl);case 2:return this.pluginComponent=t.sent,t.next=5,(0,s.getPluginLanguages)({plugin:this.id});case 5:this.loadLanguage(this.$language.current);case 6:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)}),loadLanguage:(o=(0,a.default)(i.default.mark((function t(e){var n;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.$api.languages.includes(e)){t.next=5;break}return t.next=3,(0,s.getPluginLanguage)({plugin:this.id,lang:e});case 3:n=t.sent,this.$store.commit("lang/INJECT_LANGUAGE",{lang:e,strings:n});case 5:this.lang=e;case 6:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})}};e.default=f},3145:function(t,e,n){var r=n(3742);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(4).default)("61e76a78",r,!0,{})},3175:function(t,e,n){"use strict";n.r(e);var r=n(0),i=Object(r.a)({},(function(t,e){var n=e._c;return n("app-page",[n("span",{attrs:{slot:"page:title"},slot:"page:title"},[e._v(e._s(e.props.name))]),e._v(" "),n("app-page-section",[n("ui-center",{attrs:{height:"10rem"}},[n("ui-loader-icon")],1)],1)],1)}),[],!0,null,null,null);e.default=i.exports},3739:function(t,e,n){"use strict";n.r(e);var r=n(4183),i=n(2723);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n(3741);var o=n(0),u=Object(o.a)(i.default,r.a,r.b,!1,null,null,null);e.default=u.exports},3740:function(t,e,n){"use strict";n.r(e);var r=n(4234),i=n(2725);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);var o=n(0),u=Object(o.a)(i.default,r.a,r.b,!1,null,null,null);e.default=u.exports},3741:function(t,e,n){"use strict";n(3145)},3742:function(t,e,n){},3743:function(t,e,n){"use strict";n.r(e);var r=n(4184),i=n(2727);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);var o=n(0),u=Object(o.a)(i.default,r.a,r.b,!1,null,null,null);e.default=u.exports},3744:function(t,e,n){"use strict";var r=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.loadComponent=void 0;var i,a=r(n(36)),o=r(n(19)),u=r(n(37)),s=r(n(505)),c=r(n(3897)),l=r(n(3898)),f=r(n(3899)),d=(i=(0,u.default)(a.default.mark((function t(e){var n,r,i;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.default.get(e);case 3:if(n=t.sent,r=n.data,!(i=new Function("return ".concat(r))()).__esModule){t.next=8;break}return t.abrupt("return","object"===(0,o.default)(i.default)&&"function"==typeof i.default.render?i.default:l.default);case 8:return t.abrupt("return",f.default);case 11:return t.prev=11,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",c.default);case 15:case"end":return t.stop()}}),t,null,[[0,11]])}))),function(t){return i.apply(this,arguments)});e.loadComponent=d},3745:function(t,e){},3897:function(t,e,n){"use strict";n.r(e);var r=n(0),i=Object(r.a)({},(function(t,e){var n=e._c;return n("app-page",[n("span",{attrs:{slot:"page:title"},domProps:{textContent:e._s(e.props.name)},slot:"page:title"}),e._v(" "),n("app-page-section",[n("translate",{staticClass:"txt:bold",attrs:{"translate-params":e.props}},[e._v("\n            Error loading %{ id } plugin.\n        ")])],1),e._v(" "),n("ui-button",e._g({attrs:{slot:"footer:buttons",theme:"safe",icon:"circles-loader",size:"big"},slot:"footer:buttons"},e.listeners),[n("translate",[e._v("Try Again")])],1)],1)}),[],!0,null,null,null);e.default=i.exports},3898:function(t,e,n){"use strict";n.r(e);var r=n(0),i=Object(r.a)({},(function(t,e){var n=e._c;return n("app-page",[n("span",{attrs:{slot:"page:title"},domProps:{textContent:e._s(e.props.name)},slot:"page:title"}),e._v(" "),n("app-page-section",[n("translate",{staticClass:"txt:bold",attrs:{"translate-params":e.props}},[e._v("\n            Error loading %{ id } plugin: loaded bundle does not export valid Vue component.\n        ")])],1)],1)}),[],!0,null,null,null);e.default=i.exports},3899:function(t,e,n){"use strict";n.r(e);var r=n(0),i=Object(r.a)({},(function(t,e){var n=e._c;return n("app-page",[n("span",{attrs:{slot:"page:title"},domProps:{textContent:e._s(e.props.name)},slot:"page:title"}),e._v(" "),n("app-page-section",[n("translate",{staticClass:"txt:bold",attrs:{"translate-params":e.props}},[e._v("\n            Error loading %{ id } plugin: loaded bundle is not ES6 Module.\n        ")])],1)],1)}),[],!0,null,null,null);e.default=i.exports},4052:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var r=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"plugin-host"},[e(this.host,{tag:"component",attrs:{"plugin-definition":this.pluginDefinition}})],1)},i=[]},4183:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{grow:!0},expression:"{ grow: true }"}],staticClass:"plugin-legacy-host",class:{maximized:t.maximized}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],attrs:{id:"plugin-host"}},[n("div",{attrs:{id:"plugin-host-header"}},[n("h1",{domProps:{textContent:t._s(t.name)}}),t._v(" "),n("ui-button",{attrs:{id:"maximizeToggle",size:"normal",theme:"safe",icon:t.maximized?"minimize":"maximize"},on:{click:function(e){t.maximized=!t.maximized}}},[t._v("\n                "+t._s(t.maximized?t.$gettext("Minimize"):t.$gettext("Maximize"))+"\n            ")])],1),t._v(" "),n("plugins-iframe",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],key:t.iframeKey,attrs:{src:t.path,domain:t.domainDependent},on:{loadEnd:function(e){t.loading=!1},"update:state":t.updateState}})],1),t._v(" "),t.loading?n("loading-component",{attrs:{name:t.name}}):t._e()],1)},i=[]},4184:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var r=function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e(this.pluginComponent,this._b({key:this.id+"-"+this.lang,tag:"component",on:{click:this.reload}},"component",this.pluginDefinition,!1))],1)},i=[]},4234:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"iframe-container"}},[n("iframe",t._b({directives:[{name:"flex-item",rawName:"v-flex-item",value:{grow:!0},expression:"{ grow: true }"}],ref:"iframe",style:{minHeight:t.height+"px",minWidth:"100%"},on:{load:t.onLoad}},"iframe",{src:t.iframeSrc,width:t.width?t.width+"px":"100%",frameborder:"0"},!1)),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.blocked?n("div",{staticClass:"iframe-overlay"}):t._e()])],1)},i=[]}}]);