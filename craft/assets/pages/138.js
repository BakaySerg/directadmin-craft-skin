(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{1878:function(t,e,n){"use strict";n.r(e);var a=n(4076),s=n(2850);for(var o in s)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return s[t]}))}(o);var r=n(0),l=n(3889),i=n.n(l),c=Object(r.a)(s.default,a.a,a.b,!1,null,null,null);"function"==typeof i.a&&i()(c),e.default=c.exports},2850:function(t,e,n){"use strict";n.r(e);var a=n(2851),s=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e.default=s.a},2851:function(t,e,n){"use strict";n(16),n(23),n(25),n(18),n(6);var a=n(1),s=n(19);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n(36));n(21),n(40),n(26),n(14),n(65),n(8),n(84),n(7),n(2058),n(34);var r=a(n(37)),l=a(n(1707)),i=n(1999),c=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==s(t)&&"function"!=typeof t)return{default:t};var n=d(e);if(n&&n.has(t))return n.get(t);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if("default"!==r&&Object.prototype.hasOwnProperty.call(t,r)){var l=o?Object.getOwnPropertyDescriptor(t,r):null;l&&(l.get||l.set)?Object.defineProperty(a,r,l):a[r]=t[r]}a.default=t,n&&n.set(t,a);return a}(n(9)),p=a(n(3888)),u=n(2055);function d(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(d=function(t){return t?n:e})(t)}var v,f,m,h={components:{InstallDialog:p.default},extends:l.default,preload:function(t){var e=t.id;return(0,i.getAppModify)({name:e})},api:i.getAppModify,props:{id:{type:String,required:!0}},data:function(){return{showPipInstall:!1}},created:(m=(0,r.default)(o.default.mark((function t(){var e;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("python"!==this.$api.type){t.next=7;break}return e="".concat(this.cwd,"/requirements.txt").replace(this.$state.app.tokens.HOME_DIR,""),t.t0=Boolean,t.next=5,(0,u.checkExists)({path:e});case 5:t.t1=t.sent,this.showPipInstall=(0,t.t0)(t.t1);case 7:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)}),methods:{installPackagesDialog:(f=(0,r.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==this.showPipInstall){t.next=2;break}return t.abrupt("return");case 2:this.$dialog("INSTALL_PACKAGES_DIALOG").open();case 3:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)}),installPackages:function(){(0,i.installPackages)({domain:this.$domain,dir:this.cwd})},modifyApp:(v=(0,r.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.modifyApp)({name:this.id,json:this.json});case 2:if(!(t.sent instanceof Error)){t.next=5;break}return t.abrupt("return");case 5:this.$router.back();case 6:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)}),loadData:function(){var t=this,e=this.$api.app;this.name=this.id,this.type=this.$api.type,this.$nextTick((function(){t.version=t.$api.version})),this.timeout=e.limits.timeout.toString(),this.requests=e.limits.requests.toString(),"number"==typeof e.processes?this.processes=e.processes.toString():this.processes=e.processes,this.environment=e.environment||{};var n=this[this.type];if(c.keys(n).forEach((function(a){t.$set(t[t.type],a,e[a]||n[a])})),"external"===this.type&&(this.external.script=n.arguments[5],this.external.arguments=n.arguments.slice(6)),"php"===this.type&&n.targets&&(this.hasTargets=Object.keys(n.targets).length>0),"python"===this.type){"string"==typeof this.python.path&&(this.python.path=[this.python.path]);var a=this.cwd.endsWith("/")?this.cwd:"".concat(this.cwd,"/");this.python.path=this.python.path.map((function(t){return t.replace(a,"")}))}}}};e.default=h},2852:function(t,e,n){"use strict";n.r(e);var a=n(2853),s=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e.default=s.a},2853:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{id:{type:String,default:"INSTALL_PACKAGES_DIALOG"},subject:{type:String,required:!1,default:"item"}}};e.default=a},3888:function(t,e,n){"use strict";n.r(e);var a=n(4210),s=n(2852);for(var o in s)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return s[t]}))}(o);var r=n(0),l=Object(r.a)(s.default,a.a,a.b,!1,null,null,null);e.default=l.exports},3889:function(t,e){},4076:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",{attrs:{id:"modify-application",actions:[{handler:t.installPackagesDialog,label:t.$gettext("Install Packages"),icon:"#plus-fill",visible:t.showPipInstall}]}},[t.showPipInstall?n("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:t.installPackagesDialog},slot:"header:buttons"},[n("translate",[t._v("Install Packages")])],1):t._e(),t._v(" "),n("app-page-section",[n("ui-tabs",{attrs:{tabs:[{id:"app",label:t.$gettext("Application")},{id:"config",label:t.$gettext("Configuration")},{id:"env",label:t.$gettext("Advanced")}]}},[n("app-page-section",{attrs:{slot:"tab:app"},slot:"tab:app"},[n("ui-form-element",{attrs:{group:"application-info",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Name\n                    ")]),t._v(" "),n("input-text",{attrs:{slot:"content",disabled:"",value:t.id},slot:"content"})],1),t._v(" "),n("ui-form-element",{attrs:{underline:t.hasVersions}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Type\n                    ")]),t._v(" "),n("input-select",{attrs:{slot:"content",options:t.types},slot:"content",model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),t._v(" "),t.hasVersions?n("ui-form-element",{key:"version",attrs:{underline:!1}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Version\n                    ")]),t._v(" "),n("input-select",{attrs:{slot:"content",options:t.versions},slot:"content",model:{value:t.version,callback:function(e){t.version=e},expression:"version"}})],1):t._e()],1),t._v(" "),n("app-page-section",{attrs:{slot:"tab:config"},slot:"tab:config"},[t.is.perl?[n("ui-form-element",{key:"perl-working_directory"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Working directory\n                        ")]),t._v(" "),n("prefixed-input",{attrs:{slot:"content",prefix:t.cwd},slot:"content",model:{value:t.perl.working_directory,callback:function(e){t.$set(t.perl,"working_directory",e)},expression:"perl.working_directory"}})],1),t._v(" "),n("ui-form-element",{key:"perl-script"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Script\n                        ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.perl.script,callback:function(e){t.$set(t.perl,"script",e)},expression:"perl.script"}})],1)]:t._e(),t._v(" "),t.is.external?[n("ui-form-element",{key:"external-working_directory"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Working directory\n                        ")]),t._v(" "),n("prefixed-input",{attrs:{slot:"content",prefix:t.cwd},slot:"content",model:{value:t.external.working_directory,callback:function(e){t.$set(t.external,"working_directory",e)},expression:"external.working_directory"}})],1),t._v(" "),n("ui-form-element",{key:"external-script",attrs:{group:"application-external",validators:{required:!0,validateExternalScript:t.validateExternalScript}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Script\n                        ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.external.script,callback:function(e){t.$set(t.external,"script",e)},expression:"external.script"}}),t._v(" "),n("translate",{attrs:{slot:"error:validateExternalScript","translate-params":{file:t.external.working_directory+"/"+t.external.script}},slot:"error:validateExternalScript"},[t._v("\n                            File %{file} does not exist\n                        ")])],1),t._v(" "),n("ui-form-element",[n("translate",{key:"external-arguments",attrs:{slot:"title"},slot:"title"},[t._v("\n                            Arguments\n                        ")]),t._v(" "),n("array-editor",{attrs:{slot:"content"},slot:"content",model:{value:t.external.arguments,callback:function(e){t.$set(t.external,"arguments",e)},expression:"external.arguments"}})],1)]:t._e(),t._v(" "),t.is.php?[n("root-editor",{attrs:{cwd:t.cwd,multiple:t.hasTargets},on:{"update:multiple":function(e){t.hasTargets=e}},model:{value:t.php,callback:function(e){t.php=e},expression:"php"}})]:t._e(),t._v(" "),t.is.python?[n("ui-form-element",{key:"python-path"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Path\n                        ")]),t._v(" "),n("array-editor",{attrs:{slot:"content",prefix:t.cwd,"append-slash":""},slot:"content",model:{value:t.python.path,callback:function(e){t.$set(t.python,"path",e)},expression:"python.path"}})],1),t._v(" "),n("ui-form-element",{key:"python-home"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Home\n                        ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.python.home,callback:function(e){t.$set(t.python,"home",e)},expression:"python.home"}})],1),t._v(" "),n("ui-form-element",{key:"python-module"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Module\n                        ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.python.module,callback:function(e){t.$set(t.python,"module",e)},expression:"python.module"}})],1),t._v(" "),n("ui-form-element",{key:"python-callable"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Callable\n                        ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.python.callable,callback:function(e){t.$set(t.python,"callable",e)},expression:"python.callable"}})],1)]:t._e(),t._v(" "),t.is.java?[n("ui-form-element",{key:"java-working_directory"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Working directory\n                        ")]),t._v(" "),n("prefixed-input",{attrs:{slot:"content",prefix:t.cwd},slot:"content",model:{value:t.java.working_directory,callback:function(e){t.$set(t.java,"working_directory",e)},expression:"java.working_directory"}})],1),t._v(" "),n("ui-form-element",{key:"java-webapp"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Webapp\n                        ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.java.webapp,callback:function(e){t.$set(t.java,"webapp",e)},expression:"java.webapp"}})],1)]:t._e(),t._v(" "),t.is.ruby?[n("ui-form-element",{key:"ruby-script"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Script\n                        ")]),t._v(" "),n("prefixed-input",{attrs:{slot:"content",prefix:t.cwd,"append-slash":!1},slot:"content",model:{value:t.ruby.script,callback:function(e){t.$set(t.ruby,"script",e)},expression:"ruby.script"}})],1)]:t._e()],2),t._v(" "),n("app-page-section",{attrs:{slot:"tab:env"},slot:"tab:env"},[n("ui-form-element",{key:"processes",attrs:{group:"application-common",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Processes\n                    ")]),t._v(" "),n("processes-editor",{attrs:{slot:"content"},slot:"content",model:{value:t.processes,callback:function(e){t.processes=e},expression:"processes"}})],1),t._v(" "),n("ui-form-element",{key:"timeout",attrs:{group:"application-common",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Timeout\n                    ")]),t._v(" "),n("input-text",{attrs:{slot:"content",number:""},slot:"content",model:{value:t.timeout,callback:function(e){t.timeout=e},expression:"timeout"}})],1),t._v(" "),n("ui-form-element",{key:"requests",attrs:{group:"application-common",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Requests\n                    ")]),t._v(" "),n("input-text",{attrs:{slot:"content",number:""},slot:"content",model:{value:t.requests,callback:function(e){t.requests=e},expression:"requests"}})],1),t._v(" "),t.is.php?[n("ui-form-element",{key:"php-options.user",attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Options\n                        ")]),t._v(" "),n("obj-editor",{attrs:{slot:"content"},slot:"content",model:{value:t.php.options.user,callback:function(e){t.$set(t.php.options,"user",e)},expression:"php.options.user"}})],1)]:t._e(),t._v(" "),t.is.java?[n("ui-form-element",{key:"java-classpath"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Class Path\n                        ")]),t._v(" "),n("array-editor",{attrs:{slot:"content"},slot:"content",model:{value:t.java.classpath,callback:function(e){t.$set(t.java,"classpath",e)},expression:"java.classpath"}})],1),t._v(" "),n("ui-form-element",{key:"java-options"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Options\n                        ")]),t._v(" "),n("array-editor",{attrs:{slot:"content"},slot:"content",model:{value:t.java.options,callback:function(e){t.$set(t.java,"options",e)},expression:"java.options"}})],1)]:t._e(),t._v(" "),n("ui-form-element",{key:"environment",attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Environment\n                    ")]),t._v(" "),n("obj-editor",{attrs:{slot:"content"},slot:"content",model:{value:t.environment,callback:function(e){t.environment=e},expression:"environment"}})],1)],2)],1)],1),t._v(" "),n("ui-button",{attrs:{slot:"footer:buttons",theme:"safe"},on:{click:t.modifyApp},slot:"footer:buttons"},[n("translate",[t._v("Modify")])],1),t._v(" "),n("install-dialog",{attrs:{id:"INSTALL_PACKAGES_DIALOG"},on:{"click:confirm":t.installPackages}})],1)},s=[]},4210:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-dialog",t._g(t._b({attrs:{theme:"safe"}},"ui-dialog",{id:t.id},!1),t.$listeners),[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n        Install Packages\n    ")]),t._v(" "),n("template",{slot:"content"},[n("translate",{attrs:{tag:"div"}},[t._v("\n            Are you sure you want to install packages from requirements.txt?\n        ")]),t._v(" "),t._t("default")],2),t._v(" "),n("template",{slot:"buttons"},[n("ui-button",{attrs:{id:"confirm",theme:"primary"}},[n("translate",[t._v("Install")])],1)],1)],2)},s=[]}}]);