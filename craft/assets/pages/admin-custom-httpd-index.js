(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[922],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/custom-httpd/index.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.array.iterator.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.string.iterator.js"),o("./node_modules/core-js/modules/es.weak-map.js"),o("./node_modules/core-js/modules/web.dom-collections.iterator.js"),o("./node_modules/core-js/modules/es.object.define-property.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var s=o("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,o("./node_modules/core-js/modules/es.string.starts-with.js");var n=o("./src/js/api/commands/admin/httpd.js"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var o=u(t);if(o&&o.has(e))return o.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var a=r?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(n,l,a):n[l]=e[l]}n.default=e,o&&o.set(e,n);return n}(o("./node_modules/ramda/src/index.js"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(u=function(e){return e?o:t})(e)}var l={preload:n.getDomains,api:[{command:n.getDomains,bind:"domains"}],commands:{getDomains:n.getDomains},data:function(){return{filter:{column:"domain",type:"startswith",value:""}}},computed:{file:function(){return this.$api.domains.file}},methods:{buildRewriteConfs:function(){(0,n.rewriteConfs)()},getPhpFpmFiles:function(e){return r.pickBy((function(e,t){return t.startsWith("php-fpm")}),e)}}};t.Z=l},"./src/js/api/commands/admin/httpd.js":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.keys.js"),o("./node_modules/core-js/modules/es.symbol.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),o("./node_modules/core-js/modules/web.dom-collections.for-each.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),o("./node_modules/core-js/modules/es.object.define-properties.js"),o("./node_modules/core-js/modules/es.object.define-property.js");var s=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.savePhpFpmTokens=t.saveDomainCustomization=t.rewriteConfs=t.getPhpFpmTokens=t.getPhpFpmConfiguration=t.getDomains=t.getDomainCustomization=t.getDomainConfig=t.getDiff=void 0;var n=s(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),r=s(o("./node_modules/@babel/runtime/helpers/slicedToArray.js"));o("./node_modules/core-js/modules/es.array.find.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.array.filter.js"),o("./node_modules/core-js/modules/es.array.includes.js"),o("./node_modules/core-js/modules/es.string.includes.js"),o("./node_modules/core-js/modules/es.promise.js"),o("./node_modules/core-js/modules/es.regexp.exec.js"),o("./node_modules/core-js/modules/es.string.match.js"),o("./node_modules/core-js/modules/es.string.replace.js");var u=s(o("./src/js/api/command/index.js")),l=o("./src/js/modules/utils/index.js");function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,s)}return o}function d(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){(0,n.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var i=l.fp.flow(l.fp.convert.toAppString,l.fp.convert.toLines),c=l.fp.flow((function(e){return e||""}),l.fp.convert.toAppString,l.fp.convert.toAppText),p="/CMD_CUSTOM_HTTPD",m=u.default.get({id:"CUSTOM_HTTPD_DOMAINS",url:p,pagination:!0,after:function(){return l.fp.flow(l.fp.mapProp("domains",l.fp.toTable()),l.fp.mapProp("file",l.fp.feedWith(1,(function(e){return["nginx","nginx_proxy","openlitespeed","httpd"].find((function(t){return"1"===e["have_".concat(t)]}))||"httpd"}))))}});t.getDomains=m;var f=u.default.post({url:p,params:{action:"all",rewrite_confs:!0}});t.rewriteConfs=f;var _=u.default.get({url:p,id:"CH_DOMAIN_CONFIG",schema:{domain:u.default.REQUIRED_STRING,proxy:u.default.OPTIONAL_BOOL},after:function(){return l.fp.flow((function(e){return{tokens:e.AVAILABLE_TOKENS,error:e.CONFIG_ERROR,test:e.CONFIG_TEST,data:e.HTTPD,templates:e}}),l.fp.mapProps({error:l.fp.isEqual("1"),nginx:l.fp.isEqual("1"),data:i,test:c,templates:l.fp.flow(l.fp.filter((function(e,t){return t.includes("VH")})),l.fp.filter(l.fp.getProp("data")),l.fp.toArray,l.fp.mapArrayProps({data:i,custom:l.fp.isEqual("1")})),tokens:l.fp.flow(l.fp.mapValues((function(e,t){return{token:t,value:e}})),l.fp.toArray)}))}});t.getDomainConfig=_;var j=u.default.get({url:p,id:"CH_DOMAIN_CUSTOMIZATION_VALUES",schema:{domain:u.default.REQUIRED_STRING,proxy:u.default.OPTIONAL_BOOL},after:function(){return l.fp.flow(l.fp.project({config:"CONFIG",custom1:"CUSTOM1",custom2:"CUSTOM2",custom3:"CUSTOM3",custom4:"CUSTOM4",custom5:"CUSTOM5",custom6:"CUSTOM6",custom7:"CUSTOM7",custom8:"CUSTOM8",tokens:"AVAILABLE_TOKENS",appendix:"VH1.custom_global_pre_post",tokensCount:"NUM_CUSTOM_TOKENS"}),l.fp.mapProps({config:c,custom1:c,custom2:c,custom3:c,custom4:c,custom5:c,custom6:c,custom7:c,custom8:c,nginx:l.fp.convert.toAppBoolean,tokensCount:l.fp.convert.toAppNumber,tokens:l.fp.flow(l.fp.mapValues((function(e,t){return{token:t,value:e}})),l.fp.toArray),appendix:l.fp.flow(l.fp.setDefault({}),l.fp.filter((function(e,t){return t.includes("CUSTOM")})),l.fp.mapValues(c),l.fp.transformObject((function(e,t){var o=t.match(/^.*(CUSTOM.*)$/),s=(0,r.default)(o,2)[1];return(0,n.default)({},s,{data:e,name:t})})))}))}});t.getDomainCustomization=j;var v=u.default.post({url:p,schema:{proxy:u.default.OPTIONAL_STRING,domain:u.default.REQUIRED_STRING,config:u.default.OPTIONAL_STRING,custom1:u.default.OPTIONAL_STRING,custom2:u.default.OPTIONAL_STRING,custom3:u.default.OPTIONAL_STRING,custom4:u.default.OPTIONAL_STRING,custom5:u.default.OPTIONAL_STRING,custom6:u.default.OPTIONAL_STRING,custom7:u.default.OPTIONAL_STRING,custom8:u.default.OPTIONAL_STRING}});t.saveDomainCustomization=v;var g=u.default.get({url:p,id:"CH_PHP_FPM_CONFIGURATION",schema:{user:u.default.REQUIRED_STRING,"php-fpm":u.default.REQUIRED_STRING},after:function(){return l.fp.flow(l.fp.project({error:"CONFIG_ERROR",test:"CONFIG_TEST",custom1:"CUSTOM1",custom2:"CUSTOM2",global_custom1:"GLOBAL_CUSTOM1",global_custom2:"GLOBAL_CUSTOM2","config.data":"FPM_CONFIG","config.file":"FPM_CONFIG_FILE","config.version":"FPM_VER","template.custom":"PHP_FPM_IS_CUSTOM_TEMPLATE","template.data":"PHP_FPM_TEMPLATE","template.name":"PHP_FPM_TEMPLATE_NAME","template.short":"PHP_FPM_TEMPLATE_NAME_SHORT"}),l.fp.mapProps({error:l.fp.isEqual("1"),test:c,custom1:c,custom2:c,config:l.fp.mapProp("data",i),template:l.fp.mapProps({custom:l.fp.isEqual("1"),data:i})}))}});t.getPhpFpmConfiguration=g;var O=u.default.get({id:"CH_PHP_FPM_TOKENS",url:p,schema:{user:u.default.REQUIRED_STRING,"php-fpm":u.default.REQUIRED_STRING},after:function(){return l.fp.flow(l.fp.getProp("AVAILABLE_TOKENS"),l.fp.mapValues((function(e,t){return{token:t,value:e}})),l.fp.toArray)}});t.getPhpFpmTokens=O;var b=u.default.post({url:p,schema:{user:u.default.REQUIRED_STRING,"php-fpm":u.default.REQUIRED_STRING,custom1:u.default.OPTIONAL_STRING,custom2:u.default.OPTIONAL_STRING,all_php_versions:u.default.OPTIONAL_BOOL}});t.savePhpFpmTokens=b;var T=u.default.get({id:"CH_DIFF",url:"/CMD_TEMPLATE_DIFF",schema:{name:u.default.REQUIRED_STRING},after:function(){return l.fp.flow(l.fp.deleteProp("lines"),l.fp.mapValues((function(e,t){return d(d({},e),{},{number:t})})),l.fp.toArray,l.fp.mapArray(l.fp.moveProp("line","content")),l.fp.mapArrayProps({number:l.fp.convert.toAppNumber,content:function(e){return e?e.replace(/\t/g,"    "):""}}),l.fp.sortBy("number"))}});t.getDiff=T},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/custom-httpd/index.vue?vue&type=style&index=0&id=7947a732&lang=scss&scoped=true&":function(){},"./src/js/pages/admin/custom-httpd/index.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return s.X},default:function(){return d}});var s=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/custom-httpd/index.vue?vue&type=script&lang=js&"),n=s.Z,r=(o("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/custom-httpd/index.vue?vue&type=style&index=0&id=7947a732&lang=scss&scoped=true&"),o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),u=o("./src/js/pages/admin/custom-httpd/index.vue?vue&type=custom&index=0&blockType=route"),l=o.n(u),a=(0,r.Z)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("app-page",{attrs:{actions:[{handler:e.buildRewriteConfs,label:"./build rewrite_confs",icon:"#settings"}]}},[o("app-page-section",[o("ui-form-element",{attrs:{underline:!1}},[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Show Domains that\n            ")]),e._v(" "),o("ui-input-group",{attrs:{slot:"content"},slot:"content"},[o("input-select",{staticClass:"search-type-select",attrs:{slot:"additions:left",options:{startswith:e.$gettext("Starts With"),contains:e.$gettext("Contains"),equals:e.$gettext("Equals")}},slot:"additions:left",model:{value:e.filter.type,callback:function(t){e.$set(e.filter,"type",t)},expression:"filter.type"}}),e._v(" "),o("input-text",{attrs:{slot:"input"},slot:"input",model:{value:e.filter.value,callback:function(t){e.$set(e.filter,"value",t)},expression:"filter.value"}}),e._v(" "),o("ui-button",{attrs:{slot:"additions:right",theme:"light",size:"normal",icon:"close",title:e.$gettext("Clear Search")},on:{click:function(t){e.filter.value=""}},slot:"additions:right"})],1)],1)],1),e._v(" "),o("app-page-section",[o("ui-api-table",e._b({attrs:{"disable-select":""},scopedSlots:e._u([{key:"col:info",fn:function(t){var o=t.info;return[e._v("\n                "+e._s(o.user)+"\n            ")]}},{key:"col:configuration",fn:function(t){var s=t.domain,n=t.info;return[o("div",{directives:[{name:"gutter",rawName:"v-gutter",value:[0,1],expression:"[0, 1]"}]},["nginx_proxy"===e.file?[o("ui-link",{attrs:{name:"admin/custom-httpd/view",params:{dom:s,file:"httpd"}}},[e._v("\n                            httpd.conf\n                        ")]),e._v(" "),o("ui-link",{attrs:{name:"admin/custom-httpd/view",params:{dom:s,file:"nginx_proxy"}}},[e._v("\n                            nginx.conf proxy\n                        ")])]:o("ui-link",{attrs:{name:"admin/custom-httpd/view",params:{dom:s,file:e.file}}},[e._v("\n                        "+e._s(e.file)+".conf\n                    ")]),e._v(" "),e._l(e.getPhpFpmFiles(n),(function(t){return o("ui-link",{key:t,attrs:{name:"admin/custom-httpd/php-fpm",params:{user:n.user,version:t}}},[e._v("\n                        php-fpm.conf ("+e._s(t)+")\n                    ")])}))],2)]}}])},"ui-api-table",{command:e.$commands.getDomains,property:"domains",columns:{domain:{label:e.$gettext("Domain"),filter:"p6eUnicode",grow:!0,editable:!1},info:e.$gettext("User"),configuration:{label:e.$gettext("Conf. Files")}},filters:[e.filter],updateOn:["CH_REWRITE_CONFS"],verticalLayout:e.$_Client.isPhone},!1))],1),e._v(" "),o("ui-button",{attrs:{slot:"footer:buttons",size:"big",theme:"safe"},on:{click:e.buildRewriteConfs},slot:"footer:buttons"},[o("translate",[e._v("./build rewrite_confs")])],1)],1)}),[],!1,null,"7947a732",null);"function"==typeof l()&&l()(a);var d=a.exports},"./src/js/pages/admin/custom-httpd/index.vue?vue&type=custom&index=0&blockType=route":function(){},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/custom-httpd/index.vue?vue&type=style&index=0&id=7947a732&lang=scss&scoped=true&":function(e,t,o){var s=o("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/custom-httpd/index.vue?vue&type=style&index=0&id=7947a732&lang=scss&scoped=true&");s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);(0,o("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("52cea352",s,!0,{})}}]);