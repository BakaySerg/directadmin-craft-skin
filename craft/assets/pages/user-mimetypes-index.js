(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[3256],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/mimetypes/index.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=n(s("./node_modules/@babel/runtime/helpers/slicedToArray.js"));s("./node_modules/core-js/modules/es.array.reduce.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.function.name.js");var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var s=l(t);if(s&&s.has(e))return s.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var r=i?Object.getOwnPropertyDescriptor(e,a):null;r&&(r.get||r.set)?Object.defineProperty(n,a,r):n[a]=e[a]}n.default=e,s&&s.set(e,n);return n}(s("./src/js/api/commands/user/mimetypes.js"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(l=function(e){return e?s:t})(e)}var r={preload:a.getMimetypes,api:[{command:a.getMimetypes,bind:"mimetypes"}],commands:a,data:function(){return{select:[],add:{name:"",extension:""},del:{extension:""}}},computed:{checkedExtensions:function(){var e=this;return this.$api.mimetypes.rows.filter((function(t){var s=t.mimetype;return e.select.includes(s)})).map((function(e){return e.extensions.split(" ")})).reduce((function(e,t){return e.concat(t)}),[])}},watch:{$domain:function(){this.reloadTable()}},methods:{reloadTable:function(){this.$reloadApiTable(),this.$reset()},addMimeType:function(){a.createMimetype({name:this.add.name,extension:this.add.extension}).then(this.reloadTable)},deleteMimeTypes:function(){a.deleteMimetypes({select:this.select}).then(this.reloadTable)},deleteExtension:function(){a.deleteMimetypeExtension({select:this.select,extension:this.del.extension}).then(this.reloadTable)},initDel:function(){var e=(0,i.default)(this.checkedExtensions,1);this.del.extension=e[0]}}};t.Z=r},"./src/js/api/commands/user/mimetypes.js":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.getSystemMimetypes=t.getMimetypes=t.deleteMimetypes=t.deleteMimetypeExtension=t.createMimetype=void 0,s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.promise.js");var o=n(s("./src/js/api/command/index.js")),i=o.default.get({id:"MIMETYPES",url:"/CMD_MIME_TYPES",domain:!0,pagination:!0,after:function(e){return e.flow((function(e){return{rows:e}}),e.processTableInfo("rows"),e.mapProps({rows:e.toArray}))}});t.getMimetypes=i;var a=i.extend({id:"SYSTEM_MIMETYPES",params:{action:"system"}});t.getSystemMimetypes=a;var l=o.default.post({url:"/CMD_MIME_TYPES",params:{action:"add"},domain:!0,schema:{name:o.default.REQUIRED_STRING,extension:o.default.REQUIRED_STRING}});t.createMimetype=l;var r=o.default.select({url:"/CMD_MIME_TYPES",params:{action:"multiple",button:"type"},domain:!0});t.deleteMimetypes=r;var d=r.extend({params:{button:"extension"},schema:{extension:o.default.REQUIRED_STRING}});t.deleteMimetypeExtension=d},"./src/js/pages/user/mimetypes/index.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return n.X},default:function(){return d}});var n=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/mimetypes/index.vue?vue&type=script&lang=js&"),o=n.Z,i=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),a=s("./src/js/pages/user/mimetypes/index.vue?vue&type=custom&index=0&blockType=route"),l=s.n(a),r=(0,i.Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page",[s("template",{slot:"details"},[s("ui-infobar-item",{attrs:{title:e.$gettext("Add Mime Type")}},[s("ui-form-element",{attrs:{group:"addMimeType",validators:{required:!0},vertical:""}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    Name\n                ")]),e._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.add.name,callback:function(t){e.$set(e.add,"name",t)},expression:"add.name"}})],1),e._v(" "),s("ui-form-element",{attrs:{group:"addMimeType",validators:{required:!0},vertical:""}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    Extension\n                ")]),e._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.add.extension,callback:function(t){e.$set(e.add,"extension",t)},expression:"add.extension"}})],1),e._v(" "),s("ui-button",{directives:[{name:"margin",rawName:"v-margin:top",value:2,expression:"2",arg:"top"}],staticClass:"width:100%",attrs:{theme:"safe","validate-group":"addMimeType"},on:{click:e.addMimeType}},[s("translate",[e._v("Add")])],1)],1)],1),e._v(" "),s("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:function(t){e.$dialog("ADD_MIMETYPE_DIALOG").open()}},slot:"header:buttons"},[s("translate",[e._v("Add Mime Type")])],1),e._v(" "),s("app-page-section",[s("ui-api-table",e._b({ref:"table",attrs:{"equal-width-layout":""},on:{"action:deleteMimetype":function(t){e.$dialog("DELETE_MIMETYPES_DIALOG").open()},"action:deleteExtension":function(t){e.$dialog("DELETE_EXTENSION_DIALOG").open()}},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getMimetypes,rowID:"mimetype",columns:{mimetype:e.$gettext("Mime Type"),extensions:e.$gettext("Extensions")},actions:{deleteMimetype:e.$gettext("Delete Mime Type"),deleteExtension:e.$gettext("Delete Extension")}},!1))],1),e._v(" "),s("ui-link",{attrs:{slot:"bottom:links",name:"user/mimetypes/system"},slot:"bottom:links"},[s("translate",[e._v("System Mime Types")])],1),e._v(" "),s("ui-dialog",{attrs:{id:"ADD_MIMETYPE_DIALOG",theme:"safe"}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            Add New Mime Type\n        ")]),e._v(" "),s("template",{slot:"content"},[s("ui-form-element",{attrs:{group:"addMimeType",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    Name\n                ")]),e._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.add.name,callback:function(t){e.$set(e.add,"name",t)},expression:"add.name"}})],1),e._v(" "),s("ui-form-element",{attrs:{group:"addMimeType",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    Extension\n                ")]),e._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.add.extension,callback:function(t){e.$set(e.add,"extension",t)},expression:"add.extension"}})],1)],1),e._v(" "),s("ui-button",{attrs:{slot:"buttons",theme:"safe","validate-group":"addMimeType"},on:{click:e.addMimeType},slot:"buttons"},[s("translate",[e._v("Add")])],1)],2),e._v(" "),s("ui-dialog-delete-items",{attrs:{id:"DELETE_MIMETYPES_DIALOG",subject:e.$ngettext("Mime Type","Mime Types",e.select.length)},on:{"click:confirm":e.deleteMimeTypes}}),e._v(" "),s("ui-dialog",{attrs:{id:"DELETE_EXTENSION_DIALOG",theme:"danger"},on:{"dialog:open":e.initDel}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            Delete Extension\n        ")]),e._v(" "),s("ui-form-element",{attrs:{slot:"content"},slot:"content"},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Extension:\n            ")]),e._v(" "),s("input-select",{attrs:{slot:"content",options:e.checkedExtensions},slot:"content",model:{value:e.del.extension,callback:function(t){e.$set(e.del,"extension",t)},expression:"del.extension"}})],1),e._v(" "),s("ui-button",{attrs:{slot:"buttons",theme:"danger"},on:{click:e.deleteExtension},slot:"buttons"},[s("translate",[e._v("Delete")])],1)],1)],2)}),[],!1,null,null,null);"function"==typeof l()&&l()(r);var d=r.exports},"./src/js/pages/user/mimetypes/index.vue?vue&type=custom&index=0&blockType=route":function(){}}]);