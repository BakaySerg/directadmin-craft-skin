(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{1833:function(t,e,n){"use strict";n.r(e);var r=n(4031),o=n(2654);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n(3675);var i=n(0),s=n(3677),u=n.n(s),c=Object(i.a)(o.default,r.a,r.b,!1,null,"02e0d9da",null);"function"==typeof u.a&&u()(c),e.default=c.exports},1886:function(t,e,n){"use strict";n.r(e),n.d(e,"preload",(function(){return E})),n.d(e,"GET",(function(){return w})),n.d(e,"POST",(function(){return T})),n.d(e,"PUT",(function(){return D})),n.d(e,"PATCH",(function(){return S})),n.d(e,"DELETE",(function(){return x})),n.d(e,"$gettext",(function(){return P}));var r=n(30),o=n.n(r),a=n(28),i=n(9),s=n(1893),u=n(1894),c=n(13),l=new o.a,d={401:"UNAUTHORIZED",404:"ENDPOINT_NOT_FOUND",405:"METHOD_NOT_ALLOWED"},f={BAD_REQUEST:l.$gettext("Bad Request: %{ message }"),UNAUTHORIZED:l.$gettext("Unauthorized"),ACCESS_DENIED:l.$gettext("Access Denied"),INTERNAL_ERROR:l.$gettext("Server Error: %{ message }"),METHOD_NOT_ALLOWED:l.$gettext("Method Not Allowed"),ENDPOINT_NOT_FOUND:l.$gettext("Endpoint Not Found")},p=function(t,e,n){void 0===n&&(n={});var r=l.$gettextInterpolate(e,n||{});return{status:t,message:r,type:n.type,data:i.omit(["type"],n),notify:function(){return a.Store.dispatch("notifications/NOTIFY",{theme:"danger",title:l.$gettext("Error"),content:r,route:a.Store.state.app.route.path||"/",time:new Date})}}},m=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},v=function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},g={data:{},statusCodes:{},errorMessages:{}},h=function(t,e,n){void 0===n&&(n={});var r=function(t,e){return(t+"_"+e.slice(5).replace(/\//,"_").replace(/\:/,"")).toUpperCase()}(t,e);n=i.mergeDeepRight(g,n);var o=Object(u.registerEndpoint)(r,n.data);return{endpoint:o,request:function(i){return m(void 0,void 0,void 0,(function(){var u,m,g;return v(this,(function(v){switch(v.label){case 0:return a.Store&&a.Store.state.commands.blockingRequest?[4,a.Store.state.commands.blockingRequest]:[3,2];case 1:v.sent(),v.label=2;case 2:o.params=i||{},o.state={isLoading:!0},v.label=3;case 3:return v.trys.push([3,5,,6]),[4,Object(s.request)({endpointID:r,url:e,method:t},o.params)];case 4:return u=v.sent(),"get"===t&&(o.data=u.data),o.state={isOk:!0,isDone:!0,isLoading:!1,error:null},[2,{state:"success",data:u.data,error:null}];case 5:return m=v.sent(),401===(g=function(t,e,n){var r;void 0===e&&(e={}),void 0===n&&(n={});var o=Object.assign(e,d),a=Object.assign(n,f);if(t.response){if(t.response.data&&t.response.data.type)if(void 0!==a[(i=t.response.data).type])return p(t.response.status,a[i.type],i);if(o[t.response.status]){var i={type:o[t.response.status]};t.response.data=i;var s=o[t.response.status];if(s&&a[s])return p(t.response.status,a[s],{type:s})}}else if(t.request)return c.emitter.emit("request:networkerror"),p(-1,l.$gettext("Network Error: Server is unreachable"),{type:"NETWORK_UNREACHABLE"});return p((null===(r=null==t?void 0:t.response)||void 0===r?void 0:r.status)||-1,l.$gettext("Unknown Error"),{type:"UNKNOWN_ERROR"})}(m,n.statusCodes,n.errorMessages)).status&&window.location.reload(),o.state={isOk:!1,isDone:!0,isLoading:!1,error:g},[2,{state:"error",error:g,data:null}];case 6:return[2]}}))}))}}},b=function(t,e,n){void 0===n&&(n={});var r=h(t,e,n),o=r.endpoint,a=r.request;return Object.freeze({get params(){return o.params},get state(){return o.state},request:a})},_=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},y=function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},O=function(t,e){return t.notify(),e(!1)},E=function(t,e){return void 0===e&&(e=O),function(n,r,o){return _(void 0,void 0,void 0,(function(){var a,i,s;return y(this,(function(u){switch(u.label){case 0:return[4,Promise.all(t.map((function(t){return t(n,r)})))];case 1:return a=u.sent(),void 0!==(i=a.find((function(t){return"error"===t.state})))?(s=i.error,[2,e(s,o)]):(o(),[2])}}))}))}},w=function(t,e){return function(t,e,n){void 0===n&&(n={});var r=h(t,e,n),o=r.endpoint,a=r.request;return Object.freeze({get data(){return o.data},set data(t){o.data=t},get params(){return o.params},get state(){return o.state},request:a,bindData:function(t){return function(){return t?t(o.data):o.data}}})}("get",t,e)},T=function(t,e){return b("post",t,e)},D=function(t,e){return b("put",t,e)},S=function(t,e){return b("patch",t,e)},x=function(t,e){return b("delete",t,e)},P=(new o.a).$gettext},1893:function(t,e,n){"use strict";n(16),n(14),n(23),n(25),n(18),n(6);var r=n(1),o=n(19);Object.defineProperty(e,"__esModule",{value:!0}),e.request=void 0;var a=r(n(36)),i=r(n(37));n(12),n(15),n(21),n(40),n(84);var s=r(n(505)),u=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!=typeof t)return{default:t};var n=d(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var s=a?Object.getOwnPropertyDescriptor(t,i):null;s&&(s.get||s.set)?Object.defineProperty(r,i,s):r[i]=t[i]}r.default=t,n&&n.set(t,r);return r}(n(9)),c=n(31),l=n(28);function d(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(d=function(t){return t?n:e})(t)}var f=s.default.create({baseURL:"/api"});f.interceptors.request.use(u.mergeDeepRight({timeout:0,headers:{Accept:"application/json","Content-Type":"application/json",Pragma:"no-cache"}}));var p,m=function(t,e){if(t.includes(":")){var n=[];return{url:t.replace(/:[a-z]*/g,(function(t){if(":domain"===t&&!e.domain)return l.Store.state.app.domain;t=t.slice(1);var r=e[t];if(void 0===r)throw new Error("EndpointParamError: ".concat(t," is not defined"));return n.push(t),r})),urlParams:n}}return{url:t,urlParams:[]}},v=(p=(0,i.default)(a.default.mark((function t(e,n){var r,o,i,s,l,d,p;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof e.url){t.next=2;break}throw new Error("Unsupported URL format");case 2:return r=m(e.url,n),o=r.url,i=r.urlParams,s={endpointID:e.endpointID,url:o,method:e.method},l=u.omit(i,n),!1===u.isEmpty(l)&&(d="get"===e.method?"params":"data",s[d]=l),t.prev=6,t.next=9,f.request(s);case 9:return t.abrupt("return",t.sent);case 12:throw t.prev=12,t.t0=t.catch(6),c.ENV.DEV&&(console.group(),console.dir(s),p=s.params||s.data,console.table({"Endpoint ID":s.endpointID,Url:s.url,Method:s.method,"Request Data":JSON.stringify(p),"Response Status Code":t.t0.response.status,"Response Data":JSON.stringify(t.t0.response.data)}),console.groupEnd()),t.t0;case 16:case"end":return t.stop()}}),t,null,[[6,12]])}))),function(t,e){return p.apply(this,arguments)});e.request=v},1894:function(t,e,n){"use strict";n(16),n(14),n(23),n(25),n(18),n(6);var r=n(19);Object.defineProperty(e,"__esModule",{value:!0}),e.registerEndpoint=void 0,n(49);var o=n(28),a=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=i(e);if(n&&n.has(t))return n.get(t);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var u=a?Object.getOwnPropertyDescriptor(t,s):null;u&&(u.get||u.set)?Object.defineProperty(o,s,u):o[s]=t[s]}o.default=t,n&&n.set(t,o);return o}(n(9));function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(i=function(t){return t?n:e})(t)}e.registerEndpoint=function(t,e){return o.Store.commit("endpoints/REGISTER_ENDPOINT",{id:t,data:e}),{get data(){return a.clone(o.Store.state.endpoints[t].data)},set data(e){o.Store.commit("endpoints/SET_DATA",{id:t,data:e})},get state(){return o.Store.state.endpoints[t].state},set state(e){o.Store.commit("endpoints/SET_STATE",{id:t,state:Object.assign({},{isLoading:!1,isOk:!1,isError:!1,error:null},e)})},get params(){return a.clone(o.Store.state.endpoints[t].params)},set params(e){o.Store.commit("endpoints/SET_PARAMS",{id:t,params:e})}}}},1943:function(t,e,n){"use strict";n.r(e),n.d(e,"postDeploy",(function(){return o})),n.d(e,"getGit",(function(){return a})),n.d(e,"postInit",(function(){return i})),n.d(e,"postFetch",(function(){return s})),n.d(e,"postWebhook",(function(){return u})),n.d(e,"deleteRepo",(function(){return c})),n.d(e,"getInfo",(function(){return l})),n.d(e,"getLogs",(function(){return d})),n.d(e,"putModify",(function(){return f})),n.d(e,"getCommit",(function(){return p})),n.d(e,"getDefaultBranch",(function(){return m}));var r=n(1886),o=Object(r.POST)("/git/uuid/:uuid/deploy",{statusCodes:{409:"GIT_DEPLOY_BRANCH_NOT_SET",410:"GIT_DEPLOY_DIR_NOT_SET"},errorMessages:{GIT_DEPLOY_BRANCH_NOT_SET:Object(r.$gettext)("Git deploy branch is not set"),GIT_DEPLOY_DIR_NOT_SET:Object(r.$gettext)("Git deploy directory is not set")}}),a=Object(r.GET)("/git/domain/:domain"),i=Object(r.POST)("/git/domain/:domain",{statusCodes:{409:"GIT_DIRECTORY_EXISTS"},errorMessages:{GIT_DIRECTORY_EXISTS:Object(r.$gettext)("Git directory exists %{ directory }")}}),s=Object(r.POST)("/git/uuid/:uuid/fetch"),u=Object(r.POST)("/git/uuid/:uuid/webhook"),c=Object(r.DELETE)("/git/uuid/:uuid"),l=Object(r.GET)("/git/uuid/:uuid"),d=Object(r.GET)("/git/uuid/:uuid/branch/:branch"),f=Object(r.PUT)("/git/uuid/:uuid"),p=Object(r.GET)("/git/uuid/:uuid/commit/:commit"),m=function(t){return 0===t.length?"":["main","master"].find((function(e){return t.includes(e)}))||t[0]}},2654:function(t,e,n){"use strict";n.r(e);var r=n(2655),o=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);e.default=o.a},2655:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n(27),n(8);var r=n(1943),o={props:{uuid:{type:String,required:!0},commit:{type:String,required:!0}},computed:{commitInfo:r.getCommit.bindData(),filesChanged:function(){return this.commitInfo.diff.length},stats:function(){return this.commitInfo.diff.reduce((function(t,e){return e.diffs.forEach((function(e){return t[e.type]++})),t}),{plus:0,minus:0})}},mounted:function(){r.getCommit.request({uuid:this.uuid,commit:this.commit})},methods:{back:function(){this.$router.go(-1)}}};e.default=o},3132:function(t,e,n){var r=n(3676);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,n(4).default)("034750c2",r,!0,{})},3675:function(t,e,n){"use strict";n(3132)},3676:function(t,e,n){},3677:function(t,e){},4031:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",{attrs:{id:"template-diff"}},[n("app-page-section",[n("ui-button",{attrs:{slot:"footer:buttons",theme:"primary"},on:{click:function(e){return e.preventDefault(),t.back.apply(null,arguments)}},slot:"footer:buttons"},[n("translate",[t._v("Go back to Log view")])],1)],1),t._v(" "),n("app-page-section",[n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Time\n            ")]),t._v(" "),n("div",{staticClass:"element-text",attrs:{slot:"content"},slot:"content"},[t._v("\n                "+t._s(t._f("date")(new Date(t.commitInfo.commit.time)))+"\n            ")])],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Commit\n            ")]),t._v(" "),n("div",{staticClass:"element-text",attrs:{slot:"content"},slot:"content"},[t._v("\n                "+t._s(t.commitInfo.commit.hash)+"\n            ")])],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Message\n            ")]),t._v(" "),n("pre",{staticClass:"element-text comment",attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.commitInfo.commit.message))])],1),t._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Author\n            ")]),t._v(" "),n("div",{staticClass:"element-text",attrs:{slot:"content"},slot:"content"},[t._v("\n                "+t._s(t.commitInfo.commit.author.name+" "+t.commitInfo.commit.author.email)+"\n            ")])],1)],1),t._v(" "),n("app-page-section",{staticClass:"element-text"},[n("translate",[t._v("Showing")]),t._v(" "),n("translate",{attrs:{"translate-n":t.filesChanged,"translate-plural":"%{n} changed files with","translate-params":{n:t.filesChanged}}},[t._v("\n            %{n} changed file with\n        ")]),t._v(" "),n("translate",{attrs:{"translate-n":t.stats.plus,"translate-plural":"%{n} additions and","translate-params":{n:t.stats.plus}}},[t._v("\n            %{n} addition and\n        ")]),t._v(" "),n("translate",{attrs:{"translate-n":t.stats.minus,"translate-plural":"%{n} deletions.","translate-params":{n:t.stats.minus}}},[t._v("\n            %{n} deletion.\n        ")])],1),t._v(" "),t._l(t.commitInfo.diff,(function(e){return n("app-page-section",{key:e.filename,staticClass:"diff-wrapper"},[n("table",{staticClass:"diff-table"},t._l(e.diffs,(function(e,r){return n("tr",{key:r,class:["diff-line",e.type]},["header"===e.type?[n("td",{attrs:{colspan:"2"}},[n("pre",{staticClass:"diff-line-content",domProps:{textContent:t._s(e.line)}})])]:[n("td",{staticClass:"sign"},["minus"===e.type?[t._v("\n                            -\n                        ")]:"plus"===e.type?[t._v("\n                            +\n                        ")]:t._e()],2),t._v(" "),n("td",[n("pre",{staticClass:"diff-line-content",domProps:{textContent:t._s(e.line)}})])]],2)})),0)])}))],2)},o=[]}}]);