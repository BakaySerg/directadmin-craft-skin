(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[8178],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/cronjobs/create.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.array.iterator.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.string.iterator.js"),o("./node_modules/core-js/modules/es.weak-map.js"),o("./node_modules/core-js/modules/web.dom-collections.iterator.js"),o("./node_modules/core-js/modules/es.object.define-property.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var n=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),s=o("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var r=n(o("./node_modules/@babel/runtime/regenerator/index.js")),a=n(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"));o("./node_modules/core-js/modules/es.array.includes.js"),o("./node_modules/core-js/modules/es.string.includes.js");var l=o("./src/js/api/commands/user/cronjobs.ts");o("./src/js/api/commands/converters/primitive.ts"),function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var o=i(t);if(o&&o.has(e))return o.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=r?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(n,a,l):n[a]=e[a]}n.default=e,o&&o.set(e,n)}(o("./node_modules/ramda/src/index.js"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(i=function(e){return e?o:t})(e)}var u,c={preload:l.getPhpBinPath,api:[{command:l.getPhpBinPath,bind:"phpBinPath"}],data:function(){return{minute:"*",hour:"*",dayOfMonth:"*",month:"*",dayOfWeek:"*",command:"",reboot:!1}},computed:{currentTime:function(){return this.$options.filters.date(new Date(this.$_session.time))},emailPrevented:function(){return this.command.includes(" >/dev/null 2>&1")}},created:function(){this.command=this.$state.session.homeDir},methods:{createCronJob:(u=(0,a.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.createCronjob)({reboot:this.reboot,minute:this.minute,hour:this.hour,dayofmonth:this.dayOfMonth,month:this.month,dayofweek:this.dayOfWeek,command:this.command});case 2:e.sent&&this.$router.back();case 4:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)}),preventEmail:function(){this.command="".concat(this.command," >/dev/null 2>&1")}}};t.Z=c},"./src/js/api/commands/user/cronjobs.ts":function(e,t,o){"use strict";o.r(t),o.d(t,{getCronjobs:function(){return a},deleteCronjobs:function(){return l},createCronjob:function(){return i},updateCronjobReboot:function(){return c},updateCronjob:function(){return d},saveEmail:function(){return m},getPhpBinPath:function(){return p}});var n=o("./src/js/api/command/index.js"),s=o("./node_modules/ramda/es/index.js"),r="/CMD_CRON_JOBS",a=n.default.get({url:r,id:"CRON_JOBS",params:{ipp:"99999",page:"1"},mapResponse:{email:s.prop("MAILTO"),rows:s.pipe(s.prop("crons"),s.omit(["info"]),s.values)}}),l=n.default.select({url:r,params:{action:"delete",delete:!0}}),i=n.default.post({url:r,params:{action:"create"},schema:{reboot:n.default.REQUIRED_BOOL,minute:n.default.REQUIRED_STRING,hour:n.default.REQUIRED_STRING,dayofmonth:n.default.REQUIRED_STRING,month:n.default.REQUIRED_STRING,dayofweek:n.default.REQUIRED_STRING}}),u=n.default.post({url:r,params:{save:!0},schema:{id:n.default.REQUIRED_STRING,command:n.default.REQUIRED_STRING}}),c=u.extend({url:r,params:{reboot:!0}}),d=u.extend({url:r,schema:{minute:n.default.REQUIRED_STRING,hour:n.default.REQUIRED_STRING,dayofmonth:n.default.REQUIRED_STRING,month:n.default.REQUIRED_STRING,dayofweek:n.default.REQUIRED_STRING}}),m=n.default.post({url:r,params:{action:"saveemail"},schema:{email:n.default.REQUIRED_STRING}}),p=n.default.get({url:r,id:"CRON_PHP_BIN_PATH",response:!1,mapResponse:function(e){return"1"===e.set_php_bin_path_in_crons}})},"./src/js/pages/user/cronjobs/create.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return n.X},default:function(){return u}});var n=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/cronjobs/create.vue?vue&type=script&lang=js&"),s=n.Z,r=o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),a=o("./src/js/pages/user/cronjobs/create.vue?vue&type=custom&index=0&blockType=route"),l=o.n(a),i=(0,r.Z)(s,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("app-page",[o("template",{slot:"details"},[o("ui-infobar-item",{attrs:{title:e.$gettext("Details")}},[o("translate",[e._v("Valid Cron time values are the numbers indicated and *.")]),e._v(" "),o("translate",[e._v("You can specify exact times using commas to separate them. e.g. 1,2,3 (minutes 1,2 and 3) ")]),e._v(" "),o("translate",[e._v("You can specify spans using a dash. e.g. 5-7 (minutes 5 to 7) ")]),e._v(" "),o("translate",[e._v("You can specify intervals using a star and a forward slash. e.g. */2 (every 2nd minute) ")]),e._v(" "),o("translate",[e._v("You can combine them to create a more precise schedule. e.g. 1,5,11-15,30-59/2 (minutes 1, 5, 11 to 15 and every 2nd minute between 30 and 59) ")]),e._v(" "),o("translate",[e._v("Note that there are no spaces")]),e._v(" "),o("br"),e._v(" "),o("translate",{staticClass:"txt:bold"},[e._v("\n                Sample Cron commands:\n            ")]),e._v(" "),o("ui-pre",{attrs:{"content-lines":[(e.$api.phpBinPath?"":"/usr/local/bin/")+"php /home/admin/domains/domain.com/public_html/script.php","/usr/local/bin/curl --silent http://www.domain.com/cron.php > /dev/null","/usr/bin/wget -O /dev/null http://www.domain.com/cron.php"]}})],1)],1),e._v(" "),o("app-page-section",[o("ui-form-element",[o("span",{attrs:{slot:"title"},slot:"title"}),e._v(" "),o("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.reboot,callback:function(t){e.reboot=t},expression:"reboot"}},[o("translate",[e._v("Run on @reboot")])],1)],1)],1),e._v(" "),e.reboot?e._e():o("app-page-section",[o("ui-form-element",[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Current Time\n            ")]),e._v(" "),o("input-text",{attrs:{slot:"content",disabled:"disabled",value:e.currentTime},slot:"content"})],1),e._v(" "),o("ui-form-element",{attrs:{group:"createCronJob",validators:{required:!0}}},[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Minute\n            ")]),e._v(" "),o("span",{attrs:{slot:"tooltip"},slot:"tooltip"},[e._v("0–59")]),e._v(" "),o("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.minute,callback:function(t){e.minute=t},expression:"minute"}})],1),e._v(" "),o("ui-form-element",{attrs:{group:"createCronJob",validators:{required:!0}}},[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Hour\n            ")]),e._v(" "),o("span",{attrs:{slot:"tooltip"},slot:"tooltip"},[e._v("0–23")]),e._v(" "),o("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.hour,callback:function(t){e.hour=t},expression:"hour"}})],1),e._v(" "),o("ui-form-element",{attrs:{group:"createCronJob",validators:{required:!0}}},[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Day of Month\n            ")]),e._v(" "),o("span",{attrs:{slot:"tooltip"},slot:"tooltip"},[e._v("1–31")]),e._v(" "),o("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.dayOfMonth,callback:function(t){e.dayOfMonth=t},expression:"dayOfMonth"}})],1),e._v(" "),o("ui-form-element",{attrs:{group:"createCronJob",validators:{required:!0}}},[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Month\n            ")]),e._v(" "),o("span",{attrs:{slot:"tooltip"},slot:"tooltip"},[e._v("1–12")]),e._v(" "),o("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),e._v(" "),o("ui-form-element",[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Day of Week\n            ")]),e._v(" "),o("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[e._v("\n                0–7; 0, 7 = Sunday\n            ")]),e._v(" "),o("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.dayOfWeek,callback:function(t){e.dayOfWeek=t},expression:"dayOfWeek"}})],1)],1),e._v(" "),o("app-page-section",[o("ui-form-element",{attrs:{group:"createCronJob",validators:{required:!0}},scopedSlots:e._u([{key:"content",fn:function(){return[o("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},[o("input-textarea",{model:{value:e.command,callback:function(t){e.command=t},expression:"command"}})],1)]},proxy:!0}])},[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Command\n            ")]),e._v(" "),o("span",{attrs:{slot:"tooltip"},slot:"tooltip"},[o("translate",[e._v("\n                    To access a specific URL periodically use a command like:\n                ")]),o("br"),e._v("\n                curl -L -s https://example.com/cron.php\n            ")],1)],1)],1),e._v(" "),o("ui-button",{key:"preventButton",attrs:{slot:"footer:buttons",disabled:e.emailPrevented,theme:"safe",size:"big"},on:{click:e.preventEmail},slot:"footer:buttons"},[o("translate",[e._v("Prevent E-mail")])],1),e._v(" "),o("ui-button",{directives:[{name:"margin",rawName:"v-margin:left",value:1,expression:"1",arg:"left"}],attrs:{slot:"footer:buttons",theme:"safe","validate-group":"createCronJob"},on:{click:e.createCronJob},slot:"footer:buttons"},[o("translate",[e._v("Create")])],1)],2)}),[],!1,null,null,null);"function"==typeof l()&&l()(i);var u=i.exports},"./src/js/pages/user/cronjobs/create.vue?vue&type=custom&index=0&blockType=route":function(){}}]);