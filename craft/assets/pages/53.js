(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{1877:function(t,e,n){"use strict";n.r(e);var o=n(4074),a=n(2819);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var i=n(0),s=n(3870),u=n.n(s),c=Object(i.a)(a.default,o.a,o.b,!1,null,null,null);"function"==typeof u.a&&u()(c),e.default=c.exports},2819:function(t,e,n){"use strict";n.r(e);var o=n(2820),a=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e.default=a.a},2820:function(t,e,n){"use strict";n(7),n(10),n(5),n(6),n(8),n(11);var o=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n(36)),r=o(n(2)),i=o(n(37));n(34),n(26),n(14),n(65),n(50);var s=n(1999),u=o(n(3864)),c=o(n(3169));function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){(0,r.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f,p,v,h=s.modifyApp.extend({notifySuccess:!1,notifyError:!1}),m={preload:s.getUnits,api:s.getUnits,components:{RouteTab:u.default,CreateRouteDialog:c.default},data:function(){return{selectedApps:[],newRoute:{app:"",force:!1}}},computed:{tabs:function(){return[{id:"apps",label:this.$gettext("Applications")},{id:"routes",label:this.$gettext("Routes")}]},types:function(){return{external:this.$gettext("Node.js"),php:this.$gettext("PHP"),"php 7.3":this.$gettext("PHP 7.3"),python:this.$gettext("Python"),java:this.$gettext("Java"),perl:this.$gettext("Perl"),ruby:this.$gettext("Ruby")}},routes:function(){return this.$api.routes.map((function(t){return{route:t}}))},select:function(){return this.selectedApps.map((function(t){return t.name}))}},watch:{$domain:function(t){(0,s.getUnits)({domain:t})}},methods:{getUnits:s.getUnits,deleteApps:(v=(0,i.default)(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.deleteApps)({select:this.select});case 2:this.selectedApps=[],(0,s.getUnits)();case 4:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)}),createRoute:(p=(0,i.default)(a.default.mark((function t(){var e,n,o=arguments;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=o.length>0&&void 0!==o[0]?o[0]:"",n=o.length>1&&void 0!==o[1]&&o[1],this.newRoute.app=e,this.newRoute.force=n,this.$dialog("CREATE_ROUTE_DIALOG").open();case 5:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)}),restartApp:(f=(0,i.default)(a.default.mark((function t(e,n){var o;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=d(d({},n),{},{environment:d(d({},n.environment||{}),{},{APPGEN:Date.now().toString()})}),t.next=3,h({name:e,json:JSON.stringify(o,null,2)});case 3:this.$notifications.success({title:"Success"});case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return f.apply(this,arguments)}),getPHPRoot:function(t){if(t.targets){var e=Object.values(t.targets);if(1===e.length)return e[0].root;var n=e.length,o=e[0].root,a=n-1;return this.$gettextInterpolate(this.$ngettext("%{root} + %{n} more target","%{root} + %{n} more targets",a),{n:a,root:o})}return t.root}}};e.default=m},2821:function(t,e,n){"use strict";n.r(e);var o=n(2822),a=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e.default=a.a},2822:function(t,e,n){"use strict";var o=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n(44)),r=o(n(718));n(34),n(21),n(61),n(84),n(55),n(24);var i=n(1999),s=o(n(3865)),u=o(n(3866)),c={api:i.getUnits,components:{RenameRouteDialog:s.default,EditRouteDialog:u.default},data:function(){return{checkedRows:[],selectedLocation:""}},computed:{locations:function(){return this.$api.routes.map((function(t){return{location:t}}))}},methods:{loadData:function(){this.checkedRows=[],this.selectedLocation="",(0,i.getUnits)()},getLocationFromName:function(t){var e=t.split("/"),n=(0,r.default)(e),o=(n[0],n.slice(1));return[""].concat((0,a.default)(o)).join("/")},deleteLocations:function(){var t=this.checkedRows.map((function(t){return t.location}));(0,i.deleteRoutes)({select:t}).then(this.loadData)},changeLocation:function(t){var e=this;this.selectedLocation=t,this.$nextTick((function(){e.$dialog("RENAME_ROUTE").open()}))},editRoute:function(t){this.selectedLocation=t,this.$dialog("EDIT_ROUTE").open()},renameRoute:function(t){this.selectedLocation=t,this.$dialog("RENAME_ROUTE").open()}}};e.default=c},2823:function(t,e,n){"use strict";n.r(e);var o=n(2824),a=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e.default=a.a},2824:function(t,e,n){"use strict";var o=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n(2058),n(24);var a,r=o(n(36)),i=o(n(37)),s=n(1999),u={props:{oldLocation:{type:String,required:!0,default:""}},data:function(){return{location:""}},methods:{onOpen:function(){this.location=this.oldLocation},changeLocation:(a=(0,i.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.appendSlash(),t.next=3,(0,s.renameRoute)({old_route:this.oldLocation,new_route:this.location});case 3:this.$emit("done");case 4:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)}),appendSlash:function(){!1===this.location.endsWith("/")&&(this.location=this.location.concat("/"))}}};e.default=u},2825:function(t,e,n){"use strict";n.r(e);var o=n(2826),a=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e.default=a.a},2826:function(t,e,n){"use strict";var o=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n(36));n(21),n(61),n(26),n(84),n(55),n(24);var r,i,s=o(n(37)),u=o(n(44)),c=o(n(718)),l=n(1999),d={components:{RouteEditor:o(n(3167)).default},props:{name:{type:String,required:!0}},data:function(){return{loading:!1,json:"[]",valid:!1}},computed:{location:function(){var t=this.name.split("/"),e=(0,c.default)(t),n=(e[0],e.slice(1));return[""].concat((0,u.default)(n)).join("/")}},methods:{onOpen:(i=(0,s.default)(a.default.mark((function t(){var e;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,(0,l.getRoute)({name:this.name});case 3:e=t.sent,this.json=JSON.stringify(e.route,null,2),this.loading=!1;case 6:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)}),onClose:function(){this.json="[]"},saveRoute:(r=(0,s.default)(a.default.mark((function t(){return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.setRoute)({routes:this.json,location:this.location});case 2:if(!(t.sent instanceof Error)){t.next=5;break}return t.abrupt("return");case 5:this.$emit("done");case 6:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}};e.default=d},3864:function(t,e,n){"use strict";n.r(e);var o=n(4202),a=n(2821);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var i=n(0),s=Object(i.a)(a.default,o.a,o.b,!1,null,null,null);e.default=s.exports},3865:function(t,e,n){"use strict";n.r(e);var o=n(4239),a=n(2823);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var i=n(0),s=Object(i.a)(a.default,o.a,o.b,!1,null,null,null);e.default=s.exports},3866:function(t,e,n){"use strict";n.r(e);var o=n(4240),a=n(2825);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var i=n(0),s=Object(i.a)(a.default,o.a,o.b,!1,null,null,null);e.default=s.exports},3870:function(t,e){},4074:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",{attrs:{id:"unit",actions:[{label:t.$gettext("Create Application"),icon:"#plus-fill",name:"user/unit/create"},{label:t.$gettext("Create Route"),handler:t.createRoute,icon:"#plus-fill"}]}},[n("ui-button-link",{attrs:{slot:"header:buttons",theme:"primary",name:"user/unit/create"},slot:"header:buttons"},[n("translate",[t._v("Create Application")])],1),t._v(" "),n("ui-button",{attrs:{slot:"header:buttons",theme:"safe"},on:{click:function(e){return t.createRoute()}},slot:"header:buttons"},[n("translate",[t._v("Create Route")])],1),t._v(" "),n("app-page-section",[n("ui-tabs",t._b({},"ui-tabs",{tabs:t.tabs},!1),[n("div",{attrs:{slot:"tab:apps"},slot:"tab:apps"},[n("ui-r-table",{attrs:{"checked-rows":t.selectedApps,columns:[{id:"name",label:this.$gettext("Name")},{id:"type",label:this.$gettext("Type")},{id:"wd",label:this.$gettext("Associated Directory")},{id:"restart",label:this.$gettext(" ")}],rows:t.$api.apps},on:{"update:checkedRows":function(e){t.selectedApps=e},"update:checked-rows":function(e){t.selectedApps=e}},scopedSlots:t._u([{key:"col:name",fn:function(e){var o=e.name;return n("ui-link",{staticClass:"txt:uppercase txt:bold",attrs:{name:"user/unit/modify",params:{id:o}}},[n("ui-icon",{directives:[{name:"margin",rawName:"v-margin:right",value:"5px",expression:"'5px'",arg:"right"}],attrs:{id:"pencil",size:"small",theme:"primary"}}),t._v("\n                        "+t._s(o)+"\n                    ")],1)}},{key:"col:type",fn:function(e){var n=e.type;return[t._v("\n                        "+t._s(t.types[n])+"\n                    ")]}},{key:"col:wd",fn:function(e){var n=e.app;return["python"===n.type?[t._v("\n                            "+t._s(n.path?n.path.join(", "):"")+"\n                        ")]:"php"===n.type?[t._v("\n                            "+t._s(t.getPHPRoot(n))+"\n                        ")]:[t._v("\n                            "+t._s(n.working_directory)+"\n                        ")]]}},{key:"col:restart",fn:function(e){var o=e.name,a=e.app;return n("ui-actions",{},[n("ui-link",{on:{click:function(e){return t.restartApp(o,a)}}},[n("translate",[t._v("Restart Application")])],1),t._v(" "),n("ui-link",{on:{click:function(e){return t.createRoute(o)}}},[n("translate",[t._v("Create Route")])],1)],1)}}])},[n("ui-table-action",{attrs:{slot:"table:actions"},on:{click:t.deleteApps},slot:"table:actions"},[n("translate",[t._v("Delete")])],1)],1)],1),t._v(" "),n("route-tab",{attrs:{slot:"tab:routes"},slot:"tab:routes"})],1),t._v(" "),n("create-route-dialog",{attrs:{"app-name":t.newRoute.app,"force-app-name":t.newRoute.force},on:{done:t.getUnits}})],1)],1)},a=[]},4202:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page-section",[n("ui-r-table",{attrs:{columns:[{id:"location",label:t.$gettext("Location")}],rows:t.locations,"checked-rows":t.checkedRows},on:{"update:checkedRows":function(e){t.checkedRows=e},"update:checked-rows":function(e){t.checkedRows=e}},scopedSlots:t._u([{key:"col:location",fn:function(e){var o=e.location;return n("div",{directives:[{name:"flex",rawName:"v-flex",value:{main:"between"},expression:"{ main: 'between' }"}]},[n("ui-link",{on:{click:function(e){return t.editRoute(o)}}},[n("ui-icon",{directives:[{name:"margin",rawName:"v-margin:right",value:"5px",expression:"'5px'",arg:"right"}],attrs:{id:"pencil",size:"small",color:"primary"}}),t._v("\n                "+t._s(o)+"\n            ")],1),t._v(" "),n("ui-actions",[n("ui-link",{on:{click:function(e){return t.editRoute(o)}}},[n("translate",[t._v("Edit")])],1),t._v(" "),n("ui-link",{on:{click:function(e){return t.renameRoute(o)}}},[n("translate",[t._v("Rename")])],1)],1)],1)}}])},[n("ui-table-action",{attrs:{slot:"table:actions"},on:{click:t.deleteLocations},slot:"table:actions"},[n("translate",[t._v("Delete")])],1)],1),t._v(" "),n("rename-route-dialog",{attrs:{"old-location":t.selectedLocation},on:{done:t.loadData}}),t._v(" "),n("edit-route-dialog",{attrs:{name:t.selectedLocation},on:{done:t.loadData}})],1)},a=[]},4239:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-dialog",{attrs:{id:"RENAME_ROUTE",theme:"safe"},on:{"dialog:open":t.onOpen}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n        Change Location\n    ")]),t._v(" "),n("template",{slot:"content"},[n("ui-form-element",{attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Old Location\n            ")]),t._v(" "),n("input-text",{attrs:{slot:"content",value:t.oldLocation,disabled:""},slot:"content"})],1),t._v(" "),n("ui-form-element",{attrs:{vertical:"",validators:{required:!0},group:"rename-location"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                New Location\n            ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},on:{blur:t.appendSlash},slot:"content",model:{value:t.location,callback:function(e){t.location=e},expression:"location"}})],1)],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"safe","validate-group":"rename-location"},on:{click:t.changeLocation},slot:"buttons"},[n("translate",[t._v("Change")])],1)],2)},a=[]},4240:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-dialog",{attrs:{id:"EDIT_ROUTE",theme:"primary",size:"normal","no-auto-close":""},on:{"dialog:open":t.onOpen,"dialog:close":t.onClose}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n        Edit Route\n    ")]),t._v(" "),n("template",{slot:"content"},[t.loading?n("ui-center",{attrs:{height:"10rem"}},[n("ui-loader-icon",{attrs:{size:32}})],1):n("route-editor",{on:{"update:valid":function(e){t.valid=e}},model:{value:t.json,callback:function(e){t.json=e},expression:"json"}})],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"safe",disabled:!t.valid},on:{click:t.saveRoute},slot:"buttons"},[n("translate",[t._v("Save")])],1)],2)},a=[]}}]);