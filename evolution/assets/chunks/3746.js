(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[3746],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/input-ip.vue?vue&type=script&lang=js&":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.weak-map.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=t("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(s,"X$",{value:!0}),s.xd=s.ZP=s.TW=void 0;var n=o(t("./node_modules/@babel/runtime/helpers/slicedToArray.js"));t("./node_modules/core-js/modules/es.number.constructor.js"),t("./node_modules/core-js/modules/es.array.join.js"),t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.regexp.to-string.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.array.concat.js"),t("./node_modules/core-js/modules/es.array.fill.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js"),t("./node_modules/core-js/modules/es.string.replace.js");var l=function(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=d(s);if(t&&t.has(e))return t.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var a=n?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(o,l,a):o[l]=e[l]}o.default=e,t&&t.set(e,o);return o}(t("./node_modules/ramda/src/index.js")),a=o(t("./node_modules/inputmask/dist/inputmask.js")),i=t("./src/js/vue/mixins/local/inputValidation.js");function d(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(d=function(e){return e?t:s})(e)}var u=function(e){if(!e)return"";for(var s=[],t=Number(e),o=0;o<4;o++){var r=Math.min(t,8);s.push(256-Math.pow(2,8-r)),t-=r}return s.join(".")};s.TW=u;var c=function(e){if(!e)return"";var s,t,o;return s=(o=e,o.split(".").map(Number)).map((function(e){return(e>>>0).toString(2)})).join(""),t="1",s.split(t).length-1};s.xd=c;var p={mixins:[i.$inputValidation],validate:"value",props:{value:{type:String,required:!0},netmask:{type:String,required:!1,default:""},version:{type:String,required:!1,default:"v4"},disableVersionSelect:{type:Boolean,required:!1,default:!1},allowRange:{type:Boolean,required:!1,default:!1}},data:function(){return{focused:!1,dataVersion:"v4",innerCidr:null}},computed:{showVersionsSelect:function(){return!this.disableVersionSelect&&this.$_flags["server.ipv6"]},cidr:function(){return this.netmask&&"v4"===this.dataVersion?c(this.netmask):this.netmask},innerValue:function(){return this.value&&null!==this.innerCidr?"".concat(this.value,"/").concat(this.cidr):this.value},mask:function(){var e={v4:Array(4).fill("i[i[i]]").join("."),v6:"[I[I[I[I]]]]".concat(Array(7).fill("[:[I[I[I[I]]]]]").join(""))}[this.dataVersion],s={v4:"[!r[r[r]]]",v6:"[!R[R[R[R]]]]"}[this.dataVersion],t={v4:"[=[n[n]]]",v6:"[-[N[N[N]]]]"}[this.dataVersion];return this.allowRange&&(e="".concat(e).concat(s)),void 0!==this.netmask&&(e="".concat(e).concat(t)),e}},watch:{version:function(e){this.dataVersion!==e&&(this.dataVersion=e)},dataVersion:function(e){e!==this.version&&(this.$emit("input",""),this.$emit("update:netmask","")),this.applyMask()},innerCidr:function(e,s){null!==e&&(null===s&&""===e&&(this.innerCidr=this.cidr),this.emitNetmask(e))}},mounted:function(){this.dataVersion=this.version,this.applyMask()},methods:{emit:function(e){var s=e.target.value,t=s.split("/"),o=(0,n.default)(t,2),r=o[0],l=o[1];this.innerCidr=s.includes("/")?l:null,this.$emit("input",r),s||this.emitNetmask("")},emitNetmask:function(e){return this.$emit("update:netmask","v4"===this.dataVersion?u(e):e)},moveCursor:function(){this.value||this.$refs.input.setSelectionRange(0,0)},applyMask:function(){new a.default({mask:this.mask,keepStatic:!0,definitions:{i:{validator:function(e,s,t){var o=s.buffer;return t-1>-1&&"."!==o[t-1]?(e=o[t-1]+e,e=t-2>-1&&"."!==o[t-2]?o[t-2]+e:"0".concat(e)):e="00".concat(e),/25[0-5]|2[0-4][0-9]|[01][0-9][0-9]/.test(e)},cardinality:1},n:{validator:function(e,s,t){var o=s.buffer;return"/"!==o[t-1]&&(e=o[t-1]+e),/^3[0-2]$|^[0-2][0-9]$|^[0-9]$/.test(e)},cardinality:1},I:{validator:function(e,s,t){var o=s.buffer;return(1!==t||":"!==o[0])&&/[A-Fa-f0-9]/.test(e)},cardinality:1,casing:"lower"},N:{validator:function(e,s,t){var o=s.buffer,r=l.pipe(l.ifElse((function(e){return e.length===t}),l.append(e),l.update(t,e)),l.join(""),l.split("/"),l.last,Number)(o);return r>=0&&r<=128}},":":{validator:function(e,s,t){var o=s.buffer;return":"===e?":"!==o[t-1]||!o.join("").includes("::"):!!/[A-Fa-f0-9]/.test(e)&&{insert:[{pos:t,c:":"},{pos:t+1,c:e}],caret:t+2}},cardinality:1,placeholder:":"},"-":{validator:function(e,s,t){var o=s.buffer;if(!t)return!1;if(":"===o[t-1]&&"/"===e)return t>=3&&":"===o[t-2];var r=o.join("").split("/"),l=(0,n.default)(r,1)[0].split(":").map((function(e){return e.replace(/_/g,"")})).join(":");return"/"===e&&l.includes(":")},cardinality:1,placeholder:"/"},"=":{validator:function(e){return"/"===e},cardinality:1,placeholder:"/"},"!":{validator:function(e){return"-"===e},cardinality:1,placeholder:""},r:{validator:function(e,s,t){var o=s.buffer;return"-"!==o[t-1]?(e=o[t-1]+e,e="-"!==o[t-2]?o[t-2]+e:"0".concat(e)):e="00".concat(e),/25[0-5]|2[0-4][0-9]|[01][0-9][0-9]/.test(e)},cardinality:1,placeholder:""},R:{validator:function(e){return/[A-Fa-f0-9]/.test(e)},cardinality:1,placeholder:""}},onUnMask:function(e){return e},skipOptionalPartCharacter:"",placeholder:"_"}).mask(this.$refs.input)}}};s.ZP=p},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/ip-manager/_dialogs/add-ip-dialog.vue?vue&type=script&lang=js&":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.object.define-property.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"X",{value:!0}),s.Z=void 0,t("./node_modules/core-js/modules/es.regexp.exec.js"),t("./node_modules/core-js/modules/es.string.split.js"),t("./node_modules/core-js/modules/es.parse-int.js");var r,n=o(t("./node_modules/@babel/runtime/regenerator/index.js")),l=o(t("./node_modules/@babel/runtime/helpers/slicedToArray.js")),a=o(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=o(t("./src/js/components/local/input-ip.vue")),d=t("./src/js/api/commands/admin/ip-manager/index.js"),u={components:{InputIp:i.default},data:function(){return{ip:"",netmask:"255.255.255.0",version:"v4",addToDevice:!0}},computed:{haveIPv6:function(){return this.$_flags["server.ipv6"]}},created:function(){this.validateUniqueness.id="VALIDATE_IP"},methods:{submit:(r=(0,a.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$emit("submit",{ip:this.ip,netmask:"v4"===this.version?this.netmask:"/".concat(this.netmask),add_to_device:this.addToDevice}),this.$reset();case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),validateIP:function(e){if(!e)return!0;var s=e.split("-"),t=(0,l.default)(s,1)[0];return this.regexps.ip.test(t)},validateRange:function(e){if(!e)return!0;var s=e.split("-"),t=(0,l.default)(s,2),o=t[0],r=t[1],n=o.split("v4"===this.version?".":":").pop();if(!n||!r)return!0;var a="v4"===this.version?10:16;return parseInt(r,a)>parseInt(n,a)},validateUniqueness:function(e){var s=e.value;return this.validateIP(s)?(0,d.validateIP)({value:s}):{valid:!0}}}};s.Z=u},"./src/js/api/commands/admin/ip-manager/index.js":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.object.define-property.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.validateIP=s.setGlobal=s.removeReseller=s.getIps=s.deleteIps=s.clearNamespace=s.assignReseller=s.addIp=void 0,t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.promise.js");var r=o(t("./src/js/api/command/index.js")),n="/CMD_IP_MANAGER",l=(new(o(t("./node_modules/vue/dist/vue.common.js")).default)).$gettext,a=r.default.get({url:n,id:"IP_MANAGER",response:{ips:[],info:{}},pagination:!0,after:function(e){return e.flow(e.moveProp({ips:"rows"}),e.deleteProp("num_ips"),e.processTableInfo("rows"),e.mapProps({rows:e.flow(e.toArray,e.mapArray(e.flow(e.moveProp("extra.creators","resellers"),e.mapProps({global:e.isEqual("yes")}))))}))}});s.getIps=a;var i=r.default.select({url:n,params:{assign:!0,json:!0},schema:{reseller:r.default.REQUIRED_STRING}});s.assignReseller=i;var d=r.default.select({url:n,params:{json:!0,remove:!0}});s.removeReseller=d;var u=r.default.select({url:n,params:{json:!0,clear:!0}});s.clearNamespace=u;var c=r.default.select({url:"".concat(n,"?json=yes"),params:{json:!0,delete:!0}});s.deleteIps=c;var p=r.default.post({url:n,params:{action:"add",json:!0,add_to_device_aware:!0},schema:{ip:r.default.REQUIRED_STRING,netmask:r.default.REQUIRED_STRING,add_to_device:r.default.REQUIRED_BOOL}});s.addIp=p;var m=r.default.get({url:n,id:"VALIDATE_IP",params:{comparison1:"equals"},schema:{value:r.default.REQUIRED_STRING},before:function(e){return{value1:e.value,value:null}},after:function(){return function(e){return"0"!==e.ips.info.rows?{valid:!1,message:l("You already have this IP on your system.")}:{valid:!0}}}});s.validateIP=m;var v=r.default.select({url:n,params:{set_global:!0},schema:{global:r.default.REQUIRED_BOOL}});s.setGlobal=v},"./src/js/api/commands/reseller/ip-config.js":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.object.keys.js"),t("./node_modules/core-js/modules/es.symbol.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),t("./node_modules/core-js/modules/es.object.define-properties.js"),t("./node_modules/core-js/modules/es.object.define-property.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.share=s.getConfig=s.free=void 0,t("./node_modules/core-js/modules/es.object.values.js");var r=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),n=o(t("./src/js/api/command/index.js"));function l(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);s&&(o=o.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),t.push.apply(t,o)}return t}var a="/CMD_IP_CONFIG",i=n.default.get({id:"IP_CONFIG",url:a,response:{},after:function(e){return e.flow((function(e){return{ips:e.data,hideUsersCount:"1"===e.hide_ip_user_numbers,haveShared:"1"===e.have_shared||!0,select:e.ip_list||{}}}),e.mapProp("ips",e.flow(e.mapValues((function(e,s){return function(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?l(Object(t),!0).forEach((function(s){(0,r.default)(e,s,t[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}))}return e}({ip:s},e)})),Object.values,e.mapArrayProps({linked_ips:function(s){return Object.values(e.mapValues(s,(function(s,t){return{ip:t,apache:e.convert.toAppBoolean(s.apache),dns:e.convert.toAppBoolean(s.dns)}})))},value:function(s){return e.convert.toAppNumber(s)||s}}))),e.mapProp("select",e.toSelect))}});s.getConfig=i;var d=n.default.select({url:a,params:{share:!0}});s.share=d;var u=n.default.select({url:a,params:{free:"Free Selected"}});s.free=u},"./node_modules/core-js/internals/array-fill.js":function(e,s,t){"use strict";var o=t("./node_modules/core-js/internals/to-object.js"),r=t("./node_modules/core-js/internals/to-absolute-index.js"),n=t("./node_modules/core-js/internals/length-of-array-like.js");e.exports=function(e){for(var s=o(this),t=n(s),l=arguments.length,a=r(l>1?arguments[1]:void 0,t),i=l>2?arguments[2]:void 0,d=void 0===i?t:r(i,t);d>a;)s[a++]=e;return s}},"./node_modules/core-js/modules/es.array.fill.js":function(e,s,t){var o=t("./node_modules/core-js/internals/export.js"),r=t("./node_modules/core-js/internals/array-fill.js"),n=t("./node_modules/core-js/internals/add-to-unscopables.js");o({target:"Array",proto:!0},{fill:r}),n("fill")},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/input-ip.vue?vue&type=style&index=0&lang=scss&":function(){},"./src/js/components/local/input-ip.vue":function(e,s,t){"use strict";t.r(s),t.d(s,{__esModule:function(){return o.X$},cidr2netmask:function(){return o.TW},default:function(){return n},netmask2cidr:function(){return o.xd}});var o=t("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/input-ip.vue?vue&type=script&lang=js&"),r=o.ZP,n=(t("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/input-ip.vue?vue&type=style&index=0&lang=scss&"),(0,t("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(r,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ui-input-group",{staticClass:"width:100%"},[e.showVersionsSelect?t("input-select",{staticClass:"input-ip-version-select",attrs:{slot:"additions:left",novalidate:"",options:{v4:"IPv4",v6:"IPv6"}},on:{change:function(s){return e.$emit("update:version",s)}},slot:"additions:left",model:{value:e.dataVersion,callback:function(s){e.dataVersion=s},expression:"dataVersion"}}):e._e(),e._v(" "),t("input",{ref:"input",staticClass:"input-ip-mask",attrs:{slot:"input",type:"text"},domProps:{value:e.innerValue},on:{input:e.emit,focus:e.moveCursor},slot:"input"}),e._v(" "),t("template",{slot:"additions:right"},[e._t("additions:right")],2)],2)}),[],!1,null,null,null).exports)},"./src/js/pages/admin/ip-manager/_dialogs/add-ip-dialog.vue":function(e,s,t){"use strict";t.r(s),t.d(s,{__esModule:function(){return o.X},default:function(){return n}});var o=t("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/ip-manager/_dialogs/add-ip-dialog.vue?vue&type=script&lang=js&"),r=o.Z,n=(0,t("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(r,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ui-dialog",{attrs:{id:"ADD_IP_DIALOG",theme:"primary"}},[t("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Add IP Address")]),e._v(" "),t("template",{slot:"content"},[t("ui-form-element",{attrs:{group:"addIp",validators:{required:!0,validateIP:e.validateIP,validateRange:e.validateRange,api:e.validateUniqueness},vertical:""}},[t("translate",{attrs:{slot:"title"},slot:"title"},[e._v("IP Address")]),e._v(" "),t("input-ip",{attrs:{slot:"content",version:e.version,netmask:e.netmask,"disable-version-select":!e.haveIPv6,"allow-range":""},on:{"update:version":function(s){e.version=s},"update:netmask":function(s){e.netmask=s}},slot:"content",model:{value:e.ip,callback:function(s){e.ip=s},expression:"ip"}}),e._v(" "),t("translate",{attrs:{slot:"error:validateIP"},slot:"error:validateIP"},[e._v("\n                Should be valid IP Address\n            ")]),e._v(" "),t("translate",{attrs:{slot:"error:validateRange"},slot:"error:validateRange"},[e._v("\n                Range end should be larger than start\n            ")])],1),e._v(" "),t("ui-form-element",{attrs:{group:"addIp",validators:{required:!0,regex:e.regexps.ip},vertical:""}},[t("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Netmask")]),e._v(" "),"v4"===e.version?t("input-ip",{attrs:{slot:"content","disable-version-select":""},slot:"content",model:{value:e.netmask,callback:function(s){e.netmask=s},expression:"netmask"}}):t("translate",{attrs:{slot:"content"},slot:"content"},[e._v("\n                For IPv6 IPs, use a /mask, eg: /64\n            ")]),e._v(" "),t("translate",{attrs:{slot:"error:regex"},slot:"error:regex"},[e._v("\n                Should be valid netmask\n            ")])],1),e._v(" "),t("ui-form-element",{attrs:{vertical:""}},[t("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.addToDevice,callback:function(s){e.addToDevice=s},expression:"addToDevice"}},[t("translate",[e._v("Add to device")])],1)],1)],1),e._v(" "),t("ui-button",{attrs:{slot:"buttons",theme:"primary","validate-group":"addIp"},on:{click:e.submit},slot:"buttons"},[t("translate",[e._v("Add IP")])],1)],2)}),[],!1,null,null,null).exports},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/input-ip.vue?vue&type=style&index=0&lang=scss&":function(e,s,t){var o=t("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/input-ip.vue?vue&type=style&index=0&lang=scss&");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,t("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("7cd46c96",o,!0,{})}}]);