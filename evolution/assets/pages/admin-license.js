(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[2274],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/_dialogs/license-proof-dialog.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var n={props:{license:{type:Object,required:!0},proof:{type:String,required:!0},url:{type:String,required:!0}}};t.Z=n},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/license.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i,o=n(s("./node_modules/@babel/runtime/regenerator/index.js")),r=n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),l=(n(s("./node_modules/vue/dist/vue.common.js")),s("./src/js/api/endpoint/index.ts")),a=s("./src/js/endpoints/license/index.ts"),d=n(s("./src/js/api/commands/admin/license/verify.js")),c=n(s("./src/js/pages/admin/_dialogs/license-proof-dialog.vue")),u={beforeRouteEnter:(0,l.preload)([function(){return a.getLicense.request()}]),components:{LicenseProofDialog:c.default},data:function(){return{item:{proof:"",checkUrl:""},licenseVerificationData:{}}},computed:{license:a.getLicense.bindData()},methods:{proofLicense:(i=(0,r.default)(o.default.mark((function e(){var t,s,n,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getLicenseProof.request();case 2:if(t=e.sent,!(s=t.error)){e.next=7;break}return s.notify(),e.abrupt("return");case 7:return n=a.getLicenseProof.data,this.item=n,e.next=11,(0,d.default)(this.item.proof);case 11:if(!(i=e.sent).error){e.next=15;break}return this.$notifications.error({title:this.$gettext("License checks cannot be performed"),content:this.$gettext(i.error)}),e.abrupt("return");case 15:this.licenseVerificationData=i,this.$dialog("LICENSE_PROOF_DIALOG").open();case 17:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})}};t.Z=u},"./src/js/api/commands/admin/license/verify.js":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(s("./node_modules/@babel/runtime/regenerator/index.js"));s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js");var o=n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),r=(new(n(s("./node_modules/vue/dist/vue.common.js")).default)).$gettext,l={400:r("Proof is invalid"),404:r("License or License session doesn't exist"),409:r("Proof is expired"),500:r("Unexpected database error"),default:r("Unexpected error"),json:r("Failed to reach returned JSON")},a=function(){var e=(0,o.default)(i.default.mark((function e(t){var s,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://licensing.directadmin.com/verify?proof=".concat(t));case 2:if(!(s=e.sent).ok){e.next=10;break}if(!(n=s.headers.get("content-type"))||!n.includes("application/json")){e.next=7;break}return e.abrupt("return",s.json());case 7:return e.abrupt("return",{error:l.json});case 10:return e.abrupt("return",{error:l[s.status]||l.default});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,o.default)(i.default.mark((function e(t){var s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t);case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=d;t.default=c},"./src/js/endpoints/license/index.ts":function(e,t,s){"use strict";s.r(t),s.d(t,{getLicense:function(){return i},getLicenseProof:function(){return o}});var n=s("./src/js/api/endpoint/index.ts"),i=(0,n.GET)("/license"),o=(0,n.GET)("/license/proof",{statusCodes:{503:"LICENSE_SESSION_NOT_CONNECTED"},errorMessages:{LICENSE_SESSION_NOT_CONNECTED:(0,n.$gettext)("License session not being connected")}})},"./src/js/pages/admin/_dialogs/license-proof-dialog.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return n.X},default:function(){return o}});var n=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/_dialogs/license-proof-dialog.vue?vue&type=script&lang=js&"),i=n.Z,o=(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ui-dialog",{attrs:{id:"LICENSE_PROOF_DIALOG","no-auto-close":"",cancel:!1,theme:"primary",size:"normal"}},[s("template",{slot:"title"},[s("translate",[e._v("License Proof")])],1),e._v(" "),s("template",{slot:"content"},[s("table",{staticClass:"table-elem"},[s("tbody",[s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Name"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.name)+"\n                    ")])]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("License ID (LID)"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.lid)+"\n                        "),e.license.trial?s("ui-badge",{attrs:{theme:"danger",size:"small",label:"Trial"}}):e._e()],1)]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("License owner (UID)"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.uid)+"\n                    ")])]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Type"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.type)+"\n                    ")])]),e._v(" "),e.license.expiry?s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Valid until"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e._f("date")(new Date(e.license.expiry)))+"\n                    ")])]):e._e(),e._v(" "),e.license.limits?s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Accounts"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.limits.maxUsers||e.$gettext("Unlimited"))+"\n                    ")])]):e._e(),e._v(" "),e.license.limits?s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Resellers"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.limits.maxAdminsOrResellers||e.$gettext("Unlimited"))+"\n                    ")])]):e._e(),e._v(" "),e.license.limits?s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Domains"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.limits.maxDomains||e.$gettext("Unlimited"))+"\n                    ")])]):e._e(),e._v(" "),e.license.limits?s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("VPS Only"))}}),e._v(" "),s("td",[s("ui-badge",{attrs:{theme:e.license.limits.onlyVPS?"safe":"primary",size:"big"}},[e._v("\n                            "+e._s(e.license.limits.onlyVPS?e.$gettext("Yes"):e.$gettext("No"))+"\n                        ")])],1)]):e._e(),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Pro Pack"))}}),e._v(" "),s("td",[s("ui-badge",{attrs:{theme:e.license.propack?"safe":"primary",size:"big"}},[e._v("\n                            "+e._s(e.license.propack?e.$gettext("Yes"):e.$gettext("No"))+"\n                        ")])],1)]),e._v(" "),e.license.limits?s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Legacy"))}}),e._v(" "),s("td",[s("ui-badge",{attrs:{theme:e.license.limits.legacy?"danger":"safe",size:"big"}},[e._v("                    \n                            "+e._s(e.license.limits.legacy?e.$gettext("Yes"):e.$gettext("No"))+"\n                        ")])],1)]):e._e(),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Commit"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.commit)+"\n                    ")])]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("IP"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.ip)+"\n                    ")])]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Machine ID"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.machineUUID)+"\n                    ")])]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("OS kernel info"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.osInfo)+"\n                    ")])]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Version"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.version)+"\n                    ")])]),e._v(" "),s("tr",{staticStyle:{"word-break":"break-word"}},[s("td",{staticClass:"txt:bold"},[s("translate",[e._v("\n                            Proof value\n                        ")]),e._v(" "),s("ui-link",{attrs:{href:e.url,target:"_blank",title:e.$gettext("Check url")}},[s("ui-icon",{attrs:{id:"refreshed-link",theme:"primary",size:16}})],1)],1),e._v(" "),s("td",[e._v("                            \n                        "+e._s(e.proof)+"\n                    ")])])])])])],2)}),[],!1,null,null,null).exports},"./src/js/pages/admin/license.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return n.X},default:function(){return d}});var n=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/license.vue?vue&type=script&lang=js&"),i=n.Z,o=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),r=s("./src/js/pages/admin/license.vue?vue&type=custom&index=0&blockType=route"),l=s.n(r),a=(0,o.Z)(i,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page",[s("app-page-section",[s("table",{staticClass:"table-elem"},[s("tbody",[s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Name"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.name)+"\n                    ")])]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("License ID (LID)"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.lid)+"\n                        "),e.license.limits.trial?s("ui-badge",{attrs:{theme:"danger",size:"small",label:"Trial"}}):e._e()],1)]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("License owner (UID)"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.uid)+"\n                    ")])]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Type"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.type)+"\n                    ")])]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Valid until"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e._f("date")(new Date(e.license.expires)))+"\n                    ")])]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Accounts"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.usage.users)+" / "+e._s(e.license.limits.maxUsers||e.$gettext("Unlimited"))+"\n                    ")])]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Resellers"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.usage.adminsOrResellers)+" / "+e._s(e.license.limits.maxAdminsOrResellers||e.$gettext("Unlimited"))+"\n                    ")])]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Domains"))}}),e._v(" "),s("td",[e._v("\n                        "+e._s(e.license.usage.domains)+" / "+e._s(e.license.limits.maxDomains||e.$gettext("Unlimited"))+"\n                    ")])]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("VPS Only"))}}),e._v(" "),s("td",[s("ui-badge",{attrs:{theme:e.license.limits.onlyVPS?"safe":"primary",size:"big"}},[e._v("\n                            "+e._s(e.license.limits.onlyVPS?e.$gettext("Yes"):e.$gettext("No"))+"\n                        ")])],1)]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Pro Pack"))}}),e._v(" "),s("td",[s("ui-badge",{attrs:{theme:e.license.limits.proPack?"safe":"primary",size:"big"}},[e._v("\n                            "+e._s(e.license.limits.proPack?e.$gettext("Yes"):e.$gettext("No"))+"\n                        ")])],1)]),e._v(" "),s("tr",[s("td",{staticClass:"txt:bold",domProps:{textContent:e._s(e.$gettext("Codebase"))}}),e._v(" "),s("td",[s("ui-badge",{attrs:{theme:e.license.limits.legacy?"danger":"safe",size:"big"}},[e._v("                    \n                            "+e._s(e.license.limits.legacy?e.$gettext("DirectAdmin legacy"):e.$gettext("DirectAdmin"))+"\n                        ")])],1)])])]),e._v(" "),s("template",{slot:"footer:buttons"},[s("ui-button",{attrs:{theme:"safe"},on:{click:e.proofLicense}},[e._v("\n                "+e._s(e.$gettext("Proof License"))+"\n            ")])],1),e._v(" "),s("license-proof-dialog",{attrs:{license:e.licenseVerificationData,proof:e.item.proof,url:e.item.checkUrl}})],2)],1)}),[],!1,null,null,null);"function"==typeof l()&&l()(a);var d=a.exports},"./src/js/pages/admin/license.vue?vue&type=custom&index=0&blockType=route":function(){}}]);