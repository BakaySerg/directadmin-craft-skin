(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[7546],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/_dialogs/composer-action-dialog.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var r={props:{dir:{type:String,required:!0}},data:function(){return{mode:"prod"}}};t.Z=r},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/_dialogs/composer-install-dialog.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js");var r=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s,n=r(o("./node_modules/@babel/runtime/regenerator/index.js")),i=r(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=o("./src/js/endpoints/composer/index.ts"),l={extends:r(o("./src/js/pages/user/composer/_dialogs/composer-action-dialog.vue")).default,beforeCreate:function(){this.id="COMPOSER_INSTALL_DIALOG",this.title=this.$gettext("Install Composer"),this.actionLabel=this.$gettext("Install"),this.docs="https://getcomposer.org/doc/03-cli.md#install-i"},methods:{submit:(s=(0,i.default)(n.default.mark((function e(t,o){var r,s;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.installComposer.request({domain:this.$domain,dir:t,mode:o});case 2:r=e.sent,(s=r.error)?this.$emit("error",s,"Error installing composer packages"):(this.$notifications.success({title:this.$gettext("Composer Install"),content:this.$gettext("Install completed")}),this.$dialog("COMPOSER_INSTALL_DIALOG").close());case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})}};t.Z=l},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/_dialogs/composer-update-dialog.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js");var r=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s,n=r(o("./node_modules/@babel/runtime/regenerator/index.js")),i=r(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=o("./src/js/endpoints/composer/index.ts"),l={extends:r(o("./src/js/pages/user/composer/_dialogs/composer-action-dialog.vue")).default,beforeCreate:function(){this.id="COMPOSER_UPDATE_DIALOG",this.title=this.$gettext("Update Composer"),this.actionLabel=this.$gettext("Update"),this.docs="https://getcomposer.org/doc/03-cli.md#update-u"},methods:{submit:(s=(0,i.default)(n.default.mark((function e(t,o){var r,s;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.updateComposer.request({dir:t,mode:o});case 2:r=e.sent,(s=r.error)?this.$emit("error",s,"Error updating composer packages"):(this.$notifications.success({title:this.$gettext("Composer Update"),content:this.$gettext("Update completed")}),this.$dialog("COMPOSER_UPDATE_DIALOG").close());case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})}};t.Z=l},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/_dialogs/error-dialog.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var r={props:{err:{type:String,required:!0},header:{type:String,required:!0}}};t.Z=r},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/index.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js");var r=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s=r(o("./node_modules/@babel/runtime/regenerator/index.js")),n=r(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"));o("./node_modules/core-js/modules/es.array.iterator.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/web.dom-collections.iterator.js");var i,a=o("./src/js/endpoints/composer/index.ts"),l=r(o("./src/js/pages/user/composer/_dialogs/composer-install-dialog.vue")),d=r(o("./src/js/pages/user/composer/_dialogs/composer-update-dialog.vue")),u=o("./src/js/api/endpoint/index.ts"),c=r(o("./src/js/pages/user/composer/_dialogs/error-dialog.vue")),p={beforeRouteEnter:(0,u.preload)([function(){return a.getComposer.request()}]),components:{ComposerInstallDialog:l.default,ComposerUpdateDialog:d.default,ErrorDialog:c.default},data:function(){return{loading:{scan:!1,refresh:!1},currentItem:null,error:"",errorHeader:""}},computed:{entries:a.getComposer.bindData((function(e){return a.helpers.processEntries(e.entries)}))},watch:{$domain:function(){a.getComposer.request()}},methods:{scan:(i=(0,n.default)(s.default.mark((function e(){var t,o;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading.scan=!0,e.next=3,a.scanComposer.request();case 3:t=e.sent,(o=t.error)&&(this.displayError(o,"Error scanning composer.json files"),this.$dialog("COMPOSER_ERROR_DIALOG").open()),this.loading.scan=!1,a.getComposer.request();case 8:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)}),openDialog:function(e,t){var o=this;this.currentItem=t,this.$nextTick((function(){o.$dialog(e).open()}))},displayError:function(e,t){this.error=e.message,this.errorHeader=t,this.$dialog("COMPOSER_ERROR_DIALOG").open()}}};t.Z=p},"./src/js/endpoints/composer/index.ts":function(e,t,o){"use strict";o.r(t),o.d(t,{getComposer:function(){return l},getComposerDetails:function(){return p},helpers:function(){return r},installComposer:function(){return d},scanComposer:function(){return u},updateComposer:function(){return c}});var r={};o.r(r),o.d(r,{processEntries:function(){return a}});var s=o("./src/js/api/endpoint/index.ts"),n=o("./src/js/store/index.js"),i=function(){return i=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var s in t=arguments[o])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},i.apply(this,arguments)},a=function(e){return void 0===e&&(e=[]),e.map((function(e){var t="."===e.dir?"domains/".concat(n.Store.state.app.domain):e.dir;return i(i({},e),{pretty_dir:t,path:"".concat(t,"/composer.json")})}))},l=(0,s.GET)("/composer/:domain"),d=(0,s.POST)("/composer/:domain/install",{statusCodes:{520:"COMPOSER_CMD_ERROR",409:"COMPOSER_NOT_FOUND"},errorMessages:{COMPOSER_CMD_ERROR:(0,s.$gettext)("%{ message }"),COMPOSER_NOT_FOUND:(0,s.$gettext)("composer.json not found.")}}),u=(0,s.POST)("/composer/:domain/scan"),c=(0,s.POST)("/composer/:domain/update",{statusCodes:{520:"COMPOSER_CMD_ERROR",409:"COMPOSER_NOT_FOUND"},errorMessages:{COMPOSER_CMD_ERROR:(0,s.$gettext)("%{ message }"),COMPOSER_NOT_FOUND:(0,s.$gettext)("composer.json not found.")}}),p=(0,s.GET)("/composer/:domain/:dir")},"./src/js/pages/user/composer/_dialogs/composer-action-dialog.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return r.X},default:function(){return n}});var r=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/_dialogs/composer-action-dialog.vue?vue&type=script&lang=js&"),s=r.Z,n=(0,o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(s,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ui-dialog",{attrs:{id:e.id,"no-auto-close":"",cancel:!1}},[o("template",{slot:"title"},[e._v("\n        "+e._s(e.title)+"\n        "),o("ui-tooltip",{attrs:{theme:"safe"}},[o("ui-link",{attrs:{slot:"trigger",href:e.docs,target:"_blank"},slot:"trigger"},[o("ui-icon",{directives:[{name:"margin",rawName:"v-margin:left",value:.5,expression:"0.5",arg:"left"}],attrs:{id:"question",color:"#fff"}})],1),e._v(" "),o("translate",[e._v("View command description")])],1)],1),e._v(" "),o("div",{attrs:{slot:"content"},slot:"content"},[o("ui-form-element",{attrs:{vertical:""}},[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Environment\n            ")]),e._v(" "),o("input-select",{attrs:{slot:"content",options:{prod:e.$gettext("Production"),dev:e.$gettext("Development")}},slot:"content",model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}})],1),e._v(" "),o("div",{directives:[{name:"padding",rawName:"v-padding:left",value:1.5,expression:"1.5",arg:"left"}],staticClass:"c:txt:muted",staticStyle:{"font-size":"95%","letter-spacing":"0.5px"}},[e._v("\n            "+e._s("prod"===e.mode?e.$gettext("Skips packages listed in require-dev."):e.$gettext("Includes additional dependencies for development."))+"\n        ")])],1),e._v(" "),e._e(),e._v(" "),o("ui-button",{attrs:{slot:"buttons",theme:"primary"},domProps:{textContent:e._s(e.actionLabel)},on:{click:function(t){return e.submit(e.dir,e.mode)}},slot:"buttons"})],2)}),[],!1,null,null,null).exports},"./src/js/pages/user/composer/_dialogs/composer-install-dialog.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return r.X},default:function(){return n}});var r=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/_dialogs/composer-install-dialog.vue?vue&type=script&lang=js&"),s=r.Z,n=(0,o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(s,undefined,undefined,!1,null,null,null).exports},"./src/js/pages/user/composer/_dialogs/composer-update-dialog.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return r.X},default:function(){return n}});var r=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/_dialogs/composer-update-dialog.vue?vue&type=script&lang=js&"),s=r.Z,n=(0,o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(s,undefined,undefined,!1,null,null,null).exports},"./src/js/pages/user/composer/_dialogs/error-dialog.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return r.X},default:function(){return n}});var r=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/_dialogs/error-dialog.vue?vue&type=script&lang=js&"),s=r.Z,n=(0,o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(s,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ui-dialog",{attrs:{id:"COMPOSER_ERROR_DIALOG","no-auto-close":"",cancel:!1,theme:"danger"}},[o("template",{slot:"title"},[o("translate",[e._v("Composer Error")])],1),e._v(" "),o("template",{slot:"content:header"},[o("translate",[e._v(e._s(e.header))])],1),e._v(" "),o("app-page-section",{attrs:{slot:"content"},slot:"content"},[o("translate",[e._v(e._s(e.err))])],1)],2)}),[],!1,null,null,null).exports},"./src/js/pages/user/composer/index.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return r.X},default:function(){return d}});var r=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/composer/index.vue?vue&type=script&lang=js&"),s=r.Z,n=o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),i=o("./src/js/pages/user/composer/index.vue?vue&type=custom&index=0&blockType=route"),a=o.n(i),l=(0,n.Z)(s,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("app-page",{attrs:{actions:[{handler:e.scan,label:e.$gettext("Scan"),icon:"#reload",loading:e.loading.scan}]}},[o("ui-button",{attrs:{slot:"header:buttons",theme:e.loading.scan?"light":"primary"},on:{click:e.scan},slot:"header:buttons"},[e.loading.scan?o("ui-loader-icon",{directives:[{name:"margin",rawName:"v-margin:right",value:.5,expression:"0.5",arg:"right"}],attrs:{size:16}}):e._e(),e._v(" "),o("translate",[e._v("Scan")])],1),e._v(" "),o("app-page-section",[o("ui-r-table",e._b({ref:"table",attrs:{"disable-pagination":"",loading:e.loading.refresh},scopedSlots:e._u([{key:"col:dir",fn:function(t){var r=t.item;return[o("ui-link",{attrs:{disabled:!r.valid,name:"user/composer/info",params:{dir:encodeURIComponent(r.dir)}}},[o("ui-icon",{directives:[{name:"margin",rawName:"v-margin:right",value:1,expression:"1",arg:"right"}],attrs:{id:"refreshed-link",theme:"primary",size:16}}),e._v("\n                    "+e._s(r.pretty_dir)+"\n                ")],1),e._v(" "),r.valid?e._e():o("ui-badge",{attrs:{theme:"danger",title:e.$gettext("composer.json is not valid")}})]}},{key:"row:actions",fn:function(t){var r=t.item;return r.valid?o("ui-actions",{},[o("ui-link",{attrs:{href:"/HTM_FILE_MANAGER_EDIT?path=/"+r.path,target:"_blank"}},[o("translate",[e._v("Edit File")])],1),e._v(" "),o("ui-link",{on:{click:function(t){return e.openDialog("COMPOSER_INSTALL_DIALOG",r)}}},[o("translate",[e._v("Install")])],1),e._v(" "),o("ui-link",{on:{click:function(t){return e.openDialog("COMPOSER_UPDATE_DIALOG",r)}}},[o("translate",[e._v("Update")])],1)],1):e._e()}}],null,!0)},"ui-r-table",{rows:e.entries,columns:[{id:"dir",label:e.$gettext("Dir")}],verticalLayout:e.$_Client.isPhone,isCheckable:!1},!1))],1),e._v(" "),e.currentItem?[o("composer-install-dialog",{attrs:{dir:e.currentItem.dir},on:{error:e.displayError}}),e._v(" "),o("composer-update-dialog",{attrs:{dir:e.currentItem.dir},on:{error:e.displayError}})]:e._e(),e._v(" "),o("error-dialog",{attrs:{err:e.error,header:e.errorHeader}})],2)}),[],!1,null,null,null);"function"==typeof a()&&a()(l);var d=l.exports},"./src/js/pages/user/composer/index.vue?vue&type=custom&index=0&blockType=route":function(){}}]);