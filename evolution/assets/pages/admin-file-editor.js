(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[486],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/inputs/input-text-editor.vue?vue&type=script&lang=js&":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(s,"X",{value:!0}),s.Z=void 0,t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js");var o=t("./node_modules/vue-codemirror/dist/vue-codemirror.js");t("./node_modules/codemirror/mode/javascript/javascript.js"),t("./node_modules/codemirror/mode/htmlmixed/htmlmixed.js"),t("./node_modules/codemirror/mode/css/css.js"),t("./node_modules/codemirror/mode/php/php.js"),t("./node_modules/codemirror/mode/perl/perl.js"),t("./node_modules/codemirror/mode/properties/properties.js"),t("./node_modules/codemirror/mode/xml/xml.js"),t("./node_modules/codemirror/mode/sql/sql.js");t("./src/js/modules/utils/index.js");var l,d=t("./src/js/vue/mixins/local/inputValidation.js"),r=t("./src/js/vue/helpers.js"),n=["text","html","javascript","css","php","perl","ini","xml","sql","mysql","json"],u={components:{codemirror:o.codemirror},mixins:[d.$inputValidation],validate:"value",props:{value:{type:String,required:!0,default:""},readOnly:{type:Boolean,required:!1,default:!1},mode:{type:String,required:!1,default:"text",validator:(l=n,function(e){return l.includes(e)})},disableModes:{type:Boolean,required:!1,default:!1},disableThemes:{type:Boolean,required:!1,default:!1}},data:function(){return{editorMode:this.mode}},staticData:{modes:n,themes:["default","base16-light","base16-dark","monokai","solarized"]},computed:{theme:(0,r.options)("code-editor/theme"),cmMode:function(){switch(this.editorMode){case"json":return{name:"javascript",json:!0};case"mysql":return"sql";case"ini":return"properties";default:return this.editorMode}}}};s.Z=u},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/_dialogs/root-auth-dialog.vue?vue&type=script&lang=js&":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.object.define-property.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"X",{value:!0}),s.Z=void 0;var l,d=o(t("./node_modules/@babel/runtime/regenerator/index.js")),r=o(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),n=t("./src/js/api/commands/admin/file-editor.js"),u={props:{file:String,text:String},data:function(){return{rootpass:""}},methods:{auth:(l=(0,r.default)(d.default.mark((function e(){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n.authenticate)({file:this.file,text:this.text,rootpass:this.rootpass});case 2:e.sent&&(this.$emit("confirmSave"),this.$dialog("ROOT_AUTH_DIALOG").close());case 4:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})}};s.Z=u},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/file-editor.vue?vue&type=script&lang=js&":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.weak-map.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),l=t("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(s,"X",{value:!0}),s.Z=void 0;var d=o(t("./node_modules/@babel/runtime/regenerator/index.js")),r=o(t("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),n=function(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=a(s);if(t&&t.has(e))return t.get(e);var o={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var n=d?Object.getOwnPropertyDescriptor(e,r):null;n&&(n.get||n.set)?Object.defineProperty(o,r,n):o[r]=e[r]}o.default=e,t&&t.set(e,o);return o}(t("./src/js/api/commands/admin/file-editor.js")),u=o(t("./src/js/components/local/inputs/input-text-editor.vue")),i=o(t("./src/js/pages/admin/_dialogs/root-auth-dialog.vue"));function a(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:s})(e)}var c,m,p={preload:n.getFile,components:{RootAuthDialog:i.default,InputTextEditor:u.default},beforeRouteUpdate:(m=(0,r.default)(d.default.mark((function e(s,t,o){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getFile(s.query);case 2:this.text=this.data,this.$dialog("ROOT_AUTH_DIALOG").close(),o();case 5:case"end":return e.stop()}}),e,this)}))),function(e,s,t){return m.apply(this,arguments)}),data:function(){return{text:""}},api:[{command:n.getFile,bind:"data"}],computed:{data:function(){return this.$api.data.data},files:function(){return this.$api.data.files},auth:function(){return this.$api.data.auth},file:function(){return this.$route.query.file}},mounted:function(){this.text=this.data},methods:{requestAuthAndSave:function(){this.auth?this.$dialog("ROOT_AUTH_DIALOG").open():this.save()},save:(c=(0,r.default)(d.default.mark((function e(){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.saveFile({file:this.file,text:this.text});case 2:e.sent&&this.$router.push({name:"admin/file-editor"});case 4:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})}};s.Z=p},"./src/js/api/commands/admin/file-editor.js":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.object.keys.js"),t("./node_modules/core-js/modules/es.symbol.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),t("./node_modules/core-js/modules/es.object.define-properties.js"),t("./node_modules/core-js/modules/es.object.define-property.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.saveFile=s.getFile=s.authenticate=void 0,t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.promise.js");var l=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),d=o(t("./src/js/api/command/index.js"));function r(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);s&&(o=o.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),t.push.apply(t,o)}return t}function n(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?r(Object(t),!0).forEach((function(s){(0,l.default)(e,s,t[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}))}return e}var u="/CMD_ADMIN_FILE_EDITOR",i=d.default.get({id:"FILE_DATA",url:u,schema:{file:d.default.OPTIONAL_STRING},after:function(e){return e.flow(e.moveProp({FILEDATA:"data",FILES:"files",READONLY:"readOnly",REQUIRE_ROOT_AUTH:"auth"}),e.mapProps({auth:e.convert.toAppBoolean,readOnly:e.convert.toAppBoolean,files:e.flow(e.mapValues((function(e,s){return n(n({},e),{},{file:s})})),e.toArray,e.mapArrayProps({exists:e.isEqual("1"),size:e.convert.toAppNumber})),data:e.convert.toAppText}))}});s.getFile=i;var a=d.default.post({url:u,params:{action:"save"},schema:{file:d.default.REQUIRED_STRING,text:d.default.REQUIRED_STRING}});s.saveFile=a;var c=d.default.post({url:u,params:{action:"save",authenticate:!0},schema:{rootpass:d.default.REQUIRED_STRING,file:d.default.REQUIRED_STRING,text:d.default.REQUIRED_STRING}});s.authenticate=c},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/inputs/input-text-editor.vue?vue&type=style&index=0&lang=scss&":function(){},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/file-editor.vue?vue&type=style&index=0&id=2be97300&lang=scss&scoped=true&":function(){},"./src/js/components/local/inputs/input-text-editor.vue":function(e,s,t){"use strict";t.r(s),t.d(s,{__esModule:function(){return o.X},default:function(){return d}});var o=t("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/inputs/input-text-editor.vue?vue&type=script&lang=js&"),l=o.Z,d=(t("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/inputs/input-text-editor.vue?vue&type=style&index=0&lang=scss&"),(0,t("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(l,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"input-text-editor"},[e.$slots.header?t("div",{staticClass:"input-text-editor-header"},[e._t("header")],2):e._e(),e._v(" "),t("codemirror",{attrs:{value:e.value,options:{lineNumbers:!0,readOnly:e.readOnly,mode:e.cmMode,theme:e.theme}},on:{input:function(s){return e.$emit("input",s)}}}),e._v(" "),e.disableModes&&e.disableThemes?e._e():t("div",{staticClass:"input-text-editor-bottom-bar"},[e.disableModes?e._e():t("input-select",{staticClass:"input-text-editor-bottom-bar-select",attrs:{options:e.modes},model:{value:e.editorMode,callback:function(s){e.editorMode=s},expression:"editorMode"}},[t("ui-button",{attrs:{slot:"additions:left",disabled:""},slot:"additions:left"},[t("translate",[e._v("Mode: ")])],1)],1),e._v(" "),e.disableThemes?e._e():t("input-select",{staticClass:"input-text-editor-bottom-bar-select --wide",attrs:{options:e.themes},model:{value:e.theme,callback:function(s){e.theme=s},expression:"theme"}},[t("ui-button",{attrs:{slot:"additions:left",disabled:""},slot:"additions:left"},[t("translate",[e._v("Theme: ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports)},"./src/js/pages/admin/_dialogs/root-auth-dialog.vue":function(e,s,t){"use strict";t.r(s),t.d(s,{__esModule:function(){return o.X},default:function(){return d}});var o=t("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/_dialogs/root-auth-dialog.vue?vue&type=script&lang=js&"),l=o.Z,d=(0,t("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(l,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ui-dialog",{attrs:{id:"ROOT_AUTH_DIALOG",theme:"danger","no-close-btn":"","no-close-icon":"","no-auto-close":""},on:{"dialog:close":function(s){e.rootpass=""}}},[t("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        Authenticate\n    ")]),e._v(" "),t("ui-form-element",{attrs:{slot:"content",vertical:"",group:"rootAuth",validators:{required:!0}},slot:"content"},[t("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            This file is tagged as secure. Root password required to edit\n        ")]),e._v(" "),t("input-password",{attrs:{slot:"content",autocomplete:!1},slot:"content",model:{value:e.rootpass,callback:function(s){e.rootpass=s},expression:"rootpass"}})],1),e._v(" "),t("ui-button",{attrs:{slot:"buttons",theme:"danger","validate-group":"rootAuth"},on:{click:e.auth},slot:"buttons"},[t("translate",[e._v("Authenticate")])],1),e._v(" "),t("ui-button",{attrs:{slot:"buttons",theme:"neutral"},on:{click:function(s){return e.$emit("close")}},slot:"buttons"},[t("translate",[e._v("Back")])],1)],1)}),[],!1,null,null,null).exports},"./src/js/pages/admin/file-editor.vue":function(e,s,t){"use strict";t.r(s),t.d(s,{__esModule:function(){return o.X},default:function(){return i}});var o=t("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/file-editor.vue?vue&type=script&lang=js&"),l=o.Z,d=(t("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/file-editor.vue?vue&type=style&index=0&id=2be97300&lang=scss&scoped=true&"),t("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),r=t("./src/js/pages/admin/file-editor.vue?vue&type=custom&index=0&blockType=route"),n=t.n(r),u=(0,d.Z)(l,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("app-page",{attrs:{id:"file-editor"}},[e.file?t("app-page-section",[t("input-text-editor",{model:{value:e.text,callback:function(s){e.text=s},expression:"text"}},[t("template",{slot:"header"},[e._v("\n                "+e._s(e.file)+"\n            ")])],2)],1):t("app-page-section",[t("ui-r-table",e._b({attrs:{"disable-pagination":""},scopedSlots:e._u([{key:"col:file",fn:function(s){var o=s.file;return[t("ui-link",{attrs:{name:"admin/file-editor",query:{file:o}}},[e._v("\n                    "+e._s(o)+"\n                ")])]}},{key:"col:size",fn:function(s){var o=s.size;return[s.exists?[e._v("\n                    "+e._s(e._f("humanReadableSize")(o))+"\n                ")]:t("translate",[e._v("\n                    Does not exist\n                ")])]}}],null,!1,4190044763)},"ui-r-table",{rows:e.files,columns:[{id:"file",label:e.$gettext("File"),grow:!0,editable:!1},{id:"size",label:e.$gettext("Size")}],isCheckable:!1,verticalLayout:e.$_Client.isPhone},!1))],1),e._v(" "),e.file?t("ui-button",{attrs:{slot:"footer:buttons",theme:"safe"},on:{click:e.requestAuthAndSave},slot:"footer:buttons"},[t("translate",[e._v("Save")])],1):e._e(),e._v(" "),t("root-auth-dialog",e._b({on:{confirmSave:e.save,close:function(s){return e.$router.push({name:"admin/file-editor",query:{}})}}},"root-auth-dialog",{file:e.file,text:e.text},!1))],1)}),[],!1,null,"2be97300",null);"function"==typeof n()&&n()(u);var i=u.exports},"./src/js/pages/admin/file-editor.vue?vue&type=custom&index=0&blockType=route":function(){},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/inputs/input-text-editor.vue?vue&type=style&index=0&lang=scss&":function(e,s,t){var o=t("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/inputs/input-text-editor.vue?vue&type=style&index=0&lang=scss&");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,t("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("7a6c41ca",o,!0,{})},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/file-editor.vue?vue&type=style&index=0&id=2be97300&lang=scss&scoped=true&":function(e,s,t){var o=t("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/file-editor.vue?vue&type=style&index=0&id=2be97300&lang=scss&scoped=true&");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,t("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("d0da0e0e",o,!0,{})}}]);