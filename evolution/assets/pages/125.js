(window.webpackJsonp=window.webpackJsonp||[]).push([[125],{1868:function(e,t,a){"use strict";a.r(t);var n=a(4066),s=a(2795);for(var r in s)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(r);a(3792);var o=a(0),u=a(3794),i=a.n(u),l=Object(o.a)(s.default,n.a,n.b,!1,null,"7d37c9be",null);"function"==typeof i.a&&i()(l),t.default=l.exports},1930:function(e,t,a){"use strict";a(7),a(10),a(6),a(8),a(11),a(16),a(14),a(23),a(25),a(18);var n=a(1),s=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.getDomainLog=t.updateDiskUsage=t.licenseVerify=t.setUserAwstats=t.setMultiple=t.setUserSkin=t.setUserEmail=t.setUserName=t.setUserStats=t.unsetPublicStats=t.setPublicStats=t.getWebalizerReport=t.getStatsStatus=t.getStats=void 0;var r=n(a(19)),o=n(a(2));a(5),a(12),a(50),a(27),a(57),a(24),a(21),a(61),a(84);var u=n(a(78)),i=a(709),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=r?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(9));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p=u.default.get({id:"USER_STATS",url:"/CMD_USER_STATS",params:{bytes:!0},domain:!0,pagination:!0,after:function(e){return e.flow(e.project({domains:"domains",stats:"stats","addons.webalizer":"webalizer","addons.awstats":"awstats",limitNotice:"stats",customItems:"custom_items"}),e.mapProps({stats:e.flow(e.deleteProp("info"),e.toArray,e.filter((function(e){return!!e.usage})),e.transformObject((function(e){return(0,o.default)({},e.setting,{usage:e.usage||void 0,limit:e.max_usage||void 0})})),e.mapValues((function(e){return["ON","OFF"].includes(e.usage)?{usage:"ON"===e.usage}:"object"===(0,r.default)(e.usage)?f(f({},e),{},{usage:Object.values(e.usage)}):e})),e.mapValues((function(t){return t.limit?e.toLimitedUsage(e.convert.toAppNumber)(t):t.usage})),e.mapProps({awstats:e.flow(e.toSelect,e.getProp("value"))})),domains:e.toTable(e.mapArray(e.flow((function(e){var t=e.subdomains||e.settings.subdomains||[];return void 0!==e.settings.subdomains&&delete e.settings.subdomains,e.subdomains=t,e}),e.mapProps({bandwidth:e.mapProp("usage",e.convert.toAppNumber),quota:e.convert.toAppNumber,log_usage:e.convert.toAppNumber,nsubdomains:e.convert.toAppNumber,suspended:e.convert.toAppBoolean,settings:e.mapValues(e.convert.toAppBoolean)})))),addons:e.flow(e.toArray,e.mapArray(e.isEqual("1")),e.reduce((function(e,t){return e||t}),!1)),limitNotice:function(t){var a=Object.values(t).find((function(e){return"send_usage_message"===e.setting}));return!!a&&{defaultValue:a.max_usage,value:e.toSelect(a.usage).value}},customItems:l.pipe(l.defaultTo({}),l.map(i.fromObject),l.filter((function(e){return e.value||"checkbox"===e.type})),l.values)}))}});t.getStats=p;var m=u.default.get({id:"STATS_STATUS",url:"/CMD_USER_STATS",domain:!0,after:function(e){return e.flow(e.project({awstats:"awstats",awstatsOptions:"domain_awstats",webalizer:"webalizer"}),e.mapProp("awstats",(function(e){return"0"!==e})),e.mapProp("webalizer",e.isEqual("1")))}});t.getStatsStatus=m;var v=u.default.get({id:"WEBALIZER_REPORT",url:"/CMD_FILE_MANAGER",response:!1,params:{action:"exists"},schema:{domain:u.default.DOMAIN,subdomain:u.default.OPTIONAL_STRING},before:function(e){var t=e.domain,a=e.subdomain;return{path:a?"/domains/".concat(t,"/stats/").concat(a,"/index.html"):"/domains/".concat(t,"/stats/index.html"),domain:null,subdomain:null}},after:function(){return function(e){return"1"===e.exists}}});t.getWebalizerReport=v;var g=u.default.select({url:"/CMD_PUBLIC_STATS",params:{action:"public",json:!0},domain:!0,schema:{path:u.default.REQUIRED_STRING}});t.setPublicStats=g;var _=u.default.select({url:"/CMD_PUBLIC_STATS",params:{action:"public",json:!0,unset:!0},schema:{path:u.default.REQUIRED_STRING}});t.unsetPublicStats=_;var b=u.default.post({url:"/CMD_CHANGE_INFO",params:{json:!0},domain:!0,schema:{evalue:u.default.OPTIONAL_STRING,nvalue:u.default.OPTIONAL_STRING,lvalue:u.default.OPTIONAL_STRING}});t.setUserStats=b;var O=u.default.post({url:"/CMD_CHANGE_INFO",domain:!0}),w=O.extend({params:{name:!0},schema:{nvalue:u.default.REQUIRED_STRING}});t.setUserName=w;var S=O.extend({params:{email:!0},schema:{evalue:u.default.REQUIRED_STRING}});t.setUserEmail=S;var h=O.extend({params:{skin:!0},schema:{skinvalue:u.default.REQUIRED_STRING}});t.setUserSkin=h;var N=O.extend({params:{set_multiple:!0,send_usage_message:!0},schema:{nvalue:u.default.OPTIONAL_STRING,evalue:u.default.OPTIONAL_STRING,skinvalue:u.default.OPTIONAL_STRING,lvalue:u.default.OPTIONAL_STRING,awstatsvalue:u.default.OPTIONAL_STRING,zvalue:u.default.OPTIONAL_STRING},before:function(e){return{name:!!e.nvalue||null,email:!!e.evalue||null,skin:!!e.skinvalue||null,language:!!e.lvalue||null,awstats:!!e.awstatsvalue||null,zoom:!!e.zvalue||null}}});t.setMultiple=N;var y=O.extend({params:{awstats:!0},schema:{awstatsvalue:u.default.REQUIRED_STRING}});t.setUserAwstats=y;var I=u.default.get({id:"LICENSE_VERIFY",url:"/CMD_LICENSE_VERIFY",notifySuccess:!0});t.licenseVerify=I;var T=u.default.post({url:"/CMD_CHANGE_INFO",params:{update:!0}});t.updateDiskUsage=T;var R=u.default.get({id:"DOMAIN_LOG",url:"/CMD_SHOW_LOG",params:{json:null},accepts:"text/plain",domain:!0,schema:{type:u.default.REQUIRED_STRING},after:function(e){return e.flow((function(e){return e.split("\n")}),(function(e){return e.slice(0,-1)}))}});t.getDomainLog=R},2795:function(e,t,a){"use strict";a.r(t);var n=a(2796),s=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t.default=s.a},2796:function(e,t,a){"use strict";var n=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(24),a(55);var s=a(1930),r={components:{InputTextEditor:n(a(1935)).default},preload:function(e){var t=e.domain,a=e.type;return(0,s.getDomainLog)({domain:t,type:"usage"===a?"log":"error",lines:"100"})},api:[{command:s.getDomainLog,bind:"log"}],props:{domain:{type:String,required:!0},type:{type:String,required:!0}},data:function(){return{lines:100,show:"lines"}},computed:{rawLink:function(){var e="usage"===this.type?"log":"error",t="/CMD_SHOW_LOG?domain=".concat(this.domain,"&type=").concat(e);return"lines"===this.show?"".concat(t,"&lines=").concat(this.lines):t},log:function(){return this.$api.log.join("\n")}},methods:{loadLog:function(){var e="usage"===this.type?"log":"error";(0,s.getDomainLog)({domain:this.domain,type:e,lines:"lines"===this.show?this.lines:null})}}};t.default=r},3156:function(e,t,a){var n=a(3793);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a(4).default)("6d66cf2f",n,!0,{})},3792:function(e,t,a){"use strict";a(3156)},3793:function(e,t,a){},3794:function(e,t){},4066:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return s}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-page",{attrs:{id:"domain-log"}},[a("template",{slot:"page:title"},["usage"===e.type?a("translate",{attrs:{"translate-params":{domain:e.domain}}},[e._v("\n            View Usage Log for %{ domain }\n        ")]):a("translate",{attrs:{"translate-params":{domain:e.domain}}},[e._v("\n            View Error Log for %{ domain }\n        ")])],1),e._v(" "),a("app-page-section",[a("div",{directives:[{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}],staticClass:"filters"},[a("ui-form-element",{attrs:{underline:"lines"===e.show}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    Show\n                ")]),e._v(" "),a("div",{directives:[{name:"gutter",rawName:"v-gutter",value:[0,2],expression:"[0, 2]"}],attrs:{slot:"content"},slot:"content"},[a("input-radio",{attrs:{value:"full"},on:{change:e.loadLog},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("translate",[e._v("Full Log")])],1),e._v(" "),a("input-radio",{attrs:{value:"lines"},on:{change:e.loadLog},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("translate",[e._v("Tail")])],1)],1)],1),e._v(" "),a("transition",{attrs:{name:"fade"}},["lines"===e.show?a("ui-form-element",{attrs:{underline:!1}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                        Number of lines to show\n                    ")]),e._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("input-text",{attrs:{number:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loadLog.apply(null,arguments)}},model:{value:e.lines,callback:function(t){e.lines=t},expression:"lines"}}),e._v(" "),a("ui-button",{attrs:{theme:"safe",size:"normal",disabled:!Number(e.lines)},on:{click:e.loadLog}},[a("translate",[e._v("Reload Log")])],1)],1)],1):e._e()],1)],1),e._v(" "),a("input-text-editor",{attrs:{value:e.log,"read-only":"","disable-modes":""}},[a("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center",main:"between"},expression:"{\n                    cross: 'center',\n                    main: 'between',\n                }"}],attrs:{slot:"header"},slot:"header"},[e._v("\n                "+e._s(e.domain)+"\n                "),a("ui-button-link",{attrs:{size:"small",theme:"light",href:e.rawLink,target:"_blank"}},[a("translate",[e._v("raw")])],1)],1)])],1)],2)},s=[]}}]);