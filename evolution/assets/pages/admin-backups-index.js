(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[225],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/backups/_components/backup-restore-settings-dialog.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.symbol.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),s("./node_modules/core-js/modules/es.object.define-properties.js"),s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),a=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var r=n(s("./node_modules/@babel/runtime/regenerator/index.js"));s("./node_modules/core-js/modules/es.object.assign.js");var o=n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=n(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var s=c(t);if(s&&s.has(e))return s.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,s&&s.set(e,n);return n}(s("./node_modules/ramda/src/index.js")),u=s("./src/js/api/commands/admin/backups/index.js");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(c=function(e){return e?s:t})(e)}function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){(0,i.default)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var m,_={api:[{command:u.getBackupSettings,bind:"settings"}],data:function(){return{message:!0,local_ns:!1,restore_spf:!0,confirm_with_domainowners:!0,show:!1,directadmin_conf:[]}},computed:{hasDaSettings:function(){return!!this.$api.settings.directadmin_conf},options:function(){return["backup_ftp_pre_test","backup_ftp_md5","allow_backup_encryption","restore_database_as_admin","tally_after_restore","backup_hard_link_check","webmail_backup_is_email_data"]},daValuesEncoded:function(){var e=this;return this.hasDaSettings?l.reduce((function(t,s){return p(p({},t),{},(0,i.default)({},s,l.includes(s,e.directadmin_conf)?"1":"0"))}),{},this.options):[]},requestData:function(){return p({message:this.message,local_ns:this.local_ns,restore_spf:this.restore_spf,confirm_with_domainowners:this.confirm_with_domainowners},this.daValuesEncoded)}},created:function(){this.optionLinks={backup_ftp_pre_test:"https://www.directadmin.com/features.php?id=1386",backup_ftp_md5:"https://www.directadmin.com/features.php?id=1977",allow_backup_encryption:"https://www.directadmin.com/features.php?id=2117",restore_database_as_admin:"https://www.directadmin.com/features.php?id=1817",tally_after_restore:"https://www.directadmin.com/features.php?id=853",backup_hard_link_check:"https://www.directadmin.com/features.php?id=1061",webmail_backup_is_email_data:"https://www.directadmin.com/features.php?id=2292"}},methods:{loadSettings:(m=(0,o.default)(r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.show=!1,e.next=3,(0,u.getBackupSettings)();case 3:t=e.sent,Object.assign(this,t),this.directadmin_conf=l.keys(l.filter(l.equals(!0),this.$api.settings.directadmin_conf)),this.show=!0;case 7:case"end":return e.stop()}}),e,this)}))),function(){return m.apply(this,arguments)}),saveSettings:function(){(0,u.updateSettings)(this.requestData)}}};t.Z=_},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/backups/_components/crons-table.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,s("./node_modules/core-js/modules/es.array.map.js");var n=s("./src/js/api/commands/admin/backups/index.js"),a={data:function(){return{select:[]}},commands:{getCrons:n.getCrons},methods:{duplicateCrons:function(){(0,n.duplicateCrons)({select:this.select}).then(this.$reloadApiTable)},deleteCrons:function(){(0,n.deleteCrons)({select:this.select}).then(this.$reloadApiTable)},runBackups:function(){(0,n.runCrons)({select:this.select}).then(this.$reloadApiTable)},getDataLabels:function(e){var t={domain:this.$gettext("Domain Directory"),subdomain:this.$gettext("Subdomain Lists"),ftp:this.$gettext("FTP Accounts"),ftpsettings:this.$gettext("FTP Settings"),database:this.$gettext("Database Settings"),database_data:this.$gettext("Database Data"),forwarder:this.$gettext("Forwarders"),email:this.$gettext("E-mail Accounts"),email_data:this.$gettext("E-mail Data"),emailsettings:this.$gettext("E-mail Settings"),vacation:this.$gettext("Vacation Messages"),autoresponder:this.$gettext("Autoresponders"),list:this.$gettext("Mailing Lists"),trash:this.$gettext("Deleted Trash Data")};return e.map((function(e){return t[e]}))}}};t.Z=a},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/backups/_components/current-backups-table.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.array.map.js");var a,r=n(s("./node_modules/@babel/runtime/regenerator/index.js")),o=n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=s("./src/js/api/commands/admin/backups/index.js"),l={commands:{getCurrentBackups:i.getCurrentBackups},data:function(){return{select:[]}},methods:{killBackup:(a=(0,o.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.killBackup)({select:this.select});case 2:e.sent&&(this.$reset(),(0,i.getCurrentBackups)());case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),getDataLabels:function(e){var t={domain:this.$gettext("Domain Directory"),subdomain:this.$gettext("Subdomain Lists"),ftp:this.$gettext("FTP Accounts"),ftpsettings:this.$gettext("FTP Settings"),database:this.$gettext("Database Settings"),database_data:this.$gettext("Database Data"),forwarder:this.$gettext("Forwarders"),email:this.$gettext("E-mail Accounts"),email_data:this.$gettext("E-mail Data"),emailsettings:this.$gettext("E-mail Settings"),vacation:this.$gettext("Vacation Messages"),autoresponder:this.$gettext("Autoresponders"),list:this.$gettext("Mailing Lists")};return e.map((function(e){return t[e]})).join(", ")},showDetails:function(e){this.select=[],this.$emit("showDetails",e)}}};t.Z=l},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/backups/_components/monitor-backup-status-dialog.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var a=n(s("./node_modules/@babel/runtime/regenerator/index.js")),r=n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"));s("./node_modules/core-js/modules/es.array.concat.js");var o,i=s("./src/js/api/commands/admin/backups/index.js"),l=new(n(s("./src/js/pages/admin/backups/_components/status-stream.js")).default),u={props:{id:{type:String,required:!1,default:""}},data:function(){return{showFilesize:!1,status:""}},api:[{command:i.getCurrentBackup,bind:{response:"backup",isOk:"backupLoaded"}}],computed:{overview:function(){return l.state.overview},percent:function(){return l.state.percent},details:function(){return l.state.details},requestURL:function(){var e=this.id,t=Math.random();return"/CMD_ADMIN_BACKUP?action=monitor&get=tracking_data&pid=".concat(e,"&rand=").concat(t,"&type=sse")},filesize:function(){return l.state.filesize}},watch:{filesize:function(){this.showFilesize||(this.showFilesize=!0)},details:function(){this.showFilesize=!1}},methods:{connect:(o=(0,r.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.status="",e.next=3,(0,i.getCurrentBackup)({pid:this.id});case 3:return e.prev=3,this.status=this.$gettext("Reading from tracker stream..."),e.next=7,l.open(this.requestURL);case 7:this.status=this.$gettext("Tracker stream was closed!"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.status=this.$gettext("Error getting backup details");case 13:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(){return o.apply(this,arguments)}),updateCurrentBackups:i.getCurrentBackups}};t.Z=u},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/backups/index.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var a,r=n(s("./node_modules/@babel/runtime/regenerator/index.js")),o=n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),i=s("./src/js/api/commands/admin/backups/index.js"),l=s("./src/js/vue/mixins.js"),u=n(s("./src/js/pages/admin/backups/_components/crons-table.vue")),c=n(s("./src/js/pages/admin/backups/_components/current-backups-table.vue")),d=n(s("./src/js/pages/admin/backups/_components/backup-restore-settings-dialog.vue")),p=n(s("./src/js/pages/admin/backups/_components/monitor-backup-status-dialog.vue")),m={preload:[i.getCrons,i.getCurrentBackups],api:[{command:i.getCrons,bind:"crons"},{command:i.getCurrentBackups,bind:"currentBackups"}],commands:{getCrons:i.getCrons},components:{CronsTable:u.default,CurrentBackupsTable:c.default,BackupRestoreSettingsDialog:d.default,MonitorBackupStatusDialog:p.default},mixins:[(0,l.$bindTab)({defaultTab:"scheduled",param:"tab"})],data:function(){return{select:[],refreshTimeout:3e4,refresh:!0,viewDialogPid:void 0}},computed:{currentBackups:function(){return this.$api.currentBackups},crons:function(){return this.$api.crons},haveBackupsRunning:function(){return!!this.currentBackups.rowsCount},hasResellerBackups:function(){return this.$api.crons.has_reseller_level_backups}},watch:{haveBackupsRunning:function(e,t){!e&&t&&(this.tab="scheduled")}},mounted:function(){var e=this;this.refreshCurrentBackups(),"in-progress"!==this.tab||this.haveBackupsRunning||this.$nextTick((function(){e.tab="scheduled"}))},beforeDestroy:function(){clearTimeout(this.timeoutId)},methods:{refreshCurrentBackups:(a=(0,o.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.refresh){e.next=3;break}return e.next=3,(0,i.getCurrentBackups)();case 3:this.timeoutId=setTimeout(this.refreshCurrentBackups,this.refreshTimeout);case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),showDetails:function(e){var t=this;this.viewDialogPid=e,this.$nextTick((function(){return t.$dialog("MONITOR_BACKUP_STATUS_DIALOG").open()}))}}};t.Z=m},"./src/js/pages/admin/backups/_components/status-stream.js":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,s("./node_modules/core-js/modules/es.number.constructor.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.object.assign.js");var a=n(s("./node_modules/@babel/runtime/helpers/classCallCheck.js")),r=n(s("./node_modules/@babel/runtime/helpers/createClass.js")),o=n(s("./node_modules/vue/dist/vue.common.js")),i=s("./src/js/api/converters.js"),l=function(e){return(new DOMParser).parseFromString((0,i.toAppString)(e),"text/html").body.textContent||""},u=function(){function e(){(0,a.default)(this,e),this.state=o.default.observable({overview:"",details:"",percent:0,filesize:0})}return(0,r.default)(e,[{key:"setOverview",value:function(e){this.state.overview=l(e)}},{key:"setDetails",value:function(e){this.state.details=l(e)}},{key:"setPercent",value:function(e){this.state.percent=Number(e)||0}},{key:"setFilesize",value:function(e){this.state.filesize=Number(e)||0}},{key:"open",value:function(e){var t=this;return new Promise((function(s,n){var a=new EventSource(e);a.addEventListener("open",(function(){return Object.assign(t.state,{overview:"",details:"",percent:0,filesize:0,reconnects:0})}),!1),a.addEventListener("message",(function(e){try{var n=JSON.parse(e.data);"1"===n.finished&&(a.close(),s(e)),n.dynamic_text&&t.setOverview(n.dynamic_text),n.dynamic_details&&t.setDetails(n.dynamic_details),n.percent&&t.setPercent(n.percent),n.filesize&&t.setFilesize(n.filesize)}catch(e){}}),!1),a.addEventListener("error",(function(e){e.readyState===EventSource.CLOSED?s(e):n(e)}),!1)}))}}]),e}();t.default=u},"./src/js/pages/admin/backups/_components/backup-restore-settings-dialog.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return n.X},default:function(){return r}});var n=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/backups/_components/backup-restore-settings-dialog.vue?vue&type=script&lang=js&"),a=n.Z,r=(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ui-dialog",{attrs:{id:"BACKUP_RESTORE_SETTINGS"},on:{"dialog:open":e.loadSettings}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        Backup/Restore Settings\n    ")]),e._v(" "),e.show?s("template",{slot:"content"},[s("ui-form-element",[s("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.message,callback:function(t){e.message=t},expression:"message"}},[s("translate",[e._v("Send a message when a backup has finished.")])],1)],1),e._v(" "),s("ui-form-element",[s("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir:'column' }"}],attrs:{slot:"content"},slot:"content"},[s("input-radio",{attrs:{value:!0},model:{value:e.local_ns,callback:function(t){e.local_ns=t},expression:"local_ns"}},[s("translate",[e._v("\n                        Restore with local NameServers.\n                    ")])],1),e._v(" "),s("input-radio",{attrs:{value:!1},model:{value:e.local_ns,callback:function(t){e.local_ns=t},expression:"local_ns"}},[s("translate",[e._v("\n                        Use NS values from backup.\n                    ")])],1)],1)]),e._v(" "),s("ui-form-element",[s("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir:'column' }"}],attrs:{slot:"content"},slot:"content"},[s("input-radio",{attrs:{value:!0},model:{value:e.restore_spf,callback:function(t){e.restore_spf=t},expression:"restore_spf"}},[s("translate",[e._v("\n                        Restore with SPF values from backup.\n                    ")])],1),e._v(" "),s("input-radio",{attrs:{value:!1},model:{value:e.restore_spf,callback:function(t){e.restore_spf=t},expression:"restore_spf"}},[s("translate",[e._v("\n                        Use local SPF values.\n                    ")])],1)],1)]),e._v(" "),s("ui-form-element",[s("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.confirm_with_domainowners,callback:function(t){e.confirm_with_domainowners=t},expression:"confirm_with_domainowners"}},[s("translate",[e._v("On restore, check for domain conflict in domainowners file, rather than the named.conf, or remote named.conf files.")])],1)],1),e._v(" "),s("ui-form-element",{attrs:{vertical:""}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                directadmin.conf values\n            ")]),e._v(" "),s("input-select-multiple",{attrs:{slot:"content","hide-header":"",options:e.options},slot:"content",model:{value:e.directadmin_conf,callback:function(t){e.directadmin_conf=t},expression:"directadmin_conf"}},e._l(e.options,(function(t){return s("span",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"row",cross:"center",main:"between"},expression:"{\n                        dir: 'row',\n                        cross: 'center',\n                        main: 'between',\n                    }"}],key:t,attrs:{slot:"option:"+t},slot:"option:"+t},[s("span",{domProps:{innerHTML:e._s(t)}}),e._v(" "),s("ui-link",{attrs:{href:e.optionLinks[t],target:"_blank"},nativeOn:{click:function(e){e.stopPropagation()}}},[s("ui-icon",{attrs:{id:"question",theme:"neutral",size:"medium"}})],1)],1)})),0)],1)],1):e._e(),e._v(" "),s("ui-button",{attrs:{slot:"buttons",theme:"safe"},on:{click:e.saveSettings},slot:"buttons"},[s("translate",[e._v("Save")])],1)],2)}),[],!1,null,null,null).exports},"./src/js/pages/admin/backups/_components/crons-table.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return n.X},default:function(){return r}});var n=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/backups/_components/crons-table.vue?vue&type=script&lang=js&"),a=n.Z,r=(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page-section",[s("ui-api-table",e._b({attrs:{"disable-pagination":""},on:{"action:duplicate":e.duplicateCrons,"action:run":e.runBackups,"action:del":function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()}},scopedSlots:e._u([{key:"col:when",fn:function(t){var n=t.when;return[s("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},[s("translate",{attrs:{"translate-params":n}},[e._v("\n                    Minute: %{minute}\n                ")]),e._v(" "),s("translate",{attrs:{"translate-params":n}},[e._v("\n                    Hour: %{hour}\n                ")]),e._v(" "),s("translate",{attrs:{"translate-params":n}},[e._v("\n                    Day of Month: %{dayofmonth}\n                ")]),e._v(" "),s("translate",{attrs:{"translate-params":n}},[e._v("\n                    Month: %{month}\n                ")]),e._v(" "),s("translate",{attrs:{"translate-params":n}},[e._v("\n                    Day of Week: %{dayofweek}\n                ")])],1)]}},{key:"col:who",fn:function(t){var n=t.who;return["all"===n.who?s("translate",[e._v("\n                All Users\n            ")]):"selected"===n.who?[s("translate",{attrs:{tag:"strong"}},[e._v("\n                    Selected Users:\n                ")]),e._v(" "),e._l(n.select,(function(t){return s("li",{key:t},[e._v("\n                    "+e._s(t)+"\n                ")])}))]:[s("translate",{attrs:{tag:"strong"}},[e._v("\n                    All Users Except:\n                ")]),e._v(" "),e._l(n.select,(function(t){return s("li",{key:t},[e._v("\n                    "+e._s(t)+"\n                ")])}))],e._v(" "),"yes"===n.skip_suspended?s("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},[s("translate",[e._v("Skip Suspended")])],1):e._e()]}},{key:"col:what",fn:function(t){var n=t.what;return["all"===n.what?s("translate",[e._v("\n                All Data\n            ")]):e._l(e.getDataLabels(n.select),(function(t){return s("li",{key:t},[e._v("\n                    "+e._s(t)+"\n                ")])}))]}},{key:"col:where",fn:function(t){var n=t.where,a=n.encrypted,r=n.path;return[a?s("ui-tooltip",{attrs:{theme:"safe",icon:"locked-padlock"}},[s("translate",[e._v("Encrypted")])],1):e._e(),e._v("\n            "+e._s(r)+"\n        ")]}},{key:"row:actions",fn:function(t){var n=t.id;return s("ui-button-link",{attrs:{name:"admin/backups/modify",params:{id:n},icon:"pencil",title:e.$gettext("Modify")}})}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getCrons,rowID:"id",columns:{when:{label:e.$gettext("When"),grow:!0,width:"150px"},who:{label:e.$gettext("Who"),width:"150px"},where:{label:e.$gettext("Where"),width:"250px",grow:!0},what:e.$gettext("What")},actions:{run:e.$gettext("Run Now"),duplicate:e.$gettext("Duplicate"),del:e.$gettext("Delete")},verticalLayout:e.$_Client.isPhone},!1)),e._v(" "),s("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("scheduled backup","scheduled backups",e.select.length)},on:{"click:confirm":e.deleteCrons}})],1)}),[],!1,null,null,null).exports},"./src/js/pages/admin/backups/_components/current-backups-table.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return n.X},default:function(){return r}});var n=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/backups/_components/current-backups-table.vue?vue&type=script&lang=js&"),a=n.Z,r=(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ui-api-table",e._b({on:{"action:kill":e.killBackup},scopedSlots:e._u([{key:"col:start",fn:function(t){var n=t.start;return[s("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},[s("translate",{attrs:{"translate-params":n}},[e._v("\n                Minute: %{minute}\n            ")]),e._v(" "),s("translate",{attrs:{"translate-params":n}},[e._v("\n                Hour: %{hour}\n            ")]),e._v(" "),s("translate",{attrs:{"translate-params":n}},[e._v("\n                Day of Month: %{dayofmonth}\n            ")]),e._v(" "),s("translate",{attrs:{"translate-params":n}},[e._v("\n                Month: %{month}\n            ")]),e._v(" "),s("translate",{attrs:{"translate-params":n}},[e._v("\n                Day of Week: %{dayofweek}\n            ")])],1)]}},{key:"col:who",fn:function(t){var n=t.who;return["all"===n.who?s("translate",[e._v("\n            All Users\n        ")]):"selected"===n.who?[s("translate",{attrs:{tag:"strong"}},[e._v("\n                Selected Users:\n            ")]),e._v(" "),e._l(n.select,(function(t){return s("li",[e._v("\n                "+e._s(t)+"\n            ")])}))]:[s("translate",{attrs:{tag:"strong"}},[e._v("\n                All Users Except:\n            ")]),e._v(" "),e._l(n.select,(function(t){return s("li",[e._v("\n                "+e._s(t)+"\n            ")])}))],e._v(" "),"yes"===n.skip_suspended?s("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},[s("translate",[e._v("Skip Suspended")])],1):e._e()]}},{key:"col:type",fn:function(t){var s=t.type;return[e._v("\n        "+e._s("restore"===s?e.$gettext("Restore"):e.$gettext("Backup"))+"\n    ")]}},{key:"col:what",fn:function(t){var n=t.what;return["all"===n.what?s("translate",[e._v("\n            All Data\n        ")]):[e._v("\n            "+e._s(e.getDataLabels(n.select))+"\n        ")]]}},{key:"col:where",fn:function(t){var n=t.where;return[n.encrypted?s("ui-tooltip",{attrs:{theme:"safe",icon:"locked-padlock"}},[s("translate",[e._v("Encrypted")])],1):e._e(),e._v("\n        "+e._s(n.path)+"\n    ")]}},{key:"col:progress",fn:function(t){var n=t.progress;return s("ui-progress",{attrs:{theme:"safe",size:"big",value:n}},[e._v("\n        "+e._s(n)+"%\n    ")])}},{key:"row:actions",fn:function(t){var n=t.pid;return s("ui-button",{attrs:{theme:"light",size:"small"},on:{click:function(t){return e.showDetails(n)}}},[s("translate",[e._v("Details")])],1)}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getCurrentBackups,rowID:"pid",columns:{pid:e.$gettext("PID"),id:e.$gettext("Backup ID"),type:e.$gettext("Type"),start:e.$gettext("Start Time"),who:e.$gettext("Who"),where:e.$gettext("Where"),progress:e.$gettext("Progress")},actions:{kill:e.$gettext("Kill")},updateOn:[],verticalLayout:e.$_Client.isPhone},!1))}),[],!1,null,null,null).exports},"./src/js/pages/admin/backups/_components/monitor-backup-status-dialog.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return n.X},default:function(){return r}});var n=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/backups/_components/monitor-backup-status-dialog.vue?vue&type=script&lang=js&"),a=n.Z,r=(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ui-dialog",{attrs:{id:"MONITOR_BACKUP_STATUS_DIALOG","no-close-btn":"",size:"normal"},on:{"dialog:open":e.connect,"dialog:close":e.updateCurrentBackups}},[s("translate",{attrs:{slot:"title","translate-params":{id:e.id}},slot:"title"},[e._v("\n        Monitor Backup: %{ id }\n    ")]),e._v(" "),s("template",{slot:"content"},[e.$api.backupLoaded?s("ui-table",{attrs:{vertical:e.$_Client.isPhone,items:[e.$api.backup]}},[s("ui-column",{attrs:{id:"id",label:e.$gettext("Backup ID"),fit:""}}),e._v(" "),s("ui-column",{attrs:{id:"owner",label:e.$gettext("Owner")}}),e._v(" "),s("ui-column",{attrs:{id:"start",label:e.$gettext("Start Time")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(e._f("date")(t.start))+"\n                ")]}}],null,!1,942224404)}),e._v(" "),s("ui-column",{attrs:{id:"who",label:e.$gettext("Who")},scopedSlots:e._u([{key:"default",fn:function(t){return["all"===t.who.who?s("translate",[e._v("\n                        All Users\n                    ")]):"selected"===t.who.who?[s("translate",{attrs:{tag:"strong"}},[e._v("\n                            Selected Users:\n                        ")]),e._v(" "),e._l(t.who.select,(function(t){return s("li",[e._v("\n                            "+e._s(t)+"\n                        ")])}))]:[s("translate",{attrs:{tag:"strong"}},[e._v("\n                            All Users Except:\n                        ")]),e._v(" "),e._l(t.who.select,(function(t){return s("li",[e._v("\n                            "+e._s(t)+"\n                        ")])}))],e._v(" "),"yes"===t.who.skip_suspended?s("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},[s("translate",[e._v("Skip Suspended")])],1):e._e()]}}],null,!1,345155195)}),e._v(" "),s("ui-column",{attrs:{id:"where",label:e.$gettext("Where")}})],1):e._e(),e._v(" "),e.percent?s("ui-progress",{attrs:{value:e.percent,size:"big",theme:"primary"}},[e._v("\n            "+e._s(e.percent)+" %\n        ")]):e._e(),e._v(" "),e.overview?s("ui-form-element",[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Overview:\n            ")]),e._v(" "),s("span",{attrs:{slot:"content"},slot:"content"},[e._v("\n                "+e._s(e.overview)+"\n            ")])],1):e._e(),e._v(" "),e.details&&e.percent<100?s("ui-form-element",[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Details:\n            ")]),e._v(" "),s("span",{attrs:{slot:"content"},slot:"content"},[e._v("\n                "+e._s(e.details)+"\n                "),e.showFilesize?[e._v("\n                    - "+e._s(e._f("humanReadableSize")(e.filesize))+"\n                ")]:e._e()],2)],1):e._e(),e._v(" "),e.status?s("ui-form-element",{attrs:{vertical:""}},[s("span",{attrs:{slot:"content"},domProps:{textContent:e._s(e.status)},slot:"content"})]):e._e()],1)],2)}),[],!1,null,null,null).exports},"./src/js/pages/admin/backups/index.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return n.X},default:function(){return u}});var n=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/backups/index.vue?vue&type=script&lang=js&"),a=n.Z,r=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),o=s("./src/js/pages/admin/backups/index.vue?vue&type=custom&index=0&blockType=route"),i=s.n(o),l=(0,r.Z)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page",{attrs:{actions:[{name:"admin/backups/schedule",label:e.$gettext("Schedule"),icon:"#plus-fill"},{name:"admin/backups/restore",label:e.$gettext("Restore"),icon:"#extract"}]}},[s("template",{slot:"header:buttons"},[s("ui-button-link",{attrs:{theme:"safe",name:"admin/backups/schedule"}},[s("translate",[e._v("Schedule")])],1),e._v(" "),s("ui-button-link",{attrs:{theme:"primary",name:"admin/backups/restore"}},[s("translate",[e._v("Restore")])],1)],1),e._v(" "),s("app-page-section",[s("ui-tabs",{attrs:{tabs:[{id:"scheduled",label:e.$gettext("Scheduled Backups")},e.haveBackupsRunning?{id:"in-progress",label:e.$gettext("In Progress")}:{}],selected:e.tab,"hide-single-tab":""},on:{"update:selected":function(t){e.tab=t}}},[s("crons-table",{attrs:{slot:"tab:scheduled"},slot:"tab:scheduled"}),e._v(" "),s("current-backups-table",{attrs:{slot:"tab:in-progress"},on:{showDetails:e.showDetails},slot:"tab:in-progress"})],1)],1),e._v(" "),s("backup-restore-settings-dialog"),e._v(" "),s("monitor-backup-status-dialog",e._b({},"monitor-backup-status-dialog",{id:e.viewDialogPid},!1)),e._v(" "),s("ui-link",{attrs:{slot:"bottom:links",bullet:"",name:"user/backup"},slot:"bottom:links"},[s("translate",[e._v("Site Backup")])],1),e._v(" "),e.hasResellerBackups?s("ui-link",{attrs:{slot:"bottom:links",bullet:"",name:"reseller/backups"},slot:"bottom:links"},[s("translate",[e._v("Switch to Reseller Level Backups")])],1):e._e(),e._v(" "),s("ui-link",{attrs:{slot:"bottom:links",bullet:""},on:{click:function(t){e.$dialog("BACKUP_RESTORE_SETTINGS").open()}},slot:"bottom:links"},[s("translate",[e._v("Backup/Restore Settings")])],1)],2)}),[],!1,null,null,null);"function"==typeof i()&&i()(l);var u=l.exports},"./src/js/pages/admin/backups/index.vue?vue&type=custom&index=0&blockType=route":function(){}}]);