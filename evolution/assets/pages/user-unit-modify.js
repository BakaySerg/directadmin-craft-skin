(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[3706,9759],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/unit/_dialogs/install-dialog.vue?vue&type=script&lang=js&":function(t,e,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(e,"X",{value:!0}),e.Z=void 0;var n={props:{id:{type:String,default:"INSTALL_PACKAGES_DIALOG"},subject:{type:String,required:!1,default:"item"}}};e.Z=n},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/unit/modify.vue?vue&type=script&lang=js&":function(t,e,s){"use strict";s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(e,"X",{value:!0}),e.Z=void 0;var r=n(s("./node_modules/@babel/runtime/regenerator/index.js"));s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.replace.js"),s("./node_modules/core-js/modules/es.function.name.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.regexp.to-string.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.array.slice.js"),s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.string.ends-with.js"),s("./node_modules/core-js/modules/es.array.map.js");var a=n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),l=n(s("./src/js/pages/user/unit/create.vue")),i=s("./src/js/api/commands/user/unit/index.js"),u=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!=typeof t)return{default:t};var s=d(e);if(s&&s.has(t))return s.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var l=r?Object.getOwnPropertyDescriptor(t,a):null;l&&(l.get||l.set)?Object.defineProperty(n,a,l):n[a]=t[a]}n.default=t,s&&s.set(t,n);return n}(s("./node_modules/ramda/src/index.js")),c=n(s("./src/js/pages/user/unit/_dialogs/install-dialog.vue")),p=s("./src/js/api/commands/fm.js");function d(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,s=new WeakMap;return(d=function(t){return t?s:e})(t)}var m,v,f,_={components:{InstallDialog:c.default},extends:l.default,preload:function(t){var e=t.id;return(0,i.getAppModify)({name:e})},api:i.getAppModify,props:{id:{type:String,required:!0}},data:function(){return{showPipInstall:!1}},created:(f=(0,a.default)(r.default.mark((function t(){var e;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("python"!==this.$api.type){t.next=7;break}return e="".concat(this.cwd,"/requirements.txt").replace(this.$state.session.homeDir,""),t.t0=Boolean,t.next=5,(0,p.checkExists)({path:e});case 5:t.t1=t.sent,this.showPipInstall=(0,t.t0)(t.t1);case 7:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)}),methods:{installPackagesDialog:(v=(0,a.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==this.showPipInstall){t.next=2;break}return t.abrupt("return");case 2:this.$dialog("INSTALL_PACKAGES_DIALOG").open();case 3:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)}),installPackages:function(){(0,i.installPackages)({domain:this.$domain,dir:this.cwd})},modifyApp:(m=(0,a.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.modifyApp)({name:this.id,json:this.json});case 2:if(!(t.sent instanceof Error)){t.next=5;break}return t.abrupt("return");case 5:this.$router.back();case 6:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)}),loadData:function(){var t=this,e=this.$api.app;this.name=this.id,this.type=this.$api.type,this.$nextTick((function(){t.version=t.$api.version})),this.timeout=e.limits.timeout.toString(),this.requests=e.limits.requests.toString(),"number"==typeof e.processes?this.processes=e.processes.toString():this.processes=e.processes,this.environment=e.environment||{};var s=this[this.type];if(u.keys(s).forEach((function(n){t.$set(t[t.type],n,e[n]||s[n])})),"external"===this.type&&(this.external.script=s.arguments[5],this.external.arguments=s.arguments.slice(6)),"php"===this.type&&s.targets&&(this.hasTargets=Object.keys(s.targets).length>0),"python"===this.type){"string"==typeof this.python.path&&(this.python.path=[this.python.path]);var n=this.cwd.endsWith("/")?this.cwd:"".concat(this.cwd,"/");this.python.path=this.python.path.map((function(t){return t.replace(n,"")}))}}}};e.Z=_},"./src/js/pages/user/unit/_dialogs/install-dialog.vue":function(t,e,s){"use strict";s.r(e),s.d(e,{__esModule:function(){return n.X},default:function(){return r}});var n=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/unit/_dialogs/install-dialog.vue?vue&type=script&lang=js&"),o=n.Z,r=(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ui-dialog",t._g(t._b({attrs:{theme:"safe"}},"ui-dialog",{id:t.id},!1),t.$listeners),[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n        Install Packages\n    ")]),t._v(" "),s("template",{slot:"content"},[s("translate",{attrs:{tag:"div"}},[t._v("\n            Are you sure you want to install packages from requirements.txt?\n        ")]),t._v(" "),t._t("default")],2),t._v(" "),s("template",{slot:"buttons"},[s("ui-button",{attrs:{id:"confirm",theme:"primary"}},[s("translate",[t._v("Install")])],1)],1)],2)}),[],!1,null,null,null).exports},"./src/js/pages/user/unit/modify.vue":function(t,e,s){"use strict";s.r(e),s.d(e,{__esModule:function(){return n.X},default:function(){return u}});var n=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/unit/modify.vue?vue&type=script&lang=js&"),o=n.Z,r=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),a=s("./src/js/pages/user/unit/modify.vue?vue&type=custom&index=0&blockType=route"),l=s.n(a),i=(0,r.Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("app-page",{attrs:{id:"modify-application",actions:[{handler:t.installPackagesDialog,label:t.$gettext("Install Packages"),icon:"#plus-fill",visible:t.showPipInstall}]}},[t.showPipInstall?s("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:t.installPackagesDialog},slot:"header:buttons"},[s("translate",[t._v("Install Packages")])],1):t._e(),t._v(" "),s("app-page-section",[s("ui-tabs",{attrs:{tabs:[{id:"app",label:t.$gettext("Application")},{id:"config",label:t.$gettext("Configuration")},{id:"env",label:t.$gettext("Advanced")}]}},[s("app-page-section",{attrs:{slot:"tab:app"},slot:"tab:app"},[s("ui-form-element",{attrs:{group:"application-info",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Name\n                    ")]),t._v(" "),s("input-text",{attrs:{slot:"content",disabled:"",value:t.id},slot:"content"})],1),t._v(" "),s("ui-form-element",{attrs:{underline:t.hasVersions}},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Type\n                    ")]),t._v(" "),s("input-select",{attrs:{slot:"content",options:t.types},slot:"content",model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),t._v(" "),t.hasVersions?s("ui-form-element",{key:"version",attrs:{underline:!1}},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Version\n                    ")]),t._v(" "),s("input-select",{attrs:{slot:"content",options:t.versions},slot:"content",model:{value:t.version,callback:function(e){t.version=e},expression:"version"}})],1):t._e()],1),t._v(" "),s("app-page-section",{attrs:{slot:"tab:config"},slot:"tab:config"},[t.is.perl?[s("ui-form-element",{key:"perl-working_directory"},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Working directory\n                        ")]),t._v(" "),s("prefixed-input",{attrs:{slot:"content",prefix:t.cwd},slot:"content",model:{value:t.perl.working_directory,callback:function(e){t.$set(t.perl,"working_directory",e)},expression:"perl.working_directory"}})],1),t._v(" "),s("ui-form-element",{key:"perl-script"},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Script\n                        ")]),t._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.perl.script,callback:function(e){t.$set(t.perl,"script",e)},expression:"perl.script"}})],1)]:t._e(),t._v(" "),t.is.external?[s("ui-form-element",{key:"external-working_directory"},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Working directory\n                        ")]),t._v(" "),s("prefixed-input",{attrs:{slot:"content",prefix:t.cwd},slot:"content",model:{value:t.external.working_directory,callback:function(e){t.$set(t.external,"working_directory",e)},expression:"external.working_directory"}})],1),t._v(" "),s("ui-form-element",{key:"external-script",attrs:{group:"application-external",validators:{required:!0,validateExternalScript:t.validateExternalScript}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Script\n                        ")]),t._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.external.script,callback:function(e){t.$set(t.external,"script",e)},expression:"external.script"}}),t._v(" "),s("translate",{attrs:{slot:"error:validateExternalScript","translate-params":{file:t.external.working_directory+"/"+t.external.script}},slot:"error:validateExternalScript"},[t._v("\n                            File %{file} does not exist\n                        ")])],1),t._v(" "),s("ui-form-element",[s("translate",{key:"external-arguments",attrs:{slot:"title"},slot:"title"},[t._v("\n                            Arguments\n                        ")]),t._v(" "),s("array-editor",{attrs:{slot:"content"},slot:"content",model:{value:t.external.arguments,callback:function(e){t.$set(t.external,"arguments",e)},expression:"external.arguments"}})],1)]:t._e(),t._v(" "),t.is.php?[s("root-editor",{attrs:{cwd:t.cwd,multiple:t.hasTargets},on:{"update:multiple":function(e){t.hasTargets=e}},model:{value:t.php,callback:function(e){t.php=e},expression:"php"}})]:t._e(),t._v(" "),t.is.python?[s("ui-form-element",{key:"python-path"},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Path\n                        ")]),t._v(" "),s("array-editor",{attrs:{slot:"content",prefix:t.cwd,"append-slash":""},slot:"content",model:{value:t.python.path,callback:function(e){t.$set(t.python,"path",e)},expression:"python.path"}})],1),t._v(" "),s("ui-form-element",{key:"python-home"},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Home\n                        ")]),t._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.python.home,callback:function(e){t.$set(t.python,"home",e)},expression:"python.home"}})],1),t._v(" "),s("ui-form-element",{key:"python-module"},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Module\n                        ")]),t._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.python.module,callback:function(e){t.$set(t.python,"module",e)},expression:"python.module"}})],1),t._v(" "),s("ui-form-element",{key:"python-callable"},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Callable\n                        ")]),t._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.python.callable,callback:function(e){t.$set(t.python,"callable",e)},expression:"python.callable"}})],1)]:t._e(),t._v(" "),t.is.java?[s("ui-form-element",{key:"java-working_directory"},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Working directory\n                        ")]),t._v(" "),s("prefixed-input",{attrs:{slot:"content",prefix:t.cwd},slot:"content",model:{value:t.java.working_directory,callback:function(e){t.$set(t.java,"working_directory",e)},expression:"java.working_directory"}})],1),t._v(" "),s("ui-form-element",{key:"java-webapp"},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Webapp\n                        ")]),t._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.java.webapp,callback:function(e){t.$set(t.java,"webapp",e)},expression:"java.webapp"}})],1)]:t._e(),t._v(" "),t.is.ruby?[s("ui-form-element",{key:"ruby-script"},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Script\n                        ")]),t._v(" "),s("prefixed-input",{attrs:{slot:"content",prefix:t.cwd,"append-slash":!1},slot:"content",model:{value:t.ruby.script,callback:function(e){t.$set(t.ruby,"script",e)},expression:"ruby.script"}})],1)]:t._e()],2),t._v(" "),s("app-page-section",{attrs:{slot:"tab:env"},slot:"tab:env"},[s("ui-form-element",{key:"processes",attrs:{group:"application-common",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Processes\n                    ")]),t._v(" "),s("processes-editor",{attrs:{slot:"content"},slot:"content",model:{value:t.processes,callback:function(e){t.processes=e},expression:"processes"}})],1),t._v(" "),s("ui-form-element",{key:"timeout",attrs:{group:"application-common",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Timeout\n                    ")]),t._v(" "),s("input-text",{attrs:{slot:"content",number:""},slot:"content",model:{value:t.timeout,callback:function(e){t.timeout=e},expression:"timeout"}})],1),t._v(" "),s("ui-form-element",{key:"requests",attrs:{group:"application-common",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Requests\n                    ")]),t._v(" "),s("input-text",{attrs:{slot:"content",number:""},slot:"content",model:{value:t.requests,callback:function(e){t.requests=e},expression:"requests"}})],1),t._v(" "),t.is.php?[s("ui-form-element",{key:"php-options.user",attrs:{vertical:""}},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Options\n                        ")]),t._v(" "),s("obj-editor",{attrs:{slot:"content"},slot:"content",model:{value:t.php.options.user,callback:function(e){t.$set(t.php.options,"user",e)},expression:"php.options.user"}})],1)]:t._e(),t._v(" "),t.is.java?[s("ui-form-element",{key:"java-classpath"},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Class Path\n                        ")]),t._v(" "),s("array-editor",{attrs:{slot:"content"},slot:"content",model:{value:t.java.classpath,callback:function(e){t.$set(t.java,"classpath",e)},expression:"java.classpath"}})],1),t._v(" "),s("ui-form-element",{key:"java-options"},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                            Options\n                        ")]),t._v(" "),s("array-editor",{attrs:{slot:"content"},slot:"content",model:{value:t.java.options,callback:function(e){t.$set(t.java,"options",e)},expression:"java.options"}})],1)]:t._e(),t._v(" "),s("ui-form-element",{key:"environment",attrs:{vertical:""}},[s("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Environment\n                    ")]),t._v(" "),s("obj-editor",{attrs:{slot:"content"},slot:"content",model:{value:t.environment,callback:function(e){t.environment=e},expression:"environment"}})],1)],2)],1)],1),t._v(" "),s("ui-button",{attrs:{slot:"footer:buttons",theme:"safe"},on:{click:t.modifyApp},slot:"footer:buttons"},[s("translate",[t._v("Modify")])],1),t._v(" "),s("install-dialog",{attrs:{id:"INSTALL_PACKAGES_DIALOG"},on:{"click:confirm":t.installPackages}})],1)}),[],!1,null,null,null);"function"==typeof l()&&l()(i);var u=i.exports},"./src/js/pages/user/unit/modify.vue?vue&type=custom&index=0&blockType=route":function(){}}]);