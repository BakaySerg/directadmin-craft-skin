(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[7363],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/import-packages-dialog.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;t.Z={data:function(){return{text:""}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/package-action-dialog.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,o("./node_modules/core-js/modules/es.array.map.js"),o("./node_modules/core-js/modules/es.array.includes.js"),o("./node_modules/core-js/modules/es.string.includes.js"),o("./node_modules/core-js/modules/es.object.assign.js");o("./src/js/api/commands/reseller/users/packages/index.js");var a={props:{pkgListId:{type:String,required:!0}},data:function(){return{from:"",to:"",type:"rename"}},computed:{packageList:function(){var e=this.$state.commands[this.pkgListId].response;return e?e.rows.map((function(e){return e.package})):[]}},methods:{submit:function(){this.$valid("package-action")&&(this.$emit("action",{action:this.type,from:this.from,to:this.to}),this.$dialog("PACKAGE_ACTION_DIALOG").close())},validateName:function(e){return!e||!this.packageList.includes(e)},setData:function(e){Object.assign(this,e)}}};t.Z=a},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/reseller/user-packages/index.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js");var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var n=o("./src/js/api/commands/reseller/users/packages/index.js"),s=a(o("./src/js/components/local/import-packages-dialog.vue")),r=a(o("./src/js/components/local/package-action-dialog.vue")),l={preload:n.getPackages,commands:{getPackages:n.getPackages},components:{ImportPackagesDialog:s.default,PackageActionDialog:r.default},data:function(){return{select:[]}},methods:{deleteItems:function(){(0,n.deletePackages)({select:this.select}).then(this.$reloadApiTable)},exportPackages:function(){(0,n.exportPackages)({select:this.select})},importPackages:function(e){(0,n.importPackages)({import:e}).then(this.$reloadApiTable)},rowClick:function(e){var t=e.item;this.$router.push({name:"reseller/user-packages/view",params:{p:t.package}})},openActionDialog:function(e,t){this.$dialog("PACKAGE_ACTION_DIALOG").open(),this.$refs.actionDialog.setData({type:e,from:t.package,to:""})},doPackageAction:function(e){(0,n.doPackageAction)(e).then(this.$reloadApiTable)}}};t.Z=l},"./src/js/api/commands/reseller/users/packages/index.js":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.keys.js"),o("./node_modules/core-js/modules/es.symbol.js"),o("./node_modules/core-js/modules/es.array.filter.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),o("./node_modules/core-js/modules/web.dom-collections.for-each.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),o("./node_modules/core-js/modules/es.object.define-properties.js"),o("./node_modules/core-js/modules/es.object.define-property.js"),o("./node_modules/core-js/modules/es.array.iterator.js"),o("./node_modules/core-js/modules/es.string.iterator.js"),o("./node_modules/core-js/modules/es.weak-map.js"),o("./node_modules/core-js/modules/web.dom-collections.iterator.js");var a=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=o("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"__esModule",{value:!0}),t.updatePackage=t.importPackages=t.getPackages=t.getPackage=t.exportPackages=t.doPackageAction=t.deletePackages=void 0;var s=a(o("./node_modules/@babel/runtime/helpers/defineProperty.js"));o("./node_modules/core-js/modules/es.array.reduce.js"),o("./node_modules/core-js/modules/es.object.to-string.js");var r=a(o("./src/js/api/command/index.js")),l=c(o("./src/js/api/commands/reseller/users/packages/$processors.ts")),i=c(o("./node_modules/ramda/src/index.js"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(u=function(e){return e?o:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var o=u(t);if(o&&o.has(e))return o.get(e);var a={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var l=s?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(a,r,l):a[r]=e[r]}return a.default=e,o&&o.set(e,a),a}function d(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function p(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?d(Object(o),!0).forEach((function(t){(0,s.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var m=r.default.get({id:"USER_PACKAGES",url:"/CMD_MANAGE_USER_PACKAGES",params:{bytes:!0},pagination:!0,after:function(e){return e.toTable(e.mapArrayProps({bandwidth:e.convert.toAppLimit,quota:e.convert.toAppLimit}))}});t.getPackages=m;var f=r.default.get({id:"USER_PACKAGE",url:"/CMD_SHOW_USER_PACKAGE",params:{bytes:!0},schema:{package:r.default.OPTIONAL_STRING},mapResponse:{features:l.getFeatures,limits:l.getLimits,homeOverride:l.getHomeOverride,language:l.getLanguage,skin:l.getSkin,customItems:l.getCustomItems,featureSets:l.getFeatureSets,cgroup:i.pipe(i.prop("cgroup"),i.defaultTo({saved:{},options:{}}),(function(e){return i.mergeDeepRight(e.options||{},e.saved||{})}),i.values),email_daily_limit:function(e){var t=e.email_daily_limit;return void 0!==t&&{disabled:"yes"===t.disabled,unlimited:"unlimited"===t.value,value:"unlimited"===t.value?"":t.value}},pluginRules:i.prop("plugins")}});t.getPackage=f;var g=r.default.post({url:"/CMD_MANAGE_USER_PACKAGES",params:{add:!0},schema:{bandwidth:r.default.OPTIONAL_STRING,ubandwidth:r.default.OPTIONAL_BOOL,quota:r.default.OPTIONAL_STRING,uquota:r.default.OPTIONAL_BOOL,inode:r.default.OPTIONAL_STRING,uinode:r.default.OPTIONAL_BOOL,vdomains:r.default.OPTIONAL_STRING,uvdomains:r.default.OPTIONAL_BOOL,nsubdomains:r.default.OPTIONAL_STRING,unsubdomains:r.default.OPTIONAL_BOOL,nemails:r.default.OPTIONAL_STRING,unemails:r.default.OPTIONAL_BOOL,nemailf:r.default.OPTIONAL_STRING,unemailf:r.default.OPTIONAL_BOOL,nemailml:r.default.OPTIONAL_STRING,unemailml:r.default.OPTIONAL_BOOL,nemailr:r.default.OPTIONAL_STRING,unemailr:r.default.OPTIONAL_BOOL,mysql:r.default.OPTIONAL_STRING,umysql:r.default.OPTIONAL_BOOL,domainptr:r.default.OPTIONAL_STRING,udomainptr:r.default.OPTIONAL_BOOL,ftp:r.default.OPTIONAL_STRING,uftp:r.default.OPTIONAL_BOOL,aftp:r.default.OPTIONAL_STRING,cgi:r.default.OPTIONAL_STRING,git:r.default.OPTIONAL_STRING,php:r.default.OPTIONAL_STRING,spam:r.default.OPTIONAL_STRING,catchall:r.default.OPTIONAL_STRING,ssl:r.default.OPTIONAL_STRING,ssh:r.default.OPTIONAL_STRING,cron:r.default.OPTIONAL_STRING,sysinfo:r.default.OPTIONAL_STRING,login_keys:r.default.OPTIONAL_STRING,dnscontrol:r.default.OPTIONAL_STRING,suspend_at_limit:r.default.OPTIONAL_STRING,language:r.default.OPTIONAL_STRING,skin:r.default.OPTIONAL_STRING,packagename:r.default.OPTIONAL_STRING}});t.updatePackage=g;var _=r.default.post({url:"/CMD_MANAGE_USER_PACKAGES",before:function(e){return e.select.reduce((function(e,t,o){return p(p({},e),{},(0,s.default)({},"delete".concat(o),t))}),{delete:!0})},schema:{select:r.default.ROWS}});t.deletePackages=_;var v=r.default.post({url:"/CMD_MANAGE_USER_PACKAGES",schema:{select:r.default.ROWS},params:{export:!0}});t.exportPackages=v;var O=r.default.post({url:"/CMD_MANAGE_USER_PACKAGES",schema:{import:r.default.REQUIRED_STRING},params:{action:"import"}});t.importPackages=O;var k=r.default.post({url:"/CMD_MANAGE_USER_PACKAGES",schema:{action:r.default.REQUIRED_STRING,from:r.default.REQUIRED_STRING,to:r.default.REQUIRED_STRING},before:function(e){return{from:null,to:null,old_package:e.from,new_package:e.to}}});t.doPackageAction=k},"./src/js/api/commands/reseller/users/packages/$processors.ts":function(e,t,o){"use strict";o.r(t),o.d(t,{getCustomItems:function(){return s},getHomeOverride:function(){return r},getFeatures:function(){return l},toPackageLimit:function(){return u},getLimits:function(){return c},getSkin:function(){return d},getLanguage:function(){return p},getFeatureSets:function(){return m}});var a=o("./node_modules/ramda/es/index.js"),n=o("./src/js/api/commands/converters/index.ts"),s=function(e){return a.values(e.custom_items||{}).map(n.customItems.fromObject)},r=function(e){return(0,n.toSelectData)(e.create_user_home_override||{})},l=function(e){var t,o,a,s,r,l;return{aftp:(0,n.toBoolean)(e.aftp.checked),catchall:(0,n.toBoolean)(e.catchall.checked),cgi:(0,n.toBoolean)(e.cgi.checked),cron:(0,n.toBoolean)(e.cron.checked),dnscontrol:(0,n.toBoolean)(e.dnscontrol.checked),login_keys:(0,n.toBoolean)(e.login_keys.checked),php:(0,n.toBoolean)(e.php.checked),spam:(0,n.toBoolean)(e.spam.checked),ssh:(0,n.toBoolean)(e.ssh.checked),ssl:(0,n.toBoolean)(e.ssl.checked),suspend_at_limit:(0,n.toBoolean)(e.suspend_at_limit.checked),sysinfo:(0,n.toBoolean)(e.sysinfo.checked),jail:(0,n.toBoolean)((null===(t=e.jail)||void 0===t?void 0:t.checked)||"no"),git:(0,n.toBoolean)((null===(o=e.git)||void 0===o?void 0:o.checked)||"no"),wordpress:(0,n.toBoolean)((null===(a=e.wordpress)||void 0===a?void 0:a.checked)||"no"),clamav:(0,n.toBoolean)((null===(s=e.clamav)||void 0===s?void 0:s.checked)||"no"),nginx_unit:(0,n.toBoolean)((null===(r=e.nginx_unit)||void 0===r?void 0:r.checked)||"no"),redis:(0,n.toBoolean)((null===(l=e.redis)||void 0===l?void 0:l.checked)||"no")}},i=a.pipe(Number,a.complement(Number.isFinite)),u=function(e){var t=e.value;return{unlimited:i(t),value:i(t)?"":t}},c=a.pipe(a.pick(["bandwidth","domainptr","ftp","inode","mysql","nemailf","nemailml","nemailr","nemails","nsubdomains","quota","vdomains"]),a.mapObjIndexed(u)),d=function(e){var t=e.skin;return(0,n.toSelectData)(t)},p=function(e){var t=e.language;return(0,n.toSelectData)(t)},m=function(e){var t=e.feature_sets;return{options:a.map(a.prop("name"),t),values:a.keys(a.filter(a.propEq("checked","yes"),t))}}},"./src/js/components/local/import-packages-dialog.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return a.X},default:function(){return s}});var a=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/import-packages-dialog.vue?vue&type=script&lang=js&"),n=a.Z,s=(0,o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ui-dialog",{attrs:{id:"IMPORT_PACKAGES_DIALOG",size:"normal"}},[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        Import packages\n    ")]),e._v(" "),o("input-textarea",{staticClass:"width:100%",attrs:{slot:"content"},slot:"content",model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),e._v(" "),o("ui-button",{attrs:{slot:"buttons",theme:"primary",disabled:!e.text},on:{click:function(t){return e.$emit("import",e.text)}},slot:"buttons"},[o("translate",[e._v("Import")])],1)],1)}),[],!1,null,null,null).exports},"./src/js/components/local/package-action-dialog.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return a.X},default:function(){return r}});var a=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/package-action-dialog.vue?vue&type=script&lang=js&"),n=a.Z,s=(0,o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ui-dialog",{attrs:{id:"PACKAGE_ACTION_DIALOG"}},[o("template",{slot:"title"},[e._v("\n        "+e._s("rename"===e.type?e.$gettext("Rename Package"):e.$gettext("Copy Package"))+"\n    ")]),e._v(" "),o("template",{slot:"content"},[o("ui-form-element",{attrs:{vertical:""}},[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Old Package Name\n            ")]),e._v(" "),o("input-text",{attrs:{slot:"content",value:e.from,disabled:""},slot:"content"})],1),e._v(" "),o("ui-form-element",{attrs:{group:"package-action",vertical:"",validators:{required:!0,validateName:e.validateName,regex:/^[a-zA-Z0-9\-\_]+$/,maxLength:20}}},[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                New Package Name\n            ")]),e._v(" "),o("input-text",{attrs:{slot:"content",autofocus:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}},slot:"content",model:{value:e.to,callback:function(t){e.to=t},expression:"to"}}),e._v(" "),o("translate",{attrs:{slot:"error:regex"},slot:"error:regex"},[e._v("\n                Package name should not contain special characters\n            ")]),e._v(" "),o("translate",{attrs:{slot:"error:validateName"},slot:"error:validateName"},[e._v("\n                Package already exists\n            ")])],1)],1),e._v(" "),o("ui-button",{attrs:{slot:"buttons",theme:"primary","validate-group":"package-action"},on:{click:e.submit},slot:"buttons"},[o("translate",[e._v("Save")])],1)],2)}),[],!1,null,null,null),r=s.exports},"./src/js/pages/reseller/user-packages/index.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return a.X},default:function(){return u}});var a=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/reseller/user-packages/index.vue?vue&type=script&lang=js&"),n=a.Z,s=o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),r=o("./src/js/pages/reseller/user-packages/index.vue?vue&type=custom&index=0&blockType=route"),l=o.n(r),i=(0,s.Z)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("app-page",{attrs:{actions:[{name:"reseller/user-packages/create",label:e.$gettext("Add Package"),icon:"#plus-fill"},{label:e.$gettext("Import Packages"),handler:e.$dialog("IMPORT_PACKAGES_DIALOG").open,icon:"#extract"}]}},[o("ui-button-link",{attrs:{slot:"header:buttons",theme:"primary",name:"reseller/user-packages/create"},slot:"header:buttons"},[o("translate",[e._v("Add Package")])],1),e._v(" "),o("app-page-section",[o("ui-api-table",e._b({on:{"action:remove":function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()},"action:export":e.exportPackages,"table:rowClick":e.rowClick},scopedSlots:e._u([{key:"col:package",fn:function(t){var a=t.package;return o("ui-link",{attrs:{name:"reseller/user-packages/view",params:{p:a}}},[e._v("\n                "+e._s(a)+"\n            ")])}},{key:"col:bandwidth",fn:function(t){var a=t.bandwidth;return[a===1/0?o("translate",[e._v("\n                    Unlimited\n                ")]):[e._v("\n                    "+e._s(e._f("humanReadableSize")(a))+"\n                ")]]}},{key:"col:quota",fn:function(t){var a=t.quota;return[a===1/0?o("translate",[e._v("\n                    Unlimited\n                ")]):[e._v("\n                    "+e._s(e._f("humanReadableSize")(a))+"\n                ")]]}},{key:"row:actions",fn:function(t){var a=t.item;return o("ui-actions",{},[o("ui-link",{on:{click:function(t){return e.openActionDialog("rename",a)}}},[o("translate",[e._v("Rename")])],1),e._v(" "),o("ui-link",{on:{click:function(t){return e.openActionDialog("copy",a)}}},[o("translate",[e._v("Copy")])],1)],1)}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getPackages,rowID:"package",columns:{package:{label:e.$gettext("Package"),grow:!0},bandwidth:e.$gettext("Bandwidth"),quota:e.$gettext("Disk Usage")},actions:{remove:e.$gettext("Delete"),export:e.$gettext("Export")},verticalLayout:e.$_Client.isPhone},!1))],1),e._v(" "),o("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("user package","user packages",e.select.length)},on:{"click:confirm":e.deleteItems}}),e._v(" "),o("import-packages-dialog",{on:{import:e.importPackages}}),e._v(" "),o("package-action-dialog",{ref:"actionDialog",attrs:{"pkg-list-id":"USER_PACKAGES"},on:{action:e.doPackageAction}}),e._v(" "),o("ui-link",{attrs:{slot:"bottom:links",bullet:""},on:{click:function(t){e.$dialog("IMPORT_PACKAGES_DIALOG").open()}},slot:"bottom:links"},[o("translate",[e._v("Import Packages")])],1)],1)}),[],!1,null,null,null);"function"==typeof l()&&l()(i);var u=i.exports},"./src/js/pages/reseller/user-packages/index.vue?vue&type=custom&index=0&blockType=route":function(){}}]);