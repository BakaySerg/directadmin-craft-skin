(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[1730],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/imapsync/_dialogs/stop-migration-dialog.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var o={props:{migration:{type:Object,required:!1,default:function(){return null}}},computed:{usernames:function(){return this.migration?{from:this.migration.from.username,to:this.migration.to.username}:{from:"",to:""}}},methods:{submit:function(){this.$emit("submit")}}};t.Z=o},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/imapsync/index.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.symbol.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),s("./node_modules/core-js/modules/es.object.define-properties.js"),s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var r=o(s("./node_modules/@babel/runtime/regenerator/index.js")),i=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),l=s("./src/js/endpoints/imapsync/index.ts"),u=s("./src/js/api/endpoint/index.ts"),d=o(s("./src/js/pages/user/imapsync/_dialogs/stop-migration-dialog.vue")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var s=m(t);if(s&&s.has(e))return s.get(e);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}o.default=e,s&&s.set(e,o);return o}(s("./node_modules/ramda/src/index.js"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(m=function(e){return e?s:t})(e)}function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach((function(t){(0,a.default)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var g,j={name:"UserImapsync",components:{StopMigrationDialog:d.default},beforeRouteEnter:(0,u.preload)([function(){return l.getMigrations.request()}]),data:function(){return{currentItem:null}},computed:{processes:l.getMigrations.bindData(c.map((function(e){return _(_({},e),{},{started:new Date(e.started),isImport:"localhost"===e.to.host})})))},methods:{stopMigrationDialog:function(e){this.currentItem=e,this.$dialog("STOP_MIGRATION_DIALOG").open()},stopProcess:(g=(0,i.default)(r.default.mark((function e(){var t,s;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.deleteMigration.request({id:this.currentItem.id});case 2:t=e.sent,s=t.error,this.currentItem=null,s?s.notify():this.$notifications.success({title:this.$gettext("IMAPSync Manager"),content:this.$gettext("Migration canceled")}),l.getMigrations.request();case 7:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})}};t.Z=j},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/imapsync/index.vue?vue&type=style&index=0&lang=scss&":function(){},"./src/js/endpoints/imapsync/index.ts":function(e,t,s){"use strict";s.r(t),s.d(t,{getMigrations:function(){return r},deleteMigration:function(){return i},createImportMigration:function(){return a},createExportMigration:function(){return l}});var o=s("./src/js/api/endpoint/index.ts"),n={IMAPSYNC_AUTHENTICATION_FAILURE:(0,o.$gettext)("ImapSync authentication failure"),IMAPSYNC_CONNECTION_FAILURE:(0,o.$gettext)("ImapSync connection failure"),IMAPSYNC_CONNECTION_FAILURE_HOST_SRC:(0,o.$gettext)("ImapSync host source connection failure"),IMAPSYNC_CONNECTION_FAILURE_HOST_DST:(0,o.$gettext)("ImapSync host destination connection failure"),IMAPSYNC_AUTHENTICATION_FAILURE_USER_SRC:(0,o.$gettext)("ImapSync user source authentication failure"),IMAPSYNC_AUTHENTICATION_FAILURE_USER_DST:(0,o.$gettext)("ImapSync user destination authentication failure"),IMAPSYNC_MIGRATION_LIMIT_ERROR:(0,o.$gettext)("Destination email is currently being used for migration by another process")},r=(0,o.GET)("/imapsync/migrations"),i=(0,o.DELETE)("/imapsync/migrations/:id",{errorMessages:{IMAPSYNC_PROCESS_NOT_FOUND:(0,o.$gettext)("ImapSync process not found")}}),a=(0,o.POST)("/imapsync/import",{errorMessages:n}),l=(0,o.POST)("/imapsync/export",{errorMessages:n})},"./src/js/pages/user/imapsync/_dialogs/stop-migration-dialog.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return o.X},default:function(){return r}});var o=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/imapsync/_dialogs/stop-migration-dialog.vue?vue&type=script&lang=js&"),n=o.Z,r=(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ui-dialog",{attrs:{id:"STOP_MIGRATION_DIALOG",theme:"danger"}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Stop Migration")]),e._v(" "),s("translate",{attrs:{slot:"content","translate-params":e.usernames},slot:"content"},[e._v("\n        Are you sure you want to stop migration from %{ from } to %{ to }?\n    ")]),e._v(" "),s("ui-button",{attrs:{slot:"buttons",theme:"danger"},on:{click:function(t){return e.$emit("stop",e.migration.id)}},slot:"buttons"},[s("translate",[e._v("Stop Migration")])],1)],1)}),[],!1,null,null,null).exports},"./src/js/pages/user/imapsync/index.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return o.X},default:function(){return u}});var o=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/imapsync/index.vue?vue&type=script&lang=js&"),n=o.Z,r=(s("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/imapsync/index.vue?vue&type=style&index=0&lang=scss&"),s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),i=s("./src/js/pages/user/imapsync/index.vue?vue&type=custom&index=0&blockType=route"),a=s.n(i),l=(0,r.Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page",{attrs:{actions:[{label:e.$gettext("Import e-mails"),name:"user/imapsync/import",icon:"#plus-fill"},{label:e.$gettext("Export e-mails"),name:"user/imapsync/export",icon:"#console"}]}},[s("ui-button-link",{attrs:{slot:"header:buttons",theme:"primary",name:"user/imapsync/import"},slot:"header:buttons"},[s("translate",[e._v("Import e-mails")])],1),e._v(" "),s("ui-button-link",{attrs:{slot:"header:buttons",theme:"safe",name:"user/imapsync/export"},slot:"header:buttons"},[s("translate",[e._v("Export e-mails")])],1),e._v(" "),s("ui-r-table",e._b({attrs:{"disable-pagination":"","hide-before-controls":""},scopedSlots:e._u([{key:"col:to",fn:function(t){var o=t.to,n=t.isImport;return[e._v("\n            "+e._s(o.username)+"\n            "),s("ui-tooltip",{directives:[{name:"margin",rawName:"v-margin:left",value:.5,expression:"0.5",arg:"left"}],attrs:{icon:n?"download":"upload",theme:n?"primary":"safe"}},[e._v("\n                "+e._s(n?e.$gettext("Import"):e.$gettext("Export"))+"\n            ")])]}},{key:"col:from_username",fn:function(t){var s=t.from;return[e._v("\n            "+e._s(s.username)+"\n        ")]}},{key:"col:to_server",fn:function(t){var s=t.to;return[e._v("\n            "+e._s(s.server)+"\n        ")]}},{key:"col:from_server",fn:function(t){var s=t.from;return[e._v("\n            "+e._s(s.server)+"\n        ")]}},{key:"col:started",fn:function(t){var s=t.started;return[e._v("\n            "+e._s(e._f("date")(s))+"\n        ")]}},{key:"row:actions",fn:function(t){var o=t.item;return s("ui-button-icon",{attrs:{theme:"danger",icon:"cancel",title:e.$gettext("Cancel Process")},on:{click:function(t){return e.stopMigrationDialog(o)}}})}}])},"ui-r-table",{rows:e.processes,columns:[{id:"to",label:e.$gettext("Destination Email")},{id:"from_username",label:e.$gettext("Source Email")},{id:"to_server",label:e.$gettext("Destination Server")},{id:"from_server",label:e.$gettext("Source Server")},{id:"started",label:e.$gettext("Started At")}],verticalLayout:e.$_Client.isPhone,isCheckable:!1},!1),[e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),s("template",{slot:"table:after"},[s("div",{directives:[{name:"margin",rawName:"v-margin:top",value:1.5,expression:"1.5",arg:"top"}]},[s("translate",{staticClass:"table-hint",attrs:{tag:"tt"}},[e._v("\n                    This page lists all active mailbox migrations started\n                    with IMAPSync tool. New migration can be started with\n                    the action button.\n                ")]),e._v(" "),s("br"),e._v(" "),s("tt",{staticClass:"table-hint"},[s("translate",[e._v("\n                        Read finished migration reports in the\n                    ")]),e._v(" "),s("ui-link",{attrs:{path:"/user/messages"}},[s("translate",[e._v("Message Area")])],1)],1)],1)])],2),e._v(" "),s("stop-migration-dialog",{attrs:{migration:e.currentItem},on:{stop:e.stopProcess}})],1)}),[],!1,null,null,null);"function"==typeof a()&&a()(l);var u=l.exports},"./src/js/pages/user/imapsync/index.vue?vue&type=custom&index=0&blockType=route":function(){},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/imapsync/index.vue?vue&type=style&index=0&lang=scss&":function(e,t,s){var o=s("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/imapsync/index.vue?vue&type=style&index=0&lang=scss&");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,s("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("05974b6a",o,!0,{})}}]);