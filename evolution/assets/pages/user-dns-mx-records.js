(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[390],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/dns/mx-records.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var a,o,r=n(s("./node_modules/@babel/runtime/regenerator/index.js")),i=n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),l=s("./src/js/api/commands/dns/index.js"),c=n(s("./src/js/components/local/dns/records-table.vue")),u=s("./node_modules/ramda/src/index.js"),d={preload:l.getMXRecords,commands:{setLocalMailStatus:l.setLocalMailStatus,getMXRecords:l.getMXRecords},api:[{command:l.getMXRecords,bind:"mx"}],components:{DnsRecordsTable:c.default},data:function(){return{template:"",affectPointers:!0,status:""}},computed:{mxTemplates:function(){return this.$api.mx.template?(0,u.omit)(["..."],this.$api.mx.template.options):{}},hasAffectPointers:function(){return 0!==this.$_session.usage.domainPointers.usage}},watch:{$domain:function(){(0,l.getMXRecords)().then(this.initData)}},created:function(){this.initData()},methods:{initData:function(){this.template=this.$api.mx.template?this.$api.mx.template.value||!1:"",this.affectPointers=this.$api.mx.affect_pointers,this.status=this.$api.mx.internal},saveTemplate:(o=(0,i.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.setMxTemplate)({mx_template:this.template,affect_pointers:this.affectPointers});case 2:return e.next=4,(0,l.getMXRecords)();case 4:this.status=this.$api.mx.internal;case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),saveStatus:(a=(0,i.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.setLocalMailStatus)({internal:this.status});case 2:(0,l.getMXRecords)();case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})}};t.Z=d},"./src/js/pages/user/dns/mx-records.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return n.X},default:function(){return c}});var n=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/dns/mx-records.vue?vue&type=script&lang=js&"),a=n.Z,o=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),r=s("./src/js/pages/user/dns/mx-records.vue?vue&type=custom&index=0&blockType=route"),i=s.n(r),l=(0,o.Z)(a,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page",[s("template",{slot:"details"},[s("ui-infobar-item",{attrs:{title:e.$gettext("Note")}},[s("translate",[e._v("\n                Making modifications to the MX records can potentially\n                disable all of your email accounts from receiving mail.\n            ")])],1)],1),e._v(" "),s("app-page-section",[s("dns-records-table",e._b({attrs:{"has-affect-pointers":e.hasAffectPointers,disabled:!e.$_flags["user.dnsControl"]},on:{"rows:update":e.$commands.getMXRecords}},"dns-records-table",{domain:e.$domain,only:"MX",records:e.$api.mx.records,full_mx_records:e.$api.mx.full_mx_records,enableTTL:e.$api.mx.dns_ttl,affectPointersDefault:e.$api.mx.affect_pointers},!1))],1),e._v(" "),s("app-page-section",[s("translate",{attrs:{slot:"section:title"},slot:"section:title"},[e._v("Options")]),e._v(" "),s("ui-form-element",[s("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[s("translate",[e._v("\n                    Use this server to handle my e-mails. If not, change the\n                    MX records and uncheck this option.\n                ")])],1),e._v(" "),s("ui-button",{attrs:{slot:"buttons",theme:"safe"},on:{click:e.saveStatus},slot:"buttons"},[s("translate",[e._v("Save")])],1)],1),e._v(" "),e.$api.mx.template&&e.$_flags["user.dnsControl"]?[s("ui-form-element",[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("MX Template")]),e._v(" "),s("input-select",{attrs:{slot:"content",options:e.mxTemplates},slot:"content",model:{value:e.template,callback:function(t){e.template=t},expression:"template"}},[s("input-checkbox-button",{attrs:{slot:"additions:right"},slot:"additions:right",model:{value:e.affectPointers,callback:function(t){e.affectPointers=t},expression:"affectPointers"}},[s("translate",[e._v("Affect Pointers")])],1)],1)],1),e._v(" "),s("ui-button",{attrs:{slot:"footer:buttons",theme:"safe"},on:{click:e.saveTemplate},slot:"footer:buttons"},[s("translate",[e._v("Save")])],1)]:e._e()],2),e._v(" "),s("translate",{attrs:{slot:"footer:text"},slot:"footer:text"},[e._v("\n        * Note: Making modifications to the MX records can potentially\n        disable all of your email accounts from receiving mail.\n    ")])],2)}),[],!1,null,null,null);"function"==typeof i()&&i()(l);var c=l.exports},"./src/js/pages/user/dns/mx-records.vue?vue&type=custom&index=0&blockType=route":function(){}}]);