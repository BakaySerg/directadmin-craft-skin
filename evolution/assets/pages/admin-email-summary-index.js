(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[5047],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/inputs/input-date-range.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,s("./node_modules/core-js/modules/es.array.concat.js");var o=n(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),a=n(s("./node_modules/vue2-daterange-picker/dist/vue2-daterange-picker.umd.min.js")),r=s("./node_modules/date-fns/esm/index.js"),l={components:{DateRangePicker:a.default},model:{prop:"range",event:"update:range"},props:{range:{type:Object,required:!0},single:{type:Boolean,required:!1,default:!1}},computed:{maxDate:function(){return new Date},dateRange:function(){return{startDate:this.range.start,endDate:this.range.end}},localeData:function(){var e=this.$state.craft.options.dateFormats;return{firstDay:"monday"===e.weekStart?1:0,format:e.datetime,applyLabel:this.$gettext("Apply"),cancelLabel:this.$gettext("Cancel"),daysOfWeek:[this.$gettext("Sun"),this.$gettext("Mon"),this.$gettext("Tue"),this.$gettext("Wed"),this.$gettext("Thu"),this.$gettext("Fri"),this.$gettext("Sat")],monthNames:[this.$gettext("Jan"),this.$gettext("Feb"),this.$gettext("Mar"),this.$gettext("Apr"),this.$gettext("May"),this.$gettext("Jun"),this.$gettext("Jul"),this.$gettext("Aug"),this.$gettext("Sep"),this.$gettext("Oct"),this.$gettext("Nov"),this.$gettext("Dec")]}},predefinedRanges:function(){var e;if(this.single)return!1;var t=new Date;return e={},(0,o.default)(e,this.$gettext("10 minutes"),[(0,r.subMinutes)(t,10),t]),(0,o.default)(e,this.$gettext("30 minutes"),[t,(0,r.subMinutes)(t,30),t]),(0,o.default)(e,this.$gettext("1 hour"),[(0,r.subHours)(t,1),t]),(0,o.default)(e,this.$gettext("4 hour"),[(0,r.subHours)(t,4),t]),(0,o.default)(e,this.$gettext("1 day"),[(0,r.subDays)(t,1),t]),(0,o.default)(e,this.$gettext("3 days"),[(0,r.subDays)(t,3),t]),(0,o.default)(e,this.$gettext("7 days"),[(0,r.subDays)(t,7),t]),e}},methods:{updateValues:function(e){this.$emit("update:range",{start:e.startDate,end:e.endDate})},getDateString:function(e){var t=e.startDate,s=e.endDate,n=this.$options.filters.date;return this.single?n(t):"".concat(n(t)," - ").concat(n(s))}}};t.Z=l},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/email-summary/_components/details-dialog.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,s("./node_modules/core-js/modules/es.array.includes.js");var n={props:{item:{type:Object,required:!0}},methods:{hasCount:function(e){return["unknown","deferred","failed","delivered"].includes(e)}}};t.Z=n},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/email-summary/index.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,s("./node_modules/core-js/modules/es.array.includes.js");var o,a=n(s("./node_modules/@babel/runtime/regenerator/index.js")),r=n(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),l=s("./node_modules/date-fns/esm/index.js"),u=s("./src/js/api/commands/admin/email-summary.js"),d=n(s("./src/js/components/local/inputs/input-date-range.vue")),i=n(s("./src/js/pages/admin/email-summary/_components/details-dialog.vue")),c={preload:u.getEmailSummary,api:u.getEmailSummary,components:{DateRangePicker:d.default,DetailsDialog:i.default},data:function(){return{query:{range:{start:(0,l.subDays)(new Date,1),end:new Date}},rows:[],currentDomain:{}}},methods:{updateRange:function(e){this.query.range.start=e.start,this.query.range.end=e.end},request:(o=(0,r.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,u.getEmailSummary)({from:this.query.range.start,to:this.query.range.end});case 1:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),showRawInfo:function(e){this.currentDomain=e,this.$dialog("EMAIL_SUMMARY_DETAILS_DIALOG").open()},sortBy:function(e){var t=["delivered","failed","deferred","unknown"].includes(e);return function(s){return t?s[e].count:s[e]}}}};t.Z=c},"./src/js/api/commands/admin/email-summary.js":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var n=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.getEmailSummary=void 0;var o=n(s("./src/js/api/command/index.js")),a=s("./node_modules/date-fns/esm/index.js"),r=o.default.get({url:"/CMD_EMAIL_SUMMARY",id:"EMAIL_SUMMARY",schema:{from:{type:Date,required:!1,default:function(){return(0,a.subDays)(new Date,1)}},to:{type:Date,required:!1,default:function(){return new Date}}}});t.getEmailSummary=r},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/inputs/input-date-range.vue?vue&type=style&index=0&lang=scss&":function(){},"./src/js/components/local/inputs/input-date-range.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return n.X},default:function(){return a}});var n=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/inputs/input-date-range.vue?vue&type=script&lang=js&"),o=n.Z,a=(s("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/inputs/input-date-range.vue?vue&type=style&index=0&lang=scss&"),(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"date-range-picker"},[s("date-range-picker",e._b({attrs:{"single-date-picker":e.single,"time-picker":"","time-picker-24-hour":"","append-to-body":"","date-range":e.dateRange,ranges:e.predefinedRanges,"max-date":e.maxDate,"locale-data":e.localeData},on:{update:e.updateValues},scopedSlots:e._u([{key:"input",fn:function(t){return[s("input-text",{attrs:{readonly:"",value:e.getDateString(t)}})]}}])},"date-range-picker",e.$attrs,!1))],1)}),[],!1,null,null,null).exports)},"./src/js/pages/admin/email-summary/_components/details-dialog.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return n.X},default:function(){return a}});var n=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/email-summary/_components/details-dialog.vue?vue&type=script&lang=js&"),o=n.Z,a=(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ui-dialog",{attrs:{id:"EMAIL_SUMMARY_DETAILS_DIALOG"}},[s("span",{attrs:{slot:"title"},domProps:{textContent:e._s(e.item.id||e.$gettext("Details"))},slot:"title"}),e._v(" "),s("div",{attrs:{slot:"content"},slot:"content"},[s("table",e._l(e.item,(function(t,n){return s("tr",{key:n},[s("td",{domProps:{textContent:e._s(n+":")}}),e._v(" "),s("td",[e.hasCount(n)?s("ui-tooltip",[s("span",{attrs:{slot:"trigger"},slot:"trigger"},[e._v("\n                            "+e._s(t.count)+" / "+e._s(e._f("humanReadableSize")(t.size))+"\n                        ")]),e._v(" "),s("translate",[e._v("\n                            Amount / Size\n                        ")])],1):"size"===n?[e._v("\n                        "+e._s(e._f("humanReadableSize")(t))+"\n                    ")]:s("span",{domProps:{textContent:e._s(t)}})],2)])})),0)])])}),[],!1,null,null,null).exports},"./src/js/pages/admin/email-summary/index.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return n.X},default:function(){return d}});var n=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/email-summary/index.vue?vue&type=script&lang=js&"),o=n.Z,a=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),r=s("./src/js/pages/admin/email-summary/index.vue?vue&type=custom&index=0&blockType=route"),l=s.n(r),u=(0,a.Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page",[s("app-page-section",{on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.request.apply(null,arguments)}}},[s("ui-form-element",[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Range\n            ")]),e._v(" "),s("date-range-picker",{attrs:{slot:"content",range:e.query.range},on:{"update:range":e.updateRange,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.request.apply(null,arguments)}},slot:"content"})],1),e._v(" "),s("ui-button",{attrs:{slot:"footer:buttons",theme:"primary"},on:{click:function(t){return t.preventDefault(),e.request.apply(null,arguments)}},slot:"footer:buttons"},[s("translate",[e._v("Search")])],1)],1),e._v(" "),s("app-page-section",[s("ui-r-table",e._b({attrs:{"disable-pagination":""},scopedSlots:e._u([{key:"col:domain",fn:function(t){var n=t.domain;return s("ui-link",{attrs:{name:"user/email/email-tracking",params:{domain:n}}},[e._v("\n                "+e._s(n)+"\n            ")])}},{key:"col:owner",fn:function(t){var n=t.owner;return"-unknown-"!==n?s("ui-link",{attrs:{name:"reseller/users/view",params:{user:n}}},[e._v("\n                "+e._s(n)+"\n            ")]):e._e()}},{key:"col:delivered",fn:function(t){var s=t.delivered;return[e._v("\n                "+e._s(s.count)+"\n            ")]}},{key:"col:failed",fn:function(t){var s=t.failed;return[e._v("\n                "+e._s(s.count)+"\n            ")]}},{key:"col:deferred",fn:function(t){var s=t.deferred;return[e._v("\n                "+e._s(s.count)+"\n            ")]}},{key:"col:unknown",fn:function(t){var s=t.unknown;return[e._v("\n                "+e._s(s.count)+"\n            ")]}},{key:"col:size",fn:function(t){var n=t.size;return s("span",{staticClass:"wrap:nowrap"},[e._v("\n                "+e._s(e._f("humanReadableSize")(n))+"\n            ")])}},{key:"row:actions",fn:function(t){var n=t.item;return s("ui-link",{attrs:{title:e.$gettext("Show Info")},on:{click:function(t){return e.showRawInfo(n)}}},[s("ui-icon",{attrs:{id:"circle-info",theme:"safe"}})],1)}}],null,!0)},"ui-r-table",{rows:e.$api,columns:[{id:"domain",label:e.$gettext("Domain")},{id:"mailbox",label:e.$gettext("Mailbox")},{id:"owner",label:e.$gettext("Owner")},{id:"delivered",label:e.$gettext("Delivered")},{id:"failed",label:e.$gettext("Failed")},{id:"deferred",label:e.$gettext("Deferred")},{id:"unknown",label:e.$gettext("Unknown")},{id:"size",label:e.$gettext("Size")},{id:"count",label:e.$gettext("Amount")}],verticalLayout:e.$_Client.isPhone,isCheckable:!1,isSortable:!0,sortBy:e.sortBy},!1)),e._v(" "),s("details-dialog",{attrs:{item:e.currentDomain}})],1)],1)}),[],!1,null,null,null);"function"==typeof l()&&l()(u);var d=u.exports},"./src/js/pages/admin/email-summary/index.vue?vue&type=custom&index=0&blockType=route":function(){},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/inputs/input-date-range.vue?vue&type=style&index=0&lang=scss&":function(e,t,s){var n=s("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/components/local/inputs/input-date-range.vue?vue&type=style&index=0&lang=scss&");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals);(0,s("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("f2bf013c",n,!0,{})}}]);