(window.webpackJsonp=window.webpackJsonp||[]).push([[147],{1865:function(e,t,r){"use strict";r.r(t);var a=r(4063),n=r(2783);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);var s=r(0),c=r(3782),i=r.n(c),u=Object(s.a)(n.default,a.a,a.b,!1,null,null,null);"function"==typeof i.a&&i()(u),t.default=u.exports},1922:function(e,t,r){"use strict";var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.resetDnsProvider=t.saveDnsProvider=t.disableSSL=t.enableSSL=t.updateForceRedirect=t.saveCA=t.getCA=t.pasteSSLCert=t.disableLetsencryptAutoRenew=t.requestLetsencrypt=t.useServersCert=t.submitRequest=t.getOptions=void 0,r(57),r(7),r(5),r(21),r(40);var n=a(r(2)),o=a(r(78)),s=a(r(98)),c=r(2056),i=o.default.get({id:"SSL_OPTIONS",url:"/CMD_SSL",domain:!0,params:{dnsproviders:!0},after:function(e){return e.flow(e.project({"hashTypes.current":"hash_select","hashTypes.all":"hash_types",keySizes:"keysize_select",enabled:"SSL_ON",acmeProvider:"ACME_PROVIDER","tab.server":"SERVERCHECKED","tab.paste":"PASTECHECKED","letsEncrypt.domains":"LETSENCRYPT_OPTIONS","letsEncrypt.selected":"LETSENCRYPT_OPTIONS","letsEncrypt.wc.enabled":"WILDCARD","letsEncrypt.wc.domains":"LETSENCRYPT_WC_OPTIONS","letsEncrypt.wc.selected":"LETSENCRYPT_WC_OPTIONS","letsEncrypt.enabled":"LETSENCRYPT","letsEncrypt.showOptions":"LETSENCRYPT","letsEncrypt.maxRequests":"LETSENCRYPT_MAX_REQUESTS","letsEncrypt.renewalDays":"LETSENCRYPT_RENEWAL_DAYS","letsEncrypt.dnsProviders":"dnsproviders","letsEncrypt.backgroundDefault":"BACKGROUND_DEFAULT",cert:"CERTIFICATE",certHosts:"CERTIFICATE_HOSTS",certExpiry:"NOT_AFTER",key:"KEY","values.province":"PROVINCE","values.city":"CITY","values.company":"COMPANY","values.division":"DIVISION","values.email":"EMAIL","values.name":"NAME","values.country":"COUNTRY","options.forceRedirect":"FORCE_SSL_CHECKED","pro.certificates":"certificates","pro.retries":"next_retries","pro.snidomains":"snidomains"}),e.mapProps({acmeProvider:function(e){return e||"letsencrypt"},key:e.convert.toAppText,cert:e.convert.toAppText,hashTypes:e.mapProp("all",e.transformObject((function(e,t){return(0,n.default)({},e,t)}))),tab:function(e){return Object.keys(e).find((function(t){return e[t]}))},keySizes:e.flow(e.toSelect,e.project({all:"options",current:"value"})),enabled:e.convert.toAppBoolean,options:e.mapProp("forceRedirect",(function(e){return!!e})),letsEncrypt:e.mapProps({enabled:function(e){return"0"!==e},showOptions:e.isEqual("1"),maxRequests:function(t){return e.convert.toAppNumber(t||0)},domains:e.flow((function(e){return"string"==typeof e?{}:e}),e.setDefault({}),Object.keys,e.mapArray(s.default.toUnicode)),selected:e.flow((function(e){return"string"==typeof e?{}:e}),e.setDefault({}),e.filter(e.notEmpty),Object.keys),backgroundDefault:function(e){return e||"auto"},wc:e.mapProps({enabled:e.isEqual("1"),selected:e.flow(e.setDefault({}),e.filter(e.notEmpty),Object.keys),domains:e.flow(e.setDefault({}),Object.keys,e.mapArray(s.default.toUnicode))}),dnsProviders:function(e){if(!e||e.data.error)return{data:{},selected:{value:"",configuration:{}}};var t;return{data:e.data,selected:{value:e.dnsprovider?e.dnsprovider.dnsprovider:"",configuration:e.dnsprovider?(t=e.dnsprovider,delete t.dnsprovider,t):{}}}}}),pro:c.processProData}))}});t.getOptions=i;var u=o.default.post({url:"/CMD_SSL",params:{action:"save"},domain:!0,schema:{type:o.default.REQUIRED_STRING,request:{required:!0}}}),l=u.extend({id:"SSL_REQUEST",params:{type:"create"},schema:{country:o.default.REQUIRED_STRING,province:o.default.REQUIRED_STRING,city:o.default.REQUIRED_STRING,company:o.default.REQUIRED_STRING,division:o.default.REQUIRED_STRING,name:o.default.REQUIRED_STRING,email:o.default.REQUIRED_STRING,keysize:o.default.REQUIRED_STRING,encryption:o.default.REQUIRED_STRING},after:function(e){return e.mapProp("request",e.flow((function(e){return e||""}),e.convert.toAppString,e.convert.toAppText))}});t.submitRequest=l;var p=u.extend({params:{type:"server",request:!1}});t.useServersCert=p;var d=u.extend({params:{type:"create",request:"letsencrypt"},schema:{name:o.default.REQUIRED_STRING,keysize:o.default.REQUIRED_STRING,encryption:o.default.REQUIRED_STRING,wildcard:o.default.OPTIONAL_BOOL,le_select:{type:Array,required:!1},le_wc_select:{type:Array,required:!1},background:o.default.REQUIRED_STRING}});t.requestLetsencrypt=d;var f=o.default.post({url:"/CMD_SSL",params:{disable_letsencrypt_autorenew:!0,json:!0},domain:!0});t.disableLetsencryptAutoRenew=f;var v=o.default.post({url:"/CMD_SSL",params:{action:"save",type:"paste"},domain:!0,body:{certificate:o.default.REQUIRED_STRING},before:function(e){return{certificate:e.certificate.replace(/\r\n/g,"\n")}}});t.pasteSSLCert=v;var m=o.default.get({id:"CA",url:"/CMD_SSL",params:{view:"cacert"},domain:!0,after:function(e){return e.flow(e.moveProp("CHECKED","active"),e.moveProp("CACERT","cacert"),e.mapProps({active:e.convert.toAppBoolean,cacert:function(e){return e.replace(/(\\n)/gm,"\n")}}))}});t.getCA=m;var y=o.default.post({url:"/CMD_SSL",params:{action:"save",type:"cacert"},domain:!0,schema:{active:o.default.REQUIRED_BOOL,cacert:o.default.REQUIRED_STRING},before:function(e){return{cacert:e.cacert.replace(/\r\n/g,"\n")}}});t.saveCA=y;var E=o.default.post({url:"/CMD_DOMAIN",params:{action:"private_html"},domain:!0,schema:{force_ssl:o.default.REQUIRED_BOOL}});t.updateForceRedirect=E;var S=o.default.post({url:"/CMD_DOMAIN",params:{action:"modify",only_affect:"ssl",ssl:"ON"},domain:!0});t.enableSSL=S;var R=S.extend({params:{ssl:null}});t.disableSSL=R;var _=o.default.post({url:"/CMD_SSL",params:{action:"save",type:"dnsprovider"},domain:!0});t.saveDnsProvider=_;var O=o.default.post({url:"/CMD_SSL",domain:!0,params:{action:"save",type:"dnsprovider",dnsprovider_reset:!0}});t.resetDnsProvider=O},2056:function(e,t,r){"use strict";r(7),r(10),r(5),r(6),r(8),r(11),r(16),r(14),r(23),r(25),r(18);var a=r(1),n=r(19);Object.defineProperty(t,"__esModule",{value:!0}),t.manualRetry=t.cancelRetry=t.forceRetry=t.deleteCertificate=t.retryCertificate=t.processProData=void 0,r(12),r(15);var o=a(r(38)),s=a(r(2)),c=a(r(78)),i=r(504),u=r(28),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=o?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(a,s,c):a[s]=e[s]}a.default=e,r&&r.set(e,a);return a}(r(9));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=function(e){return f(f({},e),{},{valid:"yes"===e.valid})},m=function(e){return{host:e.domain,next_retry:(0,i.toAppDate)(e.next_retry),hosts:l.values(l.pickBy((function(t,r){return r.includes("yes"===e.wildcard?"le_wc_select":"le_select")}),e))}},y=function(e){var t=(0,o.default)(e,2);return f({host:t[0]},t[1])};t.processProData=function(e){return void 0!==e.certificates&&l.evolve({certificates:l.pipe(l.values,l.map(v)),retries:l.pipe(l.values,l.map(m)),snidomains:l.pipe(l.toPairs,l.map(y))},e)};var E=c.default.select({url:"/CMD_SSL",domain:!0,params:{action:"certificate",retry:!0}});t.retryCertificate=E;var S=c.default.select({url:"/CMD_SSL",domain:!0,params:{action:"certificate",delete:!0}});t.deleteCertificate=S;var R=c.default.select({url:"/CMD_SSL",domain:!0,params:{action:"retries",retry_now:!0}});t.forceRetry=R;var _=c.default.select({url:"/CMD_SSL",domain:!0,params:{action:"retries",cancel:!0}});t.cancelRetry=_;var O=c.default.post({url:"/CMD_SSL",before:function(e){return{domain:u.Store.state.app.domain,select0:u.Store.state.app.domain,action:"retries",retry_now:!0,wildcard:!!e.wildcard||null,subdomains:!!e.subdomains||null,pointers:!!e.pointers||null}},schema:{wildcard:c.default.OPTIONAL_BOOL,subdomains:c.default.OPTIONAL_BOOL,pointers:c.default.OPTIONAL_BOOL}});t.manualRetry=O},2783:function(e,t,r){"use strict";r.r(t);var a=r(2784),n=r.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(o);t.default=n.a},2784:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(1922),n={preload:a.getCA,api:[{command:a.getCA,bind:"ca"}],data:function(){return{cacert:"",active:!1}},created:function(){this.active=this.$api.ca.active,this.cacert=this.$api.ca.cacert},methods:{submit:function(){(0,a.saveCA)({cacert:this.cacert,active:this.active})},copyToClipboard:function(){this.$refs.cacert.select(),document.execCommand("copy")}}};t.default=n},3782:function(e,t){},4063:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-page",{attrs:{actions:[{label:e.$gettext("Copy to clipboard"),handler:e.copyToClipboard,icon:"#clipboard-copy"}]}},[r("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:e.copyToClipboard},slot:"header:buttons"},[r("translate",[e._v("Copy to clipboard")])],1),e._v(" "),r("app-page-section",[r("ui-form-element",{attrs:{vertical:""}},[r("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column",cross:"start"},expression:"{ dir: 'column', cross: 'start' }"},{name:"gutter",rawName:"v-gutter",value:[1,null],expression:"[1, null]"}],attrs:{slot:"content"},slot:"content"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.cacert,expression:"cacert"}],ref:"cacert",staticClass:"pageSsl-keyArea width:100%",attrs:{rows:"10"},domProps:{value:e.cacert},on:{input:function(t){t.target.composing||(e.cacert=t.target.value)}}})])]),e._v(" "),r("ui-form-element",{attrs:{vertical:""}},[r("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[r("translate",[e._v("Use a CA Cert")])],1)],1)],1),e._v(" "),r("ui-button",{attrs:{slot:"footer:buttons",theme:"safe",disabled:!e.cacert},on:{click:e.submit},slot:"footer:buttons"},[r("translate",[e._v("Save")])],1)],1)},n=[]}}]);