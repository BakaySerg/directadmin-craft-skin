(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[9493],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/email/vacations/index.vue?vue&type=script&lang=js&":function(e,t,a){"use strict";a("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var o=a("./src/js/api/commands/user/email/vacations.js"),n={preload:o.getVacations,commands:{getVacations:o.getVacations},data:function(){return{select:[]}},watch:{$domain:o.getVacations},methods:{deleteVacations:function(){(0,o.deleteVacations)({select:this.select}).then(this.$reset).then(o.getVacations)}}};t.Z=n},"./src/js/api/commands/user/email/vacations.js":function(e,t,a){"use strict";a("./node_modules/core-js/modules/es.object.define-property.js");var o=a("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.validateVacationAccount=t.modifyVacation=t.getVacations=t.getVacationDefaults=t.getVacation=t.deleteVacations=t.createVacation=void 0;var n=o(a("./node_modules/@babel/runtime/helpers/typeof.js"));a("./node_modules/core-js/modules/es.object.to-string.js"),a("./node_modules/core-js/modules/es.promise.js"),a("./node_modules/core-js/modules/es.number.constructor.js");var s=o(a("./src/js/api/command/index.js")),r=function(e){return e.mapProps({custom_reply_headers:e.isEqual("1"),reply_content_types:e.toSelect,reply_encodings:e.toSelect,reply_once_select:e.toSelect})},i=s.default.get({id:"VACATIONS",url:"/CMD_EMAIL_VACATION",domain:!0,pagination:!0,after:function(e){return e.flow((function(e){return{rows:e}}),e.processTableInfo("rows"),e.mapProp("rows",e.flow(e.toArray,e.mapArray(e.flow(e.project({user:"user",start:"time.start_timestamp",end:"time.end_timestamp"}),e.mapProps({start:e.convert.toAppDate,end:e.convert.toAppDate}))))))}});t.getVacations=i;var l=s.default.get({id:"VACATION_DEFAULTS",url:"/CMD_EMAIL_VACATION_CREATE",domain:!0,after:function(e){return e.flow(e.mapProps({ENDDAY:e.toSelect,ENDMONTH:e.toSelect,ENDYEAR:e.toSelect,ENDTIME:e.toSelect,STARTDAY:e.toSelect,STARTMONTH:e.toSelect,STARTYEAR:e.toSelect,STARTTIME:e.toSelect,poplist:e.toSelect}),e.moveProp({ENDDAY:"end.day",ENDMONTH:"end.month",ENDYEAR:"end.year",ENDTIME:"end.time",STARTDAY:"start.day",STARTMONTH:"start.month",STARTYEAR:"start.year",STARTTIME:"start.time"}),e.mapProps({end:function(e){return{time:e.time,date:new Date(e.year.value,Number(e.month.value)-1,e.day.value)}},start:function(e){return{time:e.time,date:new Date(e.year.value,Number(e.month.value)-1,e.day.value)}},headers:r(e)}))}});t.getVacationDefaults=l;var u=s.default.post({url:"/CMD_EMAIL_VACATION",params:{action:"create"},domain:!0,schema:{user:s.default.REQUIRED_STRING,starttime:s.default.REQUIRED_STRING,startday:s.default.REQUIRED_STRING,startmonth:s.default.REQUIRED_STRING,startyear:s.default.REQUIRED_STRING,endtime:s.default.REQUIRED_STRING,endday:s.default.REQUIRED_STRING,endmonth:s.default.REQUIRED_STRING,endyear:s.default.REQUIRED_STRING}});t.createVacation=u;var c=u.extend({params:{action:"modify"}});t.modifyVacation=c;var d=s.default.select({url:"/CMD_EMAIL_VACATION",params:{action:"delete",delete:!0},domain:!0});t.deleteVacations=d;var m=s.default.get({id:"VACATION",url:"/CMD_EMAIL_VACATION_MODIFY",domain:!0,schema:{user:s.default.REQUIRED_STRING},after:function(e){return e.flow(e.mapProps({ENDDAY:e.toSelect,ENDMONTH:e.toSelect,ENDYEAR:e.toSelect,ENDTIME:e.toSelect,STARTDAY:e.toSelect,STARTMONTH:e.toSelect,STARTYEAR:e.toSelect,STARTTIME:e.toSelect}),e.moveProp({ENDDAY:"end.day",ENDMONTH:"end.month",ENDYEAR:"end.year",ENDTIME:"end.time",STARTDAY:"start.day",STARTMONTH:"start.month",STARTYEAR:"start.year",STARTTIME:"start.time"}),e.mapProps({end:function(e){return{time:e.time,date:new Date(e.year.value,Number(e.month.value)-1,e.day.value)}},start:function(e){return{time:e.time,date:new Date(e.year.value,Number(e.month.value)-1,e.day.value)}},text:e.convert.toAppText,headers:r(e)}))}});t.getVacation=m;var p=s.default.get({id:"VACATION_VALIDATION",domain:!0,url:"/CMD_EMAIL_VACATION",schema:{user:s.default.REQUIRED_STRING},before:function(e){return{user:null,comparison1:"equals",value1:e.user}},response:!1,mapResponse:function(e){return"object"!==(0,n.default)(e[0])}});t.validateVacationAccount=p},"./src/js/pages/user/email/vacations/index.vue":function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return o.X},default:function(){return u}});var o=a("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/email/vacations/index.vue?vue&type=script&lang=js&"),n=o.Z,s=a("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),r=a("./src/js/pages/user/email/vacations/index.vue?vue&type=custom&index=0&blockType=route"),i=a.n(r),l=(0,s.Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-page",{attrs:{actions:[{label:e.$gettext("Set Vacation Message"),name:"user/email/vacations/create",icon:"#plus-fill"}]}},[a("ui-button-link",{attrs:{slot:"header:buttons",theme:"primary",name:"user/email/vacations/create"},slot:"header:buttons"},[a("translate",[e._v("Set Vacation Message")])],1),e._v(" "),a("app-page-section",[a("ui-api-table",e._b({on:{"action:del":function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()}},scopedSlots:e._u([{key:"col:user",fn:function(t){var a=t.user;return[e._v("\n                "+e._s(a)+"@"+e._s(e.$domainUnicode)+"\n            ")]}},{key:"row:actions",fn:function(t){var o=t.user;return a("ui-button-link",{attrs:{theme:"light",size:"small",name:"user/email/vacations/modify",params:{user:o}}},[a("ui-icon",{directives:[{name:"margin",rawName:"v-margin",value:[0,"4px",0,0],expression:"[0,'4px', 0, 0]"}],attrs:{id:"pencil"}}),e._v(" "),e.$_Client.isPhone?e._e():a("translate",[e._v("\n                    Modify\n                ")])],1)}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getVacations,rowID:"user",columns:{user:{label:e.$gettext("Vacation Account"),grow:!0},start:{label:e.$gettext("Start Time"),filter:"date",sortID:"2"},end:{label:e.$gettext("End Time"),filter:"date",sortID:"3"}},actions:{del:e.$gettext("Delete")},editable:!1,verticalLayout:e.$_Client.isPhone},!1))],1),e._v(" "),a("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("vacation message","vacation messages",e.select.length)},on:{"click:confirm":e.deleteVacations}})],1)}),[],!1,null,null,null);"function"==typeof i()&&i()(l);var u=l.exports},"./src/js/pages/user/email/vacations/index.vue?vue&type=custom&index=0&blockType=route":function(){}}]);