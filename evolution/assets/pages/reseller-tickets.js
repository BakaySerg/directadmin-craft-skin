(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[125],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/reseller/_dialogs/view-ticket.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var l,r=o(s("./node_modules/@babel/runtime/regenerator/index.js")),n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=s("./src/js/api/commands/reseller/tickets.js"),i={filters:{firstLetter:function(e){return e[0].toUpperCase()}},props:{subject:{type:String,required:!0},user:{type:String,required:!0},ticket:{type:String,required:!0},messages:{type:Array,required:!0}},data:function(){return{message:"",status:"open",focused:!1}},methods:{postReply:(l=(0,n.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.replyTicket)({number:this.ticket,subject:"Re: ".concat(this.subject),user:this.user,message:this.message,status:this.status});case 2:e.sent&&(this.message="",this.$emit("update"));case 4:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})}};t.Z=i},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/reseller/tickets.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.symbol.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),s("./node_modules/core-js/modules/es.object.define-properties.js"),s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.object.values.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.find.js");var l=o(s("./node_modules/@babel/runtime/regenerator/index.js")),r=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=s("./src/js/api/commands/reseller/tickets.js"),i=o(s("./src/js/pages/reseller/_dialogs/view-ticket.vue"));function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){(0,r.default)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var c,p,m,f,_={name:"ResellerTickets",preload:[a.getTickets,a.getEmailSetting,a.getActiveStatus],commands:{getTickets:a.getTickets},api:[{command:a.getTickets,bind:"tickets"},{command:a.getMessages,bind:"messages"},{command:a.getEmailSetting,bind:"emailSetting"},{command:a.getActiveStatus,bind:"activeStatus"}],components:{ViewTicketDialog:i.default},beforeRouteUpdate:(f=(0,n.default)(l.default.mark((function e(t,s,o){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.query.id&&(this.savedQuery=s.query,this.openTicketByID(t.query.id)),o();case 2:case"end":return e.stop()}}),e,this)}))),function(e,t,s){return f.apply(this,arguments)}),props:{number:{type:String,required:!1,default:""}},data:function(){return{select:[],show:["open","hold","closed"],openedTicket:null,newTicket:{},email:{email:"",ON:!1},ticketSystemStatus:{active:!1,html:""},savedQuery:{}}},computed:{ticketsCount:function(){var e=this;return function(t){var s=e.$api.tickets.filters[t],o=s.new?"".concat(s.new," / "):"";return"(".concat(o).concat(s.total,")")}},allFiltersChecked:function(){return Object.values(this.filters).every((function(e){return e}))},filters:function(){return{open:this.show.includes("open"),hold:this.show.includes("hold"),closed:this.show.includes("closed")}},updateTicketOpenActionDisabled:function(){var e=this;if(this.select.length>1||!this.select.length)return!0;var t=(this.$api.tickets.rows.find((function(t){return t.ticket===e.select[0]}))||{}).status;return"closed"!==(void 0===t?"open":t)}},watch:{show:function(){this.reloadTable()}},created:function(){this.email={email:this.$api.emailSetting.email,ON:this.$api.emailSetting.checked},this.ticketSystemStatus=d({},this.$api.activeStatus),this.$route.query.id&&this.openTicketByID(this.$route.query.id)},methods:{getPriorityClass:function(e){var t=e.priority_string.toLowerCase()||"normal";return"priority-".concat(t)},openTicketByID:function(e){var t=this.$api.tickets.rows.find((function(t){return t.ticket===e}));this.openTicket(t)},closeTickets:function(){(0,a.closeTickets)({select:this.select}).then(this.reloadTable)},updateTicketOpen:function(){(0,a.openTicket)(this.select[0]).then(this.reloadTable)},markAsRead:function(){(0,a.markTicketsRead)({select:this.select}).then(this.reloadTable)},loadTicketMessages:function(){return(0,a.getMessages)({number:this.openedTicket.ticket})},openTicket:(m=(0,n.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.openedTicket=t,e.next=3,this.loadTicketMessages();case 3:this.$dialog("VIEW_TICKET_DIALOG").open();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)}),sendMessage:(p=(0,n.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,a.createTicket)(this.newTicket);case 1:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)}),loadStatus:(c=(0,n.default)(l.default.mark((function e(){var t;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.getActiveStatus)();case 2:t=e.sent,this.ticketSystemStatus=d({},t);case 4:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)}),updateSettings:function(){(0,a.updateEmailSetting)(this.email),(0,a.updateActiveStatus)(this.ticketSystemStatus)},reloadTable:function(){this.$refs.table.reloadTable({show_open:this.filters.open,show_hold:this.filters.hold,show_closed:this.filters.closed}),this.select=[]},closeTicketDialog:function(){this.$router.push({name:"reseller/tickets",query:this.savedQuery}),this.savedQuery={}}}};t.Z=_},"./src/js/api/commands/reseller/tickets.js":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.symbol.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),s("./node_modules/core-js/modules/es.object.define-properties.js"),s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.updateEmailSetting=t.updateActiveStatus=t.sendMessageMultiple=t.replyTicket=t.openTicket=t.markTicketsRead=t.getTickets=t.getTicketDefaults=t.getSystemStatus=t.getMessages=t.getEmailSetting=t.getActiveStatus=t.createTicket=t.closeTickets=void 0,s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.object.values.js"),s("./node_modules/core-js/modules/es.array.map.js");var l=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),r=o(s("./src/js/api/command/index.js")),n=o(s("./node_modules/date-fns/esm/formatDistance/index.js"));function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){(0,l.default)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u=r.default.post({url:"/CMD_TICKET_CREATE",params:{action:"create",type:"message",user:"multiple",priority:"20"},schema:{users:r.default.ROWS,subject:r.default.REQUIRED_STRING,message:r.default.REQUIRED_STRING,emailOnly:i(i({},r.default.OPTIONAL_BOOL),{},{default:!1}),all_email_accounts:r.default.OPTIONAL_BOOL}});t.sendMessageMultiple=u;var d=i(i({},r.default.OPTIONAL_BOOL),{},{default:!0}),c=r.default.get({id:"TICKETS",url:"/CMD_TICKET_MANAGE",response:{tickets:[],info:{columns:[],pagination:{},tickets:{}}},pagination:!0,schema:{show_open:d,show_hold:d,show_closed:d},after:function(e){return e.flow(e.wrap("rows"),e.moveProp({"rows.info.new_all":"filters.all.new","rows.info.num_all":"filters.all.total","rows.info.new_hold":"filters.hold.new","rows.info.num_hold":"filters.hold.total","rows.info.new_open":"filters.open.new","rows.info.num_open":"filters.open.total","rows.info.new_closed":"filters.closed.new","rows.info.num_closed":"filters.closed.total","rows.info.active":"enabled","rows.info.html":"message"}),e.processTableInfo("rows"),e.mapProps({rows:e.flow(e.toArray,e.mapArrayProps({new:e.convert.toAppBoolean,priority:e.convert.toAppNumber,replies:e.convert.toAppNumber,last_message:e.convert.toAppDate,subject:e.convert.toAppString,user:e.convert.toAppString})),filters:e.mapValues(e.mapProps({new:e.convert.toAppNumber,total:e.convert.toAppNumber})),enabled:e.convert.toAppBoolean,message:e.convert.toAppHtml}))}});t.getTickets=c;var p=r.default.get({id:"TICKET_MESSAGES",url:"/CMD_TICKET_MANAGE",response:[],params:{action:"view",type:"ticket"},schema:{number:r.default.REQUIRED_STRING},after:function(e){return e.flow(e.deleteProp("info"),e.toArray,(function(e){return e.reverse()}),e.mapArrayProps({message:e.convert.toAppHtml,time:function(t){return(0,n.default)(Date.now(),e.convert.toAppDate(t))}}))}});t.getMessages=p;var m=r.default.select({url:"/CMD_TICKET_MANAGE",params:{close:!0}});t.closeTickets=m;var f=r.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"status",status:"open"},schema:{number:r.default.REQUIRED_STRING}});t.openTicket=f;var _=r.default.select({url:"/CMD_TICKET_MANAGE",params:{read:!0}});t.markTicketsRead=_;var v=r.default.post({url:"/CMD_TICKET_CREATE",params:{action:"create",type:"request"},before:function(e){return{encoding:e.email_only?"utf-8":null}},schema:{user:r.default.REQUIRED_STRING,priority:i(i({},r.default.REQUIRED_STRING),{},{validator:function(e){return["10","20","30"].includes(e)}}),subject:r.default.REQUIRED_STRING,message:r.default.REQUIRED_STRING,email_only:r.default.OPTIONAL_BOOL}});t.createTicket=v;var j=r.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"reply",type:"reply",priority:"none"},schema:{number:r.default.REQUIRED_STRING,user:r.default.REQUIRED_STRING,subject:r.default.REQUIRED_STRING,status:{type:String,required:!1,default:"open",validator:function(e){return["open","closed"].includes(e)}},message:r.default.REQUIRED_STRING}});t.replyTicket=j;var g=r.default.get({id:"TICKET_DEFAULTS",url:"/CMD_TICKET_CREATE",after:function(e){return e.flow(e.moveProp("EML_ONLY_CHEKCED","email.set"),e.moveProp("SHOW_EML_ONLY","email.show"),e.moveProp("TCKTTO","to"),e.moveProp("TCKTTYPE","type"),(function(e){return i(i({},e),{},{selected:Object.values(e.to).find((function(e){return!!e.selected}))})}),e.mapProps({email:e.mapProps({set:e.convert.toAppBoolean,show:e.convert.toAppBoolean}),to:function(e){return Object.values(e).map((function(e){return{label:e.text,value:e.value}}))},selected:function(e){return{label:e.text,value:e.value}}}))}});t.getTicketDefaults=g;var b=r.default.get({id:"TICKETS_EMAIL_SETTING",url:"/CMD_TICKET",after:function(e){return e.flow(e.project({email:"settings.EMAIL",checked:"settings.EMAILCHECKED"}),e.mapProps({featureEnabled:e.feedWith(1,(function(e){return void 0!==e.checked})),email:e.setDefault(""),checked:e.flow(e.setDefault("no"),e.convert.toAppBoolean)}))}});t.getEmailSetting=b;var y=r.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"email"},schema:{email:r.default.REQUIRED_STRING,ON:r.default.REQUIRED_BOOL}});t.updateEmailSetting=y;var k=r.default.get({id:"TICKETS_ACTIVE_STATUS",url:"/CMD_TICKET_MANAGE",response:{html:"",active:!1},after:function(e){return function(t){return{html:t.info.html,active:e.convert.toAppBoolean(t.info.active)}}}});t.getActiveStatus=k;var h=r.default.post({url:"/CMD_TICKET_MANAGE",params:{action:"active"},schema:{active:r.default.REQUIRED_BOOL,html:r.default.REQUIRED_STRING}});t.updateActiveStatus=h;var T=r.default.get({id:"TICKET_SYSTEM_STATUS",url:"/CMD_TICKET_CREATE",params:{type:"Ticket"},notifyError:!0});t.getSystemStatus=T},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/reseller/_dialogs/view-ticket.vue?vue&type=style&index=0&lang=scss&":function(){},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/reseller/tickets.vue?vue&type=style&index=0&id=6454676d&lang=scss&scoped=true&":function(){},"./src/js/pages/reseller/_dialogs/view-ticket.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return o.X},default:function(){return n}});var o=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/reseller/_dialogs/view-ticket.vue?vue&type=script&lang=js&"),l=o.Z,r=(s("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/reseller/_dialogs/view-ticket.vue?vue&type=style&index=0&lang=scss&"),(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ui-dialog",e._g(e._b({attrs:{id:"VIEW_TICKET_DIALOG",size:"normal","no-close-btn":""},on:{"dialog:close":function(t){return e.$emit("close")}}},"ui-dialog",e.$attrs,!1),e.$listeners),[s("translate",{attrs:{slot:"title","translate-params":{ticket:e.ticket}},slot:"title"},[e._v("\n        View Ticket: #%{ ticket }\n    ")]),e._v(" "),s("div",{attrs:{slot:"content"},slot:"content"},[s("ui-form-element",{staticClass:"pos:rel"},[s("div",{staticClass:"textarea",attrs:{slot:"content"},slot:"content"},[s("input-textarea",{staticClass:"textarea-input",attrs:{slot:"content",placeholder:e.$gettext("Type your reply here...")},on:{focus:function(t){e.focused=!0},blur:function(t){e.focused=!1},keyup:function(t){return(t.type.indexOf("key")||13===t.keyCode)&&t.ctrlKey?e.postReply.apply(null,arguments):null}},slot:"content",model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),e._v(" "),s("div",{staticClass:"textarea-submit-button",attrs:{slot:"content"},slot:"content"},[e.$_Client.isDesktop?s("translate",{staticClass:"submit-keys-suggestion"},[e._v("\n                        Ctrl+Enter to post reply\n                    ")]):s("span"),e._v(" "),s("ui-input-group",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{grow:!1},expression:"{ grow: false }"}],style:{minWidth:"unset"},attrs:{grow:!1}},[s("ui-button",{attrs:{slot:"additions:left",disabled:""},slot:"additions:left"},[s("translate",[e._v("Status:")])],1),e._v(" "),s("input-select",{attrs:{slot:"input",title:e.$gettext("Status"),options:{open:e.$gettext("Open"),closed:e.$gettext("Closed")}},slot:"input",model:{value:e.status,callback:function(t){e.status=t},expression:"status"}}),e._v(" "),s("ui-button",{style:{whiteSpace:"nowrap"},attrs:{slot:"additions:right",theme:"safe"},on:{click:e.postReply},slot:"additions:right"},[s("translate",[e._v("Post reply")])],1)],1)],1)],1)]),e._v(" "),s("ui-table",{attrs:{items:e.messages,"hide-headers":""}},[s("ui-column",{attrs:{id:"avatar",fit:""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("ui-round-badge",{staticClass:"messageAvatar",attrs:{theme:e.$state.app.user.name===t.from?"safe":"primary",size:48}},[e._v("\n                        "+e._s(e._f("firstLetter")(t.from))+"\n                    ")])]}}])}),e._v(" "),s("ui-column",{attrs:{id:"message"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"scrollArea"},[s("ui-grid",{attrs:{column:""}},[s("ui-grid",{attrs:{cross:"center"}},[s("span",{staticClass:"userName"},[e._v("\n                                    "+e._s({admin:e.$gettext("Admin"),reseller:e.$gettext("Reseller"),user:e.$gettext("User")}[t.level])+":\n                                    "+e._s(t.name)+"\n                                ")]),e._v(" "),s("span",{staticClass:"c:txt:neutral"},[e._v("\n                                    ("+e._s(t.time)+")\n                                ")])]),e._v(" "),s("p",{staticClass:"message scrollbar:tiny",domProps:{innerHTML:e._s(t.message)}})],1)],1)]}}])})],1)],1)],1)}),[],!1,null,null,null)),n=r.exports},"./src/js/pages/reseller/tickets.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return o.X},default:function(){return u}});var o=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/reseller/tickets.vue?vue&type=script&lang=js&"),l=o.Z,r=(s("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/reseller/tickets.vue?vue&type=style&index=0&id=6454676d&lang=scss&scoped=true&"),s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),n=s("./src/js/pages/reseller/tickets.vue?vue&type=custom&index=0&blockType=route"),a=s.n(n),i=(0,r.Z)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page",{attrs:{id:"manage-tickets"}},[s("app-page-section",[s("ui-api-table",e._b({ref:"table",staticClass:"app-tickets-table",on:{"action:close":e.closeTickets,"action:open":e.updateTicketOpen,"action:markread":e.markAsRead},scopedSlots:e._u([{key:"col:subject",fn:function(t){var o=t.item;return[s("ui-round-badge",{directives:[{name:"margin",rawName:"v-margin:right",value:1,expression:"1",arg:"right"}],attrs:{theme:{10:"safe",20:"primary",30:"danger"}[o.priority]||"safe",title:{10:e.$gettext("Low"),20:e.$gettext("Normal"),30:e.$gettext("High")}[o.priority]||e.$gettext("Normal"),size:12}}),e._v("\n\n                "+e._s(o.priority)+"\n                "),s("ui-link",{class:{strong:o.new},attrs:{name:"reseller/tickets",query:{id:o.ticket}}},[e._v("\n                    "+e._s(o.subject)+"\n                ")])]}},{key:"col:status",fn:function(t){var o=t.item;return s("span",{class:"ticket-status-"+o.status},[e._v("\n                "+e._s(e._f("capitalize")(o.status))+"\n            ")])}},{key:"col:last_message",fn:function(t){var o=t.last_message;return s("span",{},[e._v("\n                "+e._s(e._f("date")(o,"date"))+"\n            ")])}},{key:"col:user",fn:function(t){var o=t.user;return s("ui-link",{attrs:{name:"reseller/users/view",params:{user:o}}},[e._v("\n                "+e._s(o)+"\n            ")])}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getTickets,rowID:"ticket",columns:{ticket:e.$gettext("Ticket #"),subject:{label:e.$gettext("Subject"),grow:!0},replies:e.$gettext("Replies"),status:e.$gettext("Status"),last_message:e.$gettext("Last Message"),user:e.$gettext("User")},actions:{close:e.$gettext("Close"),open:{label:e.$gettext("Open"),disabled:e.updateTicketOpenActionDisabled},markread:e.$gettext("Mark as read")},requestData:{show_open:e.filters.open,show_hold:e.filters.hold,show_closed:e.filters.closed},verticalLayout:e.$_Client.isPhone},!1),[e._v(" "),e._v(" "),e._v(" "),e._v(" "),e.$api.tickets.filters?s("input-checkable-select",{attrs:{slot:"buttons:before",options:{open:e.$gettext("Open"),hold:e.$gettext("Hold"),closed:e.$gettext("Closed")}},slot:"buttons:before",model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("translate",{attrs:{slot:"label"},slot:"label"},[e._v("Filter")]),e._v(" "),s("span",{attrs:{slot:"check:all:after"},domProps:{textContent:e._s(e.ticketsCount("all"))},slot:"check:all:after"}),e._v(" "),s("span",{attrs:{slot:"check:open:after"},domProps:{textContent:e._s(e.ticketsCount("open"))},slot:"check:open:after"}),e._v(" "),s("span",{attrs:{slot:"check:hold:after"},domProps:{textContent:e._s(e.ticketsCount("hold"))},slot:"check:hold:after"}),e._v(" "),s("span",{attrs:{slot:"check:closed:after"},domProps:{textContent:e._s(e.ticketsCount("closed"))},slot:"check:closed:after"})],1):e._e()],1)],1),e._v(" "),e.$api.emailSetting.featureEnabled?s("ui-link",{attrs:{slot:"bottom:links",bullet:""},on:{click:function(t){e.$dialog("TICKET_SYSTEM_SETTINGS").open()}},slot:"bottom:links"},[s("translate",[e._v("Ticket System Settings")])],1):e._e(),e._v(" "),s("ui-link",{attrs:{slot:"bottom:links",bullet:"",name:"reseller/create-ticket"},slot:"bottom:links"},[s("translate",[e._v("Send a message")])],1),e._v(" "),s("ui-dialog",{attrs:{id:"TICKET_SYSTEM_SETTINGS"}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Settings")]),e._v(" "),s("div",{attrs:{slot:"content"},slot:"content"},[s("ui-form-element",{attrs:{vertical:""}},[s("input-checkbox",{attrs:{slot:"title"},slot:"title",model:{value:e.ticketSystemStatus.active,callback:function(t){e.$set(e.ticketSystemStatus,"active",t)},expression:"ticketSystemStatus.active"}},[s("translate",[e._v("Ticket System Enabled")])],1),e._v(" "),e.ticketSystemStatus.active?e._e():s("input",{directives:[{name:"model",rawName:"v-model",value:e.ticketSystemStatus.html,expression:"ticketSystemStatus.html"}],attrs:{slot:"content"},domProps:{value:e.ticketSystemStatus.html},on:{input:function(t){t.target.composing||e.$set(e.ticketSystemStatus,"html",t.target.value)}},slot:"content"})],1),e._v(" "),s("ui-form-element",{attrs:{vertical:""}},[s("input-checkbox",{attrs:{slot:"title"},slot:"title",model:{value:e.email.ON,callback:function(t){e.$set(e.email,"ON",t)},expression:"email.ON"}},[s("translate",[e._v("E-mail a copy of all messages")])],1),e._v(" "),e.email.ON?s("input",{directives:[{name:"model",rawName:"v-model",value:e.email.email,expression:"email.email"}],attrs:{slot:"content",type:"text"},domProps:{value:e.email.email},on:{input:function(t){t.target.composing||e.$set(e.email,"email",t.target.value)}},slot:"content"}):e._e()],1)],1),e._v(" "),s("ui-button",{attrs:{slot:"buttons",theme:"primary"},on:{click:e.updateSettings},slot:"buttons"},[s("translate",[e._v("Save")])],1)],1),e._v(" "),e.openedTicket?s("view-ticket-dialog",e._b({attrs:{messages:e.$api.messages},on:{update:e.loadTicketMessages,close:e.closeTicketDialog}},"view-ticket-dialog",e.openedTicket,!1)):e._e()],1)}),[],!1,null,"6454676d",null);"function"==typeof a()&&a()(i);var u=i.exports},"./src/js/pages/reseller/tickets.vue?vue&type=custom&index=0&blockType=route":function(){},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/reseller/_dialogs/view-ticket.vue?vue&type=style&index=0&lang=scss&":function(e,t,s){var o=s("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/reseller/_dialogs/view-ticket.vue?vue&type=style&index=0&lang=scss&");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,s("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("47f22a42",o,!0,{})},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/reseller/tickets.vue?vue&type=style&index=0&id=6454676d&lang=scss&scoped=true&":function(e,t,s){var o=s("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/reseller/tickets.vue?vue&type=style&index=0&id=6454676d&lang=scss&scoped=true&");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,s("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("20f00708",o,!0,{})}}]);