(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[2254],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/php-settings/_components/setting-input.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s={model:{prop:"value",event:"change"},props:{type:{type:String,required:!0},value:{type:String,default:"",required:!1},values:{type:Array,default:function(){return[]},required:!1}},data:function(){return{dataValue:this.value}},watch:{value:function(e){e!==this.dataValue&&(this.dataValue=e)},dataValue:function(e){e!==this.value&&this.$emit("change",e)}}};t.Z=s},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/php-settings/index.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n("./node_modules/core-js/modules/es.object.keys.js"),n("./node_modules/core-js/modules/es.symbol.js"),n("./node_modules/core-js/modules/es.array.filter.js"),n("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),n("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),n("./node_modules/core-js/modules/es.object.define-properties.js"),n("./node_modules/core-js/modules/es.object.define-property.js"),n("./node_modules/core-js/modules/es.array.iterator.js"),n("./node_modules/core-js/modules/es.string.iterator.js"),n("./node_modules/core-js/modules/es.weak-map.js"),n("./node_modules/core-js/modules/web.dom-collections.iterator.js");var s=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=n("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var a=s(n("./node_modules/@babel/runtime/helpers/slicedToArray.js")),r=s(n("./node_modules/@babel/runtime/helpers/defineProperty.js"));n("./node_modules/core-js/modules/es.array.reduce.js"),n("./node_modules/core-js/modules/es.object.to-string.js"),n("./node_modules/core-js/modules/es.function.name.js"),n("./node_modules/core-js/modules/web.dom-collections.for-each.js"),n("./node_modules/core-js/modules/es.object.entries.js"),n("./node_modules/core-js/modules/es.regexp.to-string.js");var u=c(n("./node_modules/ramda/src/index.js")),i=c(n("./src/js/api/commands/user/php-settings.js")),l=s(n("./src/js/pages/user/php-settings/_components/setting-input.vue"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var u=a?Object.getOwnPropertyDescriptor(e,r):null;u&&(u.get||u.set)?Object.defineProperty(s,r,u):s[r]=e[r]}return s.default=e,n&&n.set(e,s),s}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={preload:i.getSettings,api:i.getSettings,components:{SettingInput:l.default},data:function(){return{defaults:{},data:[],key:""}},computed:{overridenSettings:function(){return u.map(u.prop("name"),this.data)},availableSettings:function(){return u.without(this.overridenSettings,u.keys(this.$api.template))},requestData:function(){return this.data.reduce((function(e,t){var n,s=t.name,o=t.value;return m(m({},e),{},(n={},(0,r.default)(n,s,o),(0,r.default)(n,"save_".concat(s),o),n))}),{})}},created:function(){this.updateData()},methods:{updateData:function(){var e=this;Object.entries(this.$api.template).forEach((function(t){var n=(0,a.default)(t,2),s=n[0],o=n[1];return e.$set(e.defaults,s,o.default.toString())})),this.data=u.map((function(e){var t=(0,a.default)(e,2);return{name:t[0],value:t[1]}}),u.toPairs(this.$api.data)),this.$nextTick(this.updateKey)},addOverride:function(e){this.data.push({name:e,value:this.defaults[e]}),this.saveSettings().then(this.getSettings)},saveSettings:function(){return i.saveSettings(this.requestData)},updateKey:function(){this.key=this.availableSettings[0]},getSettings:function(){return i.getSettings().then(this.updateData)},deleteSetting:function(e){return i.deleteSetting({select:[e]}).then(this.getSettings)}}};t.Z=f},"./src/js/api/commands/user/php-settings.js":function(e,t,n){"use strict";n("./node_modules/core-js/modules/es.object.define-property.js");var s=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.saveSettings=t.getSettings=t.deleteSetting=void 0;var o=s(n("./src/js/api/command/index.js")),a="/CMD_PHP_SETTINGS",r=o.default.get({id:"PHP_SETTINGS",url:a,domain:!0,mapResponse:{template:function(e){return e.template_php_ini},data:function(e){return e.domain_php_ini}}});t.getSettings=r;var u=o.default.post({url:a,domain:!0,params:{action:"add"}});t.saveSettings=u;var i=o.default.select({url:a,params:{action:"delete"},domain:!0});t.deleteSetting=i},"./src/js/pages/user/php-settings/_components/setting-input.vue":function(e,t,n){"use strict";n.r(t),n.d(t,{__esModule:function(){return s.X},default:function(){return a}});var s=n("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/php-settings/_components/setting-input.vue?vue&type=script&lang=js&"),o=s.Z,a=(0,n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return"bool"===e.type?n("input-select",{attrs:{options:{On:e.$gettext("On"),Off:e.$gettext("Off")}},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}}):"list"===e.type?n("input-select",{attrs:{options:e.values},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}}):"int"===e.type?n("input-text",{staticClass:"width:100%",attrs:{number:""},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}}):n("input-text",{staticClass:"width:100%",model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}})}),[],!1,null,null,null).exports},"./src/js/pages/user/php-settings/index.vue":function(e,t,n){"use strict";n.r(t),n.d(t,{__esModule:function(){return s.X},default:function(){return l}});var s=n("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/php-settings/index.vue?vue&type=script&lang=js&"),o=s.Z,a=n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),r=n("./src/js/pages/user/php-settings/index.vue?vue&type=custom&index=0&blockType=route"),u=n.n(r),i=(0,a.Z)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[e.data.length?n("app-page-section",[n("ui-table",{attrs:{items:e.data}},[n("ui-column",{attrs:{id:"name",label:e.$gettext("Setting"),fit:""},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.name;return[n("strong",[e._v(e._s(s))])]}}],null,!1,2977923381)}),e._v(" "),n("ui-column",{attrs:{id:"value",label:e.$gettext("Value")},scopedSlots:e._u([{key:"default",fn:function(t){return[n("setting-input",e._b({key:t.name,model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"item.value"}},"setting-input",e.$api.template[t.name],!1))]}}],null,!1,1771075036)}),e._v(" "),n("ui-column",{attrs:{id:"button",fit:""},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.name;return[n("ui-button",{attrs:{theme:"danger",size:"normal",icon:"delete"},on:{click:function(t){return e.deleteSetting(s)}}},[n("translate",[e._v("Delete")])],1)]}}],null,!1,2619655991)})],1),e._v(" "),n("ui-button",{attrs:{slot:"footer:buttons",theme:"safe"},on:{click:e.saveSettings},slot:"footer:buttons"},[n("translate",[e._v("Save")])],1)],1):e._e(),e._v(" "),e.availableSettings.length?n("app-page-section",[n("translate",{attrs:{slot:"section:title"},slot:"section:title"},[e._v("\n            Add New Override\n        ")]),e._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Setting\n            ")]),e._v(" "),n("input-select",{attrs:{slot:"content",options:Object.keys(e.$api.template),"disabled-options":e.overridenSettings},slot:"content",model:{value:e.key,callback:function(t){e.key=t},expression:"key"}})],1),e._v(" "),n("ui-form-element",[n("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Value\n            ")]),e._v(" "),e.key?n("setting-input",e._b({attrs:{slot:"content"},slot:"content",model:{value:e.defaults[e.key],callback:function(t){e.$set(e.defaults,e.key,t)},expression:"defaults[key]"}},"setting-input",e.$api.template[e.key],!1)):e._e()],1),e._v(" "),n("ui-button",{attrs:{slot:"footer:buttons",size:"normal",theme:"safe"},on:{click:function(t){return e.addOverride(e.key)}},slot:"footer:buttons"},[n("translate",[e._v("Add")])],1)],1):e._e()],1)}),[],!1,null,null,null);"function"==typeof u()&&u()(i);var l=i.exports},"./src/js/pages/user/php-settings/index.vue?vue&type=custom&index=0&blockType=route":function(){}}]);