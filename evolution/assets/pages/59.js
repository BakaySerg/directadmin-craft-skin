(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{1795:function(e,t,a){"use strict";a.r(t);var s=a(3993),n=a(2520);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);var o=a(0),l=a(3581),i=a.n(l),u=Object(o.a)(n.default,s.a,s.b,!1,null,null,null);"function"==typeof i.a&&i()(u),t.default=u.exports},1895:function(e,t,a){"use strict";a(16),a(14),a(23),a(25),a(18),a(6);var s=a(1),n=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.getLoginPMAStatus=t.globalLoginPMA=t.loginPMA=t.setUserPrivs=t.getUserPrivs=t.changeUserPassword=t.assignUser=t.addUser=t.deleteAccessHost=t.addAccessHost=t.deleteUsers=t.getDatabase=t.uploadBackup=t.deleteDatabase=t.optimizeDatabase=t.checkDatabase=t.repairDatabase=t.getDatabases=t.createDatabase=t.getUsers=void 0;var r=s(a(78)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var s={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(s,o,i):s[o]=e[o]}s.default=e,a&&a.set(e,s);return s}(a(9));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}var i=r.default.get({id:"DB_USERS",url:"/CMD_DB_CREATE",domain:!0,mapResponse:{users:o.pipe(o.omit(["MAX_DB_LENGTH","MAX_DB_USER_LENGTH"]),o.values,o.filter((function(e){return"..."!==e.text})),o.map((function(e){return{value:e.value,label:e.text}}))),max_db_length:o.prop("MAX_DB_LENGTH"),max_db_user_length:o.prop("MAX_DB_USER_LENGTH")}});t.getUsers=i;var u=r.default.post({url:"/CMD_DB",params:{action:"create"},domain:!0,schema:{name:r.default.REQUIRED_STRING,user:r.default.REQUIRED_STRING,passwd:r.default.OPTIONAL_STRING,passwd2:r.default.OPTIONAL_STRING,userlist:r.default.OPTIONAL_STRING},after:function(e){return e.mapProp("result",e.convert.toAppHtml)}});t.createDatabase=u;var d=r.default.get({id:"DATABASES",url:"/CMD_DB",domain:!0,pagination:!0,after:function(e){return e.mapProps({databases:e.toTable(e.mapArrayProps({nusers:e.convert.toAppNumber,size:e.convert.toAppNumber})),HAVE_ONE_CLICK_PMA_LOGIN:e.convert.toAppBoolean,total_usage:e.convert.toAppNumber,dbs_select:e.toSelect})}});t.getDatabases=d;var c=r.default.select({url:"/CMD_DB",domain:!0,params:{json:!0}}),p=c.extend({params:{repair:!0}});t.repairDatabase=p;var f=c.extend({params:{check:!0}});t.checkDatabase=f;var m=c.extend({params:{optimize:!0}});t.optimizeDatabase=m;var b=c.extend({params:{delete_db:!0}});t.deleteDatabase=b;var _=r.default.post({url:"/CMD_DB",params:{action:"restore",method:"default"},domain:!0,schema:{name:r.default.REQUIRED_STRING,dbuser:r.default.REQUIRED_STRING,dbpass:r.default.REQUIRED_STRING,file:{type:File,required:!0}},before:function(e){return{file1:e.file,file:null}},fileTransfer:!0,continous:!0});t.uploadBackup=_;var v=r.default.get({id:"DB_VIEW",url:"/CMD_DB_VIEW",params:{page:1,ipp:9999},domain:!0,schema:{name:r.default.REQUIRED_STRING},after:function(e){return e.flow(e.project({hosts:"access_hosts",users:"db_users",pmaLogin:"HAVE_ONE_CLICK_PMA_LOGIN"}),e.mapProps({users:e.flow(e.deleteProp("info"),e.toArray,e.mapArray(e.getProp("User"))),hosts:e.flow(e.deleteProp("info"),e.toArray,e.mapArray(e.getProp("Access Hosts"))),pmaLogin:e.convert.toAppBoolean}))}});t.getDatabase=v;var g=r.default.post({url:"/CMD_DB",method:"POST",params:{action:"deleteuser",delete:!0,json:!0},domain:!0,schema:{name:r.default.REQUIRED_STRING,select:r.default.ROWS}});t.deleteUsers=g;var D=r.default.post({url:"/CMD_DB_ACCESS",domain:!0,params:{add:!0,json:!0},schema:{name:r.default.REQUIRED_STRING,host:r.default.REQUIRED_STRING}});t.addAccessHost=D;var h=r.default.select({url:"/CMD_DB_ACCESS",domain:!0,params:{delete:!0,json:!0},schema:{name:r.default.REQUIRED_STRING}});t.deleteAccessHost=h;var E=r.default.post({url:"/CMD_DB",domain:!0,params:{action:"createuser",json:!0},schema:{name:r.default.REQUIRED_STRING,passwd:r.default.REQUIRED_STRING,passwd2:r.default.REQUIRED_STRING}});t.addUser=E;var R=r.default.post({url:"/CMD_DB",domain:!0,params:{action:"createuser",json:!0,passwd:"*****",passwd2:"*****"},schema:{name:r.default.REQUIRED_STRING,userlist:r.default.REQUIRED_STRING}});t.assignUser=R;var A=r.default.post({url:"/CMD_DB",domain:!0,params:{action:"modifyuser",json:!0},schema:{name:r.default.REQUIRED_STRING,user:r.default.REQUIRED_STRING,passwd:r.default.REQUIRED_STRING,passwd2:r.default.REQUIRED_STRING}});t.changeUserPassword=A;var I=r.default.get({id:"DB_USER_PRIVS",url:"/CMD_DB_USER_PRIVS",domain:!0,schema:{name:r.default.REQUIRED_STRING,user:r.default.REQUIRED_STRING},after:function(e){return e.mapValues(e.isEqual("Y"))}});t.getUserPrivs=I;var P=r.default.post({url:"/CMD_DB_USER_PRIVS",domain:!0,params:{action:"save "},body:{name:r.default.REQUIRED_STRING,user:r.default.REQUIRED_STRING}});t.setUserPrivs=P;var S=r.default.post({url:"/CMD_PMA_LOGIN",domain:!0,params:{json:!0},notifySuccess:!1,notifyError:!1,schema:{name:r.default.REQUIRED_STRING}});t.loginPMA=S;var U=r.default.post({url:"/CMD_PMA_LOGIN",params:{json:!0,name:"all",domain:""},notifySuccess:!1,notifyError:!1});t.globalLoginPMA=U;var O=r.default.get({url:"/CMD_DB",response:!1,mapResponse:function(e){return"yes"===e.HAVE_ONE_CLICK_PMA_LOGIN},notifyError:!1});t.getLoginPMAStatus=O},1921:function(e,t,a){var s=a(1996);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,a(4).default)("502510de",s,!0,{})},1932:function(e,t,a){"use strict";a.r(t);a(1995);var s=a(0),n=Object(s.a)({},(function(e,t){var a=t._c;return a("div",{staticClass:"info-bar-data-text-item"},[a("span",{staticClass:"info-bar-text-item-label"},[t._t("label")],2),t._v(" "),a("span",{staticClass:"info-bar-text-item-value"},[t._t("value")],2)])}),[],!0,null,null,null);t.default=n.exports},1995:function(e,t,a){"use strict";a(1921)},1996:function(e,t,a){},2520:function(e,t,a){"use strict";a.r(t);var s=a(2521),n=a.n(s);for(var r in s)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(r);t.default=n.a},2521:function(e,t,a){"use strict";a(7),a(10),a(5),a(6),a(8),a(11);var s=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(36));a(17),a(24);var r=s(a(37)),o=s(a(2)),l=a(1895),i=a(504),u=a(13),d=s(a(3580)),c=s(a(1932));function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){(0,o.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m,b,_,v={preload:l.getDatabases,components:{UploadBackupDialog:d.default,TextItem:c.default},api:[{command:l.getDatabases,bind:"db"}],commands:{getDatabases:l.getDatabases},data:function(){return{select:[]}},computed:f(f({},(0,u.mapTokens)({phpAdminPublic:"PHPMYADMIN_PUBLIC",limit:function(e){var t="".concat(this.$state.app.user.level.toUpperCase(),"DATABASEMAX");return(0,i.toAppLimit)(e[t])||1/0},limitReached:function(e){var t=Number(e.USERDATABASEMAX)||1/0,a=Number(e.USERDATABASE);if("user"===this.$state.app.user.level)return t<=a;var s=Number(e.RESELLERDATABASEMAX)||1/0,n=Number(e.RESELLERDATABASE);return t<=a||s<=n},sessionID:"SESSION_ID"})),{},{totalUsage:function(){return this.$options.filters.humanReadableSize(this.$api.db.total_usage_bytes)},databaseCount:function(){var e="user"===this.$state.app.user.level?"USER":"RESELLER";return Number(this.$state.app.tokens["".concat(e,"DATABASE")])}}),methods:{databaseRequest:(_=(0,r.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({select:this.select});case 2:this.$refs.table.reloadTable(),this.$reset();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)}),repairDatabase:function(){this.databaseRequest(l.repairDatabase)},checkDatabase:function(){this.databaseRequest(l.checkDatabase)},optimizeDatabase:function(){this.databaseRequest(l.optimizeDatabase)},deleteDatabase:(b=(0,r.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.databaseRequest(l.deleteDatabase);case 2:this.$store.dispatch("app/GET_TOKENS");case 3:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)}),loginPMA:(m=(0,r.default)(n.default.mark((function e(t){var a,s,r,o;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.loginPMA)({name:t});case 2:a=e.sent,s=a.token,r=a.url,o="".concat(r,"?token=").concat(s),(0,u.openInNewTab)(o);case 7:case"end":return e.stop()}}),e)}))),function(e){return m.apply(this,arguments)}),loginPMAAll:function(){this.loginPMA("all")}}};t.default=v},2522:function(e,t,a){"use strict";a.r(t);var s=a(2523),n=a.n(s);for(var r in s)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(r);t.default=n.a},2523:function(e,t,a){"use strict";var s=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a(36)),r=s(a(37));a(34),a(26);var o,l=a(1895),i={api:[{command:l.getDatabases,bind:"db"}],data:function(){return{name:"",file:null,method:"default",dbuser:"",dbpass:"",uploading:!1,uploadProgress:{total:0,processed:0}}},computed:{dbList:function(){return this.$api.db.databases.rows.map((function(e){return e.database}))}},methods:{uploadBackup:(o=(0,r.default)(n.default.mark((function e(){var t;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.uploadBackup.extend({onUpload:this.onUpload}),this.uploadProgress.processed=0,this.uploadProgress.total=this.file.size,this.uploading=!0,e.next=6,t({name:this.name,file:this.file,method:this.method,dbuser:this.dbuser,dbpass:this.dbpass,domain:this.$domain});case 6:e.sent instanceof Error?(this.uploading=!1,this.uploadProgress.total=0,this.uploadProgress.processed=0):(this.$emit("upload"),this.$dialog("UPLOAD_BACKUP_DIALOG").close(),this.$reset());case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),onUpload:function(e){this.uploadProgress.total=e.total,this.uploadProgress.processed=e.loaded}}};t.default=i},3580:function(e,t,a){"use strict";a.r(t);var s=a(4144),n=a(2522);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);var o=a(0),l=Object(o.a)(n.default,s.a,s.b,!1,null,null,null);t.default=l.exports},3581:function(e,t){},3993:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return n}));var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-page",{attrs:{actions:[{handler:e.loginPMAAll,label:e.$gettext("Login to phpMyAdmin"),icon:"phpmyadmin",visible:e.$api.db.HAVE_ONE_CLICK_PMA_LOGIN&&e.$api.db.databases.rows.length},{name:"user/database/create",label:e.$gettext("Create New Database"),icon:"#plus-fill",visible:!1===e.limitReached,theme:"primary"},{label:e.$gettext("Upload Backup"),handler:e.$dialog("UPLOAD_BACKUP_DIALOG").open,icon:"#upload"}]}},[a("template",{slot:"details"},[a("ui-infobar-item",{attrs:{title:e.$gettext("Details")}},[a("text-item",[a("translate",{attrs:{slot:"label"},slot:"label"},[e._v("\n                    Usage\n                ")]),e._v(" "),a("template",{slot:"value"},[e._v("\n                    "+e._s(e.totalUsage)+"\n                ")])],2),e._v(" "),a("ui-infobar-stats",{attrs:{title:e.$gettext("Database Count"),usage:e.databaseCount,limit:e.limit}})],1)],1),e._v(" "),a("template",{slot:"header:buttons"},[e.$api.db.HAVE_ONE_CLICK_PMA_LOGIN&&e.$api.db.databases.rows.length?a("ui-button",{attrs:{theme:"light",title:e.$gettext("Login to phpMyAdmin")},on:{click:e.loginPMAAll}},[a("img",{attrs:{src:e.$store.getters["themes/iconsPath"]+"#phpmyadmin",height:"50"}})]):e._e(),e._v(" "),a("ui-tokens-conditional-button",{attrs:{link:"",theme:"primary",name:"user/database/create",token:e.$state.app.user.level.toUpperCase()+"DATABASEMAX",usage:e.databaseCount,"external-limit":e.limitReached}},[a("translate",[e._v("Create new Database")]),e._v(" "),a("translate",{attrs:{slot:"limitText"},slot:"limitText"},[e._v("\n                Database limit reached\n            ")])],1),e._v(" "),a("ui-button",{attrs:{theme:"safe"},on:{click:function(t){e.$dialog("UPLOAD_BACKUP_DIALOG").open()}}},[a("translate",[e._v("Upload Backup")])],1)],1),e._v(" "),e.$_Client.isPhone?a("app-page-section",[a("ui-stats-summary",{attrs:{badges:[{label:e.$gettext("Database Count"),value:e.$api.db.rowsCount},{label:e.$gettext("Usage"),value:e.totalUsage}]}})],1):e._e(),e._v(" "),a("app-page-section",[a("ui-api-table",e._b({ref:"table",on:{"action:repair":e.repairDatabase,"action:check":e.checkDatabase,"action:optimize":e.optimizeDatabase,"action:del":function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()}},scopedSlots:e._u([{key:"col:database",fn:function(t){var s=t.database;return a("ui-link",{attrs:{name:"user/database/view",params:{database:s}}},[e._v("\n                "+e._s(s)+"\n            ")])}},{key:"row:actions",fn:function(t){var s=t.database;return a("ui-actions",{},[a("a",{attrs:{href:"/CMD_DB/"+s+".gz?noredirect=true&X-DirectAdmin-Session-ID="+e.sessionID,download:s+".gz",target:"blank"}},[a("translate",[e._v("Download as GZ")])],1),e._v(" "),a("a",{attrs:{href:"/CMD_DB/"+s+".sql?noredirect=true&X-DirectAdmin-Session-ID="+e.sessionID,download:s+".sql",target:"blank"}},[a("translate",[e._v("Download as SQL")])],1),e._v(" "),e.$api.db.HAVE_ONE_CLICK_PMA_LOGIN?a("ui-link",{on:{click:function(t){return e.loginPMA(s)}}},[a("translate",[e._v("Login to phpMyAdmin")])],1):e._e()],1)}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getDatabases,rowID:"database",property:"databases",columns:{database:{label:e.$gettext("Database"),grow:!0},nusers:e.$gettext("Number of Users"),size:{label:e.$gettext("Size"),filter:"humanReadableSize"}},actions:{repair:e.$gettext("Repair"),check:e.$gettext("Check"),optimize:e.$gettext("Optimize"),del:e.$gettext("Delete")},verticalLayout:e.$_Client.isPhone},!1),[e.$_Client.isPhone||"standard2021"===e.$_layout?e._e():a("ui-stats-summary",{attrs:{slot:"buttons:before",badges:[{label:e.$gettext("Database Count"),value:e.databaseCount},{label:e.$gettext("Usage"),value:e.totalUsage}]},slot:"buttons:before"})],1)],1),e._v(" "),a("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("database","databases",e.select.length)},on:{"click:confirm":e.deleteDatabase}}),e._v(" "),a("upload-backup-dialog",{on:{upload:e.$reloadApiTable}})],2)},n=[]},4144:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return n}));var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-dialog",{attrs:{id:"UPLOAD_BACKUP_DIALOG","no-auto-close":"","no-close-btn":e.uploading,"no-close-icon":e.uploading},on:{"dialog:open":function(t){e.name=e.dbList[0]}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        Upload Backup\n    ")]),e._v(" "),e.uploading?a("template",{slot:"content"},[a("ui-form-element",{key:"uploadingProgressBar",attrs:{vertical:""}},[a("ui-progress",{attrs:{slot:"content",size:"big",theme:"primary",value:e.uploadProgress.processed/e.uploadProgress.total*100},slot:"content"},[e._v("\n                "+e._s(e._f("humanReadableSize")(e.uploadProgress.processed))+" / "+e._s(e._f("humanReadableSize")(e.uploadProgress.total))+"\n            ")])],1),e._v(" "),a("span",{staticClass:"txt:bold txt:center disp:iblock width:100%"},[e.uploadProgress.processed<e.uploadProgress.total?a("translate",{key:"uploadProgress"},[e._v("\n                Upload In Progress\n            ")]):a("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center",main:"center"},expression:"{ cross: 'center', main: 'center' }"}]},[a("translate",[e._v("\n                    Upload completed. Processing uploaded file\n                ")]),e._v(" "),a("ui-loader-icon",{directives:[{name:"margin",rawName:"v-margin",value:1,expression:"1"}],attrs:{size:24}})],1)],1)],1):a("template",{slot:"content"},[a("ui-form-element",{attrs:{vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Select Database\n            ")]),e._v(" "),a("input-select",{attrs:{slot:"content",options:e.dbList},slot:"content",model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-dropzone",{attrs:{slot:"content","show-preview":!1},slot:"content",model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),e._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Connection Method\n            ")]),e._v(" "),a("ui-grid",{attrs:{slot:"content",column:""},slot:"content"},[a("input-radio",{attrs:{value:"default"},model:{value:e.method,callback:function(t){e.method=t},expression:"method"}},[a("translate",[e._v("Your current login information")])],1),e._v(" "),a("input-radio",{attrs:{value:"custom"},model:{value:e.method,callback:function(t){e.method=t},expression:"method"}},[a("translate",[e._v("Custom username & password")])],1)],1)],1),e._v(" "),"custom"===e.method?[a("ui-form-element",{attrs:{vertical:"",group:"uploadBackup",validators:{required:!0}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    Username\n                ")]),e._v(" "),a("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.dbuser,callback:function(t){e.dbuser=t},expression:"dbuser"}})],1),e._v(" "),a("ui-form-element",{attrs:{vertical:"",group:"uploadBackup",validators:{required:!0}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    Password\n                ")]),e._v(" "),a("input-password",{attrs:{slot:"content"},slot:"content",model:{value:e.dbpass,callback:function(t){e.dbpass=t},expression:"dbpass"}})],1)]:e._e()],2),e._v(" "),e.uploading?e._e():a("ui-button",{attrs:{slot:"buttons",theme:"safe","validate-group":"uploadBackup",disabled:!(e.file&&e.name)},on:{click:e.uploadBackup},slot:"buttons"},[a("translate",[e._v("Upload")])],1)],2)},n=[]}}]);