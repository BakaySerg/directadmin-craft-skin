(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[3629],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/email/catch-all.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var a=o(s("./node_modules/@babel/runtime/regenerator/index.js")),n=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"));s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.array.concat.js"),s("./node_modules/core-js/modules/es.array.join.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/core-js/modules/es.string.trim.js");var l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var s=i(t);if(s&&s.has(e))return s.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var l=a?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(o,n,l):o[n]=e[n]}o.default=e,s&&s.set(e,o);return o}(s("./src/js/api/commands/user/email/catch-all.js"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(i=function(e){return e?s:t})(e)}var u,d,c={preload:l.getSettings,api:[{command:l.getSettings,bind:"settings"}],data:function(){return{mode:":fail:",value:""}},computed:{addresses:function(){var e=this;return this.$api.settings.addresses.map((function(t){var s=t.value;return s.includes("@")?e.$p6e.email2unicode(s):"".concat(s,"@").concat(e.$domainUnicode)}))},requestDataValue:function(){return this.getEmails(this.value,this.$p6e.email2ascii)}},watch:{$domain:{handler:(d=(0,n.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getSettings();case 2:this.mode=this.$api.settings.mode,this.value=this.getEmails(this.$api.settings.value,this.$p6e.email2unicode);case 4:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})}},created:function(){this.mode=this.$api.settings.mode,this.value=this.getEmails(this.$api.settings.value,this.$p6e.email2unicode)},methods:{saveOptions:(u=(0,n.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.updateSettings({catch:this.mode,value:this.requestDataValue});case 2:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)}),getEmails:function(e,t){return e.includes(",")?e.split(",").map((function(e){return e.trim()})).filter(Boolean).map(t).join(","):e}}};t.Z=c},"./src/js/api/commands/user/email/catch-all.js":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.symbol.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),s("./node_modules/core-js/modules/es.object.define-properties.js"),s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.updateSettings=t.getSettings=void 0,s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/core-js/modules/es.array.filter.js");var r=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),a=o(s("./src/js/api/command/index.js"));function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){(0,r.default)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var i=a.default.get({id:"CATCHALL_SETTINGS",url:"/CMD_EMAIL_CATCH_ALL",domain:!0,after:function(e){return e.flow(e.moveProp({poplist:"addresses",value:"mode"}),(function(e){return l(l({},e),{},{value:[":fail:",":blackhole:"].includes(e.mode)?"":e.mode,mode:[":fail:",":blackhole:"].includes(e.mode)?e.mode:"address"})}),e.mapProps({addresses:e.flow(e.toArray,(function(e){return e.map((function(e){return e.value}))}),(function(e){return e.filter((function(e){return e}))}),(function(e){return e.map((function(e){return{value:e,label:e}}))}))}))}});t.getSettings=i;var u=a.default.post({url:"/CMD_EMAIL_CATCH_ALL",method:"POST",params:{update:!0},domain:!0,body:{value:a.default.OPTIONAL_STRING,catch:l(l({},a.default.REQUIRED_STRING),{},{validator:function(e){return[":fail:",":blackhole:","address"].includes(e)}})}});t.updateSettings=u},"./src/js/pages/user/email/catch-all.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return o.X},default:function(){return u}});var o=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/email/catch-all.vue?vue&type=script&lang=js&"),r=o.Z,a=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),n=s("./src/js/pages/user/email/catch-all.vue?vue&type=custom&index=0&blockType=route"),l=s.n(n),i=(0,a.Z)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page",[s("ui-infobar-item",{attrs:{slot:"details",title:e.$gettext("Details")},slot:"details"},[s("translate",[e._v("\n            This e-mail address will catch all improperly addressed mail (i.e. to a user that doesn't exist) to your site. This address may be your defaultusername@yourdomain.com, or any other email account you have created.\n        ")])],1),e._v(" "),"standard2021"!==e.$_layout?s("app-page-section",[s("translate",[e._v("This e-mail address will catch all improperly addressed mail (i.e. to a user that doesn't exist) to your site. This address may be your defaultusername@yourdomain.com, or any other email account you have created.")])],1):e._e(),e._v(" "),s("app-page-section",[s("ui-form-element",[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Fail:\n            ")]),e._v(" "),s("input-radio",{attrs:{slot:"content",value:":fail:"},slot:"content",model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[s("span",[s("translate",[e._v("The sender is notified that the address doesn't exist")]),e._v(" "),s("ui-tooltip",{attrs:{theme:"safe"}},[s("translate",[e._v("This is the recommended option for the catch-all setting. Catch-all's will increase the server load due to spam, so having them disable is highly recommended unless you absolutely need the feature on.")])],1)],1)])],1),e._v(" "),s("ui-form-element",[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Ignore:\n            ")]),e._v(" "),s("input-radio",{attrs:{slot:"content",value:":blackhole:"},slot:"content",model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[s("span",[s("translate",[e._v("The e-mail is dropped and completely ignored")]),e._v(" "),s("ui-tooltip",{attrs:{theme:"danger"}},[s("translate",[e._v("Avoid using the Ignore option unless you know what you are doing. Spammers will be sending you e-mails to random addresses, and this option will accept those e-mails. You will not know it because the accepted e-mails would be discarded. This greatly increases the server load unnecessarily. If you do not want the catch-all to be on, then use the Fail option instead.")])],1)],1)])],1),e._v(" "),s("ui-form-element",{attrs:{underline:!1}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Address:\n            ")]),e._v(" "),s("input-radio",{attrs:{slot:"content",value:"address"},slot:"content",model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[s("input-autocomplete",{attrs:{disabled:"address"!==e.mode,values:e.addresses},on:{focus:function(t){e.mode="address"}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),s("translate",{attrs:{slot:"error:email"},slot:"error:email"},[e._v("\n                Should be valid email\n            ")])],1)],1),e._v(" "),s("ui-button",{attrs:{slot:"footer:buttons",theme:"safe",disabled:"address"===e.mode&&!e.value},on:{click:e.saveOptions},slot:"footer:buttons"},[s("translate",[e._v("Save")])],1)],1)}),[],!1,null,null,null);"function"==typeof l()&&l()(i);var u=i.exports},"./src/js/pages/user/email/catch-all.vue?vue&type=custom&index=0&blockType=route":function(){}}]);