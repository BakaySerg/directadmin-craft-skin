(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[1811],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/email/autoresponders/create.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var a=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,s("./node_modules/core-js/modules/es.array.concat.js");var o,r,l=a(s("./node_modules/@babel/runtime/regenerator/index.js")),n=a(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),d=s("./src/js/api/commands/user/email/autoresponders.js"),u=s("./src/js/api/commands/validation/index.js"),i={preload:d.getAutoresponderDefaults,api:[{command:d.getAutoresponderDefaults,bind:"defaults"},{command:u.validateEmail,bind:"emailValidation"}],data:function(){return{user:"",text:"",cc:!1,email:"",subjectPrefix:"",encoding:"",onceSelect:"",contentType:""}},created:function(){this.subjectPrefix=this.$api.defaults.subject_prefix,this.encoding=this.$api.defaults.reply_encodings.value,this.contentType=this.$api.defaults.reply_content_types.value,this.onceSelect=this.$api.defaults.reply_once_select.value},methods:{createAutoresponder:(r=(0,n.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.createAutoresponder)({user:this.user,subject:this.subjectPrefix,reply_encoding:this.encoding,reply_content_type:this.contentType,reply_once_time:this.onceSelect,text:this.text,cc:this.cc?"ON":"OFF",email:this.$p6e.email2ascii(this.email)});case 2:e.sent&&this.$router.back();case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),validateCC:function(e){return e!=="".concat(this.user,"@").concat(this.$domainUnicode)},validateAddress:(o=(0,n.default)(l.default.mark((function e(t){var s,a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,(0,u.validateEmail)({value:"".concat(t,"@").concat(this.$domain),check_exists:!1});case 4:return s=e.sent,a=s.valid,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})}};t.Z=i},"./src/js/api/commands/user/email/autoresponders.js":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var a=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.modifyAutoresponder=t.getAutoresponders=t.getAutoresponderDefaults=t.getAutoresponder=t.deleteAutoresponders=t.createAutoresponder=void 0,s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.array.includes.js");var o=a(s("./src/js/api/command/index.js")),r=function(e){return e.mapProps({custom_reply_headers:e.isEqual("1"),reply_content_types:e.toSelect,reply_encodings:e.toSelect,reply_once_select:e.toSelect})},l=o.default.get({id:"AUTORESPONDERS",url:"/CMD_EMAIL_AUTORESPONDER",domain:!0,after:function(e){return e.flow(e.mapValues((function(e,t){return{name:t,cc:e}})),e.toArray)}});t.getAutoresponders=l;var n=o.default.select({url:"/CMD_EMAIL_AUTORESPONDER",params:{action:"delete"},domain:!0});t.deleteAutoresponders=n;var d=o.default.post({url:"/CMD_EMAIL_AUTORESPONDER",params:{action:"create"},domain:!0,schema:{user:o.default.REQUIRED_STRING,text:o.default.REQUIRED_STRING,cc:{type:String,required:!0,validator:function(e){return["ON","OFF"].includes(e)}},email:o.default.OPTIONAL_STRING}});t.createAutoresponder=d;var u=d.extend({params:{action:"modify"}});t.modifyAutoresponder=u;var i=o.default.get({id:"AUTORESPONDER",url:"/CMD_EMAIL_AUTORESPONDER_MODIFY",domain:!0,schema:{user:o.default.REQUIRED_STRING},after:function(e){return e.mapProps({text:e.flow(e.convert.toAppString,e.convert.toAppText),email:e.setDefault(""),cc:e.feedWith(1,e.flow(e.getProp("email"),e.notEmpty)),headers:r(e)})}});t.getAutoresponder=i;var c=o.default.get({id:"AUTORESPONDER_DEFAULTS",url:"/CMD_EMAIL_AUTORESPONDER_CREATE",domain:!0,after:function(e){return e.flow(e.getProp("headers"),r(e))}});t.getAutoresponderDefaults=c},"./src/js/api/commands/validation/index.js":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var a=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.validateUsername=t.validateSubdomain=t.validatePassword=t.validateMXValue=t.validateIPRangeList=t.validateForwarder=t.validateFTP=t.validateEmail=t.validateDomain=t.validateDatabase=t.validateDNSValue=t.validateDNSName=t.validateDBUser=void 0;var o=a(s("./src/js/api/command/index.js")),r=a(s("./node_modules/punycode/punycode.es6.js")),l=a(s("./src/js/api/commands/validation/$processors.ts")),n=o.default.get({url:"/CMD_JSON_VALIDATE",schema:{value:o.default.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:l.default.isValid,message:l.default.getMessage}}),d=n.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}});t.validateForwarder=d;var u=n.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}});t.validateEmail=u;var i=n.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0});t.validateFTP=i;var c=n.extend({params:{type:"dns"},domain:!0,schema:{record:o.default.REQUIRED_STRING}}),p=c.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:o.default.REQUIRED_STRING}});t.validateDNSValue=p;var m=p.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:function(e){return{value:"10",mx_value:e.value}}});t.validateMXValue=m;var v=c.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:o.default.REQUIRED_STRING,value:null}});t.validateDNSName=v;var _=n.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}});t.validateDatabase=_;var f=n.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}});t.validateDBUser=f;var j=n.extend({id:"VALIDATE_USERNAME",params:{type:"username"}});t.validateUsername=j;var A=n.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}});t.validateSubdomain=A;var x=n.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}});t.validatePassword=x;var y=n.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:function(e){var t=e.value;return{value:r.default.toASCII(t)}}});t.validateDomain=y;var b=n.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}});t.validateIPRangeList=b},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/email/autoresponders/create.vue?vue&type=style&index=0&lang=scss&":function(){},"./src/js/api/commands/validation/$processors.ts":function(e,t,s){"use strict";s.r(t);var a=s("./src/js/api/commands/converters/index.ts");t.default={isValid:function(e){return void 0===e.error},getMessage:function(e){return(0,a.toAppHtml)(e.error||"")}}},"./src/js/pages/user/email/autoresponders/create.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return a.X},default:function(){return u}});var a=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/email/autoresponders/create.vue?vue&type=script&lang=js&"),o=a.Z,r=(s("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/email/autoresponders/create.vue?vue&type=style&index=0&lang=scss&"),s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),l=s("./src/js/pages/user/email/autoresponders/create.vue?vue&type=custom&index=0&blockType=route"),n=s.n(l),d=(0,r.Z)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page",{attrs:{id:"create-autoresponder"}},[s("app-page-section",[s("ui-form-element",{attrs:{group:"autoresponder",validators:{required:!0,validateAddress:e.validateAddress}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Responder Address:\n            ")]),e._v(" "),s("input-text",{attrs:{slot:"content",suffix:"@"+e.$domainUnicode},slot:"content",model:{value:e.user,callback:function(t){e.user=t},expression:"user"}}),e._v(" "),s("span",{attrs:{slot:"error:validateAddress"},slot:"error:validateAddress"},[e._v(e._s(e.$api.emailValidation.message))])],1),e._v(" "),e.$api.defaults.custom_reply_headers?[s("ui-form-element",{attrs:{group:"autoresponder",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    Subject Prefix\n                ")]),e._v(" "),s("input-text",{staticClass:"input-1px",attrs:{slot:"content",suffix:e.$gettext(": original subject")},slot:"content",model:{value:e.subjectPrefix,callback:function(t){e.subjectPrefix=t},expression:"subjectPrefix"}})],1),e._v(" "),s("ui-form-element",[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    Content-Type\n                ")]),e._v(" "),s("input-select",{attrs:{slot:"content",options:e.$api.defaults.reply_content_types.options},slot:"content",model:{value:e.contentType,callback:function(t){e.contentType=t},expression:"contentType"}})],1),e._v(" "),s("ui-form-element",[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    Reply Frequency\n                ")]),e._v(" "),s("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[e._v("\n                    Minimum time before a repeated reply\n                ")]),e._v(" "),s("input-select",{attrs:{slot:"content",options:e.$api.defaults.reply_once_select.options},slot:"content",model:{value:e.onceSelect,callback:function(t){e.onceSelect=t},expression:"onceSelect"}})],1)]:e._e(),e._v(" "),s("ui-form-element",{attrs:{group:"autoresponder",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Responder Message:\n            ")]),e._v(" "),s("input-textarea",{attrs:{slot:"content"},slot:"content",model:{value:e.text,callback:function(t){e.text=t},expression:"text"}})],1),e._v(" "),e.cc?s("ui-form-element",{key:"cc-enabled",attrs:{group:"autoresponder",validators:{required:!0,validateCC:e.validateCC}}},[s("input-checkbox",{attrs:{slot:"title"},slot:"title",model:{value:e.cc,callback:function(t){e.cc=t},expression:"cc"}},[s("translate",[e._v("Send a CC to:")])],1),e._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),s("translate",{attrs:{slot:"error:validateCC"},slot:"error:validateCC"},[e._v("\n                CC should not be equal to Autoresponder address\n            ")])],1):s("ui-form-element",{key:"cc-disabled",attrs:{group:"autoresponder"}},[s("input-checkbox",{attrs:{slot:"title"},slot:"title",model:{value:e.cc,callback:function(t){e.cc=t},expression:"cc"}},[s("translate",[e._v("Send a CC to:")])],1),e._v(" "),s("input-text",{attrs:{slot:"content",value:e.email,disabled:""},slot:"content"})],1)],2),e._v(" "),s("ui-button",{attrs:{slot:"footer:buttons",theme:"safe","validate-group":"autoresponder"},on:{click:e.createAutoresponder},slot:"footer:buttons"},[e._v("\n        Save\n    ")])],1)}),[],!1,null,null,null);"function"==typeof n()&&n()(d);var u=d.exports},"./src/js/pages/user/email/autoresponders/create.vue?vue&type=custom&index=0&blockType=route":function(){},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/email/autoresponders/create.vue?vue&type=style&index=0&lang=scss&":function(e,t,s){var a=s("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/email/autoresponders/create.vue?vue&type=style&index=0&lang=scss&");a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,s("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("6371a872",a,!0,{})}}]);