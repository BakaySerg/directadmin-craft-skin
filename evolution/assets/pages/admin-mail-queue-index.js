(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[7950],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/mail-queue/index.vue?vue&type=script&lang=js&":function(e,t,n){"use strict";n("./node_modules/core-js/modules/es.array.iterator.js"),n("./node_modules/core-js/modules/es.object.to-string.js"),n("./node_modules/core-js/modules/es.string.iterator.js"),n("./node_modules/core-js/modules/es.weak-map.js"),n("./node_modules/core-js/modules/web.dom-collections.iterator.js"),n("./node_modules/core-js/modules/es.object.define-property.js"),n("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),r=n("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s=o(n("./node_modules/@babel/runtime/regenerator/index.js")),u=o(n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=s?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=e[u]}o.default=e,n&&n.set(e,o);return o}(n("./src/js/api/commands/admin/mail-queue.js"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}var d,l={preload:a.getQueue,commands:a,api:[{command:a.getQueue,bind:"queue"}],props:{force:{type:Boolean,required:!1,default:!1}},data:function(){return{checkedRows:[],select:[],forceSet:this.force}},methods:{forceLoad:function(){this.forceSet=!0,a.getQueue({force:this.forceSet})},doAction:(d=(0,u.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.doAction({action:t,select:this.select});case 2:e.sent&&(this.select=[],this.$reloadApiTable());case 4:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})}};t.Z=l},"./src/js/api/commands/admin/mail-queue.js":function(e,t,n){"use strict";n("./node_modules/core-js/modules/es.object.define-property.js");var o=n("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.getQueueItem=t.getQueue=t.doAction=void 0;var r=o(n("./node_modules/@babel/runtime/helpers/defineProperty.js")),s=o(n("./src/js/api/command/index.js")),u=o(n("./node_modules/date-fns/esm/subSeconds/index.js")),a=s.default.get({id:"MAIL_QUEUE",url:"/CMD_MAIL_QUEUE",pagination:!0,schema:{force:s.default.OPTIONAL_BOOL},after:function(e){return function(t){return t.error?e.flow(e.project({queue_size:"queue_size",max_load_size:"mq_exim_max_load_size",error:"error"}),e.mapProp("error",e.convert.toAppBoolean))(t):e.flow(e.getProp("table"),e.toTable(e.mapArrayProps({time:function(e){return(0,u.default)(new Date,e)},size:e.convert.toAppNumber,frozen:e.convert.toAppBoolean})))(t)}}});t.getQueue=a;var i=s.default.select({url:"/CMD_MAIL_QUEUE",schema:{action:s.default.REQUIRED_STRING},before:function(e){var t,n=e.action;return t={},(0,r.default)(t,n,!0),(0,r.default)(t,"action","select"),t}});t.doAction=i;var d=s.default.get({id:"MAIL_QUEUE_ITEM",url:"/CMD_MAIL_QUEUE",schema:{id:s.default.REQUIRED_STRING},after:function(e){return e.mapProps({body:e.convert.toAppText,headers:e.convert.toAppText,logs:e.convert.toAppText})}});t.getQueueItem=d},"./node_modules/date-fns/esm/addSeconds/index.js":function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var o=n("./node_modules/date-fns/esm/_lib/toInteger/index.js"),r=n("./node_modules/date-fns/esm/addMilliseconds/index.js"),s=n("./node_modules/date-fns/esm/_lib/requiredArgs/index.js");function u(e,t){(0,s.Z)(2,arguments);var n=(0,o.Z)(t);return(0,r.Z)(e,1e3*n)}},"./node_modules/date-fns/esm/subSeconds/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o=n("./node_modules/date-fns/esm/_lib/toInteger/index.js"),r=n("./node_modules/date-fns/esm/addSeconds/index.js"),s=n("./node_modules/date-fns/esm/_lib/requiredArgs/index.js");function u(e,t){(0,s.Z)(2,arguments);var n=(0,o.Z)(t);return(0,r.Z)(e,-n)}},"./src/js/pages/admin/mail-queue/index.vue":function(e,t,n){"use strict";n.r(t),n.d(t,{__esModule:function(){return o.X},default:function(){return d}});var o=n("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/mail-queue/index.vue?vue&type=script&lang=js&"),r=o.Z,s=n("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),u=n("./src/js/pages/admin/mail-queue/index.vue?vue&type=custom&index=0&blockType=route"),a=n.n(u),i=(0,s.Z)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("app-page",[e.$api.queue.error?n("app-page-section",[n("translate",{attrs:{"translate-params":e.$api.queue}},[e._v("\n            Queue size (%{ queue_size }) is larger than the maximum value (%{ max_load_size}) and may timeout.\n        ")]),e._v(" "),n("ui-button",{attrs:{theme:"danger",size:"normal"},on:{click:e.forceLoad}},[n("translate",[e._v("Force Load")])],1)],1):n("app-page-section",[n("ui-api-table",e._b({attrs:{"initial-sort":{key:"time",order:"ASC"}},on:{"action:thaw":function(t){return e.doAction("thaw")},"action:freeze":function(t){return e.doAction("freeze")},"action:retry":function(t){return e.doAction("retry")},"action:bounce":function(t){return e.doAction("bounce")},"action:del":function(t){return e.doAction("delete")}},scopedSlots:e._u([{key:"col:id",fn:function(t){var o=t.id,r=t.item;return[n("ui-link",{attrs:{name:"admin/mail-queue/view",params:{id:o}}},[e._v("\n                    "+e._s(o)+"\n                ")]),e._v(" "),r.frozen?n("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},[n("translate",[e._v("Frozen")])],1):e._e()]}},{key:"col:time",fn:function(t){var n=t.time;return[e._v("\n                "+e._s(e._f("distanceFromNow")(n))+"\n            ")]}},{key:"col:recipients",fn:function(t){var o=t.recipients;return e._l(o,(function(t){return n("div",{directives:[{name:"margin",rawName:"v-margin",value:0,expression:"0"}],key:t},[e._v("\n                    "+e._s(t)+"\n                ")])}))}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getQueue,rowID:"id",requestData:{force:e.forceSet},columns:{id:{label:e.$gettext("ID"),searchable:!0},time:e.$gettext("Time"),size:e.$gettext("Size"),sender:{label:e.$gettext("Sender"),searchable:!0},recipients:{label:e.$gettext("Recipient(s)"),grow:!0,searchable:!0},frozen:{label:e.$gettext("Frozen"),hide:!0,searchable:{type:"select",options:{yes:e.$gettext("Yes"),no:e.$gettext("No")}}}},actions:{thaw:e.$gettext("Thaw"),freeze:e.$gettext("Freeze"),retry:e.$gettext("Retry"),bounce:e.$gettext("Bounce"),del:e.$gettext("Delete")},verticalLayout:e.$_Client.isPhone},!1))],1)],1)}),[],!1,null,null,null);"function"==typeof a()&&a()(i);var d=i.exports},"./src/js/pages/admin/mail-queue/index.vue?vue&type=custom&index=0&blockType=route":function(){}}]);