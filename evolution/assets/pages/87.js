(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{1802:function(e,t,a){"use strict";a.r(t);var n=a(4e3),r=a(2550);for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);var o=a(0),l=a(3603),s=a.n(l),u=Object(o.a)(r.default,n.a,n.b,!1,null,null,null);"function"==typeof s.a&&s()(u),t.default=u.exports},1884:function(e,t,a){"use strict";var n=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.validateIPRangeList=t.validateDomain=t.validatePassword=t.validateSubdomain=t.validateUsername=t.validateDBUser=t.validateDatabase=t.validateDNSName=t.validateMXValue=t.validateDNSValue=t.validateFTP=t.validateEmail=t.validateForwarder=void 0;var r=n(a(78)),i=n(a(98)),o=n(a(1885)),l=r.default.get({url:"/CMD_JSON_VALIDATE",schema:{value:r.default.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:o.default.isValid,message:o.default.getMessage}}),s=l.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}});t.validateForwarder=s;var u=l.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}});t.validateEmail=u;var c=l.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0});t.validateFTP=c;var d=l.extend({params:{type:"dns"},domain:!0,schema:{record:r.default.REQUIRED_STRING}}),m=d.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:r.default.REQUIRED_STRING}});t.validateDNSValue=m;var f=m.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:function(e){return{value:"10",mx_value:e.value}}});t.validateMXValue=f;var p=d.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:r.default.REQUIRED_STRING,value:null}});t.validateDNSName=p;var v=l.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}});t.validateDatabase=v;var _=l.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}});t.validateDBUser=_;var D=l.extend({id:"VALIDATE_USERNAME",params:{type:"username"}});t.validateUsername=D;var b=l.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}});t.validateSubdomain=b;var O=l.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}});t.validatePassword=O;var g=l.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:function(e){var t=e.value;return{value:i.default.toASCII(t)}}});t.validateDomain=g;var A=l.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}});t.validateIPRangeList=A},1885:function(e,t,a){"use strict";a.r(t);var n=a(97);t.default={isValid:function(e){return void 0===e.error},getMessage:function(e){return Object(n.toAppHtml)(e.error||"")}}},2053:function(e,t,a){"use strict";a.r(t),a.d(t,"getAppPointers",(function(){return l})),a.d(t,"getPointers",(function(){return s})),a.d(t,"createPointer",(function(){return u})),a.d(t,"deletePointers",(function(){return c})),a.d(t,"setLocal",(function(){return d})),a.d(t,"setRemote",(function(){return m}));var n=a(78),r=a.n(n),i=a(9),o=a(97),l=i.pipe(i.prop("domain_pointers"),Object(o.toTable)((function(e){return{domain_pointer:e.domain_pointer,type:e.type,mail:"yes"===e.local_mail?"local":"remote"}}))),s=r.a.get({id:"DOMAIN_POINTERS",url:"/CMD_DOMAIN_POINTER",domain:!0,pagination:!0,mapResponse:l}),u=r.a.post({url:"/CMD_DOMAIN_POINTER",params:{action:"add"},domain:!0,schema:{from:r.a.REQUIRED_STRING,alias:r.a.REQUIRED_BOOL}}),c=r.a.select({url:"/CMD_DOMAIN_POINTER",params:{action:"delete"},domain:!0}),d=c.extend({params:{local_mail:!0}}),m=c.extend({params:{remote_mail:!0}})},2550:function(e,t,a){"use strict";a.r(t);var n=a(2551),r=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t.default=r.a},2551:function(e,t,a){"use strict";a(7),a(10),a(5),a(6),a(8),a(11),a(16),a(14),a(23),a(25),a(18);var n=a(1),r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(2)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(2053)),l=a(504),s=a(13),u=n(a(3602));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={preload:o.getPointers,components:{CreateDomainPointerDialog:u.default},commands:o,api:[{command:o.getPointers,bind:"pointers"}],data:function(){return{select:[]}},computed:m(m({},(0,s.mapTokens)({dnsControl:"USERDNSCONTROL",limit:function(e){return(0,l.toAppLimit)(e.USERPOINTERSMAX)||1/0}})),{},{pointersCount:function(){return this.$api.pointers.rowsCount}}),watch:{$domain:function(){o.getPointers()}},methods:{submitCommand:function(e){e({select:this.select}).then(this.$reloadApiTable)},deletePointers:function(){this.submitCommand(o.deletePointers)},setRemote:function(){this.submitCommand(o.setRemote)},setLocal:function(){this.submitCommand(o.setLocal)}}};t.default=f},2552:function(e,t,a){"use strict";a.r(t);var n=a(2553),r=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t.default=r.a},2553:function(e,t,a){"use strict";a(16),a(14),a(23),a(25),a(18),a(6);var n=a(1),r=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(a(36)),o=n(a(37)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=i?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,a&&a.set(e,n);return n}(a(2053));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(s=function(e){return e?a:t})(e)}var u,c={data:function(){return{from:"",alias:!0}},commands:{validateDomain:a(1884).validateDomain},methods:{createDomainPointer:(u=(0,o.default)(i.default.mark((function e(){var t;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.$p6e.toA(this.from))!==this.from&&this.$notifications.info({title:this.$gettext("Source domain name punycoded"),content:this.$gettext("Source domain name has been automatically converted to punycode format. Punycode is used to encode internationalized domain names (IDN) by converting Unicode characters to ASCII.")}),e.next=4,l.createPointer({from:t,alias:this.alias});case 4:e.sent&&(this.$reset(),this.$emit("create"));case 6:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})}};t.default=c},3602:function(e,t,a){"use strict";a.r(t);var n=a(4152),r=a(2552);for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);var o=a(0),l=Object(o.a)(r.default,n.a,n.b,!1,null,null,null);t.default=l.exports},3603:function(e,t){},4e3:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-page",{attrs:{actions:e.pointersCount<e.limit?[{handler:e.$dialog("CREATE_DOMAIN_POINTER_DIALOG").open,label:e.$gettext("Create Domain Pointer"),icon:"#plus-fill"}]:[]}},[a("template",{slot:"details"},[a("ui-infobar-item",{attrs:{title:e.$gettext("Details")}},[a("ui-infobar-stats",e._b({},"ui-infobar-stats",{title:e.$gettext("Pointers"),usage:e.pointersCount,limit:e.limit},!1))],1)],1),e._v(" "),a("ui-tokens-conditional-button",{attrs:{slot:"header:buttons",theme:"safe",token:"USERPOINTERSMAX",usage:e.pointersCount},on:{click:function(t){e.$dialog("CREATE_DOMAIN_POINTER_DIALOG").open()}},slot:"header:buttons"},[a("translate",[e._v("Create Domain Pointer")]),e._v(" "),a("translate",{attrs:{slot:"limitText"},slot:"limitText"},[e._v("\n            Pointers limit reached\n        ")])],1),e._v(" "),a("app-page-section",[a("ui-api-table",e._b({ref:"table",attrs:{editable:!1,"vertical-layout":e.$_Client.isPhone},on:{"action:del":function(t){e.$dialog("DELETE_DOMAIN_POINTERS").open()},"action:setLocal":e.setLocal,"action:setRemote":e.setRemote},scopedSlots:e._u([{key:"col:type",fn:function(t){var n=t.type;return a("ui-badge",{attrs:{theme:"primary",size:"small"}},[e._v("\n                "+e._s("alias"===n?e.$gettext("Alias"):e.$gettext("Pointer"))+"\n            ")])}},{key:"col:mail",fn:function(t){var a=t.mail;return[e._v("\n                "+e._s("local"===a?e.$gettext("Yes"):e.$gettext("No"))+"\n            ")]}},{key:"col:dns",fn:function(t){var n=t.domain_pointer;return e.dnsControl?a("ui-link",{attrs:{name:"user/dns",query:{pointer:n}}},[e._v("\n                "+e._s("user"===e.$state.app.user.level?e.$gettext("View"):e.$gettext("Manage"))+"\n            ")]):e._e()}}],null,!0),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getPointers,rowID:"domain_pointer",columns:{domain_pointer:{label:e.$gettext("Domain Pointer"),filter:"p6eUnicode"},type:e.$gettext("Type"),mail:e.$gettext("Local Mail"),dns:e.$gettext("DNS")},actions:{del:e.$gettext("Delete"),setLocal:e.$gettext("Set Local Mail"),setRemote:e.$gettext("Set Remote Mail")}},!1))],1),e._v(" "),a("create-domain-pointer-dialog",{on:{create:e.$reloadApiTable}}),e._v(" "),a("ui-dialog-delete-items",{attrs:{id:"DELETE_DOMAIN_POINTERS",subject:e.$ngettext("Domain Pointer","Domain Pointers",e.select.length)},on:{"click:confirm":e.deletePointers}})],2)},r=[]},4152:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-dialog",{attrs:{id:"CREATE_DOMAIN_POINTER_DIALOG",theme:"safe"}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Add New Domain Pointer")]),e._v(" "),a("template",{slot:"content"},[a("ui-form-element",{attrs:{group:"domainPointer",validators:{required:!0,api:e.$commands.validateDomain},vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Source Domain")]),e._v(" "),a("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[e._v("eg. sourcedomain.com")]),e._v(" "),a("input-text",{attrs:{slot:"content",prefix:"http://www."},slot:"content",model:{value:e.from,callback:function(t){e.from=t},expression:"from"}})],1),e._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("Target Domain")]),e._v(" "),a("input-text",{attrs:{slot:"content",disabled:"",value:e.$domainUnicode},slot:"content"})],1),e._v(" "),a("ui-form-element",{attrs:{vertical:""}},[a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.alias,callback:function(t){e.alias=t},expression:"alias"}},[a("translate",[e._v("Create as an Alias")])],1)],1)],1),e._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"safe",validateGroup:"domainPointer"},on:{click:e.createDomainPointer},slot:"buttons"},[a("translate",[e._v("Create")])],1)],2)},r=[]}}]);