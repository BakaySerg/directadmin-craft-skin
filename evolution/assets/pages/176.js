(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{1858:function(t,e,r){"use strict";r.r(e);var a=r(4056),n=r(2741);for(var o in n)["default"].indexOf(o)<0&&function(t){r.d(e,t,(function(){return n[t]}))}(o);var l=r(0),i=r(3758),s=r.n(i),c=Object(l.a)(n.default,a.a,a.b,!1,null,null,null);"function"==typeof s.a&&s()(c),e.default=c.exports},2741:function(t,e,r){"use strict";r.r(e);var a=r(2742),n=r.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){r.d(e,t,(function(){return a[t]}))}(o);e.default=n.a},2742:function(t,e,r){"use strict";r(16),r(14),r(23),r(25),r(18),r(6);var a=r(1),n=r(19);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r(730),r(21),r(65),r(68);var o=a(r(36)),l=a(r(37)),i=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var r=s(e);if(r&&r.has(t))return r.get(t);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in t)if("default"!==l&&Object.prototype.hasOwnProperty.call(t,l)){var i=o?Object.getOwnPropertyDescriptor(t,l):null;i&&(i.get||i.set)?Object.defineProperty(a,l,i):a[l]=t[l]}a.default=t,r&&r.set(t,a);return a}(r(3757));function s(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(s=function(t){return t?r:e})(t)}var c,u={preload:i.getRedirects,commands:i,data:function(){return{select:[],create:{from:"/",type:"301",to:"http://"}}},watch:{$domain:"$reloadApiTable"},methods:{createRedirect:function(){i.createRedirect(this.create).then(this.$reloadApiTable)},deleteRedirects:(c=(0,l.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.deleteRedirects(this.$get("select")).then(this.$reloadApiTable);case 1:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)}),isURL:function(t){if(!t)return!0;var e=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i");return t.length<2083&&e.test(t)},validateFrom:function(t){return!t||t.startsWith("/")}}};e.default=u},3757:function(t,e,r){"use strict";var a=r(1);Object.defineProperty(e,"__esModule",{value:!0}),e.deleteRedirects=e.createRedirect=e.getRedirects=void 0;var n=a(r(78)),o="/CMD_REDIRECT",l=n.default.get({id:"REDIRECTS",url:o,domain:!0,pagination:!0,after:function(t){return t.flow(t.processTableInfo("redirects"),t.moveProp("redirects","rows"),t.mapProps({rows:t.toArray}))}});e.getRedirects=l;var i=n.default.post({url:o,params:{action:"add"},domain:!0,schema:{from:n.default.REQUIRED_STRING,type:n.default.REQUIRED_STRING,to:n.default.REQUIRED_STRING}});e.createRedirect=i;var s=n.default.select({url:o,domain:!0,params:{action:"delete"}});e.deleteRedirects=s},3758:function(t,e){},4056:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return n}));var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("app-page",{attrs:{actions:[{handler:t.$dialog("CREATE_REDIRECT_DIALOG").open,label:t.$gettext("Create New Redirect"),icon:"#plus-fill"}]}},[r("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:function(e){t.$dialog("CREATE_REDIRECT_DIALOG").open()}},slot:"header:buttons"},[r("translate",[t._v("Create New Redirect")])],1),t._v(" "),r("app-page-section",[r("ui-api-table",t._b({on:{"action:del":function(e){t.$dialog("DELETE_REDIRECTS_DIALOG").open()}},scopedSlots:t._u([{key:"col:local_url_path",fn:function(e){var a=e.local_url_path;return r("ui-link",{attrs:{href:"//"+t.$domain+a}},[t._v("\n                "+t._s(a)+"\n            ")])}},{key:"col:redirect_url",fn:function(e){var a=e.redirect_url;return r("ui-link",{attrs:{href:a}},[t._v("\n                "+t._s(a)+"\n            ")])}},{key:"col:type",fn:function(e){var a=e.type;return r("span",{key:a},["301"===a?r("translate",[t._v("\n                    301 — Permanent\n                ")]):"302"===a?r("translate",[t._v("\n                    302 — Temporary\n                ")]):"303"===a?r("translate",[t._v("\n                    303 — Replaced\n                ")]):t._e()],1)}}]),model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},"ui-api-table",{command:t.$commands.getRedirects,rowID:"local_url_path",columns:{local_url_path:t.$gettext("Local URL Path"),type:t.$gettext("Type"),redirect_url:t.$gettext("Redirect URL")},actions:{del:t.$gettext("Delete")},editable:!1,verticalLayout:t.$_Client.isPhone},!1))],1),t._v(" "),r("ui-dialog",{attrs:{id:"CREATE_REDIRECT_DIALOG",theme:"safe",size:"normal"}},[r("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n            Add New Redirect\n        ")]),t._v(" "),r("template",{slot:"content"},[r("ui-form-element",{attrs:{group:"redirect",validators:{required:!0,validateFrom:t.validateFrom},vertical:t.$_Client.isPhone}},[r("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                    Local URL Path\n                ")]),t._v(" "),r("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v('\n                    e.g. "/redirect", "/"\n                ')]),t._v(" "),r("input-text",{attrs:{slot:"content",prefix:t.$domainUnicode},slot:"content",model:{value:t.create.from,callback:function(e){t.$set(t.create,"from",e)},expression:"create.from"}}),t._v(" "),r("translate",{attrs:{slot:"error:validateFrom"},slot:"error:validateFrom"},[t._v('\n                    Should start with a forward flash "/"\n                ')])],1),t._v(" "),r("ui-form-element",{attrs:{vertical:t.$_Client.isPhone}},[r("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                    Redirect Type\n                ")]),t._v(" "),r("input-select",{attrs:{slot:"content",options:{301:t.$gettext("301 — Permanent"),302:t.$gettext("302 — Temporary"),303:t.$gettext("303 — Replaced")},width:"46.3rem"},slot:"content",model:{value:t.create.type,callback:function(e){t.$set(t.create,"type",e)},expression:"create.type"}})],1),t._v(" "),r("ui-form-element",{attrs:{group:"redirect",validators:{required:!0,isURL:t.isURL},vertical:t.$_Client.isPhone}},[r("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                    Destination URL\n                ")]),t._v(" "),r("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v('\n                    e.g. "http://www.redirected.com"\n                ')]),t._v(" "),r("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.create.to,callback:function(e){t.$set(t.create,"to",e)},expression:"create.to"}}),t._v(" "),r("translate",{attrs:{slot:"error:isURL"},slot:"error:isURL"},[t._v("\n                    Should be valid URL\n                ")])],1)],1),t._v(" "),r("ui-button",{attrs:{slot:"buttons",theme:"primary","validate-group":"redirect"},on:{click:t.createRedirect},slot:"buttons"},[r("translate",[t._v("Create")])],1)],2),t._v(" "),r("ui-dialog-delete-items",{attrs:{id:"DELETE_REDIRECTS_DIALOG",subject:t.$ngettext("Redirect","Redirects",t.select.length)},on:{"click:confirm":t.deleteRedirects}})],1)},n=[]}}]);