(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[4162],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/services.vue?vue&type=script&lang=js&":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.array.iterator.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.string.iterator.js"),t("./node_modules/core-js/modules/es.weak-map.js"),t("./node_modules/core-js/modules/web.dom-collections.iterator.js"),t("./node_modules/core-js/modules/es.object.define-property.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=t("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(s,"X",{value:!0}),s.Z=void 0;var r=function(e,s){if(!s&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=n(s);if(t&&t.has(e))return t.get(e);var r={},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if("default"!==d&&Object.prototype.hasOwnProperty.call(e,d)){var i=l?Object.getOwnPropertyDescriptor(e,d):null;i&&(i.get||i.set)?Object.defineProperty(r,d,i):r[d]=e[d]}r.default=e,t&&t.set(e,r);return r}(t("./src/js/api/commands/admin/services.js"));function n(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(n=function(e){return e?t:s})(e)}var l={preload:r.getServices,api:[{command:r.getServices,bind:{response:"services",isLoading:"loading"}}],data:function(){return{password:""}},computed:{notifications:function(){return{start:this.notify(this.$gettext("Service was started successfully")),stop:this.notify(this.$gettext("Service was stopped successfully")),restart:this.notify(this.$gettext("Service was restarted successfully")),reload:this.notify(this.$gettext("Service was reloaded successfully")),rebootServer:this.notify(this.$gettext("Server was successfully rebooted"))}}},methods:{reloadServices:function(){r.getServices()},toggle:function(e){"nowrap"===e.target.style["white-space"]?e.target.style["white-space"]="normal":e.target.style["white-space"]="nowrap"},notify:function(e){var s=this;return function(){return s.$notifications.success({title:e})}},doAction:function(e,s){r[e](s).then(this.notifications[e]).then(this.reloadServices)},start:function(e){this.doAction("start",e)},stop:function(e){this.doAction("stop",e)},restart:function(e){this.doAction("restart",e)},reload:function(e){this.doAction("reload",e)},handleReboot:function(){this.doAction("rebootServer",{passwd:this.password})}}};s.Z=l},"./src/js/api/commands/admin/services.js":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.symbol.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),t("./node_modules/core-js/modules/es.object.define-properties.js"),t("./node_modules/core-js/modules/es.object.define-property.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.stop=s.start=s.restart=s.reload=s.rebootServer=s.getServices=void 0;var r=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js"));t("./node_modules/core-js/modules/es.object.keys.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.array.reduce.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js");var n=o(t("./src/js/api/command/index.js"));function l(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);s&&(o=o.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),t.push.apply(t,o)}return t}function d(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?l(Object(t),!0).forEach((function(s){(0,r.default)(e,s,t[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}))}return e}var i=["reload","restart","start","stop"],a=n.default.get({id:"SERVICES",url:"/CMD_SHOW_SERVICES",response:[],params:{bytes:!0},after:function(){return function(e){return Object.keys(e.status).map((function(s){return{service:s,memory:e.memory[s],pid:e.pids[s]||[],running:"on"===e.status[s],actions:i.reduce((function(t,o){return d(d({},t),{},(0,r.default)({},o,e.actions[s].includes(o)))}),{})}}))}}});s.getServices=a;var u=function(e){return n.default.post({url:"/CMD_SERVICE",params:{action:e},schema:{service:n.default.REQUIRED_STRING},notifySuccess:!1})},c=u("start");s.start=c;var p=u("stop");s.stop=p;var m=u("restart");s.restart=m;var v=u("reload");s.reload=v;var j=n.default.post({url:"/CMD_REBOOT",params:{json:!0},schema:{passwd:n.default.REQUIRED_STRING}});s.rebootServer=j},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/services.vue?vue&type=style&index=0&id=62e0f0f6&lang=scss&scoped=true&":function(){},"./src/js/pages/admin/services.vue":function(e,s,t){"use strict";t.r(s),t.d(s,{__esModule:function(){return o.X},default:function(){return a}});var o=t("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/services.vue?vue&type=script&lang=js&"),r=o.Z,n=(t("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/services.vue?vue&type=style&index=0&id=62e0f0f6&lang=scss&scoped=true&"),t("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),l=t("./src/js/pages/admin/services.vue?vue&type=custom&index=0&blockType=route"),d=t.n(l),i=(0,n.Z)(r,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("app-page",{attrs:{actions:[{handler:e.$dialog("REBOOT_DIALOG").open,label:e.$gettext("Reboot"),icon:"#console"}]}},[t("template",{slot:"header:buttons"},[t("ui-button",{attrs:{theme:"primary"},on:{click:function(s){e.$dialog("REBOOT_DIALOG").open()}}},[t("translate",[e._v("Reboot")])],1)],1),e._v(" "),t("app-page-section",[t("ui-r-table",e._b({scopedSlots:e._u([{key:"col:running",fn:function(s){var o=s.running;return[t("ui-badge",{attrs:{theme:o?"safe":"danger"}},[e._v("\n                    "+e._s(o?e.$gettext("Running"):e.$gettext("Stopped"))+"\n                ")])]}},{key:"col:pid",fn:function(s){var o=s.pid;return[o.length?t("div",{staticClass:"pids",on:{click:e.toggle}},[e._v("\n                    "+e._s(o.join(" "))+"\n                ")]):t("span")]}},{key:"col:memory",fn:function(s){var o=s.memory;return[o?t("span",[e._v("\n                    "+e._s(e._f("humanReadableSize")(o))+"\n                ")]):e._e()]}},{key:"row:actions",fn:function(s){var o=s.item;return t("ui-actions",{attrs:{position:"left"}},[o.actions.start&&!o.pid.length?t("ui-link",{key:"start",on:{click:function(s){return e.start(o.service)}}},[t("translate",[e._v("Start")])],1):e._e(),e._v(" "),o.actions.stop&&o.pid.length?t("ui-link",{key:"stop",on:{click:function(s){return e.stop(o.service)}}},[t("translate",[e._v("Stop")])],1):e._e(),e._v(" "),o.actions.restart&&o.pid.length?t("ui-link",{key:"restart",on:{click:function(s){return e.restart(o.service)}}},[t("translate",[e._v("Restart")])],1):e._e(),e._v(" "),o.actions.reload&&o.pid.length?t("ui-link",{key:"reload",on:{click:function(s){return e.reload(o.service)}}},[t("translate",[e._v("Reload")])],1):e._e()],1)}}])},"ui-r-table",{columns:[{id:"service",label:e.$gettext("Service"),editable:!1},{id:"running",label:e.$gettext("Status")},{id:"pid",label:e.$gettext("PID(s)")},{id:"memory",label:e.$gettext("Memory Usage")}],rows:e.$api.services,isCheckable:!1,disablePagination:!0,verticalLayout:e.$_Client.isPhone},!1),[t("ui-button",{attrs:{slot:"buttons:before",size:"small",theme:"light",icon:e.$api.loading?"loader":"reload"},on:{click:e.reloadServices},slot:"buttons:before"},[t("translate",[e._v("\n                    Update Services List\n                ")])],1)],1)],1),e._v(" "),t("ui-dialog",{attrs:{id:"REBOOT_DIALOG",theme:"danger",size:"normal"}},[t("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            Reboot Server\n        ")]),e._v(" "),t("template",{slot:"content"},[t("translate",[e._v("Are you sure you want to reboot server?")]),e._v(" "),t("ui-form-element",{attrs:{vertical:""}},[t("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                    Your Password:\n                ")]),e._v(" "),t("input-password",{attrs:{slot:"content"},slot:"content",model:{value:e.password,callback:function(s){e.password=s},expression:"password"}})],1)],1),e._v(" "),t("template",{slot:"buttons"},[t("ui-button",{attrs:{theme:"danger"},on:{click:e.handleReboot}},[t("translate",[e._v("Reboot")])],1)],1)],2)],2)}),[],!1,null,"62e0f0f6",null);"function"==typeof d()&&d()(i);var a=i.exports},"./src/js/pages/admin/services.vue?vue&type=custom&index=0&blockType=route":function(){},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/services.vue?vue&type=style&index=0&id=62e0f0f6&lang=scss&scoped=true&":function(e,s,t){var o=t("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/services.vue?vue&type=style&index=0&id=62e0f0f6&lang=scss&scoped=true&");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,t("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("9db42228",o,!0,{})}}]);