(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{1792:function(t,e,n){"use strict";n.r(e);var o=n(3991),a=n(2408);for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n(3473);var i=n(0),l=n(3475),s=n.n(l),u=Object(i.a)(a.default,o.a,o.b,!1,null,null,null);"function"==typeof s.a&&s()(u),e.default=u.exports},2408:function(t,e,n){"use strict";n.r(e);var o=n(2409),a=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e.default=a.a},2409:function(t,e,n){"use strict";n(7),n(10),n(5),n(6),n(8),n(11),n(16),n(14),n(23),n(25),n(18);var o=n(1),a=n(19);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(36)),i=o(n(2)),l=o(n(37));n(34);var s=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=u(e);if(n&&n.has(t))return n.get(t);var o={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var l=r?Object.getOwnPropertyDescriptor(t,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=t[i]}o.default=t,n&&n.set(t,o);return o}(n(2410));function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(u=function(t){return t?n:e})(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f,m,p,b={preload:function(){return s.getCronjobs()},api:[{command:s.getCronjobs,bind:"cronjobs"}],data:function(){return{checkedRows:[],editableRow:{},email:""}},computed:{checkedJobs:function(){return this.checkedRows.map((function(t){return t.id}))}},created:function(){this.email=this.$api.cronjobs.email},methods:{loadData:function(){s.getCronjobs()},deleteJobs:(p=(0,l.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.deleteCronjobs({select:this.checkedJobs});case 2:t.sent&&(this.checkedRows=[],this.clearEditable(),this.loadData());case 4:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)}),saveEmail:(m=(0,l.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s.saveEmail({email:this.email}),this.$dialog("SEND_TO_EMAIL").close();case 2:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)}),setEditable:function(t){this.editableRow=d({},t),this.$dialog("EDIT_CRON_JOB").open()},clearEditable:function(){this.editableRow={},this.$dialog("EDIT_CRON_JOB").close()},updateJob:(f=(0,l.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("@reboot"!==this.editableRow.minute){t.next=5;break}return t.next=3,s.updateCronjobReboot(this.editableRow);case 3:t.next=7;break;case 5:return t.next=7,s.updateCronjob(d(d({},this.editableRow),{},{dayofmonth:this.editableRow.day_of_month,dayofweek:this.editableRow.day_of_week}));case 7:this.clearEditable(),this.loadData();case 9:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})}};e.default=b},2410:function(t,e,n){"use strict";n.r(e),n.d(e,"getCronjobs",(function(){return l})),n.d(e,"deleteCronjobs",(function(){return s})),n.d(e,"createCronjob",(function(){return u})),n.d(e,"updateCronjobReboot",(function(){return d})),n.d(e,"updateCronjob",(function(){return f})),n.d(e,"saveEmail",(function(){return m})),n.d(e,"getPhpBinPath",(function(){return p}));var o=n(78),a=n.n(o),r=n(9),i="/CMD_CRON_JOBS",l=a.a.get({url:i,id:"CRON_JOBS",params:{ipp:"99999",page:"1"},mapResponse:{email:r.prop("MAILTO"),rows:r.pipe(r.prop("crons"),r.omit(["info"]),r.values)}}),s=a.a.select({url:i,params:{action:"delete",delete:!0}}),u=a.a.post({url:i,params:{action:"create"},schema:{reboot:a.a.REQUIRED_BOOL,minute:a.a.REQUIRED_STRING,hour:a.a.REQUIRED_STRING,dayofmonth:a.a.REQUIRED_STRING,month:a.a.REQUIRED_STRING,dayofweek:a.a.REQUIRED_STRING}}),c=a.a.post({url:i,params:{save:!0},schema:{id:a.a.REQUIRED_STRING,command:a.a.REQUIRED_STRING}}),d=c.extend({url:i,params:{reboot:!0}}),f=c.extend({url:i,schema:{minute:a.a.REQUIRED_STRING,hour:a.a.REQUIRED_STRING,dayofmonth:a.a.REQUIRED_STRING,month:a.a.REQUIRED_STRING,dayofweek:a.a.REQUIRED_STRING}}),m=a.a.post({url:i,params:{action:"saveemail"},schema:{email:a.a.REQUIRED_STRING}}),p=a.a.get({url:i,id:"CRON_PHP_BIN_PATH",response:!1,mapResponse:function(t){return"1"===t.set_php_bin_path_in_crons}})},3087:function(t,e,n){var o=n(3474);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);(0,n(4).default)("7dee8cf3",o,!0,{})},3473:function(t,e,n){"use strict";n(3087)},3474:function(t,e,n){},3475:function(t,e){},3991:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}));var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",{attrs:{actions:[{name:"user/cronjobs/create",label:t.$gettext("Create Cron Job"),icon:"#plus-fill",theme:"primary"},{handler:t.$dialog("SEND_TO_EMAIL").open,label:t.$gettext("Send all Cron output to e-mail"),icon:"#email-manager"}]}},[n("template",{slot:"header:buttons"},[n("ui-button-link",{attrs:{theme:"primary",name:"user/cronjobs/create"}},[n("translate",[t._v("Create Cron job")])],1)],1),t._v(" "),n("app-page-section",[n("ui-r-table",t._b({staticClass:"cronjobs",attrs:{"rows-count":t.$api.cronjobs.rows.length,"checked-rows":t.checkedRows,columns:[{id:"minute",label:t.$gettext("Minute")},{id:"hour",label:t.$gettext("Hour")},{id:"day_of_month",label:t.$gettext("Day of Month")},{id:"month",label:t.$gettext("Month")},{id:"day_of_week",label:t.$gettext("Day of Week")},{id:"command",label:t.$gettext("Command"),grow:!0}],editable:!1,"vertical-layout":t.$_Client.isPhone,"disable-pagination":""},on:{"update:checkedRows":function(e){t.checkedRows=e},"update:checked-rows":function(e){t.checkedRows=e}},scopedSlots:t._u([{key:"row:actions",fn:function(e){var o=e.item;return[n("ui-button-icon",{attrs:{icon:"pencil",title:t.$gettext("Edit")},on:{click:function(e){return t.setEditable(o)}}})]}},{key:"col:command",fn:function(e){var o=e.command;return[n("span",{staticClass:"wrap",domProps:{textContent:t._s(o)}})]}}])},"ui-r-table",t.$api.cronjobs,!1),[n("template",{slot:"table:actions"},[n("ui-table-action",{on:{click:function(e){t.$dialog("DELETE_ITEMS_DIALOG").open()}}},[n("translate",[t._v("Delete")])],1)],1)],2)],1),t._v(" "),n("template",{slot:"bottom:links"},["standard2021"!==t.$_layout?n("ui-link",{attrs:{bullet:""},on:{click:function(e){t.$dialog("SEND_TO_EMAIL").open()}}},[n("translate",[t._v("Send all Cron output to e-mail")])],1):t._e()],1),t._v(" "),n("ui-dialog-delete-items",{attrs:{subject:t.$ngettext("Cron job","Cron jobs",t.checkedJobs.length)},on:{"click:confirm":t.deleteJobs}}),t._v(" "),n("ui-dialog",{attrs:{id:"SEND_TO_EMAIL"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n            Set E-mail\n        ")]),t._v(" "),n("ui-form-element",{attrs:{slot:"content",vertical:""},slot:"content"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                E-mail\n            ")]),t._v(" "),n("translate",{attrs:{slot:"tooltip"},slot:"tooltip"},[t._v("\n                Valid values are an E-mail address, your DA username: admin,\n                or a blank field to prevent any e-mail.\n            ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveEmail.apply(null,arguments)}},slot:"content",model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"safe"},on:{click:t.saveEmail},slot:"buttons"},[n("translate",[t._v("Save")])],1)],1),t._v(" "),n("ui-dialog",{attrs:{id:"EDIT_CRON_JOB",theme:"safe",size:"normal"}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n            Edit Cron Job\n        ")]),t._v(" "),n("template",{slot:"content"},["@reboot"!==t.editableRow.minute?[n("ui-form-element",{attrs:{vertical:"",group:"modifyCronJob",validators:{required:!0}}},[n("template",{slot:"title"},[n("translate",[t._v("\n                            Minute\n                        ")]),t._v(" "),n("ui-tooltip",[n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},[n("translate",[t._v("\n                                    Valid Cron time values are the numbers\n                                    indicated and *.\n                                ")]),t._v(" "),n("translate",[t._v("\n                                    You can specify exact times using commas\n                                    to separate them. e.g. 1,2,3 (minutes\n                                    1,2 and 3)\n                                ")]),t._v(" "),n("translate",[t._v("\n                                    You can specify spans using a dash. e.g.\n                                    5-7 (minutes 5 to 7)\n                                ")]),t._v(" "),n("translate",[t._v("\n                                    You can specify intervals using a star\n                                    and a forward slash. e.g. */2 (every 2nd\n                                    minute)\n                                ")]),t._v(" "),n("translate",[t._v("\n                                    You can combine them to create a more\n                                    precise schedule. e.g. 1,5,11-15,30-59/2\n                                    (minutes 1, 5, 11 to 15 and every 2nd\n                                    minute between 30 and 59)\n                                ")]),t._v(" "),n("translate",[t._v("\n                                    Note that there are no spaces\n                                ")])],1)])],1),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.editableRow.minute,callback:function(e){t.$set(t.editableRow,"minute",e)},expression:"editableRow.minute"}}),t._v(" "),n("translate",{attrs:{slot:"error:between"},slot:"error:between"},[t._v("\n                        Minute should be a number between 0 and 59 or *\n                    ")])],2),t._v(" "),n("ui-form-element",{attrs:{vertical:"",group:"modifyCronJob",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Hour\n                    ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.editableRow.hour,callback:function(e){t.$set(t.editableRow,"hour",e)},expression:"editableRow.hour"}}),t._v(" "),n("translate",{attrs:{slot:"error:between"},slot:"error:between"},[t._v("\n                        Hour should be a number between 0 and 23 or *\n                    ")])],1),t._v(" "),n("ui-form-element",{attrs:{vertical:"",group:"modifyCronJob",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Day of Month\n                    ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.editableRow.day_of_month,callback:function(e){t.$set(t.editableRow,"day_of_month",e)},expression:"editableRow.day_of_month"}})],1),t._v(" "),n("ui-form-element",{attrs:{vertical:"",group:"modifyCronJob",validators:{required:!0}}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Month\n                    ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.editableRow.month,callback:function(e){t.$set(t.editableRow,"month",e)},expression:"editableRow.month"}})],1),t._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                        Day of Week\n                    ")]),t._v(" "),n("input-text",{attrs:{slot:"content"},slot:"content",model:{value:t.editableRow.day_of_week,callback:function(e){t.$set(t.editableRow,"day_of_week",e)},expression:"editableRow.day_of_week"}})],1)]:t._e(),t._v(" "),n("ui-form-element",{attrs:{vertical:""}},[n("template",{slot:"title"},[n("translate",[t._v("Command")]),t._v(" "),n("ui-tooltip",[n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},[n("translate",[t._v("\n                                To access a specific URL periodically use a command like:\n                            ")]),t._v("\n                            curl -L -s https://example.com/cron.php\n                        ")],1)])],1),t._v(" "),n("input-textarea",{attrs:{slot:"content",type:"text"},slot:"content",model:{value:t.editableRow.command,callback:function(e){t.$set(t.editableRow,"command",e)},expression:"editableRow.command"}})],2)],2),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"primary","validate-group":"modifyCronJob"},on:{click:t.updateJob},slot:"buttons"},[n("translate",[t._v("Save")])],1)],2)],2)},a=[]}}]);