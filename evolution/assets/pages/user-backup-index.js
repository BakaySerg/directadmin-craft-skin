(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[7966],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/backup/index.vue?vue&type=script&lang=js&":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.symbol.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),t("./node_modules/core-js/modules/es.object.define-properties.js"),t("./node_modules/core-js/modules/es.object.define-property.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"X",{value:!0}),s.Z=void 0;var a=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js"));t("./node_modules/core-js/modules/es.array.includes.js"),t("./node_modules/core-js/modules/es.string.includes.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.array.reduce.js"),t("./node_modules/core-js/modules/es.array.join.js"),t("./node_modules/core-js/modules/es.array.map.js"),t("./node_modules/core-js/modules/es.array.slice.js"),t("./node_modules/core-js/modules/es.object.keys.js");var l=t("./src/js/api/commands/user/backups.js");function n(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);s&&(o=o.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),t.push.apply(t,o)}return t}function r(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?n(Object(t),!0).forEach((function(s){(0,a.default)(e,s,t[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}))}return e}var d={data:function(){return{allDomains:!0,backupOptions:["domain","subdomain","email","email_data","emailsettings","forwarder","autoresponder","vacation","list","ftp","ftpsettings","database","database_data","trash"],domains:[]}},computed:{disabledEntries:function(){var e=this,s=function(s,t){return!e.backupOptions.includes(s)&&t};return[s("email","email_data"),s("database","database_data")].filter(Boolean)},domainList:function(){var e=this;return this.$state.session.domainsList.reduce((function(s,t){return r(r({},s),{},(0,a.default)({},t,e.$p6e.toU(t)))}),{})},selectedDomainsString:function(){var e=this;if(this.allSelected)return this.$gettext("All domains selected");var s=function(s){return s.map(e.$p6e.toU).join(",")};if(this.domains.length>5){var t=this.domains.length-3;return this.$gettextInterpolate(this.$ngettext("%{domains} and %{n} more domain","%{domains} and %{n} more domains",t),{domains:s(this.domains.slice(0,3)),n:this.domains.length-3})}return s(this.domains)},allSelected:function(){return this.domains.length===Object.keys(this.domainList).length},requestDomains:function(){return this.allDomains||this.allSelected?null:this.domains}},watch:{backupOptions:function(e,s){s.includes("database")&&!e.includes("database")&&(this.backupOptions=e.filter((function(e){return"database_data"!==e}))),s.includes("email")&&!e.includes("email")&&(this.backupOptions=e.filter((function(e){return"email_data"!==e})))}},methods:{createBackup:function(){(0,l.createBackup)({select:this.backupOptions,domains:this.requestDomains})},openDialog:function(){this.allDomains=!1,this.$dialog("SELECT_DOMAINS_DIALOG").open()}}};s.Z=d},"./src/js/api/commands/user/backups.js":function(e,s,t){"use strict";t("./node_modules/core-js/modules/es.object.keys.js"),t("./node_modules/core-js/modules/es.symbol.js"),t("./node_modules/core-js/modules/es.array.filter.js"),t("./node_modules/core-js/modules/es.object.to-string.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),t("./node_modules/core-js/modules/web.dom-collections.for-each.js"),t("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),t("./node_modules/core-js/modules/es.object.define-properties.js"),t("./node_modules/core-js/modules/es.object.define-property.js");var o=t("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(s,"__esModule",{value:!0}),s.restoreBackup=s.getBackups=s.getBackup=s.createBackup=void 0;var a=o(t("./node_modules/@babel/runtime/helpers/defineProperty.js")),l=o(t("./src/js/api/command/index.js"));function n(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);s&&(o=o.filter((function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),t.push.apply(t,o)}return t}function r(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?n(Object(t),!0).forEach((function(s){(0,a.default)(e,s,t[s])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}))}return e}var d={url:"/CMD_SITE_BACKUP",domain:!0},i=l.default.get(r(r({},d),{},{id:"SITE_BACKUPS",domain:!0,response:[]}));s.getBackups=i;var u=l.default.select(r(r({},d),{},{params:{action:"backup",form_version:"4"}}));s.createBackup=u;var c=l.default.post(r(r({id:"SITE_BACKUP"},d),{},{params:{action:"view"},schema:{file:l.default.REQUIRED_STRING},response:[],notifySuccess:!1}));s.getBackup=c;var m=l.default.select(r(r({},d),{},{params:{action:"restore",form_version:"3"},schema:{file:l.default.REQUIRED_STRING}}));s.restoreBackup=m},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/backup/index.vue?vue&type=style&index=0&lang=scss&":function(){},"./src/js/pages/user/backup/index.vue":function(e,s,t){"use strict";t.r(s),t.d(s,{__esModule:function(){return o.X},default:function(){return i}});var o=t("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/backup/index.vue?vue&type=script&lang=js&"),a=o.Z,l=(t("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/backup/index.vue?vue&type=style&index=0&lang=scss&"),t("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),n=t("./src/js/pages/user/backup/index.vue?vue&type=custom&index=0&blockType=route"),r=t.n(n),d=(0,l.Z)(a,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("app-page",{staticClass:"backup",attrs:{actions:[{label:e.$gettext("Restore Backup"),name:"user/backup/restore",icon:"#extract",theme:"primary"}]}},[t("template",{slot:"header:buttons"},[t("ui-button-link",{attrs:{theme:"primary",name:"user/backup/restore"}},[t("translate",[e._v("Restore Backup")])],1)],1),e._v(" "),t("app-page-section"),e._v(" "),t("app-page-section",{staticClass:"backup-create"},[t("ui-form-element",[t("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Include\n            ")]),e._v(" "),t("div",{attrs:{slot:"content"},slot:"content"},[t("input-radio",{attrs:{value:!0},model:{value:e.allDomains,callback:function(s){e.allDomains=s},expression:"allDomains"}},[t("translate",[e._v("All Domains")])],1),e._v(" "),t("input-radio",{attrs:{value:!1},on:{change:e.openDialog},model:{value:e.allDomains,callback:function(s){e.allDomains=s},expression:"allDomains"}},[t("ui-link",{on:{click:e.openDialog}},[t("translate",[e._v("Selected Domains")])],1),e._v(" "),0!==e.domains.length?t("ui-tooltip",{attrs:{theme:"primary"}},[t("span",{domProps:{textContent:e._s(e.selectedDomainsString)}})]):e._e()],1)],1)],1),e._v(" "),t("input-select-multiple",{staticClass:"backup-options",attrs:{options:{website:{label:e.$gettext("Website Data"),entries:{domain:e.$gettext("Domains Directory: Backs up all user files for all domains"),subdomain:e.$gettext("Subdomains Lists: Backs up the list of subdomains for each domain")}},email:{label:e.$gettext("E-mail"),entries:{email:e.$gettext("E-mail Accounts List for all domains (names and passwords)"),email_data:e.$gettext("E-mail Data: Includes the messages from the Inbox, IMAP Folders, and webmail data."),emailsettings:e.$gettext("E-mail Settings: Includes the filters and the catchall address."),forwarder:e.$gettext("Forwarders: Includes all forwarding addresses."),autoresponder:e.$gettext("Autoresponders: Includes all autoresponders and messages."),vacation:e.$gettext("Vacation Messages: Includes all vacation messages and times."),list:e.$gettext("Mailing Lists: Includes all mailing lists.")}},ftp:{label:e.$gettext("FTP"),entries:{ftp:e.$gettext("FTP Accounts"),ftpsettings:e.$gettext("FTP Settings")}},database:{label:e.$gettext("Database"),entries:{database:e.$gettext("Database Settings: Backs up all DB Users and DB Settings"),database_data:e.$gettext("Database Data")}},trash:{label:e.$gettext("Trash"),entries:{trash:e.$gettext("Deleted Trash Data")}}},"disabled-entries":e.disabledEntries,"max-items-visible":1/0,"hide-header":"","no-highlight":""},model:{value:e.backupOptions,callback:function(s){e.backupOptions=s},expression:"backupOptions"}}),e._v(" "),t("template",{slot:"footer:buttons"},[t("ui-button",{attrs:{theme:"safe"},on:{click:e.createBackup}},[t("translate",[e._v("Create Backup")])],1)],1)],2),e._v(" "),t("ui-dialog",{attrs:{id:"SELECT_DOMAINS_DIALOG",size:"normal","no-close-btn":""}},[t("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            Select domains to backup\n        ")]),e._v(" "),t("input-select-multiple",{attrs:{slot:"content",options:e.domainList,"max-items-visible":1/0},slot:"content",model:{value:e.domains,callback:function(s){e.domains=s},expression:"domains"}})],1)],2)}),[],!1,null,null,null);"function"==typeof r()&&r()(d);var i=d.exports},"./src/js/pages/user/backup/index.vue?vue&type=custom&index=0&blockType=route":function(){},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/backup/index.vue?vue&type=style&index=0&lang=scss&":function(e,s,t){var o=t("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/backup/index.vue?vue&type=style&index=0&lang=scss&");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,t("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("6611461f",o,!0,{})}}]);