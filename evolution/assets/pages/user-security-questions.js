(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[8863],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/_components/add-security-question-dialog.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var n,i=o(s("./node_modules/@babel/runtime/regenerator/index.js")),l=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),u=s("./src/js/api/commands/user/security-questions.js"),a={data:function(){return{type:"included",question:"",value:""}},api:[{command:u.getSettings,bind:{"response.questions":"questions"}}],watch:{type:function(){this.question=""}},methods:{addQuestion:(n=(0,l.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,u.addQuestion)({type:this.type,question:this.question,value:this.value}).then(u.getSettings),this.$emit("update");case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}};t.Z=a},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/security-questions.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.array.iterator.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.weak-map.js"),s("./node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./node_modules/core-js/modules/es.object.define-property.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),n=s("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=o(s("./node_modules/@babel/runtime/regenerator/index.js")),l=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"));s("./node_modules/core-js/modules/es.object.assign.js");var u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var s=r(t);if(s&&s.has(e))return s.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=i?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=e[l]}o.default=e,s&&s.set(e,o);return o}(s("./src/js/api/commands/user/security-questions.js")),a=o(s("./src/js/pages/user/_components/add-security-question-dialog.vue"));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(r=function(e){return e?s:t})(e)}var d,c,p={preload:u.getSettings,api:u.getSettings,commands:u,components:{AddSecurityQuestionDialog:a.default},data:function(){return{activeQuestion:{},newAnswer:"",select:[],settings:{security_questions:!1,api_with_password:!1,notify_on_all_question_failures:!1,max_attempts:"5"}}},computed:{table:function(){return this.$api.table},questions:function(){return this.$api.questions}},created:function(){Object.assign(this.settings,this.$api.settings)},methods:{handleQuestionEdit:function(e){this.activeQuestion=e,this.$dialog("EDIT_QUESTION_DIALOG").open()},handleAnswerSave:(c=(0,l.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.updateQuestion({select:[this.activeQuestion.id],value:this.newAnswer});case 2:e.sent&&(this.$reloadApiTable(),this.activeQuestion={},this.newAnswer="");case 4:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)}),enable:function(){this.settings.security_questions=!0,this.saveSettings()},disable:function(){this.settings.security_questions=!1,this.saveSettings()},saveSettings:function(){u.updateSettings({action:"settings",version:"1",security_questions:this.settings.security_questions||null,api_with_password:this.settings.api_with_password||null,notify_on_all_question_failures:this.settings.notify_on_all_question_failures||null,save:"Save"}).then(u.getSettings)},deleteCheckedQuestions:(d=(0,l.default)(i.default.mark((function e(){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.deleteQuestions(this.$get("select")).then(this.$reloadApiTable);case 1:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})}};t.Z=p},"./src/js/api/commands/user/security-questions.js":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.updateSettings=t.updateQuestion=t.submitAnswer=t.getSettings=t.deleteQuestions=t.addQuestion=void 0,s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.promise.js");var n=o(s("./src/js/api/command/index.js")),i="/CMD_SECURITY_QUESTIONS",l=n.default.get({id:"SECURITY_SETTINGS",url:i,after:function(e){return e.flow(e.project({questions:"new_questions","table.rows":"questions","settings.api_with_password":"SECURITY_QUESTIONS_ON_API_CHECKED","settings.notify_on_all_question_failures":"NOTIFY_ON_ALL_FAILURES_CHECKED","settings.security_questions":"SECURITY_QUESTIONS_CHECKED","settings.max_attempts":"MAX_ATTEMPTS"}),e.mapProps({table:e.flow(e.processTableInfo("rows"),e.mapProp("rows",e.flow(e.toArray,e.mapArrayProps({q:e.convert.toAppString})))),settings:e.mapProps({notify_on_all_question_failures:e.isEqual("checked"),api_with_password:e.isEqual("checked"),security_questions:e.isEqual("checked")})}))}});t.getSettings=l;var u=n.default.post({url:i,params:{action:"settings",version:"1",save:"Save",json:null},schema:{security_questions:n.default.OPTIONAL_BOOL,api_with_password:n.default.OPTIONAL_BOOL,notify_on_all_question_failures:n.default.OPTIONAL_BOOL,max_attempts:n.default.OPTIONAL_STRING}});t.updateSettings=u;var a=n.default.post({url:i,params:{action:"add"},schema:{type:n.default.REQUIRED_STRING,question:n.default.OPTIONAL_STRING,value:n.default.REQUIRED_STRING},before:function(e){var t=e.type,s=e.question;return{custom_question:"custom"===t?s:null,question:"custom"===t?null:s}}});t.addQuestion=a;var r=n.default.select({url:i,params:{delete:!0}});t.deleteQuestions=r;var d=n.default.select({url:i,params:{set:!0},schema:{value:n.default.REQUIRED_STRING}});t.updateQuestion=d;var c=n.default.post({url:"/CMD_ASK_SECURITY_QUESTION",params:{action:"submit",referer:window.location.href},schema:{answer:n.default.REQUIRED_STRING}});t.submitAnswer=c},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/_components/add-security-question-dialog.vue?vue&type=style&index=0&id=62aded98&lang=scss&scoped=true&":function(){},"./src/js/pages/user/_components/add-security-question-dialog.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return o.X},default:function(){return i}});var o=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/_components/add-security-question-dialog.vue?vue&type=script&lang=js&"),n=o.Z,i=(s("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/_components/add-security-question-dialog.vue?vue&type=style&index=0&id=62aded98&lang=scss&scoped=true&"),(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ui-dialog",{attrs:{id:"ADD_SECURITY_QUESTION_DIALOG",size:"normal"}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        Add Security Question\n    ")]),e._v(" "),s("ui-tabs",{attrs:{slot:"content",radio:"",tabs:[{id:"included",label:e.$gettext("Included")},{id:"custom",label:e.$gettext("Custom")}],selected:e.type},on:{"update:selected":function(t){e.type=t}},slot:"content"},[s("ui-form-element",{attrs:{slot:"tab:included",group:"securityQuestion",validators:{required:!0},underline:!1},slot:"tab:included"},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Question\n            ")]),e._v(" "),s("input-select",{attrs:{slot:"content",options:e.$api.questions},slot:"content",model:{value:e.question,callback:function(t){e.question=t},expression:"question"}})],1),e._v(" "),s("ui-form-element",{attrs:{slot:"tab:custom",group:"securityQuestion",validators:{required:!0},underline:!1},slot:"tab:custom"},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Question\n            ")]),e._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.question,callback:function(t){e.question=t},expression:"question"}})],1)],1),e._v(" "),s("ui-form-element",{attrs:{slot:"content",group:"securityQuestion",validators:{required:!0,maxLength:64},underline:!1},slot:"content"},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            Answer\n        ")]),e._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),s("ui-button",{attrs:{slot:"buttons",theme:"safe","validate-group":"securityQuestion"},on:{click:e.addQuestion},slot:"buttons"},[s("translate",[e._v("Add")])],1)],1)}),[],!1,null,"62aded98",null).exports)},"./src/js/pages/user/security-questions.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return o.X},default:function(){return r}});var o=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/security-questions.vue?vue&type=script&lang=js&"),n=o.Z,i=s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),l=s("./src/js/pages/user/security-questions.vue?vue&type=custom&index=0&blockType=route"),u=s.n(l),a=(0,i.Z)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page",{attrs:{actions:[{label:e.$gettext("Enable"),handler:e.enable,icon:"#console",visible:!1===e.$api.settings.security_questions&&0!==e.table.rows.length},{label:e.$gettext("Disable"),handler:e.disable,icon:"#console",visible:!0===e.$api.settings.security_questions},{label:e.$gettext("Add New Security Question"),handler:e.$dialog("ADD_SECURITY_QUESTION_DIALOG").open,icon:"#plus-fill"},{label:e.$gettext("Security Questions options"),handler:e.$dialog("SECURITY_QUESTIONS_SETTINGS_DIALOG").open,icon:"#settings"}]}},[s("template",{slot:"details"},[!1===e.$api.settings.security_questions?s("ui-infobar-item",{attrs:{title:e.$gettext("Details")}},[s("translate",{staticClass:"txt:bold"},[e._v("\n                This feature is not turned on.\n            ")]),e._v(" "),0===e.table.rows.length?s("translate",{attrs:{tag:"p"}},[e._v("\n                Add one or more Security Question, and then enable it in the options at the bottom of the page.\n            ")]):e._e()],1):e._e()],1),e._v(" "),e.$api.settings.security_questions||"standard2021"===e.$_layout?e._e():s("app-page-section",[s("translate",{staticClass:"txt:bold",attrs:{tag:"p"}},[e._v("\n            This feature is not turned on.\n        ")]),e._v(" "),e.table.rows.length?e._e():s("translate",{attrs:{tag:"p"}},[e._v("\n            Add one or more Security Question, and then enable it in the options at the bottom of the page.\n        ")])],1),e._v(" "),e.table.rows.length?s("template",{slot:"header:buttons"},[e.$api.settings.security_questions?s("ui-button",{key:"disable-button",attrs:{theme:"danger"},on:{click:e.disable}},[s("translate",[e._v("Disable")])],1):s("ui-button",{key:"enable-button",attrs:{theme:"safe"},on:{click:e.enable}},[s("translate",[e._v("Enable")])],1)],1):e._e(),e._v(" "),s("app-page-section",[s("ui-api-table",e._b({on:{"action:del":e.deleteCheckedQuestions},scopedSlots:e._u([{key:"row:actions",fn:function(t){var o=t.item;return s("ui-link",{staticClass:"wrap:nowrap",on:{click:function(t){return e.handleQuestionEdit(o)}}},[s("ui-icon",{attrs:{id:"pencil",size:"medium"}}),e._v(" "),e.$_Client.isPhone?e._e():s("translate",[e._v("\n                    Change Answer\n                ")])],1)}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getSettings,property:"table",rowID:"id",columns:{id:e.$gettext("ID"),q:{label:e.$gettext("Security Question"),grow:!0}},actions:{del:e.$gettext("Delete")},verticalLayout:e.$_Client.isPhone},!1))],1),e._v(" "),"standard2021"!==e.$_layout?s("template",{slot:"bottom:links"},[s("ui-link",{attrs:{bullet:""},on:{click:function(t){e.$dialog("ADD_SECURITY_QUESTION_DIALOG").open()}}},[s("translate",[e._v("Add New Security Question")])],1),e._v(" "),s("ui-link",{attrs:{bullet:""},on:{click:function(t){e.$dialog("SECURITY_QUESTIONS_SETTINGS_DIALOG").open()}}},[s("translate",[e._v("Security Questions options")])],1)],1):e._e(),e._v(" "),s("add-security-question-dialog",{on:{update:function(t){e.select=[]}}}),e._v(" "),s("ui-dialog",{attrs:{id:"EDIT_QUESTION_DIALOG",theme:"safe"}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            Edit question\n        ")]),e._v(" "),s("ui-form-element",{attrs:{slot:"content",vertical:""},slot:"content"},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                New answer:\n            ")]),e._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.newAnswer,callback:function(t){e.newAnswer=t},expression:"newAnswer"}})],1),e._v(" "),s("ui-button",{attrs:{slot:"buttons",theme:"safe",disabled:!e.newAnswer},on:{click:e.handleAnswerSave},slot:"buttons"},[s("translate",[e._v("Save")])],1)],1),e._v(" "),s("ui-dialog",{attrs:{id:"SECURITY_QUESTIONS_SETTINGS_DIALOG",theme:"primary",size:"normal"}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            Security Questions options\n        ")]),e._v(" "),s("template",{slot:"content"},[s("ui-form-element",[s("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.settings.api_with_password,callback:function(t){e.$set(e.settings,"api_with_password",t)},expression:"settings.api_with_password"}},[s("translate",[e._v("Allow API logins with the current User/password. Login Keys and Session Keys are always allowed.")])],1)],1),e._v(" "),s("ui-form-element",[s("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.settings.notify_on_all_question_failures,callback:function(t){e.$set(e.settings,"notify_on_all_question_failures",t)},expression:"settings.notify_on_all_question_failures"}},[s("translate",{attrs:{"translate-params":{count:e.settings.max_attempts}}},[e._v("\n                        Notify me on all failed question attempts. Disabling this option will still notify you after %{ count } failed attempts.\n                    ")])],1)],1)],1),e._v(" "),s("ui-button",{attrs:{slot:"buttons",theme:"safe"},on:{click:e.saveSettings},slot:"buttons"},[s("translate",[e._v("Save")])],1)],2)],2)}),[],!1,null,null,null);"function"==typeof u()&&u()(a);var r=a.exports},"./src/js/pages/user/security-questions.vue?vue&type=custom&index=0&blockType=route":function(){},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/_components/add-security-question-dialog.vue?vue&type=style&index=0&id=62aded98&lang=scss&scoped=true&":function(e,t,s){var o=s("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/_components/add-security-question-dialog.vue?vue&type=style&index=0&id=62aded98&lang=scss&scoped=true&");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,s("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("52d0fd9a",o,!0,{})}}]);