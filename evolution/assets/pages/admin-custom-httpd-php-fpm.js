(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[132],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/custom-httpd/_dialogs/available-tokens-dialog.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.search.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.object.to-string.js");var o={props:{tokens:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{search:"",hideEmpty:!0}},computed:{filtered:function(){var e=this,t=function(e,t){return e.toLowerCase().includes(t.toLowerCase())};return this.tokens.filter((function(t){return!e.hideEmpty||t.value})).filter((function(s){var o=s.value,l=s.token;return!e.search||(t(l,e.search)||t(o,e.search))}))}}};t.Z=o},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/custom-httpd/php-fpm.vue?vue&type=script&lang=js&":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var l,n=o(s("./node_modules/@babel/runtime/regenerator/index.js")),a=o(s("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),r=s("./src/js/api/commands/admin/httpd.js"),u=s("./src/js/vue/mixins.js"),i={components:{AvailableTokensDialog:o(s("./src/js/pages/admin/custom-httpd/_dialogs/available-tokens-dialog.vue")).default},preload:[function(e){var t=e.user,s=e.version;return(0,r.getPhpFpmConfiguration)({user:t,"php-fpm":s})},function(e){var t=e.user,s=e.version;return(0,r.getPhpFpmTokens)({user:t,"php-fpm":s})}],api:[{command:r.getPhpFpmConfiguration,bind:"config"},{command:r.getPhpFpmTokens,bind:"tokens"}],mixins:[(0,u.$bindTab)({defaultTab:"global_custom1",param:"tab"})],props:{user:{type:String,required:!0},version:{type:String,required:!0}},data:function(){return{global_custom1:"",global_custom2:"",custom1:"",custom2:"",tokensFilter:{search:"",hideEmpty:!0},allPHPVersions:!1}},created:function(){this.custom1=this.$api.config.custom1,this.custom2=this.$api.config.custom2,this.global_custom1=this.$api.config.global_custom1,this.global_custom2=this.$api.config.global_custom2},methods:{save:(l=(0,a.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.savePhpFpmTokens)({user:this.user,"php-fpm":this.version,custom1:this.custom1,custom2:this.custom2,global_custom1:this.global_custom1,global_custom2:this.global_custom2,all_php_versions:this.allPHPVersions});case 2:(0,r.getPhpFpmConfiguration)({user:this.user,"php-fpm":this.version});case 3:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})}};t.Z=i},"./src/js/api/commands/admin/httpd.js":function(e,t,s){"use strict";s("./node_modules/core-js/modules/es.object.keys.js"),s("./node_modules/core-js/modules/es.symbol.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),s("./node_modules/core-js/modules/web.dom-collections.for-each.js"),s("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),s("./node_modules/core-js/modules/es.object.define-properties.js"),s("./node_modules/core-js/modules/es.object.define-property.js");var o=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.savePhpFpmTokens=t.saveDomainCustomization=t.rewriteConfs=t.getPhpFpmTokens=t.getPhpFpmConfiguration=t.getDomains=t.getDomainCustomization=t.getDomainConfig=t.getDiff=void 0;var l=o(s("./node_modules/@babel/runtime/helpers/defineProperty.js")),n=o(s("./node_modules/@babel/runtime/helpers/slicedToArray.js"));s("./node_modules/core-js/modules/es.array.find.js"),s("./node_modules/core-js/modules/es.object.to-string.js"),s("./node_modules/core-js/modules/es.array.filter.js"),s("./node_modules/core-js/modules/es.array.includes.js"),s("./node_modules/core-js/modules/es.string.includes.js"),s("./node_modules/core-js/modules/es.promise.js"),s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.match.js"),s("./node_modules/core-js/modules/es.string.replace.js");var a=o(s("./src/js/api/command/index.js")),r=s("./src/js/modules/utils/index.js");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,o)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){(0,l.default)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d=r.fp.flow(r.fp.convert.toAppString,r.fp.convert.toLines),c=r.fp.flow((function(e){return e||""}),r.fp.convert.toAppString,r.fp.convert.toAppText),p="/CMD_CUSTOM_HTTPD",m=a.default.get({id:"CUSTOM_HTTPD_DOMAINS",url:p,pagination:!0,after:function(){return r.fp.flow(r.fp.mapProp("domains",r.fp.toTable()),r.fp.mapProp("file",r.fp.feedWith(1,(function(e){return["nginx","nginx_proxy","openlitespeed","httpd"].find((function(t){return"1"===e["have_".concat(t)]}))||"httpd"}))))}});t.getDomains=m;var f=a.default.post({url:p,params:{action:"all",rewrite_confs:!0}});t.rewriteConfs=f;var _=a.default.get({url:p,id:"CH_DOMAIN_CONFIG",schema:{domain:a.default.REQUIRED_STRING,proxy:a.default.OPTIONAL_BOOL},after:function(){return r.fp.flow((function(e){return{tokens:e.AVAILABLE_TOKENS,error:e.CONFIG_ERROR,test:e.CONFIG_TEST,data:e.HTTPD,templates:e}}),r.fp.mapProps({error:r.fp.isEqual("1"),nginx:r.fp.isEqual("1"),data:d,test:c,templates:r.fp.flow(r.fp.filter((function(e,t){return t.includes("VH")})),r.fp.filter(r.fp.getProp("data")),r.fp.toArray,r.fp.mapArrayProps({data:d,custom:r.fp.isEqual("1")})),tokens:r.fp.flow(r.fp.mapValues((function(e,t){return{token:t,value:e}})),r.fp.toArray)}))}});t.getDomainConfig=_;var v=a.default.get({url:p,id:"CH_DOMAIN_CUSTOMIZATION_VALUES",schema:{domain:a.default.REQUIRED_STRING,proxy:a.default.OPTIONAL_BOOL},after:function(){return r.fp.flow(r.fp.project({config:"CONFIG",custom1:"CUSTOM1",custom2:"CUSTOM2",custom3:"CUSTOM3",custom4:"CUSTOM4",custom5:"CUSTOM5",custom6:"CUSTOM6",custom7:"CUSTOM7",custom8:"CUSTOM8",tokens:"AVAILABLE_TOKENS",appendix:"VH1.custom_global_pre_post",tokensCount:"NUM_CUSTOM_TOKENS"}),r.fp.mapProps({config:c,custom1:c,custom2:c,custom3:c,custom4:c,custom5:c,custom6:c,custom7:c,custom8:c,nginx:r.fp.convert.toAppBoolean,tokensCount:r.fp.convert.toAppNumber,tokens:r.fp.flow(r.fp.mapValues((function(e,t){return{token:t,value:e}})),r.fp.toArray),appendix:r.fp.flow(r.fp.setDefault({}),r.fp.filter((function(e,t){return t.includes("CUSTOM")})),r.fp.mapValues(c),r.fp.transformObject((function(e,t){var s=t.match(/^.*(CUSTOM.*)$/),o=(0,n.default)(s,2)[1];return(0,l.default)({},o,{data:e,name:t})})))}))}});t.getDomainCustomization=v;var g=a.default.post({url:p,schema:{proxy:a.default.OPTIONAL_STRING,domain:a.default.REQUIRED_STRING,config:a.default.OPTIONAL_STRING,custom1:a.default.OPTIONAL_STRING,custom2:a.default.OPTIONAL_STRING,custom3:a.default.OPTIONAL_STRING,custom4:a.default.OPTIONAL_STRING,custom5:a.default.OPTIONAL_STRING,custom6:a.default.OPTIONAL_STRING,custom7:a.default.OPTIONAL_STRING,custom8:a.default.OPTIONAL_STRING}});t.saveDomainCustomization=g;var b=a.default.get({url:p,id:"CH_PHP_FPM_CONFIGURATION",schema:{user:a.default.REQUIRED_STRING,"php-fpm":a.default.REQUIRED_STRING},after:function(){return r.fp.flow(r.fp.project({error:"CONFIG_ERROR",test:"CONFIG_TEST",custom1:"CUSTOM1",custom2:"CUSTOM2",global_custom1:"GLOBAL_CUSTOM1",global_custom2:"GLOBAL_CUSTOM2","config.data":"FPM_CONFIG","config.file":"FPM_CONFIG_FILE","config.version":"FPM_VER","template.custom":"PHP_FPM_IS_CUSTOM_TEMPLATE","template.data":"PHP_FPM_TEMPLATE","template.name":"PHP_FPM_TEMPLATE_NAME","template.short":"PHP_FPM_TEMPLATE_NAME_SHORT"}),r.fp.mapProps({error:r.fp.isEqual("1"),test:c,custom1:c,custom2:c,config:r.fp.mapProp("data",d),template:r.fp.mapProps({custom:r.fp.isEqual("1"),data:d})}))}});t.getPhpFpmConfiguration=b;var j=a.default.get({id:"CH_PHP_FPM_TOKENS",url:p,schema:{user:a.default.REQUIRED_STRING,"php-fpm":a.default.REQUIRED_STRING},after:function(){return r.fp.flow(r.fp.getProp("AVAILABLE_TOKENS"),r.fp.mapValues((function(e,t){return{token:t,value:e}})),r.fp.toArray)}});t.getPhpFpmTokens=j;var h=a.default.post({url:p,schema:{user:a.default.REQUIRED_STRING,"php-fpm":a.default.REQUIRED_STRING,custom1:a.default.OPTIONAL_STRING,custom2:a.default.OPTIONAL_STRING,all_php_versions:a.default.OPTIONAL_BOOL}});t.savePhpFpmTokens=h;var T=a.default.get({id:"CH_DIFF",url:"/CMD_TEMPLATE_DIFF",schema:{name:a.default.REQUIRED_STRING},after:function(){return r.fp.flow(r.fp.deleteProp("lines"),r.fp.mapValues((function(e,t){return i(i({},e),{},{number:t})})),r.fp.toArray,r.fp.mapArray(r.fp.moveProp("line","content")),r.fp.mapArrayProps({number:r.fp.convert.toAppNumber,content:function(e){return e?e.replace(/\t/g,"    "):""}}),r.fp.sortBy("number"))}});t.getDiff=T},"./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/custom-httpd/php-fpm.vue?vue&type=style&index=0&id=028d4ee6&lang=scss&scoped=true&":function(){},"./src/js/pages/admin/custom-httpd/_dialogs/available-tokens-dialog.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return o.X},default:function(){return n}});var o=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/custom-httpd/_dialogs/available-tokens-dialog.vue?vue&type=script&lang=js&"),l=o.Z,n=(0,s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ui-dialog",{attrs:{id:"VIEW_ALL_AVAILABLE_TOKENS",size:"normal"}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        View All Available Tokens\n    ")]),e._v(" "),s("div",{attrs:{slot:"content"},slot:"content"},[s("ui-form-element",{attrs:{underline:!1}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Filter Tokens\n            ")]),e._v(" "),s("ui-input-group",{attrs:{slot:"content"},slot:"content"},[s("input-text",{attrs:{slot:"input"},slot:"input",model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),s("ui-button",{attrs:{slot:"additions:right",theme:"light"},on:{click:function(t){e.hideEmpty=!e.hideEmpty}},slot:"additions:right"},[s("input-checkbox",{model:{value:e.hideEmpty,callback:function(t){e.hideEmpty=t},expression:"hideEmpty"}},[s("translate",[e._v("Hide Empty")])],1)],1)],1)],1),e._v(" "),s("ui-r-table",e._b({attrs:{"vertical-layout":e.$_Client.isPhone,"disable-pagination":"","hide-before-controls":"","unstick-headers":""}},"ui-r-table",{rows:e.filtered,columns:[{id:"token",label:e.$gettext("Token"),width:"200px"},{id:"value",label:e.$gettext("Value")}],isCheckable:!1},!1))],1)],1)}),[],!1,null,null,null).exports},"./src/js/pages/admin/custom-httpd/php-fpm.vue":function(e,t,s){"use strict";s.r(t),s.d(t,{__esModule:function(){return o.X},default:function(){return i}});var o=s("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/custom-httpd/php-fpm.vue?vue&type=script&lang=js&"),l=o.Z,n=(s("./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/custom-httpd/php-fpm.vue?vue&type=style&index=0&id=028d4ee6&lang=scss&scoped=true&"),s("./node_modules/vue-loader/lib/runtime/componentNormalizer.js")),a=s("./src/js/pages/admin/custom-httpd/php-fpm.vue?vue&type=custom&index=0&blockType=route"),r=s.n(a),u=(0,n.Z)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page",{attrs:{id:"custom-httpd-php-fpm"}},[s("ui-grid",{attrs:{slot:"page:title"},slot:"page:title"},[s("translate",{attrs:{"translate-params":{user:e.user,version:e.version}}},[e._v("\n            PHP-FPM config customization for %{ user } php-fpm %{ version }\n        ")]),e._v(" "),e.$api.config.error?s("ui-badge",{attrs:{theme:"danger",size:"big"}},[s("translate",[e._v("Syntax Error")])],1):e._e()],1),e._v(" "),s("app-page-section",[s("translate",[e._v("Add the code to be inserted into the CUSTOM tokens.")]),e._v(" "),s("ui-tabs",{attrs:{tabs:[{id:"global_custom1",label:e.$gettext("php-fpm Global |CUSTOM1|")},{id:"global_custom2",label:e.$gettext("php-fpm Global |CUSTOM2|")},{id:"custom1",label:"php-fpm "+e.version+" |CUSTOM1|"},{id:"custom2",label:"php-fpm "+e.version+" |CUSTOM2|"}],selected:e.tab},on:{"update:selected":function(t){e.tab=t}}},[s("div",{attrs:{slot:"tab:global_custom1"},slot:"tab:global_custom1"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.global_custom1,expression:"global_custom1"}],domProps:{value:e.global_custom1},on:{input:function(t){t.target.composing||(e.global_custom1=t.target.value)}}}),e._v(" "),s("translate",[e._v("Global custom tokens apply to all php version, but only for this User. Global is added before per-php tokens.")])],1),e._v(" "),s("div",{attrs:{slot:"tab:global_custom2"},slot:"tab:global_custom2"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.global_custom2,expression:"global_custom2"}],domProps:{value:e.global_custom2},on:{input:function(t){t.target.composing||(e.global_custom2=t.target.value)}}}),e._v(" "),s("translate",[e._v("Global custom tokens apply to all php version, but only for this User. Global is added before per-php tokens.")])],1),e._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.custom1,expression:"custom1"}],attrs:{slot:"tab:custom1"},domProps:{value:e.custom1},on:{input:function(t){t.target.composing||(e.custom1=t.target.value)}},slot:"tab:custom1"}),e._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.custom2,expression:"custom2"}],attrs:{slot:"tab:custom2"},domProps:{value:e.custom2},on:{input:function(t){t.target.composing||(e.custom2=t.target.value)}},slot:"tab:custom2"})]),e._v(" "),s("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center",main:"end"},expression:"{ cross: 'center', main: 'end' }"},{name:"margin",rawName:"v-margin",value:[1,,,],expression:"[1,,,]"}]},[s("ui-tooltip",{attrs:{theme:"danger"}},[s("input-checkbox",{directives:[{name:"margin",rawName:"v-margin",value:[0,1],expression:"[0, 1]"}],attrs:{slot:"trigger"},slot:"trigger",model:{value:e.allPHPVersions,callback:function(t){e.allPHPVersions=t},expression:"allPHPVersions"}},[s("translate",[e._v("Save for all PHP versions")])],1),e._v(" "),s("translate",[e._v("\n                    This assumes your code is valid across all php versions. This will also overwrite any other custom code for other versions.\n                ")])],1),e._v(" "),s("ui-button",{attrs:{theme:"safe"},on:{click:e.save}},[s("translate",[e._v("Save")])],1)],1)],1),e._v(" "),s("app-page-section",[s("translate",{attrs:{slot:"section:title"},slot:"section:title"},[e._v("\n            "+e._s(e.$api.config.template.name)+"\n        ")]),e._v(" "),s("ol",{staticClass:"config limited"},e._l(e.$api.config.template.data,(function(t,o){return s("li",{key:t+o,staticClass:"line"},[s("pre",{staticClass:"line-content",domProps:{textContent:e._s(t)}})])})),0)],1),e._v(" "),s("app-page-section",[s("translate",{attrs:{slot:"section:title"},slot:"section:title"},[e._v("\n            "+e._s(e.$api.config.config.file)+"\n        ")]),e._v(" "),s("ol",{staticClass:"config limited"},e._l(e.$api.config.config.data,(function(t,o){return s("li",{key:t+o,staticClass:"line"},[s("pre",{staticClass:"line-content",domProps:{textContent:e._s(t)}})])})),0)],1),e._v(" "),e.$api.config.error?s("app-page-section",[s("translate",{attrs:{slot:"section:title"},slot:"section:title"},[e._v("\n            Configuration Check\n        ")]),e._v(" "),s("pre",{staticClass:"configuration-check",domProps:{textContent:e._s(e.$api.config.test)}})],1):e._e(),e._v(" "),s("ui-link",{attrs:{slot:"bottom:links",bullet:""},on:{click:function(t){e.$dialog("VIEW_ALL_AVAILABLE_TOKENS").open()}},slot:"bottom:links"},[s("translate",[e._v("Available Tokens")])],1),e._v(" "),s("available-tokens-dialog",{attrs:{tokens:e.$api.tokens}})],1)}),[],!1,null,"028d4ee6",null);"function"==typeof r()&&r()(u);var i=u.exports},"./src/js/pages/admin/custom-httpd/php-fpm.vue?vue&type=custom&index=0&blockType=route":function(){},"./node_modules/vue-style-loader/index.js!./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/custom-httpd/php-fpm.vue?vue&type=style&index=0&id=028d4ee6&lang=scss&scoped=true&":function(e,t,s){var o=s("./node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-6[0].rules[0].use[1]!./node_modules/css-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[2]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[3]!./node_modules/sass-loader/dist/cjs.js??clonedRuleSet-6[0].rules[0].use[4]!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/admin/custom-httpd/php-fpm.vue?vue&type=style&index=0&id=028d4ee6&lang=scss&scoped=true&");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals);(0,s("./node_modules/vue-style-loader/lib/addStylesClient.js").Z)("69007e74",o,!0,{})}}]);