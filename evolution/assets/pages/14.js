(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1886:function(t,e,r){"use strict";r.r(e),r.d(e,"preload",(function(){return O})),r.d(e,"GET",(function(){return R})),r.d(e,"POST",(function(){return I})),r.d(e,"PUT",(function(){return T})),r.d(e,"PATCH",(function(){return D})),r.d(e,"DELETE",(function(){return w})),r.d(e,"$gettext",(function(){return S}));var n=r(30),o=r.n(n),a=r(28),i=r(9),u=r(1893),s=r(1894),c=r(13),l=new o.a,d={401:"UNAUTHORIZED",404:"ENDPOINT_NOT_FOUND",405:"METHOD_NOT_ALLOWED"},f={BAD_REQUEST:l.$gettext("Bad Request: %{ message }"),UNAUTHORIZED:l.$gettext("Unauthorized"),ACCESS_DENIED:l.$gettext("Access Denied"),INTERNAL_ERROR:l.$gettext("Server Error: %{ message }"),METHOD_NOT_ALLOWED:l.$gettext("Method Not Allowed"),ENDPOINT_NOT_FOUND:l.$gettext("Endpoint Not Found")},p=function(t,e,r){void 0===r&&(r={});var n=l.$gettextInterpolate(e,r||{});return{status:t,message:n,type:r.type,data:i.omit(["type"],r),notify:function(){return a.Store.dispatch("notifications/NOTIFY",{theme:"danger",title:l.$gettext("Error"),content:n,route:a.Store.state.app.route.path||"/",time:new Date})}}},v=function(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{s(n.next(t))}catch(t){a(t)}}function u(t){try{s(n.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,u)}s((n=n.apply(t,e||[])).next())}))},y=function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},m={data:{},statusCodes:{},errorMessages:{}},h=function(t,e,r){void 0===r&&(r={});var n=function(t,e){return(t+"_"+e.slice(5).replace(/\//,"_").replace(/\:/,"")).toUpperCase()}(t,e);r=i.mergeDeepRight(m,r);var o=Object(s.registerEndpoint)(n,r.data);return{endpoint:o,request:function(i){return v(void 0,void 0,void 0,(function(){var s,v,m;return y(this,(function(y){switch(y.label){case 0:return a.Store&&a.Store.state.commands.blockingRequest?[4,a.Store.state.commands.blockingRequest]:[3,2];case 1:y.sent(),y.label=2;case 2:o.params=i||{},o.state={isLoading:!0},y.label=3;case 3:return y.trys.push([3,5,,6]),[4,Object(u.request)({endpointID:n,url:e,method:t},o.params)];case 4:return s=y.sent(),"get"===t&&(o.data=s.data),o.state={isOk:!0,isDone:!0,isLoading:!1,error:null},[2,{state:"success",data:s.data,error:null}];case 5:return v=y.sent(),401===(m=function(t,e,r){var n;void 0===e&&(e={}),void 0===r&&(r={});var o=Object.assign(e,d),a=Object.assign(r,f);if(t.response){if(t.response.data&&t.response.data.type)if(void 0!==a[(i=t.response.data).type])return p(t.response.status,a[i.type],i);if(o[t.response.status]){var i={type:o[t.response.status]};t.response.data=i;var u=o[t.response.status];if(u&&a[u])return p(t.response.status,a[u],{type:u})}}else if(t.request)return c.emitter.emit("request:networkerror"),p(-1,l.$gettext("Network Error: Server is unreachable"),{type:"NETWORK_UNREACHABLE"});return p((null===(n=null==t?void 0:t.response)||void 0===n?void 0:n.status)||-1,l.$gettext("Unknown Error"),{type:"UNKNOWN_ERROR"})}(v,r.statusCodes,r.errorMessages)).status&&window.location.reload(),o.state={isOk:!1,isDone:!0,isLoading:!1,error:m},[2,{state:"error",error:m,data:null}];case 6:return[2]}}))}))}}},E=function(t,e,r){void 0===r&&(r={});var n=h(t,e,r),o=n.endpoint,a=n.request;return Object.freeze({get params(){return o.params},get state(){return o.state},request:a})},g=function(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{s(n.next(t))}catch(t){a(t)}}function u(t){try{s(n.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,u)}s((n=n.apply(t,e||[])).next())}))},b=function(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},_=function(t,e){return t.notify(),e(!1)},O=function(t,e){return void 0===e&&(e=_),function(r,n,o){return g(void 0,void 0,void 0,(function(){var a,i,u;return b(this,(function(s){switch(s.label){case 0:return[4,Promise.all(t.map((function(t){return t(r,n)})))];case 1:return a=s.sent(),void 0!==(i=a.find((function(t){return"error"===t.state})))?(u=i.error,[2,e(u,o)]):(o(),[2])}}))}))}},R=function(t,e){return function(t,e,r){void 0===r&&(r={});var n=h(t,e,r),o=n.endpoint,a=n.request;return Object.freeze({get data(){return o.data},set data(t){o.data=t},get params(){return o.params},get state(){return o.state},request:a,bindData:function(t){return function(){return t?t(o.data):o.data}}})}("get",t,e)},I=function(t,e){return E("post",t,e)},T=function(t,e){return E("put",t,e)},D=function(t,e){return E("patch",t,e)},w=function(t,e){return E("delete",t,e)},S=(new o.a).$gettext},1893:function(t,e,r){"use strict";r(16),r(14),r(23),r(25),r(18),r(6);var n=r(1),o=r(19);Object.defineProperty(e,"__esModule",{value:!0}),e.request=void 0;var a=n(r(36)),i=n(r(37));r(12),r(15),r(21),r(40),r(84);var u=n(r(505)),s=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==o(t)&&"function"!=typeof t)return{default:t};var r=d(e);if(r&&r.has(t))return r.get(t);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var u=a?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=t[i]}n.default=t,r&&r.set(t,n);return n}(r(9)),c=r(31),l=r(28);function d(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(d=function(t){return t?r:e})(t)}var f=u.default.create({baseURL:"/api"});f.interceptors.request.use(s.mergeDeepRight({timeout:0,headers:{Accept:"application/json","Content-Type":"application/json",Pragma:"no-cache"}}));var p,v=function(t,e){if(t.includes(":")){var r=[];return{url:t.replace(/:[a-z]*/g,(function(t){if(":domain"===t&&!e.domain)return l.Store.state.app.domain;t=t.slice(1);var n=e[t];if(void 0===n)throw new Error("EndpointParamError: ".concat(t," is not defined"));return r.push(t),n})),urlParams:r}}return{url:t,urlParams:[]}},y=(p=(0,i.default)(a.default.mark((function t(e,r){var n,o,i,u,l,d,p;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof e.url){t.next=2;break}throw new Error("Unsupported URL format");case 2:return n=v(e.url,r),o=n.url,i=n.urlParams,u={endpointID:e.endpointID,url:o,method:e.method},l=s.omit(i,r),!1===s.isEmpty(l)&&(d="get"===e.method?"params":"data",u[d]=l),t.prev=6,t.next=9,f.request(u);case 9:return t.abrupt("return",t.sent);case 12:throw t.prev=12,t.t0=t.catch(6),c.ENV.DEV&&(console.group(),console.dir(u),p=u.params||u.data,console.table({"Endpoint ID":u.endpointID,Url:u.url,Method:u.method,"Request Data":JSON.stringify(p),"Response Status Code":t.t0.response.status,"Response Data":JSON.stringify(t.t0.response.data)}),console.groupEnd()),t.t0;case 16:case"end":return t.stop()}}),t,null,[[6,12]])}))),function(t,e){return p.apply(this,arguments)});e.request=y},1894:function(t,e,r){"use strict";r(16),r(14),r(23),r(25),r(18),r(6);var n=r(19);Object.defineProperty(e,"__esModule",{value:!0}),e.registerEndpoint=void 0,r(49);var o=r(28),a=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var r=i(e);if(r&&r.has(t))return r.get(t);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var s=a?Object.getOwnPropertyDescriptor(t,u):null;s&&(s.get||s.set)?Object.defineProperty(o,u,s):o[u]=t[u]}o.default=t,r&&r.set(t,o);return o}(r(9));function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(i=function(t){return t?r:e})(t)}e.registerEndpoint=function(t,e){return o.Store.commit("endpoints/REGISTER_ENDPOINT",{id:t,data:e}),{get data(){return a.clone(o.Store.state.endpoints[t].data)},set data(e){o.Store.commit("endpoints/SET_DATA",{id:t,data:e})},get state(){return o.Store.state.endpoints[t].state},set state(e){o.Store.commit("endpoints/SET_STATE",{id:t,state:Object.assign({},{isLoading:!1,isOk:!1,isError:!1,error:null},e)})},get params(){return a.clone(o.Store.state.endpoints[t].params)},set params(e){o.Store.commit("endpoints/SET_PARAMS",{id:t,params:e})}}}},1943:function(t,e,r){"use strict";r.r(e),r.d(e,"postDeploy",(function(){return o})),r.d(e,"getGit",(function(){return a})),r.d(e,"postInit",(function(){return i})),r.d(e,"postFetch",(function(){return u})),r.d(e,"postWebhook",(function(){return s})),r.d(e,"deleteRepo",(function(){return c})),r.d(e,"getInfo",(function(){return l})),r.d(e,"getLogs",(function(){return d})),r.d(e,"putModify",(function(){return f})),r.d(e,"getCommit",(function(){return p})),r.d(e,"getDefaultBranch",(function(){return v}));var n=r(1886),o=Object(n.POST)("/git/uuid/:uuid/deploy",{statusCodes:{409:"GIT_DEPLOY_BRANCH_NOT_SET",410:"GIT_DEPLOY_DIR_NOT_SET"},errorMessages:{GIT_DEPLOY_BRANCH_NOT_SET:Object(n.$gettext)("Git deploy branch is not set"),GIT_DEPLOY_DIR_NOT_SET:Object(n.$gettext)("Git deploy directory is not set")}}),a=Object(n.GET)("/git/domain/:domain"),i=Object(n.POST)("/git/domain/:domain",{statusCodes:{409:"GIT_DIRECTORY_EXISTS"},errorMessages:{GIT_DIRECTORY_EXISTS:Object(n.$gettext)("Git directory exists %{ directory }")}}),u=Object(n.POST)("/git/uuid/:uuid/fetch"),s=Object(n.POST)("/git/uuid/:uuid/webhook"),c=Object(n.DELETE)("/git/uuid/:uuid"),l=Object(n.GET)("/git/uuid/:uuid"),d=Object(n.GET)("/git/uuid/:uuid/branch/:branch"),f=Object(n.PUT)("/git/uuid/:uuid"),p=Object(n.GET)("/git/uuid/:uuid/commit/:commit"),v=function(t){return 0===t.length?"":["main","master"].find((function(e){return t.includes(e)}))||t[0]}},2055:function(t,e,r){"use strict";var n=r(1);Object.defineProperty(e,"__esModule",{value:!0}),e.uploadFiles=e.checkExistsMultiple=e.download=e.checkExists=e.getArchive=e.extract=e.copy=e.rename=e.create=e.save=e.read=void 0,r(5),r(24),r(26),r(7);var o=r(28),a=n(r(78)),i=r(13),u="/CMD_FILE_MANAGER",s=a.default.get({url:u,id:"FILE_CONTENT",params:{action:"edit"},schema:{path:a.default.REQUIRED_STRING},after:function(t){return t.flow(t.moveProp({DIRECTORY:"dir",FILENAME:"filename",TEXT:"text"}),t.mapProp("text",t.convert.toAppText),t.deleteProp("BODY"))}});e.read=s;var c=a.default.post({url:u,noQueryArg:!0,params:{action:"edit",json:!0},schema:{path:a.default.REQUIRED_STRING,filename:a.default.REQUIRED_STRING,text:a.default.REQUIRED_STRING}});e.save=c;var l=c.extend({params:{text:""}});e.create=l;var d=a.default.post({url:u,params:{action:"rename"},schema:{old:a.default.REQUIRED_STRING,filename:a.default.REQUIRED_STRING,path:a.default.REQUIRED_STRING}});e.rename=d;var f=d.extend({params:{action:"copy",json:!0},schema:{overwrite:a.default.REQUIRED_BOOL}});e.copy=f;var p=a.default.post({url:u,params:{action:"extract",page:2},schema:{path:a.default.REQUIRED_STRING,directory:a.default.REQUIRED_STRING}});e.extract=p;var v=a.default.get({id:"ARCHIVE",url:u,params:{action:"extract",json:!0},schema:{path:a.default.REQUIRED_STRING},response:[],after:function(t){return t.flow(t.getProp("output"),t.convert.toLines,t.filter(t.notEmpty))}});e.getArchive=v;var y=a.default.get({url:u,id:"FILE_EXISTS",response:!1,params:{action:"exists"},schema:{path:a.default.REQUIRED_STRING},after:function(t){return t.flow(t.getProp("exists"),t.isEqual("1"))}});e.checkExists=y;e.download=function(t){var e=(0,o.State)("app.tokens.SESSION_ID"),r="".concat(u).concat(t.truepath,"?noredirect=true&X-DirectAdmin-Session-ID=").concat(e);(0,i.openInNewTab)(r,t.name)};var m=a.default.get({url:u,id:"FILES_EXISTS",params:{action:"multiple_exist"},schema:{file:a.default.ROWS},response:[],mapResponse:function(t){var e=t.paths;return Object.keys(e).filter((function(t){return"1"===e[t].exists}))}});e.checkExistsMultiple=m;var h=a.default.post({url:"/CMD_FILE_MANAGER",params:{action:"upload"},schema:{file:{required:!0},path:a.default.REQUIRED_STRING},transport:FormData,continous:!0});e.uploadFiles=h},2646:function(t,e,r){"use strict";r.r(e);var n=r(2647),o=r.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){r.d(e,t,(function(){return n[t]}))}(a);e.default=o.a},2647:function(t,e,r){"use strict";var n=r(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(r(36));r(26),r(49);var a,i,u=n(r(37)),s=r(2055),c=r(1943),l=r(1886),d={beforeRouteEnter:(0,l.preload)([function(){return c.getInfo.request({uuid:(void 0).uuid})}]),props:{uuid:{type:String,required:!0}},data:function(){return{query:{deploy_branch:"",deploy_dir:"",keyfile:"",branches:[]}}},computed:{gitInfo:c.getInfo.bindData(),name:function(){return this.gitInfo.name},homeDir:function(){return this.$state.app.tokens.HOME_DIR}},methods:{validateKeyFile:function(t){return!t||(0,s.checkExists)({path:t})},initRepoInfo:(i=(0,u.default)(o.default.mark((function t(){return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.query=Object.assign(this.query,this.gitInfo);case 1:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)}),submit:(a=(0,u.default)(o.default.mark((function t(){var e,r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.$valid("edit-repo")){t.next=7;break}return t.next=3,c.putModify.request({uuid:this.uuid,deploy_branch:this.query.deploy_branch,deploy_dir:this.query.deploy_dir,keyfile:this.query.keyfile});case 3:e=t.sent,(r=e.error)?r.notify():this.$notifications.success({title:this.$gettext("Git Modify"),content:this.$gettext("Repository modified")}),this.$emit("modified");case 7:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})}};e.default=d},3130:function(t,e,r){"use strict";r.r(e);var n=r(4169),o=r(2646);for(var a in o)["default"].indexOf(a)<0&&function(t){r.d(e,t,(function(){return o[t]}))}(a);r(3669);var i=r(0),u=Object(i.a)(o.default,n.a,n.b,!1,null,"13cf5972",null);e.default=u.exports},3131:function(t,e,r){var n=r(3670);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,r(4).default)("38873c67",n,!0,{})},3669:function(t,e,r){"use strict";r(3131)},3670:function(t,e,r){},4169:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o}));var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ui-dialog",{attrs:{id:"MODIFY_GIT_REPO_DIALOG",size:"normal"},on:{"dialog:open":t.initRepoInfo}},[r("translate",{attrs:{slot:"title","translate-params":{name:t.name}},slot:"title"},[t._v("\n        Modify Repository %{ name }\n    ")]),t._v(" "),r("div",{attrs:{slot:"content"},slot:"content"},[r("ui-form-element",{attrs:{vertical:""}},[r("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Deploy Branch\n            ")]),t._v(" "),r("input-select",{attrs:{slot:"content",options:t.query.branches||[]},slot:"content",model:{value:t.query.deploy_branch,callback:function(e){t.$set(t.query,"deploy_branch",e)},expression:"query.deploy_branch"}})],1),t._v(" "),r("ui-form-element",{attrs:{vertical:"",group:"edit-repo",validators:{required:!1}}},[r("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Deploy Directory\n            ")]),t._v(" "),r("input-text",{attrs:{slot:"content"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)}},slot:"content",model:{value:t.query.deploy_dir,callback:function(e){t.$set(t.query,"deploy_dir",e)},expression:"query.deploy_dir"}})],1),t._v(" "),r("ui-form-element",{directives:[{name:"show",rawName:"v-show",value:t.gitInfo.remote,expression:"gitInfo.remote"}],attrs:{vertical:"",group:"edit-repo",validators:{required:!1}}},[r("translate",{attrs:{slot:"title"},slot:"title"},[t._v("\n                Key file\n            ")]),t._v(" "),r("input-text",{attrs:{slot:"content"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)}},slot:"content",model:{value:t.query.keyfile,callback:function(e){t.$set(t.query,"keyfile",e)},expression:"query.keyfile"}})],1)],1),t._v(" "),r("ui-button",{attrs:{slot:"buttons",theme:"primary","validate-group":"edit-repo"},on:{click:t.submit},slot:"buttons"},[r("translate",[t._v("Save")])],1)],1)},o=[]}}]);