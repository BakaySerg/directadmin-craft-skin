(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{1823:function(e,t,a){"use strict";a.r(t);var n=a(4021),o=a(2622);for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);var i=a(0),s=a(3655),l=a.n(s),c=Object(i.a)(o.default,n.a,n.b,!1,null,null,null);"function"==typeof l.a&&l()(c),t.default=c.exports},2037:function(e,t,a){"use strict";var n=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.validateVacationAccount=t.getVacation=t.deleteVacations=t.modifyVacation=t.createVacation=t.getVacationDefaults=t.getVacations=void 0;var o=n(a(19));a(17);var r=n(a(78)),i=function(e){return e.mapProps({custom_reply_headers:e.isEqual("1"),reply_content_types:e.toSelect,reply_encodings:e.toSelect,reply_once_select:e.toSelect})},s=r.default.get({id:"VACATIONS",url:"/CMD_EMAIL_VACATION",domain:!0,pagination:!0,after:function(e){return e.flow((function(e){return{rows:e}}),e.processTableInfo("rows"),e.mapProp("rows",e.flow(e.toArray,e.mapArray(e.flow(e.project({user:"user",start:"time.start_timestamp",end:"time.end_timestamp"}),e.mapProps({start:e.convert.toAppDate,end:e.convert.toAppDate}))))))}});t.getVacations=s;var l=r.default.get({id:"VACATION_DEFAULTS",url:"/CMD_EMAIL_VACATION_CREATE",domain:!0,after:function(e){return e.flow(e.mapProps({ENDDAY:e.toSelect,ENDMONTH:e.toSelect,ENDYEAR:e.toSelect,ENDTIME:e.toSelect,STARTDAY:e.toSelect,STARTMONTH:e.toSelect,STARTYEAR:e.toSelect,STARTTIME:e.toSelect,poplist:e.toSelect}),e.moveProp({ENDDAY:"end.day",ENDMONTH:"end.month",ENDYEAR:"end.year",ENDTIME:"end.time",STARTDAY:"start.day",STARTMONTH:"start.month",STARTYEAR:"start.year",STARTTIME:"start.time"}),e.mapProps({end:function(e){return{time:e.time,date:new Date(e.year.value,Number(e.month.value)-1,e.day.value)}},start:function(e){return{time:e.time,date:new Date(e.year.value,Number(e.month.value)-1,e.day.value)}},headers:i(e)}))}});t.getVacationDefaults=l;var c=r.default.post({url:"/CMD_EMAIL_VACATION",params:{action:"create"},domain:!0,schema:{user:r.default.REQUIRED_STRING,starttime:r.default.REQUIRED_STRING,startday:r.default.REQUIRED_STRING,startmonth:r.default.REQUIRED_STRING,startyear:r.default.REQUIRED_STRING,endtime:r.default.REQUIRED_STRING,endday:r.default.REQUIRED_STRING,endmonth:r.default.REQUIRED_STRING,endyear:r.default.REQUIRED_STRING}});t.createVacation=c;var u=c.extend({params:{action:"modify"}});t.modifyVacation=u;var d=r.default.select({url:"/CMD_EMAIL_VACATION",params:{action:"delete",delete:!0},domain:!0});t.deleteVacations=d;var m=r.default.get({id:"VACATION",url:"/CMD_EMAIL_VACATION_MODIFY",domain:!0,schema:{user:r.default.REQUIRED_STRING},after:function(e){return e.flow(e.mapProps({ENDDAY:e.toSelect,ENDMONTH:e.toSelect,ENDYEAR:e.toSelect,ENDTIME:e.toSelect,STARTDAY:e.toSelect,STARTMONTH:e.toSelect,STARTYEAR:e.toSelect,STARTTIME:e.toSelect}),e.moveProp({ENDDAY:"end.day",ENDMONTH:"end.month",ENDYEAR:"end.year",ENDTIME:"end.time",STARTDAY:"start.day",STARTMONTH:"start.month",STARTYEAR:"start.year",STARTTIME:"start.time"}),e.mapProps({end:function(e){return{time:e.time,date:new Date(e.year.value,Number(e.month.value)-1,e.day.value)}},start:function(e){return{time:e.time,date:new Date(e.year.value,Number(e.month.value)-1,e.day.value)}},text:e.convert.toAppText,headers:i(e)}))}});t.getVacation=m;var f=r.default.get({id:"VACATION_VALIDATION",domain:!0,url:"/CMD_EMAIL_VACATION",schema:{user:r.default.REQUIRED_STRING},before:function(e){return{user:null,comparison1:"equals",value1:e.user}},response:!1,mapResponse:function(e){return"object"!==(0,o.default)(e[0])}});t.validateVacationAccount=f},2622:function(e,t,a){"use strict";a.r(t);var n=a(2623),o=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t.default=o.a},2623:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(2037),o={preload:n.getVacations,commands:{getVacations:n.getVacations},data:function(){return{select:[]}},watch:{$domain:n.getVacations},methods:{deleteVacations:function(){(0,n.deleteVacations)({select:this.select}).then(this.$reset).then(n.getVacations)}}};t.default=o},3655:function(e,t){},4021:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-page",{attrs:{actions:[{label:e.$gettext("Set Vacation Message"),name:"user/email/vacations/create",icon:"#plus-fill"}]}},[a("ui-button-link",{attrs:{slot:"header:buttons",theme:"primary",name:"user/email/vacations/create"},slot:"header:buttons"},[a("translate",[e._v("Set Vacation Message")])],1),e._v(" "),a("app-page-section",[a("ui-api-table",e._b({on:{"action:del":function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()}},scopedSlots:e._u([{key:"col:user",fn:function(t){var a=t.user;return[e._v("\n                "+e._s(a)+"@"+e._s(e.$domainUnicode)+"\n            ")]}},{key:"row:actions",fn:function(t){var n=t.user;return a("ui-button-link",{attrs:{theme:"light",size:"small",name:"user/email/vacations/modify",params:{user:n}}},[a("ui-icon",{directives:[{name:"margin",rawName:"v-margin",value:[0,"4px",0,0],expression:"[0,'4px', 0, 0]"}],attrs:{id:"pencil"}}),e._v(" "),e.$_Client.isPhone?e._e():a("translate",[e._v("\n                    Modify\n                ")])],1)}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getVacations,rowID:"user",columns:{user:{label:e.$gettext("Vacation Account"),grow:!0},start:{label:e.$gettext("Start Time"),filter:"date",sortID:"2"},end:{label:e.$gettext("End Time"),filter:"date",sortID:"3"}},actions:{del:e.$gettext("Delete")},editable:!1,verticalLayout:e.$_Client.isPhone},!1))],1),e._v(" "),a("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("vacation message","vacation messages",e.select.length)},on:{"click:confirm":e.deleteVacations}})],1)},o=[]}}]);