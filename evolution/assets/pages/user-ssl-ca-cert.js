(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[7226],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/ssl/ca-cert.vue?vue&type=script&lang=js&":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s=r("./src/js/api/commands/user/ssl/index.js"),o={preload:s.getCA,api:[{command:s.getCA,bind:"ca"}],data:function(){return{cacert:"",active:!1}},created:function(){this.active=this.$api.ca.active,this.cacert=this.$api.ca.cacert},methods:{submit:function(){(0,s.saveCA)({cacert:this.cacert,active:this.active})},copyToClipboard:function(){this.$refs.cacert.select(),document.execCommand("copy")}}};t.Z=o},"./src/js/api/commands/user/ssl/index.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.object.define-property.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.useServersCert=t.updateForceRedirect=t.submitRequest=t.saveDnsProvider=t.saveCA=t.resetDnsProvider=t.requestLetsencrypt=t.pasteSSLCert=t.getOptions=t.getCA=t.enableSSL=t.disableSSL=t.disableLetsencryptAutoRenew=void 0,r("./node_modules/core-js/modules/es.array.find.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.object.keys.js"),r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.string.replace.js");var o=s(r("./node_modules/@babel/runtime/helpers/defineProperty.js")),a=s(r("./src/js/api/command/index.js")),n=s(r("./node_modules/punycode/punycode.es6.js")),c=r("./src/js/api/commands/user/ssl/pro.js"),l=a.default.get({id:"SSL_OPTIONS",url:"/CMD_SSL",domain:!0,params:{dnsproviders:!0},after:function(e){return e.flow(e.project({"hashTypes.current":"hash_select","hashTypes.all":"hash_types",keySizes:"keysize_select",enabled:"SSL_ON",acmeProvider:"ACME_PROVIDER","tab.server":"SERVERCHECKED","tab.paste":"PASTECHECKED","letsEncrypt.domains":"LETSENCRYPT_OPTIONS","letsEncrypt.selected":"LETSENCRYPT_OPTIONS","letsEncrypt.wc.enabled":"WILDCARD","letsEncrypt.wc.domains":"LETSENCRYPT_WC_OPTIONS","letsEncrypt.wc.selected":"LETSENCRYPT_WC_OPTIONS","letsEncrypt.enabled":"LETSENCRYPT","letsEncrypt.showOptions":"LETSENCRYPT","letsEncrypt.maxRequests":"LETSENCRYPT_MAX_REQUESTS","letsEncrypt.renewalDays":"LETSENCRYPT_RENEWAL_DAYS","letsEncrypt.dnsProviders":"dnsproviders","letsEncrypt.backgroundDefault":"BACKGROUND_DEFAULT",cert:"CERTIFICATE",certHosts:"CERTIFICATE_HOSTS",certExpiry:"NOT_AFTER",key:"KEY","values.province":"PROVINCE","values.city":"CITY","values.company":"COMPANY","values.division":"DIVISION","values.email":"EMAIL","values.name":"NAME","values.country":"COUNTRY","options.forceRedirect":"FORCE_SSL_CHECKED","pro.certificates":"certificates","pro.retries":"next_retries","pro.snidomains":"snidomains"}),e.mapProps({acmeProvider:function(e){return e||"letsencrypt"},key:e.convert.toAppText,cert:e.convert.toAppText,hashTypes:e.mapProp("all",e.transformObject((function(e,t){return(0,o.default)({},e,t)}))),tab:function(e){return Object.keys(e).find((function(t){return e[t]}))},keySizes:e.flow(e.toSelect,e.project({all:"options",current:"value"})),enabled:e.convert.toAppBoolean,options:e.mapProp("forceRedirect",(function(e){return!!e})),letsEncrypt:e.mapProps({enabled:function(e){return"0"!==e},showOptions:e.isEqual("1"),maxRequests:function(t){return e.convert.toAppNumber(t||0)},domains:e.flow((function(e){return"string"==typeof e?{}:e}),e.setDefault({}),Object.keys,e.mapArray(n.default.toUnicode)),selected:e.flow((function(e){return"string"==typeof e?{}:e}),e.setDefault({}),e.filter(e.notEmpty),Object.keys),backgroundDefault:function(e){return e||"auto"},wc:e.mapProps({enabled:e.isEqual("1"),selected:e.flow(e.setDefault({}),e.filter(e.notEmpty),Object.keys),domains:e.flow(e.setDefault({}),Object.keys,e.mapArray(n.default.toUnicode))}),dnsProviders:function(e){if(!e||e.data.error)return{data:{},selected:{value:"",configuration:{}}};var t;return{data:e.data,selected:{value:e.dnsprovider?e.dnsprovider.dnsprovider:"",configuration:e.dnsprovider?(t=e.dnsprovider,delete t.dnsprovider,t):{}}}}}),pro:c.processProData}))}});t.getOptions=l;var i=a.default.post({url:"/CMD_SSL",params:{action:"save"},domain:!0,schema:{type:a.default.REQUIRED_STRING,request:{required:!0}}}),u=i.extend({id:"SSL_REQUEST",params:{type:"create"},schema:{country:a.default.REQUIRED_STRING,province:a.default.REQUIRED_STRING,city:a.default.REQUIRED_STRING,company:a.default.REQUIRED_STRING,division:a.default.REQUIRED_STRING,name:a.default.REQUIRED_STRING,email:a.default.REQUIRED_STRING,keysize:a.default.REQUIRED_STRING,encryption:a.default.REQUIRED_STRING},after:function(e){return e.mapProp("request",e.flow((function(e){return e||""}),e.convert.toAppString,e.convert.toAppText))}});t.submitRequest=u;var d=i.extend({params:{type:"server",request:!1}});t.useServersCert=d;var p=i.extend({params:{type:"create",request:"letsencrypt"},schema:{name:a.default.REQUIRED_STRING,keysize:a.default.REQUIRED_STRING,encryption:a.default.REQUIRED_STRING,wildcard:a.default.OPTIONAL_BOOL,le_select:{type:Array,required:!1},le_wc_select:{type:Array,required:!1},background:a.default.REQUIRED_STRING}});t.requestLetsencrypt=p;var m=a.default.post({url:"/CMD_SSL",params:{disable_letsencrypt_autorenew:!0,json:!0},domain:!0});t.disableLetsencryptAutoRenew=m;var f=a.default.post({url:"/CMD_SSL",params:{action:"save",type:"paste"},domain:!0,body:{certificate:a.default.REQUIRED_STRING},before:function(e){return{certificate:e.certificate.replace(/\r\n/g,"\n")}}});t.pasteSSLCert=f;var v=a.default.get({id:"CA",url:"/CMD_SSL",params:{view:"cacert"},domain:!0,after:function(e){return e.flow(e.moveProp("CHECKED","active"),e.moveProp("CACERT","cacert"),e.mapProps({active:e.convert.toAppBoolean,cacert:function(e){return e.replace(/(\\n)/gm,"\n")}}))}});t.getCA=v;var y=a.default.post({url:"/CMD_SSL",params:{action:"save",type:"cacert"},domain:!0,schema:{active:a.default.REQUIRED_BOOL,cacert:a.default.REQUIRED_STRING},before:function(e){return{cacert:e.cacert.replace(/\r\n/g,"\n")}}});t.saveCA=y;var _=a.default.post({url:"/CMD_DOMAIN",params:{action:"private_html"},domain:!0,schema:{force_ssl:a.default.REQUIRED_BOOL}});t.updateForceRedirect=_;var j=a.default.post({url:"/CMD_DOMAIN",params:{action:"modify",only_affect:"ssl",ssl:"ON"},domain:!0});t.enableSSL=j;var b=j.extend({params:{ssl:null}});t.disableSSL=b;var E=a.default.post({url:"/CMD_SSL",params:{action:"save",type:"dnsprovider"},domain:!0});t.saveDnsProvider=E;var S=a.default.post({url:"/CMD_SSL",domain:!0,params:{action:"save",type:"dnsprovider",dnsprovider_reset:!0}});t.resetDnsProvider=S},"./src/js/api/commands/user/ssl/pro.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.object.keys.js"),r("./node_modules/core-js/modules/es.symbol.js"),r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("./node_modules/core-js/modules/web.dom-collections.for-each.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("./node_modules/core-js/modules/es.object.define-properties.js"),r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/es.weak-map.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js");var s=r("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),o=r("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(t,"__esModule",{value:!0}),t.retryCertificate=t.processProData=t.manualRetry=t.forceRetry=t.deleteCertificate=t.cancelRetry=void 0,r("./node_modules/core-js/modules/es.array.includes.js"),r("./node_modules/core-js/modules/es.string.includes.js");var a=s(r("./node_modules/@babel/runtime/helpers/slicedToArray.js")),n=s(r("./node_modules/@babel/runtime/helpers/defineProperty.js")),c=s(r("./src/js/api/command/index.js")),l=r("./src/js/api/converters.js"),i=r("./src/js/store/index.js"),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var c=a?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(s,n,c):s[n]=e[n]}s.default=e,r&&r.set(e,s);return s}(r("./node_modules/ramda/src/index.js"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=function(e){return m(m({},e),{},{valid:"yes"===e.valid})},v=function(e){return{host:e.domain,next_retry:(0,l.toAppDate)(e.next_retry),hosts:u.values(u.pickBy((function(t,r){return r.includes("yes"===e.wildcard?"le_wc_select":"le_select")}),e))}},y=function(e){var t=(0,a.default)(e,2);return m({host:t[0]},t[1])};t.processProData=function(e){return void 0!==e.certificates&&u.evolve({certificates:u.pipe(u.values,u.map(f)),retries:u.pipe(u.values,u.map(v)),snidomains:u.pipe(u.toPairs,u.map(y))},e)};var _=c.default.select({url:"/CMD_SSL",domain:!0,params:{action:"certificate",retry:!0}});t.retryCertificate=_;var j=c.default.select({url:"/CMD_SSL",domain:!0,params:{action:"certificate",delete:!0}});t.deleteCertificate=j;var b=c.default.select({url:"/CMD_SSL",domain:!0,params:{action:"retries",retry_now:!0}});t.forceRetry=b;var E=c.default.select({url:"/CMD_SSL",domain:!0,params:{action:"retries",cancel:!0}});t.cancelRetry=E;var S=c.default.post({url:"/CMD_SSL",before:function(e){return{domain:i.Store.state.app.domain,select0:i.Store.state.app.domain,action:"retries",retry_now:!0,wildcard:!!e.wildcard||null,subdomains:!!e.subdomains||null,pointers:!!e.pointers||null}},schema:{wildcard:c.default.OPTIONAL_BOOL,subdomains:c.default.OPTIONAL_BOOL,pointers:c.default.OPTIONAL_BOOL}});t.manualRetry=S},"./src/js/pages/user/ssl/ca-cert.vue":function(e,t,r){"use strict";r.r(t),r.d(t,{__esModule:function(){return s.X},default:function(){return i}});var s=r("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/ssl/ca-cert.vue?vue&type=script&lang=js&"),o=s.Z,a=r("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),n=r("./src/js/pages/user/ssl/ca-cert.vue?vue&type=custom&index=0&blockType=route"),c=r.n(n),l=(0,a.Z)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-page",{attrs:{actions:[{label:e.$gettext("Copy to clipboard"),handler:e.copyToClipboard,icon:"#clipboard-copy"}]}},[r("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:e.copyToClipboard},slot:"header:buttons"},[r("translate",[e._v("Copy to clipboard")])],1),e._v(" "),r("app-page-section",[r("ui-form-element",{attrs:{vertical:""}},[r("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column",cross:"start"},expression:"{ dir: 'column', cross: 'start' }"},{name:"gutter",rawName:"v-gutter",value:[1,null],expression:"[1, null]"}],attrs:{slot:"content"},slot:"content"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.cacert,expression:"cacert"}],ref:"cacert",staticClass:"pageSsl-keyArea width:100%",attrs:{rows:"10"},domProps:{value:e.cacert},on:{input:function(t){t.target.composing||(e.cacert=t.target.value)}}})])]),e._v(" "),r("ui-form-element",{attrs:{vertical:""}},[r("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[r("translate",[e._v("Use a CA Cert")])],1)],1)],1),e._v(" "),r("ui-button",{attrs:{slot:"footer:buttons",theme:"safe",disabled:!e.cacert},on:{click:e.submit},slot:"footer:buttons"},[r("translate",[e._v("Save")])],1)],1)}),[],!1,null,null,null);"function"==typeof c()&&c()(l);var i=l.exports},"./src/js/pages/user/ssl/ca-cert.vue?vue&type=custom&index=0&blockType=route":function(){}}]);