(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[6765],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/login-keys/log.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var r=o("./src/js/api/commands/user/login-keys.js"),n={preload:r.getUsageLog,props:{keyname:{type:String,required:!0}},api:[{command:r.getUsageLog,bind:"log"}]};t.Z=n},"./src/js/api/commands/user/login-keys.js":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.keys.js"),o("./node_modules/core-js/modules/es.symbol.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),o("./node_modules/core-js/modules/web.dom-collections.for-each.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),o("./node_modules/core-js/modules/es.object.define-properties.js"),o("./node_modules/core-js/modules/es.object.define-property.js");var r=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.modifyKey=t.getUsageLog=t.getKeys=t.getKeyDefaults=t.getKey=t.deleteKeys=t.createUrl=t.createKey=void 0;var n=r(o("./node_modules/@babel/runtime/helpers/defineProperty.js"));o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.promise.js"),o("./node_modules/core-js/modules/es.array.map.js"),o("./node_modules/core-js/modules/es.array.filter.js"),o("./node_modules/core-js/modules/es.array.join.js"),o("./node_modules/core-js/modules/es.regexp.exec.js"),o("./node_modules/core-js/modules/es.string.replace.js");var l=r(o("./src/js/api/command/index.js"));function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){(0,n.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var u="/CMD_LOGIN_KEYS",c=l.default.get({id:"LOGIN_KEYS",url:u,pagination:!0,after:function(e){return e.flow(e.moveProp("login_keys","rows"),e.processTableInfo("rows"),e.mapProp("rows",e.flow(e.toArray,e.mapArrayProps({expiry:function(t){return"0"!==t?e.convert.toAppDate(t):"never"},log:e.convert.toAppBoolean}))))}});t.getKeys=c;var i=l.default.post({url:u,schema:{keyname:l.default.REQUIRED_STRING,key:l.default.REQUIRED_STRING,key2:l.default.REQUIRED_STRING,never_expires:l.default.REQUIRED_BOOL,hour:l.default.REQUIRED_STRING,minute:l.default.REQUIRED_STRING,month:l.default.REQUIRED_STRING,day:l.default.REQUIRED_STRING,year:l.default.REQUIRED_STRING,clear_key:l.default.REQUIRED_BOOL,allow_htm:l.default.REQUIRED_BOOL,select_allow:l.default.ROWS,select_deny:l.default.ROWS,ips:l.default.OPTIONAL_STRING,passwd:l.default.REQUIRED_STRING}}),d=i.extend({params:{action:"create",type:"key"}});t.createKey=d;var p=l.default.post({url:u,params:{action:"create",type:"one_time_url"},schema:{clear_key:l.default.REQUIRED_BOOL,allow_htm:l.default.REQUIRED_BOOL,select_allow:l.default.ROWS,select_deny:l.default.ROWS,ips:l.default.OPTIONAL_STRING,passwd:l.default.REQUIRED_STRING},notifySuccess:!1});t.createUrl=p;var f=i.extend({params:{action:"modify"}});t.modifyKey=f;var m=l.default.get({id:"LOGIN_KEY_DEFAULTS",url:u,params:{action:"show_create"},after:function(e){return e.flow((function(t){return s(s({},t),{},{commands:e.flow(e.toArray,(function(e){return e.map((function(e){return e.allow}))}),(function(e){return e.filter((function(e){return e}))}))(t.allow_table)})}),e.mapProps({allow_table:e.flow(e.toArray,(function(e){return e.filter((function(e){return"unchecked"!==e.checkbox&&e.allow}))}),(function(e){return e.map((function(e){return e.allow}))})),deny_table:e.flow(e.toArray,(function(e){return e.filter((function(e){return"unchecked"!==e.checkbox&&e.deny}))}),(function(e){return e.map((function(e){return e.deny}))})),expiry:e.mapProps({day:e.toSelect,hour:e.toSelect,minute:e.toSelect,month:e.toSelect,year:e.toSelect})}))}});t.getKeyDefaults=m;var y=l.default.get({id:"LOGIN_KEY",url:u,params:{action:"show_modify"},schema:{keyname:l.default.REQUIRED_STRING},after:function(e){return e.flow((function(t){return{values:{allow_htm:e.convert.toAppBoolean(t.data.allow_htm),clear_key:e.convert.toAppBoolean(t.data.clear_key),never_expires:"0"===t.data.expiry,allow:e.flow(e.toArray,(function(e){return e.filter((function(e){return"unchecked"!==e.checkbox&&e.allow}))}),(function(e){return e.map((function(e){return e.allow}))}))(t.allow_table),deny:e.flow(e.toArray,(function(e){return e.filter((function(e){return"unchecked"!==e.checkbox&&e.deny}))}),(function(e){return e.map((function(e){return e.deny}))}))(t.deny_table),hour:e.toSelect(t.expiry.hour).value,minute:e.toSelect(t.expiry.minute).value,day:e.toSelect(t.expiry.day).value,month:e.toSelect(t.expiry.month).value,year:e.toSelect(t.expiry.year).value,ips:t.ips.join("\r\n")},commands:e.flow(e.toArray,(function(e){return e.map((function(e){return e.allow}))}),(function(e){return e.filter((function(e){return e}))}))(t.allow_table),expiry:{hour:e.toSelect(t.expiry.hour).options,minute:e.toSelect(t.expiry.minute).options,day:e.toSelect(t.expiry.day).options,month:e.toSelect(t.expiry.month).options,year:e.toSelect(t.expiry.year).options}}}))}});t.getKey=y;var _=l.default.select({url:u,params:{delete:!0}});t.deleteKeys=_;var j=l.default.get({id:"LOGIN_KEY_USAGE_LOG",url:u,params:{action:"log"},schema:{keyname:l.default.REQUIRED_STRING},after:function(e){return e.flow(e.toArray,e.mapArrayProps({command:function(e){return e.replace("/","")},timestamp:e.convert.toAppDate}))}});t.getUsageLog=j},"./src/js/pages/user/login-keys/log.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return r.X},default:function(){return c}});var r=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/login-keys/log.vue?vue&type=script&lang=js&"),n=r.Z,l=o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),a=o("./src/js/pages/user/login-keys/log.vue?vue&type=custom&index=0&blockType=route"),s=o.n(a),u=(0,l.Z)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("app-page",[o("app-page-section",[o("ui-r-table",{attrs:{"is-checkable":!1,"is-sortable":!1,rows:e.$api.log,columns:[{id:"timestamp",label:e.$gettext("Date")},{id:"ip",label:e.$gettext("IP")},{id:"command",label:e.$gettext("Command"),grow:!0},{id:"string",label:e.$gettext("Status")}]},scopedSlots:e._u([{key:"col:timestamp",fn:function(t){var r=t.timestamp;return[o("span",{staticClass:"wrap:nowrap"},[e._v(e._s(e._f("date")(r)))])]}}])})],1)],1)}),[],!1,null,null,null);"function"==typeof s()&&s()(u);var c=u.exports},"./src/js/pages/user/login-keys/log.vue?vue&type=custom&index=0&blockType=route":function(){}}]);