(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{1775:function(e,t,a){"use strict";a.r(t);var n=a(3974),o=a(2333);for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);var i=a(0),l=a(3419),u=a.n(l),c=Object(i.a)(o.default,n.a,n.b,!1,null,null,null);"function"==typeof u.a&&u()(c),t.default=c.exports},1937:function(e,t,a){"use strict";a(7),a(10),a(5),a(6),a(8),a(11),a(16),a(14),a(23),a(25),a(18);var n=a(1),o=a(19);Object.defineProperty(t,"__esModule",{value:!0}),t.doPackageAction=t.importPackages=t.exportPackages=t.deletePackages=t.updatePackage=t.getPackage=t.getPackages=void 0;var r=n(a(2));a(27);var i=n(a(78)),l=s(a(2025)),u=s(a(9));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=r?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}return n.default=e,a&&a.set(e,n),n}function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p=i.default.get({id:"USER_PACKAGES",url:"/CMD_MANAGE_USER_PACKAGES",params:{bytes:!0},pagination:!0,after:function(e){return e.toTable(e.mapArrayProps({bandwidth:e.convert.toAppLimit,quota:e.convert.toAppLimit}))}});t.getPackages=p;var O=i.default.get({id:"USER_PACKAGE",url:"/CMD_SHOW_USER_PACKAGE",params:{bytes:!0},schema:{package:i.default.OPTIONAL_STRING},mapResponse:{features:l.getFeatures,limits:l.getLimits,homeOverride:l.getHomeOverride,language:l.getLanguage,skin:l.getSkin,customItems:l.getCustomItems,featureSets:l.getFeatureSets,cgroup:u.pipe(u.prop("cgroup"),u.defaultTo({saved:{},options:{}}),(function(e){return u.merge(e.options||{},e.saved||{})}),u.values),email_daily_limit:function(e){var t=e.email_daily_limit;return void 0!==t&&{disabled:"yes"===t.disabled,unlimited:"unlimited"===t.value,value:"unlimited"===t.value?"":t.value}},pluginRules:u.prop("plugins")}});t.getPackage=O;var m=i.default.post({url:"/CMD_MANAGE_USER_PACKAGES",params:{add:!0},schema:{bandwidth:i.default.OPTIONAL_STRING,ubandwidth:i.default.OPTIONAL_BOOL,quota:i.default.OPTIONAL_STRING,uquota:i.default.OPTIONAL_BOOL,inode:i.default.OPTIONAL_STRING,uinode:i.default.OPTIONAL_BOOL,vdomains:i.default.OPTIONAL_STRING,uvdomains:i.default.OPTIONAL_BOOL,nsubdomains:i.default.OPTIONAL_STRING,unsubdomains:i.default.OPTIONAL_BOOL,nemails:i.default.OPTIONAL_STRING,unemails:i.default.OPTIONAL_BOOL,nemailf:i.default.OPTIONAL_STRING,unemailf:i.default.OPTIONAL_BOOL,nemailml:i.default.OPTIONAL_STRING,unemailml:i.default.OPTIONAL_BOOL,nemailr:i.default.OPTIONAL_STRING,unemailr:i.default.OPTIONAL_BOOL,mysql:i.default.OPTIONAL_STRING,umysql:i.default.OPTIONAL_BOOL,domainptr:i.default.OPTIONAL_STRING,udomainptr:i.default.OPTIONAL_BOOL,ftp:i.default.OPTIONAL_STRING,uftp:i.default.OPTIONAL_BOOL,aftp:i.default.OPTIONAL_STRING,cgi:i.default.OPTIONAL_STRING,git:i.default.OPTIONAL_STRING,php:i.default.OPTIONAL_STRING,spam:i.default.OPTIONAL_STRING,catchall:i.default.OPTIONAL_STRING,ssl:i.default.OPTIONAL_STRING,ssh:i.default.OPTIONAL_STRING,cron:i.default.OPTIONAL_STRING,sysinfo:i.default.OPTIONAL_STRING,login_keys:i.default.OPTIONAL_STRING,dnscontrol:i.default.OPTIONAL_STRING,suspend_at_limit:i.default.OPTIONAL_STRING,language:i.default.OPTIONAL_STRING,skin:i.default.OPTIONAL_STRING,packagename:i.default.OPTIONAL_STRING}});t.updatePackage=m;var g=i.default.post({url:"/CMD_MANAGE_USER_PACKAGES",before:function(e){return e.select.reduce((function(e,t,a){return f(f({},e),{},(0,r.default)({},"delete".concat(a),t))}),{delete:!0})},schema:{select:i.default.ROWS}});t.deletePackages=g;var _=i.default.post({url:"/CMD_MANAGE_USER_PACKAGES",schema:{select:i.default.ROWS},params:{export:!0}});t.exportPackages=_;var v=i.default.post({url:"/CMD_MANAGE_USER_PACKAGES",schema:{import:i.default.REQUIRED_STRING},params:{action:"import"}});t.importPackages=v;var k=i.default.post({url:"/CMD_MANAGE_USER_PACKAGES",schema:{action:i.default.REQUIRED_STRING,from:i.default.REQUIRED_STRING,to:i.default.REQUIRED_STRING},before:function(e){return{from:null,to:null,old_package:e.from,new_package:e.to}}});t.doPackageAction=k},1969:function(e,t,a){"use strict";a.r(t);var n=a(1970),o=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t.default=o.a},1970:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={data:function(){return{text:""}}}},1971:function(e,t,a){"use strict";a.r(t);var n=a(1972),o=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t.default=o.a},1972:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(34),a(12),a(15),a(49);a(1937);var n={props:{pkgListId:{type:String,required:!0}},data:function(){return{from:"",to:"",type:"rename"}},computed:{packageList:function(){var e=this.$state.commands[this.pkgListId].response;return e?e.rows.map((function(e){return e.package})):[]}},methods:{submit:function(){this.$valid("package-action")&&(this.$emit("action",{action:this.type,from:this.from,to:this.to}),this.$dialog("PACKAGE_ACTION_DIALOG").close())},validateName:function(e){return!e||!this.packageList.includes(e)},setData:function(e){Object.assign(this,e)}}};t.default=n},2025:function(e,t,a){"use strict";a.r(t),a.d(t,"getCustomItems",(function(){return r})),a.d(t,"getHomeOverride",(function(){return i})),a.d(t,"getFeatures",(function(){return l})),a.d(t,"toPackageLimit",(function(){return c})),a.d(t,"getLimits",(function(){return s})),a.d(t,"getSkin",(function(){return d})),a.d(t,"getLanguage",(function(){return f})),a.d(t,"getFeatureSets",(function(){return p}));var n=a(9),o=a(97),r=function(e){return n.values(e.custom_items||{}).map(o.customItems.fromObject)},i=function(e){return Object(o.toSelectData)(e.create_user_home_override||{})},l=function(e){var t,a,n,r,i;return{aftp:Object(o.toBoolean)(e.aftp.checked),catchall:Object(o.toBoolean)(e.catchall.checked),cgi:Object(o.toBoolean)(e.cgi.checked),cron:Object(o.toBoolean)(e.cron.checked),dnscontrol:Object(o.toBoolean)(e.dnscontrol.checked),login_keys:Object(o.toBoolean)(e.login_keys.checked),php:Object(o.toBoolean)(e.php.checked),spam:Object(o.toBoolean)(e.spam.checked),ssh:Object(o.toBoolean)(e.ssh.checked),ssl:Object(o.toBoolean)(e.ssl.checked),suspend_at_limit:Object(o.toBoolean)(e.suspend_at_limit.checked),sysinfo:Object(o.toBoolean)(e.sysinfo.checked),jail:Object(o.toBoolean)((null===(t=e.jail)||void 0===t?void 0:t.checked)||"no"),git:Object(o.toBoolean)((null===(a=e.git)||void 0===a?void 0:a.checked)||"no"),wordpress:Object(o.toBoolean)((null===(n=e.wordpress)||void 0===n?void 0:n.checked)||"no"),clamav:Object(o.toBoolean)((null===(r=e.clamav)||void 0===r?void 0:r.checked)||"no"),redis:Object(o.toBoolean)((null===(i=e.redis)||void 0===i?void 0:i.checked)||"no")}},u=n.pipe(Number,n.complement(Number.isFinite)),c=function(e){var t=e.value;return{unlimited:u(t),value:u(t)?"":t}},s=n.pipe(n.pick(["bandwidth","domainptr","ftp","inode","mysql","nemailf","nemailml","nemailr","nemails","nsubdomains","quota","vdomains"]),n.mapObjIndexed(c)),d=function(e){var t=e.skin;return Object(o.toSelectData)(t)},f=function(e){var t=e.language;return Object(o.toSelectData)(t)},p=function(e){var t=e.feature_sets;return{options:n.map(n.prop("name"),t),values:n.keys(n.filter(n.propEq("checked","yes"),t))}}},2190:function(e,t,a){"use strict";a.r(t);var n=a(2870),o=a(1969);for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);var i=a(0),l=Object(i.a)(o.default,n.a,n.b,!1,null,null,null);t.default=l.exports},2191:function(e,t,a){"use strict";a.r(t);var n=a(2871),o=a(1971);for(var r in o)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(r);var i=a(0),l=Object(i.a)(o.default,n.a,n.b,!1,null,null,null);t.default=l.exports},2333:function(e,t,a){"use strict";a.r(t);var n=a(2334),o=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(r);t.default=o.a},2334:function(e,t,a){"use strict";var n=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(1937),r=n(a(2190)),i=n(a(2191)),l={preload:o.getPackages,commands:{getPackages:o.getPackages},components:{ImportPackagesDialog:r.default,PackageActionDialog:i.default},data:function(){return{select:[]}},methods:{deleteItems:function(){(0,o.deletePackages)({select:this.select}).then(this.$reloadApiTable)},exportPackages:function(){(0,o.exportPackages)({select:this.select})},importPackages:function(e){(0,o.importPackages)({import:e}).then(this.$reloadApiTable)},rowClick:function(e){var t=e.item;this.$router.push({name:"reseller/user-packages/view",params:{p:t.package}})},openActionDialog:function(e,t){this.$dialog("PACKAGE_ACTION_DIALOG").open(),this.$refs.actionDialog.setData({type:e,from:t.package,to:""})},doPackageAction:function(e){(0,o.doPackageAction)(e).then(this.$reloadApiTable)}}};t.default=l},2870:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-dialog",{attrs:{id:"IMPORT_PACKAGES_DIALOG",size:"normal"}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        Import packages\n    ")]),e._v(" "),a("input-textarea",{staticClass:"width:100%",attrs:{slot:"content"},slot:"content",model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),e._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"primary",disabled:!e.text},on:{click:function(t){return e.$emit("import",e.text)}},slot:"buttons"},[a("translate",[e._v("Import")])],1)],1)},o=[]},2871:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-dialog",{attrs:{id:"PACKAGE_ACTION_DIALOG"}},[a("template",{slot:"title"},[e._v("\n        "+e._s("rename"===e.type?e.$gettext("Rename Package"):e.$gettext("Copy Package"))+"\n    ")]),e._v(" "),a("template",{slot:"content"},[a("ui-form-element",{attrs:{vertical:""}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Old Package Name\n            ")]),e._v(" "),a("input-text",{attrs:{slot:"content",value:e.from,disabled:""},slot:"content"})],1),e._v(" "),a("ui-form-element",{attrs:{group:"package-action",vertical:"",validators:{required:!0,validateName:e.validateName,regex:/^[a-zA-Z0-9\-\_]+$/,maxLength:20}}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                New Package Name\n            ")]),e._v(" "),a("input-text",{attrs:{slot:"content",autofocus:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit.apply(null,arguments)}},slot:"content",model:{value:e.to,callback:function(t){e.to=t},expression:"to"}}),e._v(" "),a("translate",{attrs:{slot:"error:regex"},slot:"error:regex"},[e._v("\n                Package name should not contain special characters\n            ")]),e._v(" "),a("translate",{attrs:{slot:"error:validateName"},slot:"error:validateName"},[e._v("\n                Package already exists\n            ")])],1)],1),e._v(" "),a("ui-button",{attrs:{slot:"buttons",theme:"primary","validate-group":"package-action"},on:{click:e.submit},slot:"buttons"},[a("translate",[e._v("Save")])],1)],2)},o=[]},3419:function(e,t){},3974:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-page",{attrs:{actions:[{name:"reseller/user-packages/create",label:e.$gettext("Add Package"),icon:"#plus-fill"},{label:e.$gettext("Import Packages"),handler:e.$dialog("IMPORT_PACKAGES_DIALOG").open,icon:"#extract"}]}},[a("ui-button-link",{attrs:{slot:"header:buttons",theme:"primary",name:"reseller/user-packages/create"},slot:"header:buttons"},[a("translate",[e._v("Add Package")])],1),e._v(" "),a("app-page-section",[a("ui-api-table",e._b({on:{"action:remove":function(t){e.$dialog("DELETE_ITEMS_DIALOG").open()},"action:export":e.exportPackages,"table:rowClick":e.rowClick},scopedSlots:e._u([{key:"col:package",fn:function(t){var n=t.package;return a("ui-link",{attrs:{name:"reseller/user-packages/view",params:{p:n}}},[e._v("\n                "+e._s(n)+"\n            ")])}},{key:"col:bandwidth",fn:function(t){var n=t.bandwidth;return[n===1/0?a("translate",[e._v("\n                    Unlimited\n                ")]):[e._v("\n                    "+e._s(e._f("humanReadableSize")(n))+"\n                ")]]}},{key:"col:quota",fn:function(t){var n=t.quota;return[n===1/0?a("translate",[e._v("\n                    Unlimited\n                ")]):[e._v("\n                    "+e._s(e._f("humanReadableSize")(n))+"\n                ")]]}},{key:"row:actions",fn:function(t){var n=t.item;return a("ui-actions",{},[a("ui-link",{on:{click:function(t){return e.openActionDialog("rename",n)}}},[a("translate",[e._v("Rename")])],1),e._v(" "),a("ui-link",{on:{click:function(t){return e.openActionDialog("copy",n)}}},[a("translate",[e._v("Copy")])],1)],1)}}]),model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},"ui-api-table",{command:e.$commands.getPackages,rowID:"package",columns:{package:{label:e.$gettext("Package"),grow:!0},bandwidth:e.$gettext("Bandwidth"),quota:e.$gettext("Disk Usage")},actions:{remove:e.$gettext("Delete"),export:e.$gettext("Export")},verticalLayout:e.$_Client.isPhone},!1))],1),e._v(" "),a("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("user package","user packages",e.select.length)},on:{"click:confirm":e.deleteItems}}),e._v(" "),a("import-packages-dialog",{on:{import:e.importPackages}}),e._v(" "),a("package-action-dialog",{ref:"actionDialog",attrs:{"pkg-list-id":"USER_PACKAGES"},on:{action:e.doPackageAction}}),e._v(" "),a("ui-link",{attrs:{slot:"bottom:links",bullet:""},on:{click:function(t){e.$dialog("IMPORT_PACKAGES_DIALOG").open()}},slot:"bottom:links"},[a("translate",[e._v("Import Packages")])],1)],1)},o=[]}}]);