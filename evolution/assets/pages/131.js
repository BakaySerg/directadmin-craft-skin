(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{1710:function(e,t,s){"use strict";s.r(t);var r=s(3911),n=s(2072);for(var a in n)["default"].indexOf(a)<0&&function(e){s.d(t,e,(function(){return n[e]}))}(a);s(3188);var i=s(0),o=s(3190),l=s.n(o),c=Object(i.a)(n.default,r.a,r.b,!1,null,"3d918cce",null);"function"==typeof l.a&&l()(c),t.default=c.exports},2072:function(e,t,s){"use strict";s.r(t);var r=s(2073),n=s.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){s.d(t,e,(function(){return r[e]}))}(a);t.default=n.a},2073:function(e,t,s){"use strict";s(10),s(6),s(8),s(11);var r=s(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(s(36)),a=r(s(37)),i=r(s(2));s(5),s(34),s(7),s(49);var o=s(1945),l=s(58);function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){(0,i.default)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p,d={preload:[o.getRestoreOptions,o.getEncryptionStatus],mixins:[(0,l.$bindTab)({defaultTab:"where",param:"step"})],data:function(){return{where:"local",whereData:{local_path:"",ftp_ip:"",ftp_username:"",ftp_password:"",ftp_path:"",ftp_port:"",ftp_secure:""},ip_choice:"select",ipSelectData:{ip:"",create_user_home_override:""},checkedRows:[],decrypt:!1,password:"",selectedFiles:[],reseller_override:""}},api:[{command:o.getRestoreOptions,bind:"options"},{command:o.getRestoreFiles,bind:{response:"files",isDone:"filesLoaded"}},{command:o.getEncryptionStatus,bind:"encryption"}],computed:{validWhere:function(){return"local"===this.where&&!!this.whereData.local_path||"ftp"===this.where&&!!this.whereData.ftp_ip&&!!this.whereData.ftp_username&&!!this.whereData.ftp_password&&!!this.whereData.ftp_path&&!!this.whereData.ftp_port},validFiles:function(){if(this.decrypt&&!this.password)return!1;if(this.selectedFiles.length){var e=this.files.issues,t=void 0===e?{}:e;return this.selectedFiles.every((function(e){return!t[e]}))}return!1},options:function(){return this.$api.options},files:function(){return this.$api.filesLoaded?this.$api.files:this.$api.options.filesData},encryptionEnabled:function(){return this.$api.encryption.enabled},issues:function(){return this.files.list.filter((function(e){return e.issues}))},checkedFiles:function(){return this.checkedRows.map((function(e){return e.file}))},requestData:function(){return u(u(u({where:this.where},this.whereData),{},{ip_choice:this.ip_choice},this.ipSelectData),{},{select:this.selectedFiles,encryption_password:this.password,ftp_secure:this.whereData.ftp_secure?"ftps":"no",reseller_override:this.reseller_override||null})},filesList:function(){return this.files.list.map((function(e){return e.file}))},disabledFiles:function(){return this.files.list.filter((function(e){return e.disabled})).map((function(e){return e.file}))},resellerOverrideOptions:function(){return Object.keys(this.$api.options.data_list||{})}},watch:{step:function(e,t){"where"===t&&this.reloadFiles()}},created:function(){this.where=this.options.where,Object.assign(this.whereData,this.options.whereData),this.ipSelectData.ip=this.options.ips.value,this.$api.options.filesData.home_override&&(this.ipSelectData.create_user_home_override=this.$api.options.filesData.home_override.value)},methods:{reloadFiles:function(){(0,o.getRestoreFiles)(u({where:this.where},this.whereData))},restoreBackup:(p=(0,a.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.restoreBackup)(this.requestData);case 2:e.sent&&this.$router.push({name:"admin/backups"});case 4:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})}};t.default=d},2882:function(e,t,s){var r=s(3189);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,s(4).default)("76cba53a",r,!0,{})},3188:function(e,t,s){"use strict";s(2882)},3189:function(e,t,s){},3190:function(e,t){},3911:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return n}));var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("app-page",{attrs:{id:"restore-admin-backup"}},[s("app-page-section",[s("ui-steps",{attrs:{steps:[{id:"where",label:e.$gettext("Step 1: From Where"),desc:e.$gettext("Select directory for restore."),completed:e.validWhere},{id:"ip_select",label:e.$gettext("Step 2: Select IP"),desc:e.$gettext("Select IP address used for restore.")},{id:"files",label:e.$gettext("Step 3: Select File(s)"),desc:e.$gettext("Select backup files to restore."),completed:e.validFiles}],current:e.step},on:{"update:current":function(t){e.step=t}}},["where"===e.step?s("ui-button",{key:"reloadFiles",attrs:{slot:"buttons",theme:"primary"},on:{click:e.reloadFiles},slot:"buttons"},[s("translate",[e._v("Reload Files")])],1):e._e(),e._v(" "),"files"===e.step?s("ui-button",{key:"restoreBackup",attrs:{slot:"buttons",theme:"safe",disabled:!(e.validFiles&&e.validWhere)},on:{click:e.restoreBackup},slot:"buttons"},[s("translate",[e._v("Restore")])],1):e._e(),e._v(" "),s("div",{key:"where",attrs:{slot:"step:where"},slot:"step:where"},[s("ui-form-element",{attrs:{"vertical-on-phone":!1,reverse:e.$_Client.isPhone}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                        Local\n                    ")]),e._v(" "),s("input-radio",{attrs:{slot:"content",value:"local"},slot:"content",model:{value:e.where,callback:function(t){e.where=t},expression:"where"}})],1),e._v(" "),s("transition",{attrs:{name:"fade"}},["local"===e.where?s("ui-form-element",{attrs:{group:"restoreBackupWhere",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                            Path\n                        ")]),e._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.whereData.local_path,callback:function(t){e.$set(e.whereData,"local_path",t)},expression:"whereData.local_path"}})],1):e._e()],1),e._v(" "),s("ui-form-element",{attrs:{underline:"ftp"===e.where,"vertical-on-phone":!1,reverse:e.$_Client.isPhone}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                        FTP\n                    ")]),e._v(" "),s("input-radio",{attrs:{slot:"content",value:"ftp"},slot:"content",model:{value:e.where,callback:function(t){e.where=t},expression:"where"}})],1),e._v(" "),s("transition",{attrs:{name:"fade"}},["ftp"===e.where?s("ui-form-element",{attrs:{underline:!1}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                            FTP Settings\n                        ")]),e._v(" "),s("div",{attrs:{slot:"content"},slot:"content"},[s("ui-form-element",{attrs:{group:"restoreBackupWhere",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                                    IP\n                                ")]),e._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.whereData.ftp_ip,callback:function(t){e.$set(e.whereData,"ftp_ip",t)},expression:"whereData.ftp_ip"}})],1),e._v(" "),s("ui-form-element",{attrs:{group:"restoreBackupWhere",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                                    Username\n                                ")]),e._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.whereData.ftp_username,callback:function(t){e.$set(e.whereData,"ftp_username",t)},expression:"whereData.ftp_username"}})],1),e._v(" "),s("ui-form-element",{attrs:{group:"restoreBackupWhere",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                                    Password\n                                ")]),e._v(" "),s("input-password",{attrs:{slot:"content"},slot:"content",model:{value:e.whereData.ftp_password,callback:function(t){e.$set(e.whereData,"ftp_password",t)},expression:"whereData.ftp_password"}})],1),e._v(" "),s("ui-form-element",{attrs:{group:"restoreBackupWhere",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                                    Remote Path\n                                ")]),e._v(" "),s("input-text",{attrs:{slot:"content"},slot:"content",model:{value:e.whereData.ftp_path,callback:function(t){e.$set(e.whereData,"ftp_path",t)},expression:"whereData.ftp_path"}})],1),e._v(" "),s("ui-form-element",{attrs:{group:"restoreBackupWhere",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                                    Port\n                                ")]),e._v(" "),s("input-text",{attrs:{slot:"content",number:""},slot:"content",model:{value:e.whereData.ftp_port,callback:function(t){e.$set(e.whereData,"ftp_port",t)},expression:"whereData.ftp_port"}})],1),e._v(" "),s("ui-form-element",{attrs:{"vertical-on-phone":!1,reverse:e.$_Client.isPhone}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                                    Secure FTP\n                                ")]),e._v(" "),s("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.whereData.ftp_secure,callback:function(t){e.$set(e.whereData,"ftp_secure",t)},expression:"whereData.ftp_secure"}})],1)],1)],1):e._e()],1)],1),e._v(" "),s("div",{key:"ip_select",attrs:{slot:"step:ip_select"},slot:"step:ip_select"},[s("ui-form-element",{attrs:{underline:"select"===e.ip_choice}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                        Use the IP\n                    ")]),e._v(" "),s("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:e.$_Client.isPhone?"column":"row"},expression:"{\n                            dir: $_Client.isPhone\n                                ? 'column'\n                                : 'row'\n                        }"},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}],attrs:{slot:"content"},slot:"content"},[s("input-radio",{attrs:{slot:"content",value:"file"},slot:"content",model:{value:e.ip_choice,callback:function(t){e.ip_choice=t},expression:"ip_choice"}},[s("translate",[e._v("stored in the backup")])],1),e._v(" "),s("input-radio",{attrs:{slot:"content",value:"select"},slot:"content",model:{value:e.ip_choice,callback:function(t){e.ip_choice=t},expression:"ip_choice"}},[s("translate",[e._v("from the list")])],1)],1)],1),e._v(" "),s("transition",{attrs:{name:"fade"}},["select"===e.ip_choice?s("ui-form-element",{attrs:{underline:!1}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                            IP\n                        ")]),e._v(" "),s("input-select",{attrs:{slot:"content",options:e.options.ips.options},slot:"content",model:{value:e.ipSelectData.ip,callback:function(t){e.$set(e.ipSelectData,"ip",t)},expression:"ipSelectData.ip"}})],1):e._e()],1),e._v(" "),s("transition",{attrs:{name:"fade"}},[e.$api.options.filesData.home_override?s("ui-form-element",[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                            Restore to partition\n                        ")]),e._v(" "),s("input-select",{attrs:{slot:"content",options:e.$api.options.filesData.home_override.options},slot:"content",model:{value:e.ipSelectData.create_user_home_override,callback:function(t){e.$set(e.ipSelectData,"create_user_home_override",t)},expression:"ipSelectData.create_user_home_override"}})],1):e._e()],1),e._v(" "),s("ul",[s("li",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n                        Note that you must set the IP to be shared if you want to add multiple users to it. If you select a non-shared IP, you can only restore 1 user to it.\n                    ")]),e._v(" "),s("li",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n                        If the user already exists, this setting will have no effect.\n                    ")]),e._v(" "),s("li",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n                        When restoring a Reseller or Admin, if you select an IP from the list, that Reseller will only receive the single IP.\n                        You would need to add extra IPs to that accounts IP list after he's created.\n                    ")]),e._v(" "),s("li",{directives:[{name:"translate",rawName:"v-translate"}]},[e._v("\n                        If using the IPs from within the backup, any IPs that don't exist on this system will not be included. If there no IPs to be used, a Reseller or Admin will be restored to the server IP.\n                    ")])])],1),e._v(" "),s("div",{key:"files",attrs:{slot:"step:files"},slot:"step:files"},[s("ui-form-element",[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                        Location\n                    ")]),e._v(" "),s("input-text",{attrs:{slot:"content",disabled:"",value:e.files.location},slot:"content"})],1),e._v(" "),s("ui-form-element",{attrs:{underline:e.encryptionEnabled}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                        Files\n                    ")]),e._v(" "),s("input-select-multiple",{staticClass:"width:100%",attrs:{slot:"content",options:e.filesList,"disabled-entries":e.disabledFiles},slot:"content",model:{value:e.selectedFiles,callback:function(t){e.selectedFiles=t},expression:"selectedFiles"}},e._l(e.issues,(function(t){return s("ui-tooltip",{key:t.file,attrs:{slot:"option:"+t.file,theme:"danger"},slot:"option:"+t.file},[s("span",{staticClass:"c:txt:danger",attrs:{slot:"trigger"},slot:"trigger"},[e._v("\n                                "+e._s(t.file)+"\n                            ")]),e._v(" "),e._l(t.issues,(function(t){return s("li",{key:t,attrs:{theme:"danger"},domProps:{innerHTML:e._s(t)}})}))],2)})),1)],1),e._v(" "),s("ui-form-element",[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                        Assign to Reseller\n                    ")]),e._v(" "),s("input-select",{attrs:{slot:"content",options:e.resellerOverrideOptions},slot:"content",model:{value:e.reseller_override,callback:function(t){e.reseller_override=t},expression:"reseller_override"}})],1),e._v(" "),e.encryptionEnabled?[s("ui-form-element",{attrs:{underline:e.decrypt,"vertical-on-phone":!1,reverse:e.$_Client.isPhone}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                            Backup Decryption\n                        ")]),e._v(" "),s("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.decrypt,callback:function(t){e.decrypt=t},expression:"decrypt"}})],1),e._v(" "),s("transition",{attrs:{name:"fadeBounce"}},[e.decrypt?s("ui-form-element",{attrs:{underline:!1,group:"scheduleBackup",validators:{required:!0}}},[s("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                                Password\n                            ")]),e._v(" "),s("input-password",{attrs:{slot:"content"},slot:"content",model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1):e._e()],1)]:e._e()],2)],1)],1)],1)},n=[]}}]);