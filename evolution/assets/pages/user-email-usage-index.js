(self.webpackChunkcraft=self.webpackChunkcraft||[]).push([[8303],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/email/usage/_components/id-info-dialog.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s={api:[{command:o("./src/js/api/commands/user/email/usage.js").getIdInfo,bind:"info"}]};t.Z=s},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/email/usage/index.vue?vue&type=script&lang=js&":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.keys.js"),o("./node_modules/core-js/modules/es.symbol.js"),o("./node_modules/core-js/modules/es.array.filter.js"),o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),o("./node_modules/core-js/modules/web.dom-collections.for-each.js"),o("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),o("./node_modules/core-js/modules/es.object.define-properties.js"),o("./node_modules/core-js/modules/es.object.define-property.js");var s=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var n=s(o("./node_modules/@babel/runtime/regenerator/index.js")),r=s(o("./node_modules/@babel/runtime/helpers/asyncToGenerator.js")),a=s(o("./node_modules/@babel/runtime/helpers/defineProperty.js")),i=o("./src/js/api/commands/user/email/usage.js");function l(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,s)}return o}function c(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?l(Object(o),!0).forEach((function(t){(0,a.default)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var u,d={components:{IdInfoDialog:s(o("./src/js/pages/user/email/usage/_components/id-info-dialog.vue")).default},preload:[function(e){var t=e.direction,o=void 0===t?"outgoing":t;return(0,i.getUsage)({direction:o})},i.getBlockCracking],api:[{command:i.getUsage,bind:{"response.highest":"highest"}},{command:i.getBlockCracking,bind:{"response.options.enabled":"blockCracking"}}],props:{direction:{type:String,required:!1,default:"outgoing"}},commands:{getUsage:i.getUsage},data:function(){return{showFrom:"both"}},computed:{totalUsage:function(){return[c({label:this.$gettext("Sender"),tooltip:this.$gettext('The "From" value set in the email header. This value should not be considered as accurate, as a sender can specify any value they wish.')},this.$api.highest.sender),c({label:this.$gettext("Authentication"),tooltip:this.$gettext("If SMTP authentication is used, this will show the login name used. Scripts will show the owner of the script. Can be considered accurate.")},this.$api.highest.authenticated_id),c({label:this.$gettext("Sender Host"),tooltip:this.$gettext("If this is set, it will show the IP that connect to the server. If no IP is set, then the email was sent vie a local script.")},this.$api.highest.sender_host_address),c({label:this.$gettext("Path"),tooltip:this.$gettext('If the email was generated from a script, the path value will show the working directory the script was in. An email in the spool will have a path value of "retry" for each attempt.')},this.$api.highest.php_script)]}},methods:{toggleDirection:function(e){this.$router.push({name:"user/email/usage",params:{direction:e}})},showIdInfo:(u=(0,r.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.getIdInfo)({id:t});case 2:this.$dialog("ID_INFO_DIALOG").open();case 3:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})}};t.Z=d},"./src/js/api/commands/user/email/usage.js":function(e,t,o){"use strict";o("./node_modules/core-js/modules/es.object.define-property.js");var s=o("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(t,"__esModule",{value:!0}),t.unblockBlockcrackerPaths=t.loadSmtpLog=t.getUsage=t.getSendingScripts=t.getIdInfo=t.getBlockCracking=void 0,o("./node_modules/core-js/modules/es.object.to-string.js"),o("./node_modules/core-js/modules/es.promise.js"),o("./node_modules/core-js/modules/es.regexp.exec.js"),o("./node_modules/core-js/modules/es.string.split.js");var n=s(o("./src/js/api/command/index.js")),r=n.default.get({id:"BLOCK_CRACKING",url:"/CMD_EMAIL_USAGE",params:{main_info:!1,sending_php_scripts:!1,block_cracking_paths:!0},domain:!0,pagination:!0,after:function(e){return e.flow((function(e){return e.block_cracking_paths?e:{block_cracking_paths:"no",block_cracking_paths_table:{info:{ipp:"10",total_pages:"1",current_page:"1",rows:"0"}}}}),e.moveProp({block_cracking_paths:"options.enabled",block_cracking_paths_table:"rows"}),e.processTableInfo("rows"),e.mapProps({options:e.mapProps({enabled:e.convert.toAppBoolean}),rows:e.flow(e.toArray,e.mapArray(e.flow(e.moveProp({date_blocked:"date",blocked_path:"path"}),e.mapProps({date:e.convert.toAppDate}))))}))}});t.getBlockCracking=r;var a=n.default.get({id:"SENDING_SCRIPTS",url:"/CMD_EMAIL_USAGE",params:{main_info:!1,sending_php_scripts:!0,block_cracking_paths:!1,which:"both"},domain:!0,pagination:!0,after:function(e){return e.flow(e.moveProp({sending_php_scripts:"rows"}),e.processTableInfo("rows"),e.mapProp("rows",e.flow(e.toArray,e.mapArray(e.flow(e.moveProp({script_name:"script",mail_line_number:"line",send_count:"send"}),e.mapProps({send:e.convert.toAppNumber,line:e.flow(e.convert.toAppString,e.convert.toAppNumber)}))))))}});t.getSendingScripts=a;var i=n.default.get({id:"EMAIL_USAGE",url:"/CMD_EMAIL_USAGE",params:{main_info:!0,sending_php_scripts:!1,block_cracking_paths:!1,which:"both"},schema:{direction:n.default.OPTIONAL_STRING},domain:!0,pagination:!0,after:function(e){return e.flow(e.project({rows:"deliveries",highest:"highest"}),e.processTableInfo("rows"),e.mapProp("rows",e.mapArrayProps({time:e.convert.toAppDate,size:e.convert.toAppNumber})))}});t.getUsage=i;var l=n.default.select({url:"/CMD_EMAIL_USAGE",params:{unblock:!0,action:"unblock"},domain:!0});t.unblockBlockcrackerPaths=l;var c=n.default.get({id:"SMTP_LOG",url:"/CMD_EMAIL_USAGE",params:{action:"smtp_log"},schema:{user:n.default.REQUIRED_STRING,method:n.default.REQUIRED_STRING},domain:!0,accept:"text/plain",response:[],after:function(){return function(e){return e.split("\n")}}});t.loadSmtpLog=c;var u=n.default.get({id:"EMAIL_USAGE_ID_INFO",url:"/CMD_EMAIL_USAGE",params:{action:"id_info"},schema:{id:n.default.REQUIRED_STRING},domain:!0,accept:"text/plain",response:[],after:function(){return function(e){return e.split("\n")}}});t.getIdInfo=u},"./src/js/pages/user/email/usage/_components/id-info-dialog.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return s.X},default:function(){return r}});var s=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/email/usage/_components/id-info-dialog.vue?vue&type=script&lang=js&"),n=s.Z,r=(0,o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").Z)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ui-dialog",{attrs:{id:"ID_INFO_DIALOG","no-close-btn":"",size:"normal"}},[o("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n        ID Info\n    ")]),e._v(" "),o("ui-pre",{attrs:{slot:"content","content-lines":e.$api.info},slot:"content"})],1)}),[],!1,null,null,null).exports},"./src/js/pages/user/email/usage/index.vue":function(e,t,o){"use strict";o.r(t),o.d(t,{__esModule:function(){return s.X},default:function(){return c}});var s=o("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/js/pages/user/email/usage/index.vue?vue&type=script&lang=js&"),n=s.Z,r=o("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),a=o("./src/js/pages/user/email/usage/index.vue?vue&type=custom&index=0&blockType=route"),i=o.n(a),l=(0,r.Z)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("app-page",[o("app-page-section",[o("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:e.$_Client.isPhone?"column":"row",cross:e.$_Client.isPhone?"start":"center"},expression:"{\n                dir: $_Client.isPhone ? 'column' : 'row',\n                cross: $_Client.isPhone ? 'start' : 'center',\n            }"},{name:"gutter",rawName:"v-gutter",value:[1,1],expression:"[1, 1]"}]},[o("translate",{staticClass:"txt:bold",style:{minWidth:"11rem"}},[e._v("\n                Show Usage From:\n            ")]),e._v(" "),o("input-radio",{attrs:{value:"today"},model:{value:e.showFrom,callback:function(t){e.showFrom=t},expression:"showFrom"}},[o("translate",[e._v("Today")])],1),e._v(" "),o("input-radio",{attrs:{value:"past"},model:{value:e.showFrom,callback:function(t){e.showFrom=t},expression:"showFrom"}},[o("translate",[e._v("This Month (excluding today)")])],1),e._v(" "),o("input-radio",{attrs:{value:"both"},model:{value:e.showFrom,callback:function(t){e.showFrom=t},expression:"showFrom"}},[o("translate",[e._v("This Month")])],1)],1),e._v(" "),o("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:e.$_Client.isPhone?"column":"row",cross:e.$_Client.isPhone?"start":"center"},expression:"{\n                dir: $_Client.isPhone ? 'column' : 'row',\n                cross: $_Client.isPhone ? 'start' : 'center',\n            }"},{name:"gutter",rawName:"v-gutter",value:[null,1],expression:"[null, 1]"}]},[o("translate",{directives:[{name:"margin",rawName:"v-margin",value:[1,0,0,0],expression:"[1, 0, 0, 0]"}],staticClass:"txt:bold",style:{minWidth:"11rem"}},[e._v("\n                Direction:\n            ")]),e._v(" "),o("input-radio",{attrs:{value:"outgoing",model:e.direction},on:{change:e.toggleDirection}},[o("translate",[e._v("Outgoing")])],1),e._v(" "),o("input-radio",{attrs:{value:"incoming",model:e.direction},on:{change:e.toggleDirection}},[o("translate",[e._v("Incoming")])],1)],1)]),e._v(" "),"outgoing"===e.direction?o("app-page-section",[o("ui-r-table",{attrs:{"is-checkable":!1,rows:e.totalUsage,"disable-pagination":"","is-sortable":!1,editable:!1,columns:[{id:"label",label:e.$gettext("Highest")},{id:"value",label:e.$gettext("Value")},{id:"count",label:e.$gettext("Count")},{id:"percent",label:e.$gettext("Percent")}],"vertical-layout":e.$_Client.isPhone},scopedSlots:e._u([{key:"col:label",fn:function(t){var s=t.label,n=t.tooltip;return o("ui-tooltip",{attrs:{theme:"safe"}},[o("span",{staticClass:"txt:bold cursor:pointer",attrs:{slot:"trigger"},slot:"trigger"},[e._v("\n                    "+e._s(s)+"\n                    "),o("ui-icon",{attrs:{id:"question",theme:"safe",size:"medium"}})],1),e._v("\n                "+e._s(n)+"\n            ")])}}],null,!1,3406668854)},[e._v(" "),o("translate",{attrs:{slot:"table:after"},slot:"table:after"},[e._v("\n                Note: For older exim.pl files before version 13, each delivery attempt is counted, including retries.\n            ")])],1)],1):e._e(),e._v(" "),o("app-page-section",[o("ui-api-table",e._b({ref:"table",attrs:{"disable-select":"","vertical-layout":e.$_Client.isPhone},scopedSlots:e._u([{key:"col:id",fn:function(t){var s=t.id;return o("ui-link",{on:{click:function(t){return e.showIdInfo(s)}}},[e._v("\n                "+e._s(s)+"\n            ")])}}])},"ui-api-table",{command:e.$commands.getUsage,columns:{time:{label:e.$gettext("Time"),filter:"date"},sender:{label:e.$gettext("Sender"),searchable:!0},authenticated_id:{label:e.$gettext("Authentication"),searchable:!0},sender_host_address:{label:e.$gettext("Sender Host"),searchable:!0},size:{label:e.$gettext("Size"),filter:"humanReadableSize"},destination:{label:e.$gettext("Destination"),searchable:!0},path:{label:e.$gettext("Path"),searchable:!0},id:e.$gettext("ID")},requestData:{direction:e.direction,which:e.showFrom}},!1))],1),e._v(" "),o("template",{slot:"bottom:links"},[e.$api.blockCracking?o("ui-link",{attrs:{name:"user/email/usage/blockcracking",bullet:""}},[o("translate",[e._v("BlockCracking Blocked Paths")])],1):e._e(),e._v(" "),o("ui-link",{attrs:{name:"user/email/usage/php-scripts",bullet:""}},[o("translate",[e._v("PHP Scripts")])],1)],1),e._v(" "),o("id-info-dialog")],2)}),[],!1,null,null,null);"function"==typeof i()&&i()(l);var c=l.exports},"./src/js/pages/user/email/usage/index.vue?vue&type=custom&index=0&blockType=route":function(){}}]);